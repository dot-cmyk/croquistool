(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(e,t,n){e.exports=n(70)},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),i=n(43),o=n.n(i),s=n(12),c=n(27),l=(n(57),n(72),n(71),c.a.initializeApp({apiKey:"AIzaSyDH6rySddl7QAoqkwATwz7CgXrPe7LQis8",authDomain:"croquistool.firebaseapp.com",projectId:"croquistool",storageBucket:"croquistool.appspot.com",messagingSenderId:"843301254465",appId:"1:843301254465:web:046d03ff7cf7e8619f9dc0",measurementId:"G-JT9C23VQFT"})),u=c.a.auth(),d=c.a.firestore(),h=(c.a.storage(),n(17)),f=n(28),m=n(18),p=n(0),v=n.n(p),g=n(2),b=n(14),w=n(1),y=n(3),O=n(11),E=n(7),S=n(10),x=n(15),j=n(44),D=n(45),C=n(46),P=Object.freeze({x:0,y:0,untransformedX:0,untransformedY:0}),R=Object.freeze({canvasWidth:0,canvasHeight:0,left:0,top:0,right:0,bottom:0,viewMin:P,viewMax:P}),M=Object.freeze({a:1,b:0,c:0,d:1,e:0,f:0});var T=function(){function e(t){var n=this,a=t.scaleExtents,r=t.documentSize;Object(w.a)(this,e),this._canvas=null,this._view={scale:1,x:0,y:0},this._viewChangeListeners=new Set,this.setScale=function(e){n.setView({scale:e})},this.clampView=function(e){var t=e.scale,a=e.x,r=e.y,i=n.scaleExtents,o=i.min,s=i.max,c=n.documentSize,l=c.width,u=c.height,d=n.canvasRect||R,h=d.left,f=d.top,m=d.right-h,p=d.bottom-f,v=m/2,g=-(l*n._view.scale-m/2),b=p/2,w=-(u*n._view.scale-p/2);return{scale:Math.min(Math.max(t,o),s),x:Math.min(Math.max(a,g),v),y:Math.min(Math.max(r,w),b)}},this.resetView=function(){n.setView({scale:1,x:0,y:0})},this.setView=function(e){var t=n.clampView(Object(m.a)({},n._view,e||{})),a=n._view,r=a.scale,i=a.x,o=a.y;return t.scale===r&&t.x===i&&t.y===o||(n._view=t,n._viewChangeListeners.forEach(function(e){return e&&e(t)})),Object(m.a)({},n._view)},this.scaleAtClientPoint=function(e,t){var a=n.clientPointToViewPoint(t),r=n.clampView(Object(m.a)({},n._view,{scale:n._view.scale+e})),i=n.viewPointToClientPoint(a,r);return r.x=n._view.x-(i.clientX-t.clientX),r.y=n._view.y-(i.clientY-t.clientY),n.setView(r)},this.clientPointToViewPoint=function(e){var t=e.clientX,a=e.clientY,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n._view,i=n.canvasRect||R,o=t-i.left,s=a-i.top;return{x:(o-r.x)/r.scale,y:(s-r.y)/r.scale,relativeClientX:o,relativeClientY:s}},this.viewPointToClientPoint=function(e){var t=e.x,a=e.y,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n._view,i=n.canvasRect||R,o=i.left,s=i.top,c=t*r.scale+r.x,l=a*r.scale+r.y,u=c+o,d=l+s;return{clientX:u,clientY:d,relativeX:c,relativeY:l,x:u,y:d}},this.attachViewChangeListener=function(e){n._viewChangeListeners.add(e)},this._scaleExtents=a,this._documentSize=r}return Object(y.a)(e,[{key:"canvas",get:function(){return this._canvas},set:function(e){this._canvas=e,this.setView()}},{key:"scale",get:function(){return this._view.scale}},{key:"x",get:function(){return this._view.x},set:function(e){this.setView({x:e})}},{key:"y",get:function(){return this._view.y},set:function(e){this.setView({y:e})}},{key:"view",get:function(){return Object(m.a)({},this._view)}},{key:"scaleExtents",get:function(){return Object(m.a)({},this._scaleExtents)},set:function(e){var t=e.min,n=e.max;this._scaleExtents={min:t,max:n},this.setView()}},{key:"documentSize",get:function(){return Object(m.a)({},this._documentSize)},set:function(e){var t=e.width,n=e.height;this._documentSize={width:t,height:n},this.setView()}},{key:"transformMatrix",get:function(){return{a:this._view.scale,b:0,c:0,d:this._view.scale,e:this._view.x,f:this._view.y}}},{key:"canvasBounds",get:function(){if(this._canvas){var e=this._canvas.getBoundingClientRect(),t=e.left,n=e.top,a=e.right,r=e.bottom;return{viewMin:this.clientPointToViewPoint({clientX:t,clientY:n}),viewMax:this.clientPointToViewPoint({clientX:a,clientY:r}),left:t,top:n,right:a,bottom:r,canvasWidth:this._canvas.width,canvasHeight:this._canvas.height}}}},{key:"canvasRect",get:function(){return this.canvas?this.canvas.getBoundingClientRect():void 0}}]),e}();var z=function(e){e.preventDefault()},L=function e(){var t=this;Object(w.a)(this,e),this.handleMouseWheel=function(e,n){var a=n.props,r=a.disabled,i=a.enablePanAndZoom,o=a.mouseZoomFactor;return r?new k:(i&&e.ctrlKey&&(e.preventDefault(),n.coordSystem.scaleAtClientPoint(o*e.deltaY,B(e))),t)},this.handleDrawStart=function(e,t){return t.props.disabled?new k:e.ctrlKey&&t.props.enablePanAndZoom?(new I).handleDrawStart(e,t):(new _).handleDrawStart(e,t)},this.handleDrawMove=function(e,n){if(n.props.disabled)return new k;var a=F(n.coordSystem,e),r=a.x,i=a.y;return n.lazy.update({x:r,y:i}),t},this.handleDrawEnd=function(e,n){return n.props.disabled?new k:t}},k=function e(){var t=this;Object(w.a)(this,e),this.handleMouseWheel=function(e,n){return n.props.disabled?t:(new L).handleMouseWheel(e,n)},this.handleDrawStart=function(e,n){return n.props.disabled?t:(new L).handleDrawStart(e,n)},this.handleDrawMove=function(e,n){return n.props.disabled?t:(new L).handleDrawMove(e,n)},this.handleDrawEnd=function(e,n){return n.props.disabled?t:(new L).handleDrawEnd(e,n)}},I=function e(){var t=this;Object(w.a)(this,e),this.handleMouseWheel=z.bind(this),this.handleDrawStart=function(e,n){return e.preventDefault(),t.dragStart=B(e),t.panStart={x:n.coordSystem.x,y:n.coordSystem.y},t},this.handleDrawMove=function(e,n){e.preventDefault();var a=B(e),r=a.clientX,i=a.clientY,o=r-t.dragStart.clientX,s=i-t.dragStart.clientY;return n.coordSystem.setView({x:t.panStart.x+o,y:t.panStart.y+s}),t},this.handleDrawEnd=function(){return new L}},_=function e(){var t=this;Object(w.a)(this,e),this.handleMouseWheel=z.bind(this),this.handleDrawStart=function(e,n){var a=n.props.enablePanAndZoom;return e.preventDefault(),e.touches&&e.touches.length&&a?a&&e.touches&&e.touches.length>=2?(new W).handleDrawStart(e,n):t.handleDrawMove(e,n):(new X).handleDrawStart(e,n)},this.handleDrawMove=function(e,n){if(e.preventDefault(),e.touches&&e.touches.length>=2)return(new W).handleDrawStart(e,n);var a=B(e);if((t.deferredPoints.push(a),(new Date).valueOf()-t.startTimestamp<250)&&(null===t.startClientPoint&&(t.startClientPoint=a),Math.abs(a.clientX-t.startClientPoint.clientX)+Math.abs(a.clientY-t.startClientPoint.clientY)<10))return t;return t.issueDeferredPoints(n)},this.handleDrawEnd=function(e,n){return t.issueDeferredPoints(n).handleDrawEnd(e,n)},this.issueDeferredPoints=function(e){for(var n=new X,a=0;a<t.deferredPoints.length;a++){var r=t.deferredPoints[a],i=new A(r);n=(0===a?n.handleDrawStart:n.handleDrawMove)(i,e)}return n},this.startClientPoint=null,this.startTimestamp=(new Date).valueOf(),this.deferredPoints=[]},W=function e(){var t=this;Object(w.a)(this,e),this.handleMouseWheel=z.bind(this),this.handleDrawStart=function(e,n){return e.preventDefault(),!e.touches||e.touches.length<2?new L:(t.start=t.getTouchMetrics(e),t.panStart={x:n.coordSystem.x,y:n.coordSystem.y},t.scaleStart=n.coordSystem.scale,t)},this.handleDrawMove=function(e,n){if(e.preventDefault(),!e.touches||e.touches.length<2)return new L;var a=t.recentMetrics=t.getTouchMetrics(e),r=a.centroid,i=a.distance;if(Math.abs(i-t.start.distance)>=10)return new Y(t).handleDrawMove(e,n);var o=r.clientX-t.start.centroid.clientX,s=r.clientY-t.start.centroid.clientY;return Math.abs(o)+Math.abs(s)>=10?new V(t).handleDrawMove(e,n):t},this.handleDrawEnd=function(){return new L},this.getTouchMetrics=function(e){var t=B(e.touches[0]),n=t.clientX,a=t.clientY,r=B(e.touches[1]),i=r.clientX,o=r.clientY,s=i-n,c=o-a;return{t1:{clientX:n,clientY:a},t2:{clientX:i,clientY:o},distance:Math.sqrt(s*s+c*c),centroid:{clientX:(n+i)/2,clientY:(a+o)/2}}}},V=function e(t){var n=this;Object(w.a)(this,e),this.handleMouseWheel=z.bind(this),this.handleDrawStart=function(){return n},this.handleDrawMove=function(e,t){if(e.preventDefault(),!e.touches||e.touches.length<2)return new L;var a=n.scaleOrPanState,r=a.recentMetrics=a.getTouchMetrics(e),i=r.centroid,o=(r.distance,i.clientX-a.start.centroid.clientX),s=i.clientY-a.start.centroid.clientY;return t.setView({x:a.panStart.x+o,y:a.panStart.y+s}),n},this.handleDrawEnd=function(){return new L},this.scaleOrPanState=t},Y=function e(t){var n=this;Object(w.a)(this,e),this.handleMouseWheel=z.bind(this),this.handleDrawStart=function(){return n},this.handleDrawMove=function(e,t){if(e.preventDefault(),!e.touches||e.touches.length<2)return new L;var a=n.scaleOrPanState,r=a.recentMetrics=a.getTouchMetrics(e),i=r.centroid,o=r.distance,s=a.scaleStart*(o/a.start.distance)-t.coordSystem.scale;return t.coordSystem.scaleAtClientPoint(s,i),n},this.handleDrawEnd=function(){return new L},this.scaleOrPanState=t},X=function e(){var t=this;Object(w.a)(this,e),this.handleMouseWheel=z.bind(this),this.handleDrawStart=function(e,n){if(e.preventDefault(),e.touches&&e.touches.length){var a=F(n.coordSystem,e),r=a.x,i=a.y;n.lazy.update({x:r,y:i},{both:!0})}return t.handleDrawMove(e,n)},this.handleDrawMove=function(e,n){e.preventDefault();var a=F(n.coordSystem,e),r=a.x,i=a.y;n.lazy.update({x:r,y:i});var o=!n.lazy.isEnabled();return t.isDrawing&&!o||(n.points.push(n.clampPointToDocument(n.lazy.brush.toObject())),t.isDrawing=!0),n.points.push(n.clampPointToDocument(n.lazy.brush.toObject())),n.drawPoints({points:n.points,brushColor:n.props.brushColor,brushRadius:n.props.brushRadius}),t},this.handleDrawEnd=function(e,n){return e.preventDefault(),t.handleDrawMove(e,n),n.saveLine(),new L},this.isDrawing=!1},A=function e(t){var n=t.clientX,a=t.clientY;Object(w.a)(this,e),this.preventDefault=function(){},this.clientX=n,this.clientY=a,this.touches=[{clientX:n,clientY:a}]};function B(e){var t=e.clientX,n=e.clientY;return e.changedTouches&&e.changedTouches.length>0&&(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY),{clientX:t,clientY:n}}function F(e,t){return e.clientPointToViewPoint(B(t))}var H=!1;try{var U={get passive(){return H=!0,!1}};window.addEventListener("test",U,U),window.removeEventListener("test",U,U)}catch(oe){H=!1}function q(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function J(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}var N={display:"block",position:"absolute"},Z=["grid","drawing","temp","interface"],Q=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).undo=function(){var e=[];n.lines.length?e=n.lines.slice(0,-1):n.erasedLines.length&&(e=n.erasedLines.pop()),n.clearExceptErasedLines(),n.simulateDrawingLines({lines:e,immediate:!0}),n.triggerOnChange()},n.eraseAll=function(){n.erasedLines.push(Object(b.a)(n.lines)),n.clearExceptErasedLines(),n.triggerOnChange()},n.clear=function(){n.erasedLines=[],n.clearExceptErasedLines(),n.resetView()},n.resetView=function(){return n.coordSystem.resetView()},n.setView=function(e){return n.coordSystem.setView(e)},n.getSaveData=function(){return JSON.stringify({lines:n.lines,width:n.props.canvasWidth,height:n.props.canvasHeight})},n.getDataURL=function(e,t,a){var r=n.canvas.drawing,i=r.getContext("2d"),o=r.width,s=r.height,c=i.getImageData(0,0,o,s),l=i.globalCompositeOperation;if(i.globalCompositeOperation="destination-over",t){if(!n.props.imgSrc)return"Background image source not set";n.drawImage()}else null!=a&&(i.fillStyle=a,i.fillRect(0,0,o,s));e||(e="png");var u=r.toDataURL("image/".concat(e));return i.clearRect(0,0,o,s),i.putImageData(c,0,0),i.globalCompositeOperation=l,u},n.loadSaveData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props.immediateLoading;if("string"!==typeof e)throw new Error("saveData needs to be of type string!");var a=JSON.parse(e),r=a.lines,i=a.width,o=a.height;if(!r||"function"!==typeof r.push)throw new Error("saveData.lines needs to be an array!");if(n.clear(),i===n.props.canvasWidth&&o===n.props.canvasHeight)n.simulateDrawingLines({lines:r,immediate:t});else{var s=n.props.canvasWidth/i,c=n.props.canvasHeight/o,l=(s+c)/2;n.simulateDrawingLines({lines:r.map(function(e){return Object(m.a)({},e,{points:e.points.map(function(e){return{x:e.x*s,y:e.y*c}}),brushRadius:e.brushRadius*l})}),immediate:t})}},n.componentWillUnmount=function(){n.canvasObserver.unobserve(n.canvasContainer),n.canvas.interface&&n.canvas.interface.removeEventListener("wheel",n.handleWheel)},n.handleWheel=function(e){n.interactionSM=n.interactionSM.handleMouseWheel(e,Object(x.a)(Object(x.a)(n)))},n.handleDrawStart=function(e){"all"!=n.props.allowOnlyPointerType&&e.pointerType!=n.props.allowOnlyPointerType||(n.interactionSM=n.interactionSM.handleDrawStart(e,Object(x.a)(Object(x.a)(n))),n.mouseHasMoved=!0)},n.handleDrawMove=function(e){"all"!=n.props.allowOnlyPointerType&&e.pointerType!=n.props.allowOnlyPointerType||(n.interactionSM=n.interactionSM.handleDrawMove(e,Object(x.a)(Object(x.a)(n))),n.mouseHasMoved=!0)},n.handleDrawEnd=function(e){"all"!=n.props.allowOnlyPointerType&&e.pointerType!=n.props.allowOnlyPointerType||(n.interactionSM=n.interactionSM.handleDrawEnd(e,Object(x.a)(Object(x.a)(n))),n.mouseHasMoved=!0)},n.applyView=function(){if(n.ctx.drawing&&(Z.map(function(e){return n.ctx[e]}).forEach(function(e){n.clearWindow(e);var t=n.coordSystem.transformMatrix;e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}),!n.deferRedrawOnViewChange)){n.drawGrid(n.ctx.grid),n.redrawImage(),n.loop({once:!0});var e=n.lines;n.lines=[],n.simulateDrawingLines({lines:e,immediate:!0})}},n.handleCanvasResize=function(e){var t=n.getSaveData();n.deferRedrawOnViewChange=!0;try{var a,r=q(e);try{for(r.s();!(a=r.n()).done;){var i=a.value.contentRect,o=i.width,s=i.height;n.setCanvasSize(n.canvas.interface,o,s),n.setCanvasSize(n.canvas.drawing,o,s),n.setCanvasSize(n.canvas.temp,o,s),n.setCanvasSize(n.canvas.grid,o,s),n.coordSystem.documentSize={width:o,height:s},n.drawGrid(n.ctx.grid),n.drawImage(),n.loop({once:!0})}}catch(c){r.e(c)}finally{r.f()}n.loadSaveData(t,!0)}finally{n.deferRedrawOnViewChange=!1}},n.clampPointToDocument=function(e){return n.props.clampLinesToDocument?{x:Math.max(Math.min(e.x,n.props.canvasWidth),0),y:Math.max(Math.min(e.y,n.props.canvasHeight),0)}:e},n.redrawImage=function(){n.image&&n.image.complete&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ctx,n=e.img,a=e.x,r=e.y,i=e.w,o=e.h,s=e.offsetX,c=e.offsetY;"number"!==typeof a&&(a=0),"number"!==typeof r&&(r=0),"number"!==typeof i&&(i=t.canvas.width),"number"!==typeof o&&(o=t.canvas.height),"number"!==typeof s&&(s=.5),"number"!==typeof c&&(c=.5),s<0&&(s=0),c<0&&(c=0),s>1&&(s=1),c>1&&(c=1);var l,u,d,h,f=n.width,m=n.height,p=Math.min(i/f,o/m),v=f*p,g=m*p,b=1;v<i&&(b=i/v),Math.abs(b-1)<1e-14&&g<o&&(b=o/g),(l=(f-(d=f/((v*=b)/i)))*s)<0&&(l=0),(u=(m-(h=m/((g*=b)/o)))*c)<0&&(u=0),d>f&&(d=f),h>m&&(h=m),t.drawImage(n,l,u,d,h,a,r,i,o)}({ctx:n.ctx.grid,img:n.image})},n.simulateDrawingLines=function(e){var t=e.lines,a=e.immediate,r=0,i=a?0:n.props.loadTimeOffset;t.forEach(function(e){var t=e.points,o=e.brushColor,s=e.brushRadius;if(a)return n.drawPoints({points:t,brushColor:o,brushRadius:s}),n.points=t,void n.saveLine({brushColor:o,brushRadius:s});for(var c=function(e){r+=i,window.setTimeout(function(){n.drawPoints({points:t.slice(0,e+1),brushColor:o,brushRadius:s})},r)},l=1;l<t.length;l++)c(l);r+=i,window.setTimeout(function(){n.points=t,n.saveLine({brushColor:o,brushRadius:s})},r)})},n.setCanvasSize=function(e,t,n){e.width=t,e.height=n,e.style.width=t,e.style.height=n},n.drawPoints=function(e){var t=e.points,a=e.brushColor,r=e.brushRadius;n.ctx.temp.lineJoin="round",n.ctx.temp.lineCap="round",n.ctx.temp.strokeStyle=a,n.clearWindow(n.ctx.temp),n.ctx.temp.lineWidth=2*r;var i=t[0],o=t[1];n.ctx.temp.moveTo(o.x,o.y),n.ctx.temp.beginPath();for(var s=1,c=t.length;s<c;s++){var l=J(i,o);n.ctx.temp.quadraticCurveTo(i.x,i.y,l.x,l.y),i=t[s],o=t[s+1]}n.ctx.temp.lineTo(i.x,i.y),n.ctx.temp.stroke()},n.saveLine=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.brushColor,a=e.brushRadius;n.points.length<2||(n.lines.push({points:Object(b.a)(n.points),brushColor:t||n.props.brushColor,brushRadius:a||n.props.brushRadius}),n.points.length=0,n.inClientSpace([n.ctx.drawing,n.ctx.temp],function(){n.ctx.drawing.drawImage(n.canvas.temp,0,0,n.canvas.drawing.width,n.canvas.drawing.height)}),n.clearWindow(n.ctx.temp),n.triggerOnChange())},n.triggerOnChange=function(){n.props.onChange&&n.props.onChange(Object(x.a)(Object(x.a)(n)))},n.clearWindow=function(e){n.inClientSpace([e],function(){return e.clearRect(0,0,e.canvas.width,e.canvas.height)})},n.clearExceptErasedLines=function(){n.lines=[],n.valuesChanged=!0,n.clearWindow(n.ctx.drawing),n.clearWindow(n.ctx.temp)},n.loop=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).once,t=void 0!==e&&e;if(n.mouseHasMoved||n.valuesChanged){var a=n.lazy.getPointerCoordinates(),r=n.lazy.getBrushCoordinates();n.drawInterface(n.ctx.interface,a,r),n.mouseHasMoved=!1,n.valuesChanged=!1}t||window.requestAnimationFrame(function(){n.loop()})},n.inClientSpace=function(e,t){e.forEach(function(e){e.save(),e.setTransform(M.a,M.b,M.c,M.d,M.e,M.f)});try{t()}finally{e.forEach(function(e){return e.restore()})}},n.drawImage=function(){n.props.imgSrc&&(n.image=new Image,n.image.crossOrigin="anonymous",n.image.onload=n.redrawImage,n.image.src=n.props.imgSrc)},n.drawGrid=function(e){if(!n.props.hideGrid){n.clearWindow(e);var t=n.coordSystem.canvasBounds,a=t.viewMin,r=t.viewMax,i=25*Math.floor(a.x/25-1),o=25*Math.floor(a.y/25-1),s=r.x+25,c=r.y+25;if(e.beginPath(),e.setLineDash([5,1]),e.setLineDash([]),e.strokeStyle=n.props.gridColor,e.lineWidth=n.props.gridLineWidth,!n.props.hideGridX){for(var l=i,u=n.props.gridSizeX;l<s;)l+=u,e.moveTo(l,o),e.lineTo(l,c);e.stroke()}if(!n.props.hideGridY){for(var d=o,h=n.props.gridSizeY;d<c;)d+=h,e.moveTo(i,d),e.lineTo(s,d);e.stroke()}}},n.drawInterface=function(e,t,a){n.props.hideInterface||(n.clearWindow(e),e.beginPath(),e.fillStyle=n.props.brushColor,e.arc(a.x,a.y,n.props.brushRadius,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.fillStyle=n.props.catenaryColor,e.arc(t.x,t.y,2,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.fillStyle=n.props.catenaryColor,e.arc(a.x,a.y,1,0,2*Math.PI,!0),e.fill())},n.canvas={},n.ctx={},n.catenary=new D.Catenary,n.points=[],n.lines=[],n.erasedLines=[],n.mouseHasMoved=!0,n.valuesChanged=!0,n.isDrawing=!1,n.isPressing=!1,n.deferRedrawOnViewChange=!1,n.interactionSM=new L,n.coordSystem=new T({scaleExtents:e.zoomExtents,documentSize:{width:e.canvasWidth,height:e.canvasHeight}}),n.coordSystem.attachViewChangeListener(n.applyView.bind(Object(x.a)(Object(x.a)(n)))),n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;this.lazy=new j.LazyBrush({radius:this.props.lazyRadius*window.devicePixelRatio,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),this.chainLength=this.props.lazyRadius*window.devicePixelRatio,this.canvasObserver=new C.a(function(e,n){return t.handleCanvasResize(e,n)}),this.canvasObserver.observe(this.canvasContainer),this.drawImage(),this.loop(),window.setTimeout(function(){var e=window.innerWidth/2,n=window.innerHeight/2;t.lazy.update({x:e-t.chainLength/4,y:n},{both:!0}),t.lazy.update({x:e+t.chainLength/4,y:n},{both:!1}),t.mouseHasMoved=!0,t.valuesChanged=!0,t.clearExceptErasedLines(),t.props.saveData&&t.loadSaveData(t.props.saveData)},100),this.canvas.interface&&this.canvas.interface.addEventListener("wheel",this.handleWheel,H?{passive:e}:e)}},{key:"componentDidUpdate",value:function(e){e.lazyRadius!==this.props.lazyRadius&&(this.chainLength=this.props.lazyRadius*window.devicePixelRatio,this.lazy.setRadius(this.props.lazyRadius*window.devicePixelRatio)),e.saveData!==this.props.saveData&&this.loadSaveData(this.props.saveData),JSON.stringify(e)!==JSON.stringify(this.props)&&(this.valuesChanged=!0),this.coordSystem.scaleExtents=this.props.zoomExtents,this.props.enablePanAndZoom||this.coordSystem.resetView(),e.imgSrc!==this.props.imgSrc&&this.drawImage()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.className,style:Object(m.a)({display:"block",background:this.props.backgroundColor,touchAction:"none",width:this.props.canvasWidth,height:this.props.canvasHeight},this.props.style),ref:function(t){t&&(e.canvasContainer=t)}},Z.map(function(t){var n="interface"===t;return r.a.createElement("canvas",{key:t,ref:function(a){a&&(e.canvas[t]=a,e.ctx[t]=a.getContext("2d"),n&&(e.coordSystem.canvas=a))},style:Object(m.a)({},N),onPointerDown:n?e.handleDrawStart:void 0,onPointerMove:n?e.handleDrawMove:void 0,onPointerUp:n?e.handleDrawEnd:void 0,onPointerOut:n?e.handleDrawEnd:void 0})}))}}]),t}(a.PureComponent);Q.defaultProps={onChange:null,loadTimeOffset:5,lazyRadius:12,allowOnlyPointerType:"pen",brushRadius:10,brushColor:"#444",catenaryColor:"#0a0302",gridColor:"rgba(150,150,150,0.17)",backgroundColor:"#FFF",hideGrid:!1,canvasWidth:400,canvasHeight:400,disabled:!1,imgSrc:"",saveData:"",immediateLoading:!1,hideInterface:!1,gridSizeX:25,gridSizeY:25,gridLineWidth:.5,hideGridX:!1,hideGridY:!1,enablePanAndZoom:!1,mouseZoomFactor:.01,zoomExtents:{min:.33,max:3},clampLinesToDocument:!1};var K=function(e){var t=e.CsubmitObj,n=e.isOwner,i=(e.viewDeleyToggle,Object(a.useState)(!1)),o=Object(s.a)(i,2),c=o[0],l=o[1],u=Object(a.useState)(t.text),h=Object(s.a)(u,2),f=(h[0],h[1],Object(a.useRef)()),m=Object(a.useState)(!0),p=Object(s.a)(m,2),b=(p[0],p[1]),w=new Date(t.createdAt),y=Object(a.useState)(!1),O=Object(s.a)(y,2),E=O[0],S=O[1],x=function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(function(e){return!e}),e.next=3,d.doc("Csubmit/".concat(t.id)).update({heart:1+t.heart});case 3:console.log(t.heart);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{float:"left",border:"10px solid rgba(0, 0, 0, 0.05)",width:"420px"}},c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Q,{style:{touchAction:"auto"},ref:f,disabled:!0,hideInterface:!0,loadTimeOffset:5})),r.a.createElement("button",{onClick:function(){f.current.clear(),f.current.loadSaveData(t.text)}},"Rewind"),r.a.createElement("button",{onClick:function(){l(!1)}},"Cancel")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"0 auto"}},r.a.createElement("img",{src:t.dataUrl,height:"400px"})),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:x},"\u2764",t.heart),r.a.createElement("button",{onClick:function(){window.confirm("wanna delete this?")&&d.doc("Csubmit/".concat(t.id)).delete()}},"Delete"),r.a.createElement("button",{onClick:function(){l(!0),setTimeout(function(){f.current.loadSaveData(t.text)},5)}},"Review")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:x},"\u2764 ",t.heart))),r.a.createElement("button",{onClick:function(){S(function(e){return!e})}},"Ref Pin"),"   ","  ",w.toLocaleString(navigator.language||navigator.userLanguage),E?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("iframe",{src:"https://assets.pinterest.com/ext/embed.html?id="+t.refPinUrl,height:"600",width:"300",frameBorder:0,scrolling:"no"}))):r.a.createElement(r.a.Fragment,null))},$=function(e){var t=e.userObj,n=Object(a.useState)([]),i=Object(s.a)(n,2),o=i[0],c=i[1],l=Object(a.useState)(!1),h=Object(s.a)(l,2),f=(h[0],h[1],Object(a.useState)(!1)),p=Object(s.a)(f,2),v=p[0];p[1];return Object(a.useEffect)(function(){d.collection("Csubmit").where("creatorId","==",t.uid).orderBy("createdAt","desc").onSnapshot(function(e){var t=e.docs.map(function(e){return Object(m.a)({id:e.id},e.data())});c(t)})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Profile"),r.a.createElement("button",{onClick:function(){return u.signOut()}},"Log Out"),r.a.createElement("div",null,o.map(function(e){return r.a.createElement(K,{CsubmitObj:e,isOwner:e.creatorId===t.uid,viewsToggle:v})})))},ee=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(""),c=Object(s.a)(o,2),l=c[0],d=c[1],h=Object(a.useState)(!0),f=Object(s.a)(h,2),m=f[0],p=f[1],b=Object(a.useState)(""),w=Object(s.a)(b,2),y=w[0],O=w[1],E=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?i(a):"password"===n&&d(a)},S=function(){var e=Object(g.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!m){e.next=8;break}return e.next=5,u.createUserWithEmailAndPassword(n,l);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,u.signInWithEmailAndPassword(n,l);case 10:a=e.sent;case 11:console.log(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),O(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:S},r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:E}),r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:l,onChange:E}),r.a.createElement("input",{type:"submit",value:m?"Create Account":"Log In"}),y),r.a.createElement("span",{onClick:function(){return p(function(e){return!e})}},m?"Sign In":"Create Account"),r.a.createElement("div",null,r.a.createElement("button",null,"Continue with Google"),r.a.createElement("button",null,"Continue with Github")))},te=function(e){var t=e.userObj,n=Object(a.useState)(""),i=Object(s.a)(n,2),o=(i[0],i[1]),l=Object(a.useState)([]),u=Object(s.a)(l,2),h=(u[0],u[1],Object(a.useState)([])),f=Object(s.a)(h,2),p=(f[0],f[1],Object(a.useRef)()),v=Object(a.useState)(""),g=Object(s.a)(v,2),b=g[0],w=g[1],y=Object(a.useState)([]),O=Object(s.a)(y,2),E=O[0],S=O[1],x=Object(a.useState)(0),j=Object(s.a)(x,2),D=j[0],C=j[1],P=Object(a.useState)(0),R=Object(s.a)(P,2),M=R[0],T=R[1],z=Object(a.useState)(60),L=Object(s.a)(z,2),k=L[0],I=L[1],_=Object(a.useState)(3),W=Object(s.a)(_,2),V=W[0],Y=(W[1],Object(a.useState)(0)),X=Object(s.a)(Y,2),A=X[0],B=X[1],F=Object(a.useState)(0),H=Object(s.a)(F,2),U=H[0],q=H[1],G=Object(a.useRef)(k),J=Object(a.useRef)(null),N=Object(a.useState)({croquisTimeDB:k,brushRadius:1,lazyRadius:1}),Z=Object(s.a)(N,2),K=Z[0],$=Z[1],ee=Object(a.useState)(!1),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],re=function(){C(D+1),T(M+1),G.current=k;var e=p.current.getSaveData(),n=p.current.getDataURL();p.current.clear(),d.collection("Csubmit").add({text:e,createdAt:Date.now(),creatorId:t.uid,drawingTime:k-60*A-U,heart:0,dataUrl:n,refPinUrl:E[M]}),o("")};Object(a.useEffect)(function(){return J.current=setInterval(function(){B(parseInt(G.current/60)),q(G.current%60),G.current-=1},1e3),function(){return clearInterval(J.current)}},[]),Object(a.useEffect)(function(){G.current<=-1&&re()},[U]),Object(a.useEffect)(function(){d.doc("RefDB/refStrings").get().then(function(e){if(e.exists){var t=e.data().refUrl.sort(function(){return Math.random()-.5});S(t)}else console.log("No such document!")}).catch(function(e){console.log("Error getting document:",e)}),d.doc("usersetting/"+t.uid).get().then(function(e){e.exists?($({brushRadius:e.data().brushRadius,lazyRadius:e.data().lazyRadius}),I(e.data().croquisTimeDB),console.log(e.data())):console.log("No such setting document!")}).catch(function(e){console.log("Error getting document:",e)})},[]);var ie;return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},ne?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),ae(!1)}},r.a.createElement("input",{value:k,onChange:function(e){var t=e.target.value;I(t),$(function(t){return Object(m.a)({},t,{croquisTimeDB:e.target.value})})},type:"number",placeholder:"Input Croquis Time"}),r.a.createElement("input",{type:"submit",value:"Set Time"}))):r.a.createElement(r.a.Fragment,null,function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}(M+1),r.a.createElement("button",{onClick:function(e){ae(!0)}},"Set Croquis Time")),r.a.createElement("button",{onClick:function(e){d.collection("usersetting").doc(t.uid).update({brushRadius:K.brushRadius,lazyRadius:K.lazyRadius,croquisTimeDB:K.croquisTimeDB})}},"Update Setting")),r.a.createElement("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"70px",textAlign:"center",background:"linear-gradient(to left,#FFC365 "+100*(60*A+U)/k+"%,#E8E8E8 "+100*(60*A+U)/k+"%)"}},A," : ",(ie=U)<=9?"0"+ie:ie),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),b.match(",")){var t=d.doc("RefDB/refStrings");b.split(",").forEach(function(e){console.log(e),t.update({refUrl:c.a.firestore.FieldValue.arrayUnion(e)})})}else d.doc("RefDB/refStrings").update({refUrl:c.a.firestore.FieldValue.arrayUnion(b)});w("")}},r.a.createElement("input",{value:b,onChange:function(e){var t=e.target.value;w(t)},type:"text",placeholder:"You Can Upload Pinterst Pin By Url Number"}),r.a.createElement("input",{type:"submit",value:"Upload Pin"}))),r.a.createElement("div",{style:{float:"left"}},r.a.createElement("iframe",{key:D,src:"https://assets.pinterest.com/ext/embed.html?id="+E[M],height:770,width:400,frameBorder:0,scrolling:"no"})),r.a.createElement("div",{style:{float:"left"}},r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},r.a.createElement("label",null,"Lazy-Radius:"),r.a.createElement("input",{type:"number",min:"0",max:"100",style:{width:"30px"},value:K.lazyRadius,onChange:function(e){return $(function(t){return Object(m.a)({},t,{lazyRadius:e.target.value})})}})),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("label",null,"Brush-Radius:"),r.a.createElement("input",{type:"number",min:"1",max:"100",style:{width:"30px"},value:K.brushRadius,onChange:function(e){return $(function(t){return Object(m.a)({},t,{brushRadius:e.target.value})})}})),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("button",{onClick:function(){p.current.clear()}},"Clear Canvas")),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),re()}},r.a.createElement("input",{type:"submit",value:"Upload Drawing"})))),r.a.createElement("div",{style:{float:"right"}},r.a.createElement(Q,{canvasWidth:600,canvasHeight:600,brushRadius:K.brushRadius,lazyRadius:K.lazyRadius,ref:p,allowOnlyPointerType:["all","mouse","touch","pen"][V]}))))},ne=function(){return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",{style:{display:"inline",borderLeft:"1px solid #999",padding:"0 10px"}},r.a.createElement(f.b,{to:"/"},"Home")),r.a.createElement("li",{style:{display:"inline",borderLeft:"1px solid #999",padding:"0 10px"}},r.a.createElement(f.b,{to:"/profile"},"My Drawings")),r.a.createElement("li",{style:{display:"inline",borderLeft:"1px solid #999",padding:"0 10px"}},r.a.createElement(f.b,{to:"/doProko"},"Do Proko"))))},ae=function(e){var t=e.userObj,n=Object(a.useState)(""),i=Object(s.a)(n,2),o=(i[0],i[1]),c=Object(a.useState)([]),l=Object(s.a)(c,2),u=(l[0],l[1],Object(a.useState)(0)),h=Object(s.a)(u,2),f=h[0],p=h[1],v=Object(a.useRef)(),g=Object(a.useState)({brushRadius:1,lazyRadius:0}),b=Object(s.a)(g,2),w=b[0],y=b[1],O=Object(a.useState)(0),E=Object(s.a)(O,2),S=E[0],x=E[1],j=Object(a.useState)(["PLtG4P3lq8RHGuMuprDarMz_Y9Fbw_d2ws","PLTY4AtphBe8NS7WFIMIhHIBJVk3xQvi-q","PLTY4AtphBe8PSqfXT4qfxwdbLgSK0XZ9v","PLTY4AtphBe8P3zIOlyr7gEt176af-pp5R","PLtG4P3lq8RHFBeVaruf2JjyQmZJH4__Zv"]),D=Object(s.a)(j,2),C=D[0];D[1];return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}}),r.a.createElement("div",null,r.a.createElement("label",null,"videos:"),r.a.createElement("input",{type:"number",min:"0",max:C.length-1,style:{width:"30px"},value:S,onChange:function(e){x(e.target.value),p(f+1)}})),r.a.createElement("div",{style:{float:"left"}},r.a.createElement("iframe",{key:f,src:"https://www.youtube.com/embed/videoseries?list="+C[S]+"&cc_load_policy=1&cc_lang_pref=ko",height:450,width:450,frameBorder:0,scrolling:"no"})),r.a.createElement("div",{style:{float:"left"}},r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},r.a.createElement("label",null,"Lazy-Radius:"),r.a.createElement("input",{type:"number",min:"0",max:"100",style:{width:"30px"},value:w.lazyRadius,onChange:function(e){return y(function(t){return Object(m.a)({},t,{lazyRadius:e.target.value})})}})),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("label",null,"Brush-Radius:"),r.a.createElement("input",{type:"number",min:"1",max:"100",style:{width:"30px"},value:w.brushRadius,onChange:function(e){return y(function(t){return Object(m.a)({},t,{brushRadius:e.target.value})})}})),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("button",{onClick:function(){v.current.clear()}},"Clear Canvas")),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(){var e=v.current.getSaveData(),n=v.current.getDataURL();v.current.clear(),d.collection("Csubmit").add({text:e,createdAt:Date.now(),creatorId:t.uid,drawingTime:0,heart:0,dataUrl:n,refPinUrl:""}),o("")}()}},r.a.createElement("input",{type:"submit",value:"Upload Drawing"})))),r.a.createElement("div",{style:{float:"right"}},r.a.createElement(Q,{canvasWidth:600,canvasHeight:600,brushRadius:w.brushRadius,lazyRadius:w.lazyRadius,ref:v}))))},re=function(e){var t=e.isLoggedIn,n=e.userObj;return r.a.createElement(f.a,null,t&&r.a.createElement(ne,null),r.a.createElement(h.d,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{exact:!0,path:"/"},r.a.createElement(te,{userObj:n})),r.a.createElement(h.b,{exact:!0,path:"/profile"},r.a.createElement($,{userObj:n})),r.a.createElement(h.b,{exact:!0,path:"/doProko"},r.a.createElement(ae,{userObj:n})),r.a.createElement(h.a,{from:"*",to:"/"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{exact:!0,path:"/"},r.a.createElement(ee,null)),r.a.createElement(h.a,{from:"*",to:"/"}))))};var ie=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(!1),c=Object(s.a)(o,2),l=c[0],d=c[1],h=Object(a.useState)(null),f=Object(s.a)(h,2),m=f[0],p=f[1];return Object(a.useEffect)(function(){u.onAuthStateChanged(function(e){e?(d(!0),p(e)):d(!1),i(!0)})},[]),r.a.createElement(r.a.Fragment,null,n?r.a.createElement(re,{isLoggedIn:l,userObj:m}):"Inisializing..")};n(69);console.log(l),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.1f53b1af.chunk.js.map