(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){e.exports=n(55)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)})}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";e.exports=n(51)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g}),n.d(t,"b",function(){return P}),n.d(t,"c",function(){return R}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return L}),n.d(t,"g",function(){return b}),n.d(t,"h",function(){return z}),n.d(t,"i",function(){return U}),n.d(t,"j",function(){return m}),n.d(t,"k",function(){return q}),n.d(t,"l",function(){return K}),n.d(t,"m",function(){return k}),n.d(t,"n",function(){return _}),n.d(t,"o",function(){return x}),n.d(t,"p",function(){return E}),n.d(t,"q",function(){return M}),n.d(t,"r",function(){return I}),n.d(t,"s",function(){return C}),n.d(t,"t",function(){return w}),n.d(t,"u",function(){return O}),n.d(t,"v",function(){return j}),n.d(t,"w",function(){return S}),n.d(t,"x",function(){return T}),n.d(t,"y",function(){return J}),n.d(t,"z",function(){return V}),n.d(t,"A",function(){return B}),n.d(t,"B",function(){return A});n(0),n(2);var r=n(12),i=n(11),a=n(7),o=n(10),u=n(15),s=n(49),c=n(1),l=n(3);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},v=function(e){return function(e){var t=d(e);return p.encodeByteArray(t,!0)}(e).replace(/\./g,"")},y=function(e){try{return p.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function m(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=m(e[n],t[n]));return e}var g=function(){function e(){var t=this;Object(c.a)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return Object(l.a)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function b(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[v(JSON.stringify({alg:"none",type:"JWT"})),v(JSON.stringify(a)),""].join(".")}function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function O(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function _(){return"object"===typeof self&&self.self===self}function x(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function j(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function E(){return k().indexOf("Electron/")>=0}function I(){var e=k();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return k().indexOf("MSAppHost/")>=0}function S(){return!O()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){return"object"===typeof indexedDB}function A(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})}var N="FirebaseError",R=function(e){function t(e,n,r){var o;return Object(c.a)(this,t),(o=Object(i.a)(this,Object(a.a)(t).call(this,n))).code=e,o.customData=r,o.name=N,Object.setPrototypeOf(Object(u.a)(Object(u.a)(o)),t.prototype),Error.captureStackTrace&&Error.captureStackTrace(Object(u.a)(Object(u.a)(o)),P.prototype.create),o}return Object(o.a)(t,e),t}(Object(s.a)(Error)),P=function(){function e(t,n,r){Object(c.a)(this,e),this.service=t,this.serviceName=n,this.errors=r}return Object(l.a)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(D,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new R(n,a,t)}}]),e}();var D=/\{\$([^}]+)}/g;function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function U(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(F(u)&&F(s)){if(!U(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function F(e){return null!==e&&"object"===typeof e}function V(e){for(var t=[],n=function(){var e=Object(r.a)(a[i],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach(function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},i=0,a=Object.entries(e);i<a.length;i++)n();return t.length?"&"+t.join("&"):""}function B(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),i=Object(r.a)(n,2),a=i[0],o=i[1];t[decodeURIComponent(a)]=decodeURIComponent(o)}}),t}function q(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function z(e,t){var n=new H(e,t);return n.subscribe.bind(n)}var H=function(){function e(t,n){var r=this;Object(c.a)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return Object(l.a)(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=W),void 0===r.error&&(r.error=W),void 0===r.complete&&(r.complete=W);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function W(){}function K(e){return e&&e._delegate?e._delegate:e}function G(e,t){return new Promise(function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}})}var Q=function(){function e(t){Object(c.a)(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return Object(l.a)(e,[{key:"transaction",value:function(e,t){return new $(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new Y(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),$=function(){function e(t){var n=this;Object(c.a)(this,e),this._transaction=t,this.complete=new Promise(function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}})}return Object(l.a)(e,[{key:"objectStore",value:function(e){return new Y(this._transaction.objectStore(e))}}]),e}(),Y=function(){function e(t){Object(c.a)(this,e),this._store=t}return Object(l.a)(e,[{key:"index",value:function(e){return new X(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new X(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return G(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return G(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return G(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return G(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),X=function(){function e(t){Object(c.a)(this,e),this._index=t}return Object(l.a)(e,[{key:"get",value:function(e){return G(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function J(e,t,n){return new Promise(function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new Q(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new Q(a.result),e.oldVersion,e.newVersion,new $(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}})}}).call(this,n(32))},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(34),i=n(36),a=n(35);var o=n(0),u=n.n(o),s=n(1),c=n(3),l=n(11),f=n(18),h=n(7),d=n(10),p=n(2),v=n(15),y=n(12),m=n(14),g=n(5),b=n(6),k=n(13);function w(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var O,_=n(20),x=n(16);function j(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},T={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function S(){return Object(g.a)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var C=function(){var e;return e={},Object(g.a)(e,"admin-restricted-operation","This operation is restricted to administrators only."),Object(g.a)(e,"argument-error",""),Object(g.a)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Object(g.a)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Object(g.a)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Object(g.a)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Object(g.a)(e,"cordova-not-ready","Cordova framework is not ready."),Object(g.a)(e,"cors-unsupported","This browser is not supported."),Object(g.a)(e,"credential-already-in-use","This credential is already associated with a different user account."),Object(g.a)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Object(g.a)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Object(g.a)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Object(g.a)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Object(g.a)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Object(g.a)(e,"email-already-in-use","The email address is already in use by another account."),Object(g.a)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Object(g.a)(e,"expired-action-code","The action code has expired."),Object(g.a)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Object(g.a)(e,"internal-error","An internal AuthError has occurred."),Object(g.a)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Object(g.a)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Object(g.a)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Object(g.a)(e,"invalid-auth-event","An internal AuthError has occurred."),Object(g.a)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Object(g.a)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Object(g.a)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Object(g.a)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Object(g.a)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Object(g.a)(e,"invalid-email","The email address is badly formatted."),Object(g.a)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Object(g.a)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Object(g.a)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Object(g.a)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Object(g.a)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Object(g.a)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Object(g.a)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Object(g.a)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Object(g.a)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Object(g.a)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Object(g.a)(e,"wrong-password","The password is invalid or the user does not have a password."),Object(g.a)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Object(g.a)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Object(g.a)(e,"invalid-provider-id","The specified provider ID is invalid."),Object(g.a)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Object(g.a)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Object(g.a)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Object(g.a)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Object(g.a)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Object(g.a)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Object(g.a)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Object(g.a)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Object(g.a)(e,"missing-continue-uri","A continue URL must be provided in the request."),Object(g.a)(e,"missing-iframe-start","An internal AuthError has occurred."),Object(g.a)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Object(g.a)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Object(g.a)(e,"missing-multi-factor-info","No second factor identifier is provided."),Object(g.a)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Object(g.a)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Object(g.a)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Object(g.a)(e,"app-deleted","This instance of FirebaseApp has been deleted."),Object(g.a)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Object(g.a)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Object(g.a)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Object(g.a)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Object(g.a)(e,"no-auth-event","An internal AuthError has occurred."),Object(g.a)(e,"no-such-provider","User was not linked to an account with the given provider."),Object(g.a)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Object(g.a)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Object(g.a)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Object(g.a)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Object(g.a)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Object(g.a)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Object(g.a)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Object(g.a)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Object(g.a)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Object(g.a)(e,"rejected-credential","The request contains malformed or mismatching credentials."),Object(g.a)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Object(g.a)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Object(g.a)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Object(g.a)(e,"timeout","The operation has timed out."),Object(g.a)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Object(g.a)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Object(g.a)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Object(g.a)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Object(g.a)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Object(g.a)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Object(g.a)(e,"unverified-email","The operation requires a verified email."),Object(g.a)(e,"user-cancelled","The user did not grant your application the permissions it requested."),Object(g.a)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Object(g.a)(e,"user-disabled","The user account has been disabled by an administrator."),Object(g.a)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Object(g.a)(e,"user-signed-out",""),Object(g.a)(e,"weak-password","The password must be 6 characters long or more."),Object(g.a)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Object(g.a)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},A=S,N=new b.b("auth","Firebase",S()),R=new _.b("@firebase/auth");function P(e){if(R.logLevel<=_.a.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];R.error.apply(R,["Auth (".concat(k.SDK_VERSION,"): ").concat(e)].concat(n))}}function D(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw F.apply(void 0,[e].concat(n))}function L(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return F.apply(void 0,[e].concat(n))}function M(e,t,n){var r=Object.assign(Object.assign({},A()),Object(g.a)({},t,n));return new b.b("auth","Firebase",r).create(t,{appName:e.name})}function U(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&D(e,"argument-error"),M(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function F(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Object(m.a)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Object(m.a)(o)))}return N.create.apply(N,[e].concat(n))}function V(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw F.apply(void 0,[t].concat(r))}}function B(e){var t="INTERNAL ASSERTION FAILED: "+e;throw P(t),new Error(t)}function q(e,t){e||B(t)}var z=new Map;function H(e){q(e instanceof Function,"Expected a class definition");var t=z.get(e);return t?(q(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,z.set(e,t),t)}function W(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function K(){return"http:"===G()||"https:"===G()}function G(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Q=function(){function e(t,n){Object(s.a)(this,e),this.shortDelay=t,this.longDelay=n,q(n>t,"Short delay should be less than long delay!"),this.isMobile=Object(b.t)()||Object(b.v)()}return Object(c.a)(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(K()||Object(b.o)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function $(e,t){q(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Y=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void B("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void B("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void B("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),X=(O={},Object(g.a)(O,"CREDENTIAL_MISMATCH","custom-token-mismatch"),Object(g.a)(O,"MISSING_CUSTOM_TOKEN","internal-error"),Object(g.a)(O,"INVALID_IDENTIFIER","invalid-email"),Object(g.a)(O,"MISSING_CONTINUE_URI","internal-error"),Object(g.a)(O,"INVALID_PASSWORD","wrong-password"),Object(g.a)(O,"MISSING_PASSWORD","internal-error"),Object(g.a)(O,"EMAIL_EXISTS","email-already-in-use"),Object(g.a)(O,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Object(g.a)(O,"INVALID_IDP_RESPONSE","invalid-credential"),Object(g.a)(O,"INVALID_PENDING_TOKEN","invalid-credential"),Object(g.a)(O,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Object(g.a)(O,"MISSING_REQ_TYPE","internal-error"),Object(g.a)(O,"EMAIL_NOT_FOUND","user-not-found"),Object(g.a)(O,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Object(g.a)(O,"EXPIRED_OOB_CODE","expired-action-code"),Object(g.a)(O,"INVALID_OOB_CODE","invalid-action-code"),Object(g.a)(O,"MISSING_OOB_CODE","internal-error"),Object(g.a)(O,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Object(g.a)(O,"INVALID_ID_TOKEN","invalid-user-token"),Object(g.a)(O,"TOKEN_EXPIRED","user-token-expired"),Object(g.a)(O,"USER_NOT_FOUND","user-token-expired"),Object(g.a)(O,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Object(g.a)(O,"INVALID_CODE","invalid-verification-code"),Object(g.a)(O,"INVALID_SESSION_INFO","invalid-verification-id"),Object(g.a)(O,"INVALID_TEMPORARY_PROOF","invalid-credential"),Object(g.a)(O,"MISSING_SESSION_INFO","missing-verification-id"),Object(g.a)(O,"SESSION_EXPIRED","code-expired"),Object(g.a)(O,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Object(g.a)(O,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Object(g.a)(O,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Object(g.a)(O,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Object(g.a)(O,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Object(g.a)(O,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Object(g.a)(O,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Object(g.a)(O,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Object(g.a)(O,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Object(g.a)(O,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Object(g.a)(O,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),O),J=new Q(3e4,6e4);function Z(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function ee(e,t,n,r){return te.apply(this,arguments)}function te(){return(te=Object(p.a)(u.a.mark(function e(t,n,r,i){var a,o=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",ne(t,a,Object(p.a)(u.a.mark(function e(){var a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Object(b.z)(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Y.fetch()(oe(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}},e)}))));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ne(e,t,n){return re.apply(this,arguments)}function re(){return(re=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c,l,f,h,d,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},X),n),e.prev=2,a=new ue(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw se(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=o.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=Object(y.a)(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw se(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw se(t,"email-already-in-use",s);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw M(t,p,d);case 30:D(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof b.c)){e.next=37;break}throw e.t0;case 37:D(t,"network-request-failed");case 38:case"end":return e.stop()}},e,null,[[2,33]])}))).apply(this,arguments)}function ie(e,t,n,r){return ae.apply(this,arguments)}function ae(){return(ae=Object(p.a)(u.a.mark(function e(t,n,r,i){var a,o,s=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,ee(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&D(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?$(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ue=function(){function e(t){var n=this;Object(s.a)(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(L(n.auth,"network-request-failed"))},J.get())})}return Object(c.a)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function se(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=L(e,t,r);return i.customData._tokenResponse=n,i}function ce(e,t){return le.apply(this,arguments)}function le(){return(le=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(e,t){return he.apply(this,arguments)}function he(){return(he=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e,t){return pe.apply(this,arguments)}function pe(){return(pe=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ye(){return(ye=Object(p.a)(u.a.mark(function e(t){var n,r,i,a,o,s,c=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=Object(b.l)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,V((a=ge(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ve(me(a.auth_time)),issuedAtTime:ve(me(a.iat)),expirationTime:ve(me(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e){return 1e3*Number(e)}function ge(e){var t=e.split("."),n=Object(y.a)(t,3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return P("JWT malformed, contained fewer than 3 sections"),null;try{var o=Object(b.d)(i);return o?JSON.parse(o):(P("Failed to decode base64 JWT payload"),null)}catch(u){return P("Caught error parsing JWT payload as JSON",u),null}}function be(e,t){return ke.apply(this,arguments)}function ke(){return(ke=Object(p.a)(u.a.mark(function e(t,n){var r=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof b.c&&we(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function we(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Oe=function(){function e(t){Object(s.a)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Object(c.a)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Object(p.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}},t)})),n)}}},{key:"iteration",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}()}]),e}(),_e=function(){function e(t,n){Object(s.a)(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Object(c.a)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ve(this.lastLoginAt),this.creationTime=ve(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function xe(e){return je.apply(this,arguments)}function je(){return(je=Object(p.a)(u.a.mark(function e(t){var n,r,i,a,o,s,c,l,f,h,d;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,be(t,de(r,{idToken:i}));case 6:V(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map(function(e){var t=e.providerId,n=w(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[],c=Ie(t.providerData,s),l=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(null===c||void 0===c?void 0:c.length),h=!!l&&f,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new _e(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ee(){return(Ee=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(b.l)(t),e.next=3,xe(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ie(e,t){var n=e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})});return[].concat(Object(m.a)(n),Object(m.a)(t))}function Te(e,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(p.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t,{},Object(p.a)(u.a.mark(function e(){var r,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.z)({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=oe(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Y.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}},e)})));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ce=function(){function e(){Object(s.a)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Object(c.a)(e,[{key:"updateFromServerResponse",value:function(e){V(e.idToken,"internal-error"),V("undefined"!==typeof e.idToken,"internal-error"),V("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ge(e);return V(t,"internal-error"),V("undefined"!==typeof t.exp,"internal-error"),V("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],V(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return B("not implemented")}},{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(V("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(V("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(V("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ae(e,t){V("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ne=function(){function e(t){Object(s.a)(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=w(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Oe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Object(m.a)(a.providerData):[],this.metadata=new _e(a.createdAt||void 0,a.lastLoginAt||void 0)}return Object(c.a)(e,[{key:"getIdToken",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(V(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ye.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ee.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r,i=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,xe(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,be(this,ce(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,k=n.emailVerified,w=n.isAnonymous,O=n.providerData,_=n.stsTokenManager;V(b&&_,t,"internal-error");var x=Ce.fromJSON(this.name,_);V("string"===typeof b,t,"internal-error"),Ae(f,t.name),Ae(h,t.name),V("boolean"===typeof k,t,"internal-error"),V("boolean"===typeof w,t,"internal-error"),Ae(d,t.name),Ae(p,t.name),Ae(v,t.name),Ae(y,t.name),Ae(m,t.name),Ae(g,t.name);var j=new e({uid:b,auth:t,email:h,emailVerified:k,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:x,createdAt:m,lastLoginAt:g});return O&&Array.isArray(O)&&(j.providerData=O.map(function(e){return Object.assign({},e)})),y&&(j._redirectEventId=y),j}},{key:"_fromIdTokenResponse",value:function(){var t=Object(p.a)(u.a.mark(function t(n,r){var i,a,o,s=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Ce).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,xe(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Re=function(){function e(){Object(s.a)(this,e),this.type="NONE",this.storage={}}return Object(c.a)(e,[{key:"_isAvailable",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Re.type="NONE";var Pe=Re;function De(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Le=function(){function e(t,n,r){Object(s.a)(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=De(this.userKey,a.apiKey,o),this.fullPersistenceKey=De("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Object(c.a)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ne._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Object(p.a)(u.a.mark(function t(n,r){var i,a,o,s,c,l,f,h,d,v,y,m=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(H(Pe),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter(function(e){return e}),o=a[0]||H(Pe),s=De(i,n.config.apiKey,n.name),c=null,l=j(r),t.prev=10,l.s();case 12:if((f=l.n()).done){t.next=29;break}return h=f.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(d=t.sent)){t.next=23;break}return v=Ne._fromJSON(n,d),h!==o&&(c=v),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(y=a.filter(function(e){return e._shouldAllowMigration}),o._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=y[0],!c){t.next=44;break}return t.next=44,o._set(s,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}},t,null,[[10,31,34,37],[14,25]])}));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Me(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Be(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ue(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ze(t))return"Blackberry";if(He(t))return"Webos";if(Fe(t))return"Safari";if((t.includes("chrome/")||Ve(t))&&!t.includes("edge/"))return"Chrome";if(qe(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)();return/firefox\//i.test(e)}function Fe(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)();return/crios\//i.test(e)}function Be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)();return/iemobile/i.test(e)}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)();return/android/i.test(e)}function ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)();return/blackberry/i.test(e)}function He(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)();return/webos/i.test(e)}function We(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)();return/iphone|ipad|ipod/i.test(e)}function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)();return We(e)||qe(e)||He(e)||ze(e)||/windows phone/i.test(e)||Be(e)}function Ge(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Me(Object(b.m)());break;case"Worker":t="".concat(Me(Object(b.m)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(k.SDK_VERSION,"/").concat(r)}var Qe=function(){function e(t,n,r){Object(s.a)(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ye(this),this.idTokenSubscription=new Ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Object(c.a)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=H(t)),this._initializationPromise=this.queue(Object(p.a)(u.a.mark(function r(){var i,a;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Le.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}},r,null,[[8,13]])}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||null===o||void 0===o||!o.user||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return V(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Object(b.l)(t):null)&&V(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&V(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}},e)}))));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Object(p.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(H(e));case 2:case"end":return n.stop()}},n)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new b.b("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return V(n=t&&H(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Le.create(this,[H(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}},e)}))));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return V(o,this,"internal-error"),o.then(function(){return a(i.currentUser)}),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ge(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(g.a)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_currentUser",get:function(){return this.currentUser}},{key:"assertedPersistence",get:function(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}}]),e}();function $e(e){return Object(b.l)(e)}var Ye=function(){function e(t){var n=this;Object(s.a)(this,e),this.auth=t,this.observer=null,this.addObserver=Object(b.h)(function(e){return n.observer=e})}return Object(c.a)(e,[{key:"next",get:function(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Xe(e,t,n){var r=$e(e);V(r._canInitEmulator,r,"emulator-config-failed"),V(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Je(t),o=function(e){var t=Je(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ze(r.substr(a.length+1))}}var o=r.split(":"),u=Object(y.a)(o,2),s=u[0],c=u[1];return{host:s,port:Ze(c)}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Je(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ze(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var et=function(){function e(t,n){Object(s.a)(this,e),this.providerId=t,this.signInMethod=n}return Object(c.a)(e,[{key:"toJSON",value:function(){return B("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return B("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return B("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return B("not implemented")}}]),e}();function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:resetPassword",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rt(e,t){return it.apply(this,arguments)}function it(){return(it=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e,t){return ot.apply(this,arguments)}function ot(){return(ot=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:update",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ut(e,t){return st.apply(this,arguments)}function st(){return(st=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(t,"POST","/v1/accounts:signInWithPassword",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ct(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:sendOobCode",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ft(e,t){return ht.apply(this,arguments)}function ht(){return(ht=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ct(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dt(e,t){return pt.apply(this,arguments)}function pt(){return(pt=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ct(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vt(e,t){return yt.apply(this,arguments)}function yt(){return(yt=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ct(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mt(e,t){return gt.apply(this,arguments)}function gt(){return(gt=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ct(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bt(e,t){return kt.apply(this,arguments)}function kt(){return(kt=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(t,"POST","/v1/accounts:signInWithEmailLink",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(t,"POST","/v1/accounts:signInWithEmailLink",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _t=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(s.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,"password",r)))._email=e,i._password=n,i._tenantId=a,i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ut(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",bt(t,{email:this._email,oobCode:this._password}));case 5:D(t,"internal-error");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",rt(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",wt(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:D(t,"internal-error");case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,n){return new t(e,n,"password")}},{key:"_fromEmailAndCode",value:function(e,n){return new t(e,n,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),t}(et);function xt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(t,"POST","/v1/accounts:signInWithIdp",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Et=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).apply(this,arguments))).pendingToken=null,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return xt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,xt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,xt(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(b.z)(t)}return e}}],[{key:"_fromParams",value:function(e){var n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):D("argument-error"),n}},{key:"fromJSON",value:function(e){var n="string"===typeof e?JSON.parse(e):e,r=n.providerId,i=n.signInMethod,a=w(n,["providerId","signInMethod"]);if(!r||!i)return null;var o=new t(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),t}(et);function It(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:sendVerificationCode",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function St(){return(St=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(t,"POST","/v1/accounts:signInWithPhoneNumber",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ct(){return(Ct=Object(p.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t,"POST","/v1/accounts:signInWithPhoneNumber",Z(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw se(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var At=Object(g.a)({},"USER_NOT_FOUND","user-not-found");function Nt(){return(Nt=Object(p.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ie(t,"POST","/v1/accounts:signInWithPhoneNumber",Z(t,r),At));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Rt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,"phone","phone"))).params=e,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return St.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ct.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Nt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,n){return new t({verificationId:e,verificationCode:n})}},{key:"_fromTokenResponse",value:function(e,n){return new t({phoneNumber:e,temporaryProof:n})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var n=e,r=n.verificationId,i=n.verificationCode,a=n.phoneNumber,o=n.temporaryProof;return i||r||a||o?new t({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),t}(et);var Pt=function(){function e(t){var n,r,i,a,o,u;Object(s.a)(this,e);var c=Object(b.A)(Object(b.k)(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);V(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=c.tenantId)&&void 0!==u?u:null}return Object(c.a)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Object(b.A)(Object(b.k)(e)).link,n=t?Object(b.A)(Object(b.k)(t)).deep_link_id:null,r=Object(b.A)(Object(b.k)(e)).deep_link_id;return(r?Object(b.A)(Object(b.k)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Dt=function(){function e(){Object(s.a)(this,e),this.providerId=e.PROVIDER_ID}return Object(c.a)(e,null,[{key:"credential",value:function(e,t){return _t._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Pt.parseLink(t);return V(n,"argument-error"),_t._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Dt.PROVIDER_ID="password",Dt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Dt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Lt=function(){function e(t){Object(s.a)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Object(c.a)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Mt=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).apply(this,arguments))).scopes=[],e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Object(m.a)(this.scopes)}}]),t}(Lt),Ut=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return V(e.idToken||e.accessToken,"argument-error"),Et._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return V("providerId"in t&&"signInMethod"in t,"argument-error"),Et._fromParams(t)}},{key:"credentialFromResult",value:function(e){return t.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthIdToken,i=n.oauthAccessToken,a=n.oauthTokenSecret,o=n.pendingToken,u=n.nonce,s=n.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new t(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),t}(Mt),Ft=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,"facebook.com"))}return Object(d.a)(t,e),Object(c.a)(t,null,[{key:"credential",value:function(e){return Et._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n))return null;if(!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(r){return null}}}]),t}(Mt);Ft.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ft.PROVIDER_ID="facebook.com";var Vt=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this,"google.com"))).addScope("profile"),e}return Object(d.a)(t,e),Object(c.a)(t,null,[{key:"credential",value:function(e,n){return Et._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthIdToken,i=n.oauthAccessToken;if(!r&&!i)return null;try{return t.credential(r,i)}catch(a){return null}}}]),t}(Mt);Vt.GOOGLE_SIGN_IN_METHOD="google.com",Vt.PROVIDER_ID="google.com";var Bt=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,"github.com"))}return Object(d.a)(t,e),Object(c.a)(t,null,[{key:"credential",value:function(e){return Et._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n))return null;if(!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(r){return null}}}]),t}(Mt);Bt.GITHUB_SIGN_IN_METHOD="github.com",Bt.PROVIDER_ID="github.com";var qt=function(e){function t(e,n){var r;return Object(s.a)(this,t),(r=Object(l.a)(this,Object(h.a)(t).call(this,e,e))).pendingToken=n,r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_getIdTokenResponse",value:function(e){return xt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,xt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,xt(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var n="string"===typeof e?JSON.parse(e):e,r=n.providerId,i=n.signInMethod,a=n.pendingToken;return r&&i&&a&&r===i?new t(r,a):null}},{key:"_create",value:function(e,n){return new t(e,n)}}]),t}(et),zt="saml.",Ht=function(e){function t(e){return Object(s.a)(this,t),V(e.startsWith(zt),"argument-error"),Object(l.a)(this,Object(h.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,null,[{key:"credentialFromResult",value:function(e){return t.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=qt.fromJSON(e);return V(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return qt._create(r,n)}catch(i){return null}}}]),t}(Lt),Wt=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,"twitter.com"))}return Object(d.a)(t,e),Object(c.a)(t,null,[{key:"credential",value:function(e,n){return Et._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthAccessToken,i=n.oauthTokenSecret;if(!r||!i)return null;try{return t.credential(r,i)}catch(a){return null}}}]),t}(Mt);function Kt(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(t,"POST","/v1/accounts:signUp",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}Wt.TWITTER_SIGN_IN_METHOD="twitter.com",Wt.PROVIDER_ID="twitter.com";var Qt=function(){function e(t){Object(s.a)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Object(c.a)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Object(p.a)(u.a.mark(function t(n,r,i){var a,o,s,c,l=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,Ne._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=$t(i),c=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Object(p.a)(u.a.mark(function t(n,r,i){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=$t(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function $t(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Yt(e){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(p.a)(u.a.mark(function e(t){var n,r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=$e(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Qt({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Kt(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Qt._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Jt=function(e){function t(e,n,r,i){var a,o;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,n.code,n.message))).operationType=r,a.user=i,Object.setPrototypeOf(Object(v.a)(Object(v.a)(a)),t.prototype),a.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r},a}return Object(d.a)(t,e),Object(c.a)(t,null,[{key:"_fromErrorAndOperation",value:function(e,n,r,i){return new t(e,n,r,i)}}]),t}(b.c);function Zt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Jt._fromErrorAndOperation(e,n,t,r);throw n})}function en(e){return new Set(e.map(function(e){return e.providerId}).filter(function(e){return!!e}))}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.l)(t),e.next=3,on(!0,r,n);case 3:return e.t0=fe,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=en(a||[]),r.providerData=r.providerData.filter(function(e){return o.has(e.providerId)}),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(e,t){return an.apply(this,arguments)}function an(){return(an=Object(p.a)(u.a.mark(function e(t,n){var r,i,a=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=be,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Qt._forOperation(t,"link",i));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(e,t,n){return un.apply(this,arguments)}function un(){return(un=Object(p.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(n);case 2:i=en(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",V(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sn(e,t){return cn.apply(this,arguments)}function cn(){return(cn=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c,l=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,be(t,Zt(i,a,n,t),r);case 6:return V((o=e.sent).idToken,i,"internal-error"),V(s=ge(o.idToken),i,"internal-error"),c=s.sub,V(t.uid===c,i,"user-mismatch"),e.abrupt("return",Qt._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&D(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}},e,null,[[3,15]])}))).apply(this,arguments)}function ln(e,t){return fn.apply(this,arguments)}function fn(){return(fn=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o,s=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Zt(t,i,n);case 4:return a=e.sent,e.next=7,Qt._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hn(e,t){return dn.apply(this,arguments)}function dn(){return(dn=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln($e(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pn(e,t){return vn.apply(this,arguments)}function vn(){return(vn=Object(p.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.l)(t),e.next=3,on(!1,r,n.providerId);case 3:return e.abrupt("return",rn(r,n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yn(e,t){return mn.apply(this,arguments)}function mn(){return(mn=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sn(Object(b.l)(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gn(e,t){return bn.apply(this,arguments)}function bn(){return(bn=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(t,"POST","/v1/accounts:signInWithCustomToken",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kn(e,t){return wn.apply(this,arguments)}function wn(){return(wn=Object(p.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=$e(t),e.next=3,gn(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Qt._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var On=function(){function e(t,n){Object(s.a)(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Object(c.a)(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?_n._fromServerResponse(e,t):D(e,"internal-error")}}]),e}(),_n=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,"phone",e))).phoneNumber=e.phoneInfo,n}return Object(d.a)(t,e),Object(c.a)(t,null,[{key:"_fromServerResponse",value:function(e,n){return new t(n)}}]),t}(On);function xn(e,t,n){var r;V((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),V("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(V(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(V(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function jn(e,t,n){return En.apply(this,arguments)}function En(){return(En=Object(p.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(b.l)(t),a={requestType:"PASSWORD_RESET",email:n},r&&xn(i,a,r),e.next=5,dt(i,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function In(e,t,n){return Tn.apply(this,arguments)}function Tn(){return(Tn=Object(p.a)(u.a.mark(function e(t,n,r){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(Object(b.l)(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Sn(e,t){return Cn.apply(this,arguments)}function Cn(){return(Cn=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(Object(b.l)(t),{oobCode:n});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function An(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.l)(t),e.next=3,tt(r,{oobCode:n});case 3:i=e.sent,V(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return V(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:V(i.mfaInfo,r,"internal-error");case 13:V(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=On._fromServerResponse($e(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rn(e,t){return Pn.apply(this,arguments)}function Pn(){return(Pn=Object(p.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An(Object(b.l)(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dn(e,t,n){return Ln.apply(this,arguments)}function Ln(){return(Ln=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),e.next=3,Kt(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Qt._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mn(e,t,n){return hn(Object(b.l)(e),Dt.credential(t,n))}function Un(e,t,n){return Fn.apply(this,arguments)}function Fn(){return(Fn=Object(p.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(b.l)(t),a={requestType:"EMAIL_SIGNIN",email:n},V(r.handleCodeInApp,i,"argument-error"),r&&xn(i,a,r),e.next=6,vt(i,a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vn(e,t){var n=Pt.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}function Bn(e,t,n){return qn.apply(this,arguments)}function qn(){return(qn=Object(p.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(b.l)(t),V((a=Dt.credentialWithLink(n,r||W()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",hn(i,a));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zn(e,t){return Hn.apply(this,arguments)}function Hn(){return(Hn=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:createAuthUri",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wn(e,t){return Kn.apply(this,arguments)}function Kn(){return(Kn=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=K()?W():"http://localhost",i={identifier:n,continueUri:r},e.next=4,zn(Object(b.l)(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gn(e,t){return Qn.apply(this,arguments)}function Qn(){return(Qn=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.l)(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&xn(r.auth,a,n),e.next=8,ft(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $n(e,t,n){return Yn.apply(this,arguments)}function Yn(){return(Yn=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(b.l)(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&xn(i.auth,o,r),e.next=8,mt(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xn(e,t){return Jn.apply(this,arguments)}function Jn(){return(Jn=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zn(e,t){return er.apply(this,arguments)}function er(){return(er=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Object(b.l)(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,be(a,Xn(a.auth,s));case 10:return c=e.sent,a.displayName=c.displayName||null,a.photoURL=c.photoUrl||null,(l=a.providerData.find(function(e){return"password"===e.providerId}))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tr(e,t){return rr(Object(b.l)(e),t,null)}function nr(e,t){return rr(Object(b.l)(e),null,t)}function rr(e,t,n){return ir.apply(this,arguments)}function ir(){return(ir=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,be(t,rt(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ar=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(s.a)(this,e),this.isNewUser=t,this.providerId=n,this.profile=r},or=function(e){function t(e,n,r,i){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e,n,r))).username=i,a}return Object(d.a)(t,e),t}(ar),ur=function(e){function t(e,n){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,e,"facebook.com",n))}return Object(d.a)(t,e),t}(ar),sr=function(e){function t(e,n){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,e,"github.com",n,"string"===typeof(null===n||void 0===n?void 0:n.login)?null===n||void 0===n?void 0:n.login:null))}return Object(d.a)(t,e),t}(or),cr=function(e){function t(e,n){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,e,"google.com",n))}return Object(d.a)(t,e),t}(ar),lr=function(e){function t(e,n,r){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,e,"twitter.com",n,r))}return Object(d.a)(t,e),t}(or);function fr(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ge(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ar(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ur(a,i);case"github.com":return new sr(a,i);case"google.com":return new cr(a,i);case"twitter.com":return new lr(a,i,e.screenName||null);case"custom":case"anonymous":return new ar(a,null);default:return new ar(a,r,i)}}(n)}var hr=function(){function e(t,n){Object(s.a)(this,e),this.type=t,this.credential=n}return Object(c.a)(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:Object(g.a)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),dr=function(){function e(t,n,r){Object(s.a)(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Object(c.a)(e,[{key:"resolveSignIn",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=$e(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map(function(e){return On._fromServerResponse(r,e)});V(i.mfaPendingCredential,r,"internal-error");var o=hr._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Object(p.a)(u.a.mark(function e(t){var a,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Qt._fromIdTokenResponse(r,n.operationType,s);case 11:return c=e.sent,e.next=14,r._updateCurrentUser(c.user);case 14:return e.abrupt("return",c);case 15:return V(n.user,r,"internal-error"),e.abrupt("return",Qt._forOperation(n.user,n.operationType,s));case 17:D(r,"internal-error");case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}]),e}();function pr(e,t){var n,r=Object(b.l)(e),i=t;return V(t.customData.operationType,r,"argument-error"),V(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),dr._fromError(r,i)}function vr(e,t){return ee(e,"POST","/v2/accounts/mfaEnrollment:start",Z(e,t))}var yr=function(){function e(t){var n=this;Object(s.a)(this,e),this.user=t,this.enrolledFactors=[],t._onReload(function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map(function(e){return On._fromServerResponse(t.auth,e)}))})}return Object(c.a)(e,[{key:"getSession",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hr,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,be(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,be(this.user,ee(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Z(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter(function(e){return e.uid!==n}),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a},e,this,[[10,15]])}));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),mr=new WeakMap;function gr(e){var t=Object(b.l)(e);return mr.has(t)||mr.set(t,yr._fromUser(t)),mr.get(t)}var br=function(){function e(t,n){Object(s.a)(this,e),this.storageRetriever=t,this.type=n}return Object(c.a)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var kr=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this,function(){return window.localStorage},"LOCAL"))).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Object(b.m)();return Fe(e)||We(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ke(),e._shouldAllowMigration=!0,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Object(b.r)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Object(p.a)(u.a.mark(function e(n,r){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(Object(h.a)(t.prototype),"_set",this).call(this,n,r);case 2:this.localCache[n]=JSON.stringify(r);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Object(p.a)(u.a.mark(function e(n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(Object(h.a)(t.prototype),"_get",this).call(this,n);case 2:return r=e.sent,this.localCache[n]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Object(p.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(Object(h.a)(t.prototype),"_remove",this).call(this,n);case 2:delete this.localCache[n];case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(br);kr.type="LOCAL";var wr=kr,Or=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,function(){return window.sessionStorage},"SESSION"))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),t}(br);Or.type="SESSION";var _r=Or;function xr(e){return Promise.all(e.map(function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()))}var jr=function(){function e(t){Object(s.a)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Object(c.a)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r,i,a,o,s,c,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),c=Array.from(s).map(function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=9,xr(c);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Er(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}jr.receivers=[];var Ir=function(){function e(t){Object(s.a)(this,e),this.target=t,this.handlers=new Set}return Object(c.a)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o,s=this,c=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise(function(e,u){var c=Er("",20);i.port1.start();var l=setTimeout(function(){u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout(function(){u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(function(){o&&s.removeMessageHandler(o)}));case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Tr(){return window}function Sr(){return"undefined"!==typeof Tr().WorkerGlobalScope&&"function"===typeof Tr().importScripts}function Cr(){return Ar.apply(this,arguments)}function Ar(){return(Ar=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))).apply(this,arguments)}function Nr(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Rr="firebaseLocalStorageDb",Pr=1,Dr="firebaseLocalStorage",Lr="fbase_key",Mr=function(){function e(t){Object(s.a)(this,e),this.request=t}return Object(c.a)(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function Ur(e,t){return e.transaction([Dr],t?"readwrite":"readonly").objectStore(Dr)}function Fr(){var e=indexedDB.deleteDatabase(Rr);return new Mr(e).toPromise()}function Vr(){var e=indexedDB.open(Rr,Pr);return new Promise(function(t,n){e.addEventListener("error",function(){n(e.error)}),e.addEventListener("upgradeneeded",function(){var t=e.result;try{t.createObjectStore(Dr,{keyPath:Lr})}catch(r){n(r)}}),e.addEventListener("success",Object(p.a)(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Dr)){n.next=12;break}return r.close(),n.next=5,Fr();case 5:return n.t0=t,n.next=8,Vr();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}},n)})))})}function Br(e,t,n){return qr.apply(this,arguments)}function qr(){return(qr=Object(p.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ur(t,!0).put((i={},Object(g.a)(i,Lr,n),Object(g.a)(i,"value",r),i)),e.abrupt("return",new Mr(a).toPromise());case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zr(e,t){return Hr.apply(this,arguments)}function Hr(){return(Hr=Object(p.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ur(t,!1).get(n),e.next=3,new Mr(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wr(e,t){var n=Ur(e,!0).delete(t);return new Mr(n).toPromise()}var Kr=function(){function e(){Object(s.a)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return Object(c.a)(e,[{key:"_openDb",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Vr();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sr()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=jr._getInstance(Sr()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Object(p.a)(u.a.mark(function e(n,r){var i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cr();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ir(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Nr()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}},e,this,[[2,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Vr();case 5:return t=e.sent,e.next=8,Br(t,"__sak","1");case 8:return e.next=10,Wr(t,"__sak");case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}},e,this,[[1,,4,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n){var r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries(function(e){return Br(e,t,n)});case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}},e)}))));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries(function(e){return zr(e,t)});case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries(function(e){return Wr(e,t)});case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}},e)}))));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n,r,i,a,o,s,c,l,f,h;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries(function(e){var t=Ur(e,!1).getAll();return new Mr(t).toPromise()});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=j(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,c=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(u){i.e(u)}finally{i.f()}for(l=0,f=Object.keys(this.localCache);l<f.length;l++)h=f[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Object(p.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}},t)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Kr.type="LOCAL";var Gr=Kr;function Qr(e,t){return ee(e,"POST","/v2/accounts/mfaSignIn:start",Z(e,t))}function $r(e){return Yr.apply(this,arguments)}function Yr(){return(Yr=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xr(e){return new Promise(function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=L("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Jr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Zr=1e12,ei=function(){function e(t){Object(s.a)(this,e),this.auth=t,this.counter=Zr,this._widgets=new Map}return Object(c.a)(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new ti(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Zr;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Zr;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Zr,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),ti=function(){function e(t,n,r){var i=this;Object(s.a)(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;V(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Object(c.a)(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout(function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ni=Jr("rcb"),ri=new Q(3e4,6e4),ii=function(){function e(){Object(s.a)(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Tr().grecaptcha}return Object(c.a)(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return V(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Tr().grecaptcha):new Promise(function(r,i){var a=Tr().setTimeout(function(){i(L(e,"network-request-failed"))},ri.get());Tr()[ni]=function(){Tr().clearTimeout(a),delete Tr()[ni];var o=Tr().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(L(e,"internal-error"))},Xr("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Object(b.z)({onload:ni,render:"explicit",hl:n}))).catch(function(){clearTimeout(a),i(L(e,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Tr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var ai=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"load",value:function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ei(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),oi="recaptcha",ui={theme:"light",type:"image"},si=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ui),r=arguments.length>2?arguments[2]:void 0;Object(s.a)(this,e),this.parameters=n,this.type=oi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$e(r),this.isInvisible="invisible"===this.parameters.size,V("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;V(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ai:new ii,this.validateStartingState()}return Object(c.a)(e,[{key:"verify",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n,r,i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise(function(e){i.tokenChangeListeners.add(function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))}),i.isInvisible&&n.execute(t)}));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(function(t){throw e.renderPromise=null,t}),this.renderPromise)}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(t){e.container.removeChild(t)})}},{key:"validateStartingState",value:function(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach(function(e){return e(n)}),"function"===typeof e)e(n);else if("string"===typeof e){var r=Tr()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){V(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return V(K()&&!Sr(),this.auth,"internal-error"),e.next=3,ci();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,$r(this.auth);case 8:V(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ci(){var e=null;return new Promise(function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()}).catch(function(t){throw e&&window.removeEventListener("load",e),t})}var li=function(){function e(t,n){Object(s.a)(this,e),this.verificationId=t,this.onConfirmation=n}return Object(c.a)(e,[{key:"confirm",value:function(e){var t=Rt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function fi(e,t,n){return hi.apply(this,arguments)}function hi(){return(hi=Object(p.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),e.next=3,mi(i,n,Object(b.l)(r));case 3:return a=e.sent,e.abrupt("return",new li(a,function(e){return hn(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function di(e,t,n){return pi.apply(this,arguments)}function pi(){return(pi=Object(p.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(b.l)(t),e.next=3,on(!1,i,"phone");case 3:return e.next=5,mi(i.auth,n,Object(b.l)(r));case 5:return a=e.sent,e.abrupt("return",new li(a,function(e){return pn(i,e)}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vi(e,t,n){return yi.apply(this,arguments)}function yi(){return(yi=Object(p.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(b.l)(t),e.next=3,mi(i.auth,n,Object(b.l)(r));case 3:return a=e.sent,e.abrupt("return",new li(a,function(e){return yn(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mi(e,t,n){return gi.apply(this,arguments)}function gi(){return(gi=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c,l,f,h,d;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,V("string"===typeof a,t,"argument-error"),V(r.type===oi,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return V("enroll"===s.type,t,"internal-error"),e.next=13,vr(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return V("signin"===s.type,t,"internal-error"),V(l=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Qr(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,It(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}},e,null,[[3,,31,34]])}))).apply(this,arguments)}function bi(e,t){return ki.apply(this,arguments)}function ki(){return(ki=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn(Object(b.l)(t),n);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var wi=function(){function e(t){Object(s.a)(this,e),this.providerId=e.PROVIDER_ID,this.auth=$e(t)}return Object(c.a)(e,[{key:"verifyPhoneNumber",value:function(e,t){return mi(this.auth,e,Object(b.l)(t))}}],[{key:"credential",value:function(e,t){return Rt._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Rt._fromTokenResponse(n,r):null}}]),e}();function Oi(e,t){return t?H(t):(V(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wi.PROVIDER_ID="phone",wi.PHONE_SIGN_IN_METHOD="phone";var _i=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,"custom","custom"))).params=e,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_getIdTokenResponse",value:function(e){return xt(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return xt(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return xt(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),t}(et);function xi(e){return ln(e.auth,new _i(e),e.bypassAuthState)}function ji(e){var t=e.auth,n=e.user;return V(n,t,"internal-error"),sn(n,new _i(e),e.bypassAuthState)}function Ei(e){return Ii.apply(this,arguments)}function Ii(){return(Ii=Object(p.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,V(r=t.user,n,"internal-error"),e.abrupt("return",rn(r,new _i(t),t.bypassAuthState));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ti=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(s.a)(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Object(c.a)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Object(p.a)(u.a.mark(function t(n,r){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}},e,this,[[5,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xi;case"linkViaPopup":case"linkViaRedirect":return Ei;case"reauthViaPopup":case"reauthViaRedirect":return ji;default:D(this.auth,"internal-error")}}},{key:"resolve",value:function(e){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Si=new Q(2e3,1e4);function Ci(e,t,n){return Ai.apply(this,arguments)}function Ai(){return(Ai=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),U(t,n,Lt),a=Oi(i,r),o=new Li(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ni(e,t,n){return Ri.apply(this,arguments)}function Ri(){return(Ri=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U((i=Object(b.l)(t)).auth,n,Lt),a=Oi(i.auth,r),o=new Li(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pi(e,t,n){return Di.apply(this,arguments)}function Di(){return(Di=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U((i=Object(b.l)(t)).auth,n,Lt),a=Oi(i.auth,r),o=new Li(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Li=function(e){function t(e,n,r,i,a){var o;return Object(s.a)(this,t),(o=Object(l.a)(this,Object(h.a)(t).call(this,e,n,i,a))).provider=r,o.authWindow=null,o.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=Object(v.a)(Object(v.a)(o)),o}return Object(d.a)(t,e),Object(c.a)(t,[{key:"executeNotNull",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return V(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q(1===this.filter.length,"Popup operations only handle one event"),t=Er(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(function(e){n.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,function(e){e||n.reject(L(n.auth,"web-storage-unsupported"))}),this.pollUserCancellation();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){this.reject(L(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;null!==(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)&&void 0!==r&&r.closed?e.pollId=window.setTimeout(function(){e.pollId=null,e.reject(L(e.auth,"popup-closed-by-user"))},2e3):e.pollId=window.setTimeout(t,Si.get())}()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}}]),t}(Ti);Li.currentPopupAction=null;var Mi="pendingRedirect",Ui=new Map,Fi=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(s.a)(this,t),(r=Object(l.a)(this,Object(h.a)(t).call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i))).eventId=null,r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"execute",value:function(){var e=Object(p.a)(u.a.mark(function e(){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ui.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Vi(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Object(f.a)(Object(h.a)(t.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,n=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),n=function(){return Promise.reject(e.t1)};case 20:Ui.set(this.auth._key(),n);case 21:return this.bypassAuthState||Ui.set(this.auth._key(),function(){return Promise.resolve(null)}),e.abrupt("return",n());case 23:case"end":return e.stop()}},e,this,[[2,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Object(p.a)(u.a.mark(function e(n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==n.type){e.next=4;break}return e.abrupt("return",Object(f.a)(Object(h.a)(t.prototype),"onAuthEvent",this).call(this,n));case 4:if("unknown"!==n.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!n.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(n.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Object(f.a)(Object(h.a)(t.prototype),"onAuthEvent",this).call(this,n));case 16:this.resolve(null);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),t}(Ti);function Vi(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=Object(p.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wi(n),i=Hi(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qi(e,t){return zi.apply(this,arguments)}function zi(){return(zi=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hi(t)._set(Wi(n),"true"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hi(e){return H(e._redirectPersistence)}function Wi(e){return De(Mi,e.config.apiKey,e.name)}function Ki(e,t,n){return function(e,t,n){return Gi.apply(this,arguments)}(e,t,n)}function Gi(){return(Gi=Object(p.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),U(t,n,Lt),a=Oi(i,r),e.next=5,qi(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qi(e,t,n){return function(e,t,n){return $i.apply(this,arguments)}(e,t,n)}function $i(){return($i=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U((i=Object(b.l)(t)).auth,n,Lt),a=Oi(i.auth,r),e.next=5,qi(a,i.auth);case 5:return e.next=7,na(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yi(e,t,n){return function(e,t,n){return Xi.apply(this,arguments)}(e,t,n)}function Xi(){return(Xi=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U((i=Object(b.l)(t)).auth,n,Lt),a=Oi(i.auth,r),e.next=5,on(!1,i,n.providerId);case 5:return e.next=7,qi(a,i.auth);case 7:return e.next=9,na(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ji(e,t){return Zi.apply(this,arguments)}function Zi(){return(Zi=Object(p.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e(t)._initializationPromise;case 2:return e.abrupt("return",ea(t,n,!1));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return(ta=Object(p.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=$e(t),a=Oi(i,n),o=new Fi(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function na(e){return ra.apply(this,arguments)}function ra(){return(ra=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Er("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ia=function(){function e(t){Object(s.a)(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Object(c.a)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oa(e);default:return!1}}(e)?n:(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0),n)}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!oa(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(L(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aa(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(aa(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function aa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function oa(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ua(e){return sa.apply(this,arguments)}function sa(){return(sa=Object(p.a)(u.a.mark(function e(t){var n,r=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",ee(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ca=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,la=/^https?/;function fa(){return(fa=Object(p.a)(u.a.mark(function e(t){var n,r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ua(t);case 4:n=e.sent,r=n.authorizedDomains,i=j(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ha(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:D(t,"unauthorized-domain");case 29:case"end":return e.stop()}},e,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function ha(e){var t=W(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!la.test(r))return!1;if(ca.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var da=new Q(3e4,6e4);function pa(){var e=Tr().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Object(m.a)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var va=null;function ya(e){return va=va||function(e){return new Promise(function(t,n){var r,i,a;function o(){pa(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){pa(),n(L(e,"network-request-failed"))},timeout:da.get()})}if(null===(i=null===(r=Tr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(null===(a=Tr().gapi)||void 0===a||!a.load){var u=Jr("iframefcb");return Tr()[u]=function(){gapi.load?o():n(L(e,"network-request-failed"))},Xr("https://apis.google.com/js/api.js?onload=".concat(u)).catch(function(e){return n(e)})}o()}}).catch(function(e){throw va=null,e})}(e)}var ma=new Q(5e3,15e3),ga="__/auth/iframe",ba="emulator/auth/iframe",ka={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oa(e){var t=e.config;V(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?$(t,ba):"https://".concat(e.config.authDomain,"/").concat(ga),r={apiKey:t.apiKey,appName:e.name,v:k.SDK_VERSION},i=wa.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Object(b.z)(r).slice(1))}function _a(e){return xa.apply(this,arguments)}function xa(){return(xa=Object(p.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ya(t);case 2:return n=e.sent,V(r=Tr().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Oa(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ka,dontclear:!0},function(e){return new Promise(function(){var n=Object(p.a)(u.a.mark(function n(r,i){var a,o,s;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Tr().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=L(t,"network-request-failed"),o=Tr().setTimeout(function(){i(a)},ma.get()),e.ping(s).then(s,function(){i(a)});case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ja={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ea=500,Ia=600,Ta="_blank",Sa="http://localhost",Ca=function(){function e(t){Object(s.a)(this,e),this.window=t,this.associatedEvent=null}return Object(c.a)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Aa(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ea,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ia,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ja),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Object(b.m)().toLowerCase();n&&(u=Ve(c)?Ta:n),Ue(c)&&(t=t||Sa,s.scrollbars="yes");var l=Object.entries(s).reduce(function(e,t){var n=Object(y.a)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")},"");if(function(){var e;return We(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Ca(null);var f=window.open(t||"",u,l);V(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Ca(f)}var Na="__/auth/handler",Ra="emulator/auth/handler";function Pa(e,t,n,r,i,a){V(e.config.authDomain,e,"auth-domain-config-required"),V(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:k.SDK_VERSION,eventId:i};if(t instanceof Lt){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Object(b.q)(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=Object(y.a)(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Mt){var h=t.getScopes().filter(function(e){return""!==e});h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var m=v[p];void 0===d[m]&&delete d[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Na);return $(t,Ra)}(e),"?").concat(Object(b.z)(d).slice(1))}var Da=function(){function e(){Object(s.a)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_r,this._completeRedirectFn=ea}return Object(c.a)(e,[{key:"_openPopup",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n,r,i){var a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Pa(t,n,r,W(),i),e.abrupt("return",Aa(t,o,Er()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n,r,i){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Pa(t,n,r,W(),i),Tr().location.href=a,e.abrupt("return",new Promise(function(){}));case 4:case"end":return e.stop()}var a},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(q(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(function(){delete t.eventManagers[n]}),o}},{key:"initAndGetManager",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(t);case 2:return n=e.sent,r=new ia(t),n.register("authEvent",function(e){return V(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),D(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fa.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ke()||Fe()||We()}}]),e}(),La=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,"phone"))).credential=e,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return ee(e,"POST","/v2/accounts/mfaEnrollment:finalize",Z(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return ee(e,"POST","/v2/accounts/mfaSignIn:finalize",Z(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new t(e)}}]),t}(function(){function e(t){Object(s.a)(this,e),this.factorId=t}return Object(c.a)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return B("unexpected MultiFactorSessionType")}}}]),e}()),Ma=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"assertion",value:function(e){return La._fromCredential(e)}}]),e}();Ma.FACTOR_ID="phone";var Ua,Fa="@firebase/auth",Va="0.19.10",Ba=function(){function e(t){Object(s.a)(this,e),this.auth=t,this.internalListeners=new Map}return Object(c.a)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function qa(){return window}Ua="Browser",Object(k._registerComponent)(new x.a("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){V(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),V(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Ua,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ge(Ua)},i=new Qe(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(H);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),Object(k._registerComponent)(new x.a("auth-internal",function(e){return function(e){return new Ba(e)}($e(e.getProvider("auth").getImmediate()))},"PRIVATE").setInstantiationMode("EXPLICIT")),Object(k.registerVersion)(Fa,Va,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ua)),Object(k.registerVersion)(Fa,Va,"esm2017"),n.d(t,"w",function(){return po}),n.d(t,"E",function(){return fo}),n.d(t,"a",function(){return T}),n.d(t,"b",function(){return et}),n.d(t,"c",function(){return Dt}),n.d(t,"d",function(){return Ft}),n.d(t,"e",function(){return Bt}),n.d(t,"f",function(){return Vt}),n.d(t,"g",function(){return Et}),n.d(t,"h",function(){return Ut}),n.d(t,"i",function(){return wi}),n.d(t,"j",function(){return Ma}),n.d(t,"k",function(){return I}),n.d(t,"l",function(){return si}),n.d(t,"m",function(){return qt}),n.d(t,"n",function(){return Ht}),n.d(t,"o",function(){return Wt}),n.d(t,"p",function(){return V}),n.d(t,"q",function(){return $e}),n.d(t,"r",function(){return D}),n.d(t,"s",function(){return Er}),n.d(t,"t",function(){return H}),n.d(t,"u",function(){return ea}),n.d(t,"v",function(){return De}),n.d(t,"x",function(){return Sn}),n.d(t,"y",function(){return wr}),n.d(t,"z",function(){return Da}),n.d(t,"A",function(){return _r}),n.d(t,"B",function(){return An}),n.d(t,"C",function(){return In}),n.d(t,"D",function(){return Xe}),n.d(t,"F",function(){return Dn}),n.d(t,"G",function(){return C}),n.d(t,"H",function(){return Wn}),n.d(t,"I",function(){return fr}),n.d(t,"J",function(){return pr}),n.d(t,"K",function(){return Ji}),n.d(t,"L",function(){return Pe}),n.d(t,"M",function(){return Gr}),n.d(t,"N",function(){return Vn}),n.d(t,"O",function(){return pn}),n.d(t,"P",function(){return di}),n.d(t,"Q",function(){return Pi}),n.d(t,"R",function(){return Yi}),n.d(t,"S",function(){return gr}),n.d(t,"T",function(){return yn}),n.d(t,"U",function(){return vi}),n.d(t,"V",function(){return Ni}),n.d(t,"W",function(){return Qi}),n.d(t,"X",function(){return Gn}),n.d(t,"Y",function(){return jn}),n.d(t,"Z",function(){return Un}),n.d(t,"ab",function(){return Yt}),n.d(t,"bb",function(){return hn}),n.d(t,"cb",function(){return kn}),n.d(t,"db",function(){return Mn}),n.d(t,"eb",function(){return Bn}),n.d(t,"fb",function(){return fi}),n.d(t,"gb",function(){return Ci}),n.d(t,"hb",function(){return Ki}),n.d(t,"ib",function(){return tn}),n.d(t,"jb",function(){return tr}),n.d(t,"kb",function(){return nr}),n.d(t,"lb",function(){return bi}),n.d(t,"mb",function(){return Zn}),n.d(t,"nb",function(){return $n}),n.d(t,"ob",function(){return Rn});var za=2e3;function Ha(e,t,n){return Wa.apply(this,arguments)}function Wa(){return(Wa=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=qa(),o=a.BuildInfo,q(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Xa(n.sessionId);case 4:return s=e.sent,c={},We()?c.ibi=o.packageName:qe()?c.apn=o.packageName:D(t,"operation-not-supported-in-this-environment"),o.displayName&&(c.appDisplayName=o.displayName),c.sessionId=s,e.abrupt("return",Pa(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ka(){return(Ka=Object(p.a)(u.a.mark(function e(t){var n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=qa(),r=n.BuildInfo,i={},We()?i.iosBundleId=r.packageName:qe()?i.androidPackageName=r.packageName:D(t,"operation-not-supported-in-this-environment"),e.next=5,ua(t,i);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ga(e){var t=qa().cordova;return new Promise(function(n){t.plugins.browsertab.isAvailable(function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(b.m)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}function Qa(e,t,n){return $a.apply(this,arguments)}function $a(){return($a=Object(p.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=qa(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise(function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout(function(){i(L(t,"redirect-cancelled-by-user"))},za))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),qe()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}});case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[2,,5,8]])}))).apply(this,arguments)}function Ya(e){var t,n,r,i,a,o,u,s,c,l,f=qa();V("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Xa(e){return Ja.apply(this,arguments)}function Ja(){return(Ja=Object(p.a)(u.a.mark(function e(t){var n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Za(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Za(e){if(q(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var eo=20,to=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).apply(this,arguments))).passiveListeners=new Set,e.initPromise=new Promise(function(t){e.resolveInialized=t}),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach(function(t){return t(e)}),Object(f.a)(Object(h.a)(t.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(ia);function no(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:uo(),postBody:null,tenantId:e.tenantId,error:L(e,"no-auth-event")}}function ro(e,t){return so()._set(co(e),t)}function io(e){return ao.apply(this,arguments)}function ao(){return(ao=Object(p.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,so()._get(co(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,so()._remove(co(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oo(e,t){var n,r,i=function(e){var t=lo(e),n=t.link?decodeURIComponent(t.link):void 0,r=lo(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return lo(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=lo(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?L(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function uo(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<eo;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function so(){return H(wr)}function co(e){return De("authEvent",e.config.apiKey,e.name)}function lo(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),o=(t=n,Object(r.a)(t)||Object(i.a)(t)||Object(a.a)()),u=(o[0],o.slice(1));return Object(b.A)(u.join("?"))}var fo=function(){function e(){Object(s.a)(this,e),this._redirectPersistence=_r,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ea}return Object(c.a)(e,[{key:"_initialize",value:function(){var e=Object(p.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new to(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){D(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Object(p.a)(u.a.mark(function e(t,n,r,i){var a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ya(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ui.clear(),e.next=10,this._originValidation(t);case 10:return o=no(t,r,i),e.next=13,ro(t,o);case 13:return e.next=15,Ha(t,o,n);case 15:return s=e.sent,e.next=18,Ga(s);case 18:return c=e.sent,e.abrupt("return",Qa(t,a,c));case 20:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ka.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=qa(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Object(p.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,io(e);case 2:t.onEvent(ho());case 3:case"end":return n.stop()}},n)})),500),s=function(){var n=Object(p.a)(u.a.mark(function n(r){var i,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,io(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=oo(i,r.url)),t.onEvent(a||ho());case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var c=i,l="".concat(a.packageName.toLowerCase(),"://");qa().handleOpenURL=function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&s({url:t}),"function"===typeof c)try{c(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}]),e}();function ho(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:L("no-auth-event")}}function po(e,t){$e(e)._logFramework(t)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return Ql}),n.d(t,"b",function(){return Hc}),n.d(t,"c",function(){return Sc}),n.d(t,"d",function(){return gc}),n.d(t,"e",function(){return _l}),n.d(t,"f",function(){return zc}),n.d(t,"g",function(){return M}),n.d(t,"h",function(){return Kc}),n.d(t,"i",function(){return xl}),n.d(t,"j",function(){return jl}),n.d(t,"k",function(){return Z}),n.d(t,"l",function(){return Xl}),n.d(t,"m",function(){return ge}),n.d(t,"n",function(){return Oe}),n.d(t,"o",function(){return ue}),n.d(t,"p",function(){return dc}),n.d(t,"q",function(){return P}),n.d(t,"r",function(){return ce}),n.d(t,"s",function(){return C}),n.d(t,"t",function(){return cc}),n.d(t,"u",function(){return lf}),n.d(t,"v",function(){return kf}),n.d(t,"w",function(){return bf}),n.d(t,"x",function(){return Lc}),n.d(t,"y",function(){return wc}),n.d(t,"z",function(){return Oc}),n.d(t,"A",function(){return mc}),n.d(t,"B",function(){return cf}),n.d(t,"C",function(){return mf}),n.d(t,"D",function(){return Fc}),n.d(t,"E",function(){return _c}),n.d(t,"F",function(){return Rc}),n.d(t,"G",function(){return Pc}),n.d(t,"H",function(){return Uc}),n.d(t,"I",function(){return zl}),n.d(t,"J",function(){return ql}),n.d(t,"K",function(){return Ac}),n.d(t,"L",function(){return df}),n.d(t,"M",function(){return Zl}),n.d(t,"N",function(){return tf}),n.d(t,"O",function(){return nf}),n.d(t,"P",function(){return rf}),n.d(t,"Q",function(){return af}),n.d(t,"R",function(){return of}),n.d(t,"S",function(){return wf}),n.d(t,"T",function(){return Ll}),n.d(t,"U",function(){return Ml}),n.d(t,"V",function(){return Vc}),n.d(t,"W",function(){return Bc}),n.d(t,"X",function(){return ff}),n.d(t,"Y",function(){return hf}),n.d(t,"Z",function(){return Pl}),n.d(t,"ab",function(){return Cl}),n.d(t,"bb",function(){return jc}),n.d(t,"cb",function(){return xc}),n.d(t,"db",function(){return yf}),n.d(t,"eb",function(){return gf}),n.d(t,"fb",function(){return uf}),n.d(t,"gb",function(){return I}),n.d(t,"hb",function(){return Il}),n.d(t,"ib",function(){return Vl}),n.d(t,"jb",function(){return Fl}),n.d(t,"kb",function(){return sf}),n.d(t,"lb",function(){return Mc}),n.d(t,"mb",function(){return Nl});var r=n(30),i=n(18),a=n(12),o=n(0),u=n.n(o),s=n(2),c=n(11),l=n(7),f=n(10),h=n(14),d=n(1),p=n(3),v=n(13),y=n(16),m=n(20),g=n(6),b=n(22);function k(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O="@firebase/firestore",_=function(){function e(t){Object(d.a)(this,e),this.uid=t}return Object(p.a)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();_.UNAUTHENTICATED=new _(null),_.GOOGLE_CREDENTIALS=new _("google-credentials-uid"),_.FIRST_PARTY=new _("first-party-uid"),_.MOCK_USER=new _("mock-user");var x="9.6.9",j=new m.b("@firebase/firestore");function E(){return j.logLevel}function I(e){j.setLogLevel(e)}function T(e){if(j.logLevel<=m.a.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(A);j.debug.apply(j,["Firestore (".concat(x,"): ").concat(e)].concat(Object(h.a)(i)))}}function S(e){if(j.logLevel<=m.a.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(A);j.error.apply(j,["Firestore (".concat(x,"): ").concat(e)].concat(Object(h.a)(i)))}}function C(e){if(j.logLevel<=m.a.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(A);j.warn.apply(j,["Firestore (".concat(x,"): ").concat(e)].concat(Object(h.a)(i)))}}function A(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(x,") INTERNAL ASSERTION FAILED: ")+e;throw S(t),new Error(t)}function R(e,t){e||N()}function P(e,t){e||N()}function D(e,t){return e}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,n))).code=e,r.message=n,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},r}return Object(f.a)(t,e),t}(g.c),U=function e(){var t=this;Object(d.a)(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},F=function e(t,n){Object(d.a)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))},V=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(_.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),B=function(){function e(t){Object(d.a)(this,e),this.token=t,this.changeListener=null}return Object(p.a)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),q=function(){function e(t){Object(d.a)(this,e),this.t=t,this.currentUser=_.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Object(p.a)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new U;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new U,e.enqueueRetryable(function(){return i(n.currentUser)})};var o=function(){var t=a;e.enqueueRetryable(Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}},e)})))},c=function(e){T("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit(function(e){return c(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new U)}},0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(R("string"==typeof n.accessToken),new F(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return R(null===e||"string"==typeof e),new _(e)}}]),e}(),z=function e(t,n,r){Object(d.a)(this,e),this.type="FirstParty",this.user=_.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)},H=function(){function e(t,n,r){Object(d.a)(this,e),this.h=t,this.l=n,this.m=r}return Object(p.a)(e,[{key:"getToken",value:function(){return Promise.resolve(new z(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(_.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),W=function e(t){Object(d.a)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)},K=function(){function e(t){Object(d.a)(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Object(p.a)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&T("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,T("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable(function(){return r(t)})};var i=function(e){T("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit(function(e){return i(e)}),setTimeout(function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(function(t){return t?(R("string"==typeof t.token),e.p=t.token,new W(t.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),G=function(){function e(t,n){var r=this;Object(d.a)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Object(p.a)(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Q(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}G.A=-1;var $=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Q(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Y(e,t){return e<t?-1:e>t?1:0}function X(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function J(e){return e+"\0"}var Z=function(){function e(t,n){if(Object(d.a)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new M(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new M(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Object(p.a)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ee=function(){function e(t){Object(d.a)(this,e),this.timestamp=t}return Object(p.a)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Z(0,0))}}]),e}();function te(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ne(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function re(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var ie=function(){function e(t,n,r){Object(d.a)(this,e),void 0===n?n=0:n>t.length&&N(),void 0===r?r=t.length-n:r>t.length-n&&N(),this.segments=t,this.offset=n,this.len=r}return Object(p.a)(e,[{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}},{key:"length",get:function(){return this.len}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ae=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new M(L.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Object(h.a)(u.split("/").filter(function(e){return e.length>0})))}return new t(e)}},{key:"emptyPath",value:function(){return new t([])}}]),t}(ie),oe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ue=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return oe.test(e)}},{key:"keyField",value:function(){return new t(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var n=[],r="",i=0,a=function(){if(0===r.length)throw new M(L.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new M(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new M(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new M(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}},{key:"emptyPath",value:function(){return new t([])}}]),t}(ie),se=function(){function e(t){Object(d.a)(this,e),this.fields=t,t.sort(ue.comparator)}return Object(p.a)(e,[{key:"covers",value:function(e){var t,n=k(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return X(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}]),e}();function ce(){return"undefined"!=typeof atob}var le=function(){function e(t){Object(d.a)(this,e),this.binaryString=t}return Object(p.a)(e,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Y(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();le.EMPTY_BYTE_STRING=new le("");var fe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function he(e){if(R(!!e),"string"==typeof e){var t=0,n=fe.exec(e);if(R(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:de(e.seconds),nanos:de(e.nanos)}}function de(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function pe(e){return"string"==typeof e?le.fromBase64String(e):le.fromUint8Array(e)}function ve(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ye(e){var t=he(e.mapValue.fields.__local_write_time__.timestampValue);return new Z(t.seconds,t.nanos)}var me=function e(t,n,r,i,a,o,u,s){Object(d.a)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s},ge=function(){function e(t,n){Object(d.a)(this,e),this.projectId=t,this.database=n||"(default)"}return Object(p.a)(e,[{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function be(e){return null==e}function ke(e){return 0===e&&1/e==-1/0}function we(e){return"number"==typeof e&&Number.isInteger(e)&&!ke(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Oe=function(){function e(t){Object(d.a)(this,e),this.path=t}return Object(p.a)(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ae.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}},{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}}],[{key:"fromPath",value:function(t){return new e(ae.fromString(t))}},{key:"fromName",value:function(t){return new e(ae.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ae.emptyPath())}},{key:"comparator",value:function(e,t){return ae.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ae(t.slice()))}}]),e}(),_e={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xe={nullValue:"NULL_VALUE"};function je(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ve(e)?4:Ue(e)?9:10:N()}function Ee(e,t){if(e===t)return!0;var n=je(e);if(n!==je(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ye(e).isEqual(ye(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=he(e.timestampValue),r=he(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return pe(e.bytesValue).isEqual(pe(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return de(e.geoPointValue.latitude)===de(t.geoPointValue.latitude)&&de(e.geoPointValue.longitude)===de(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return de(e.integerValue)===de(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=de(e.doubleValue),r=de(t.doubleValue);return n===r?ke(n)===ke(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return X(e.arrayValue.values||[],t.arrayValue.values||[],Ee);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(te(n)!==te(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ee(n[i],r[i])))return!1;return!0}(e,t);default:return N()}}function Ie(e,t){return void 0!==(e.values||[]).find(function(e){return Ee(e,t)})}function Te(e,t){if(e===t)return 0;var n=je(e),r=je(t);if(n!==r)return Y(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=de(e.integerValue||e.doubleValue),r=de(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Se(e.timestampValue,t.timestampValue);case 4:return Se(ye(e),ye(t));case 5:return Y(e.stringValue,t.stringValue);case 6:return function(e,t){var n=pe(e),r=pe(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Y(n[i],r[i]);if(0!==a)return a}return Y(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Y(de(e.latitude),de(t.latitude));return 0!==n?n:Y(de(e.longitude),de(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Te(n[i],r[i]);if(a)return a}return Y(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Y(r[o],a[o]);if(0!==u)return u;var s=Te(n[r[o]],i[a[o]]);if(0!==s)return s}return Y(r.length,a.length)}(e.mapValue,t.mapValue);default:throw N()}}function Se(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Y(e,t);var n=he(e),r=he(t),i=Y(n.seconds,r.seconds);return 0!==i?i:Y(n.nanos,r.nanos)}function Ce(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){var t=he(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?pe(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,Oe.fromName(r).toString()):"geoPointValue"in t?"geo(".concat((n=t.geoPointValue).latitude,",").concat(n.longitude,")"):"arrayValue"in t?function(t){var n,r="[",i=!0,a=k(t.values||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;i?i=!1:r+=",",r+=e(o)}}catch(u){a.e(u)}finally{a.f()}return r+"]"}(t.arrayValue):"mapValue"in t?function(t){var n,r=Object.keys(t.fields||{}).sort(),i="{",a=!0,o=k(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;a?a=!1:i+=",",i+="".concat(u,":").concat(e(t.fields[u]))}}catch(s){o.e(s)}finally{o.f()}return i+"}"}(t.mapValue):N();var n,r}(e)}function Ae(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ne(e){return!!e&&"integerValue"in e}function Re(e){return!!e&&"arrayValue"in e}function Pe(e){return!!e&&"nullValue"in e}function De(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Le(e){return!!e&&"mapValue"in e}function Me(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ne(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=Me(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Me(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ue(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Fe(e,t){return void 0===e?t:void 0===t||Te(e,t)>0?e:t}function Ve(e,t){return void 0===e?t:void 0===t||Te(e,t)<0?e:t}var Be=function(){function e(t){Object(d.a)(this,e),this.value=t}return Object(p.a)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Le(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Me(t)}},{key:"setAll",value:function(e){var t=this,n=ue.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Me(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Le(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ee(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Le(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ne(t,function(t,n){return e[t]=n});var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Me(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function qe(e){var t=[];return ne(e.fields,function(e,n){var r=new ue([e]);if(Le(n)){var i=qe(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=k(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)}),new se(t)}var ze=function(){function e(t,n,r,i,a,o){Object(d.a)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Object(p.a)(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Be.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Be.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ee.min(),ee.min(),Be.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,ee.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ee.min(),Be.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ee.min(),Be.empty(),2)}}]),e}(),He=function e(t,n,r,i){Object(d.a)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i};function We(e){return e.fields.find(function(e){return 2===e.kind})}function Ke(e){return e.fields.filter(function(e){return 2!==e.kind})}He.UNKNOWN_ID=-1;var Ge=function e(t,n){Object(d.a)(this,e),this.fieldPath=t,this.kind=n},Qe=function(){function e(t,n){Object(d.a)(this,e),this.sequenceNumber=t,this.offset=n}return Object(p.a)(e,null,[{key:"empty",value:function(){return new e(0,$e.min())}}]),e}(),$e=function(){function e(t,n,r){Object(d.a)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Object(p.a)(e,null,[{key:"min",value:function(){return new e(ee.min(),Oe.empty(),-1)}}]),e}(),Ye=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Object(d.a)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null};function Xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ye(e,t,n,r,i,a,o)}function Je(e){var t=D(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return(t=e).field.canonicalString()+t.op.toString()+Ce(t.value);var t}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return function(e){return e.field.canonicalString()+e.dir}(e)}).join(","),be(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(function(e){return Ce(e)}).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(function(e){return Ce(e)}).join(",")),t.P=n}return t.P}function Ze(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!dt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Ee(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vt(e.startAt,t.startAt)&&vt(e.endAt,t.endAt)}function et(e){return Oe.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function tt(e,t){return e.filters.filter(function(e){return e instanceof nt&&e.field.isEqual(t)})}var nt=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).field=e,i.op=n,i.value=r,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Te(t,this.value)):null!==t&&je(this.value)===je(t)&&this.v(Te(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return N()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.V(e,n,r):new rt(e,n,r):"array-contains"===n?new ut(e,r):"in"===n?new st(e,r):"not-in"===n?new ct(e,r):"array-contains-any"===n?new lt(e,r):new t(e,n,r)}},{key:"V",value:function(e,t,n){return"in"===t?new it(e,n):new at(e,n)}}]),t}(function(){return function e(){Object(d.a)(this,e)}}()),rt=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this,e,n,r))).key=Oe.fromName(r.referenceValue),i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=Oe.comparator(e.key,this.key);return this.v(t)}}]),t}(nt),it=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,"in",n))).keys=ot("in",n),r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),t}(nt),at=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,"not-in",n))).keys=ot("not-in",n),r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),t}(nt);function ot(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return Oe.fromName(e.referenceValue)})}var ut=function(e){function t(e,n){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,"array-contains",n))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Re(t)&&Ie(t.arrayValue,this.value)}}]),t}(nt),st=function(e){function t(e,n){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,"in",n))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ie(this.value.arrayValue,t)}}]),t}(nt),ct=function(e){function t(e,n){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,"not-in",n))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){if(Ie(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ie(this.value.arrayValue,t)}}]),t}(nt),lt=function(e){function t(e,n){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,"array-contains-any",n))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Re(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return Ie(t.value.arrayValue,e)})}}]),t}(nt),ft=function e(t,n){Object(d.a)(this,e),this.position=t,this.inclusive=n},ht=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Object(d.a)(this,e),this.field=t,this.dir=n};function dt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function pt(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Oe.comparator(Oe.fromName(o.referenceValue),n.key):Te(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function vt(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ee(e.position[n],t.position[n]))return!1;return!0}var yt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Object(d.a)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt};function mt(e,t,n,r,i,a,o,u){return new yt(e,t,n,r,i,a,o,u)}function gt(e){return new yt(e)}function bt(e){return!be(e.limit)&&"F"===e.limitType}function kt(e){return!be(e.limit)&&"L"===e.limitType}function wt(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ot(e){var t,n=k(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function _t(e){return null!==e.collectionGroup}function xt(e){var t=D(e);if(null===t.D){t.D=[];var n=Ot(t),r=wt(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new ht(n)),t.D.push(new ht(ue.keyField(),"asc"));else{var i,a=!1,o=k(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new ht(ue.keyField(),s))}}}return t.D}function jt(e){var t=D(e);if(!t.C)if("F"===t.limitType)t.C=Xe(t.path,t.collectionGroup,xt(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=k(xt(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new ht(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ft(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new ft(t.startAt.position,!t.startAt.inclusive):null;t.C=Xe(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Et(e,t,n){return new yt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function It(e,t){return Ze(jt(e),jt(t))&&e.limitType===t.limitType}function Tt(e){return"".concat(Je(jt(e)),"|lt:").concat(e.limitType)}function St(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Ce(t.value));var t}).join(", "),"]")),be(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)}).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(function(e){return Ce(e)}).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(function(e){return Ce(e)}).join(",")),"Target(".concat(t,")")}(jt(e)),"; limitType=").concat(e.limitType,")")}function Ct(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Oe.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=k(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=k(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=pt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,xt(e),t))&&!(e.endAt&&!function(e,t,n){var r=pt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,xt(e),t))}(e,t)}function At(e){return function(t,n){var r,i=!1,a=k(xt(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Nt(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Nt(e,t,n){var r=e.field.isKeyField()?Oe.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Te(r,i):N()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return N()}}function Rt(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ke(t)?"-0":t}}function Pt(e){return{integerValue:""+e}}function Dt(e,t){return we(t)?Pt(t):Rt(e,t)}var Lt=function e(){Object(d.a)(this,e),this._=void 0};function Mt(e,t,n){return e instanceof Vt?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Bt?qt(e,t):e instanceof zt?Ht(e,t):function(e,t){var n=Ft(e,t),r=Kt(n)+Kt(e.k);return Ne(n)&&Ne(e.k)?Pt(r):Rt(e.M,r)}(e,t)}function Ut(e,t,n){return e instanceof Bt?qt(e,t):e instanceof zt?Ht(e,t):n}function Ft(e,t){return e instanceof Wt?Ne(n=t)||n&&"doubleValue"in n?t:{integerValue:0}:null;var n}var Vt=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),t}(Lt),Bt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).elements=e,n}return Object(f.a)(t,e),t}(Lt);function qt(e,t){var n,r=Gt(t),i=k(e.elements);try{var a=function(){var e=n.value;r.some(function(t){return Ee(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var zt=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).elements=e,n}return Object(f.a)(t,e),t}(Lt);function Ht(e,t){var n,r=Gt(t),i=k(e.elements);try{var a=function(){var e=n.value;r=r.filter(function(t){return!Ee(t,e)})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Wt=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).M=e,r.k=n,r}return Object(f.a)(t,e),t}(Lt);function Kt(e){return de(e.integerValue||e.doubleValue)}function Gt(e){return Re(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Qt=function e(t,n){Object(d.a)(this,e),this.field=t,this.transform=n};var $t=function e(t,n){Object(d.a)(this,e),this.version=t,this.transformResults=n},Yt=function(){function e(t,n){Object(d.a)(this,e),this.updateTime=t,this.exists=n}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}},{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Xt(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Jt=function e(){Object(d.a)(this,e)};function Zt(e,t,n){e instanceof an?function(e,t,n){var r=e.value.clone(),i=sn(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof on?function(e,t,n){if(Xt(e.precondition,t)){var r=sn(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(un(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function en(e,t,n){e instanceof an?function(e,t,n){if(Xt(e.precondition,t)){var r=e.value.clone(),i=cn(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(rn(t),r).setHasLocalMutations()}}(e,t,n):e instanceof on?function(e,t,n){if(Xt(e.precondition,t)){var r=cn(e.fieldTransforms,n,t),i=t.data;i.setAll(un(e)),i.setAll(r),t.convertToFoundDocument(rn(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Xt(e.precondition,t)&&t.convertToNoDocument(ee.min())}(e,t)}function tn(e,t){var n,r=null,i=k(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ft(a.transform,o||null);null!=u&&(null==r&&(r=Be.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function nn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&X(e,t,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Bt&&t instanceof Bt||e instanceof zt&&t instanceof zt?X(e.elements,t.elements,Ee):e instanceof Wt&&t instanceof Wt?Ee(e.k,t.k):e instanceof Vt&&t instanceof Vt}(e.transform,t.transform)}(e,t)})}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function rn(e){return e.isFoundDocument()?e.version:ee.min()}var an=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).key=e,i.value=n,i.precondition=r,i.fieldTransforms=a,i.type=0,i}return Object(f.a)(t,e),t}(Jt),on=function(e){function t(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Object(d.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this))).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(f.a)(t,e),t}(Jt);function un(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function sn(e,t,n){var r=new Map;R(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ut(o,u,n[i]))}return r}function cn(e,t,n){var r,i=new Map,a=k(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Mt(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var ln,fn,hn=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(f.a)(t,e),t}(Jt),dn=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(f.a)(t,e),t}(Jt),pn=function e(t){Object(d.a)(this,e),this.count=t};function vn(e){switch(e){default:return N();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function yn(e){if(void 0===e)return S("GRPC error has no .code"),L.UNKNOWN;switch(e){case ln.OK:return L.OK;case ln.CANCELLED:return L.CANCELLED;case ln.UNKNOWN:return L.UNKNOWN;case ln.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case ln.INTERNAL:return L.INTERNAL;case ln.UNAVAILABLE:return L.UNAVAILABLE;case ln.UNAUTHENTICATED:return L.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case ln.NOT_FOUND:return L.NOT_FOUND;case ln.ALREADY_EXISTS:return L.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return L.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case ln.ABORTED:return L.ABORTED;case ln.OUT_OF_RANGE:return L.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return L.UNIMPLEMENTED;case ln.DATA_LOSS:return L.DATA_LOSS;default:return N()}}(fn=ln||(ln={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";var mn=function(){function e(t,n){Object(d.a)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Object(p.a)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var o=Object(a.a)(r.value,2),u=o[0],s=o[1];if(this.equalsFn(u,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ne(this.inner,function(t,n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var o=Object(a.a)(r.value,2),u=o[0],s=o[1];e(u,s)}}catch(c){i.e(c)}finally{i.f()}})}},{key:"isEmpty",value:function(){return re(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),gn=function(){function e(t,n){Object(d.a)(this,e),this.comparator=t,this.root=n||kn.EMPTY}return Object(p.a)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,kn.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kn.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new bn(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new bn(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new bn(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new bn(this.root,e,this.comparator,!0)}},{key:"size",get:function(){return this.root.size}}]),e}(),bn=function(){function e(t,n,r,i){Object(d.a)(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Object(p.a)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),kn=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Object(p.a)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw N();if(this.right.isRed())throw N();var e=this.left.check();if(e!==this.right.check())throw N();return e+(this.isRed()?0:1)}}]),e}();kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1,kn.EMPTY=new(function(){function e(){Object(d.a)(this,e),this.size=0}return Object(p.a)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new kn(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}},{key:"key",get:function(){throw N()}},{key:"value",get:function(){throw N()}},{key:"color",get:function(){throw N()}},{key:"left",get:function(){throw N()}},{key:"right",get:function(){throw N()}}]),e}());var wn=function(){function e(t){Object(d.a)(this,e),this.comparator=t,this.data=new gn(this.comparator)}return Object(p.a)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new On(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new On(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}},{key:"size",get:function(){return this.data.size}}]),e}(),On=function(){function e(t){Object(d.a)(this,e),this.iter=t}return Object(p.a)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function _n(e){return e.hasNext()?e.getNext():void 0}var xn=new gn(Oe.comparator);function jn(){return xn}var En=new gn(Oe.comparator);function In(){return En}function Tn(){return new mn(function(e){return e.toString()},function(e,t){return e.isEqual(t)})}var Sn=new gn(Oe.comparator),Cn=new wn(Oe.comparator);function An(){for(var e=Cn,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Nn=new wn(Y);function Rn(){return Nn}var Pn=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Object(p.a)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Dn.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ee.min(),r,Rn(),jn(),An())}}]),e}(),Dn=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Object(p.a)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(le.EMPTY_BYTE_STRING,n,An(),An(),An())}}]),e}(),Ln=function e(t,n,r,i){Object(d.a)(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.$=i},Mn=function e(t,n){Object(d.a)(this,e),this.targetId=t,this.F=n},Un=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:le.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(d.a)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},Fn=function(){function e(){Object(d.a)(this,e),this.B=0,this.L=qn(),this.q=le.EMPTY_BYTE_STRING,this.U=!1,this.K=!0}return Object(p.a)(e,[{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.q=e)}},{key:"H",value:function(){var e=An(),t=An(),n=An();return this.L.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:N()}}),new Dn(this.q,this.U,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=qn()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.U=!0}},{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.q}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}}]),e}(),Vn=function(){function e(t){Object(d.a)(this,e),this.nt=t,this.st=new Map,this.it=jn(),this.rt=Bn(),this.ot=new wn(Y)}return Object(p.a)(e,[{key:"at",value:function(e){var t,n=k(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.ct(r,e.key,e.$)}}catch(u){n.e(u)}finally{n.f()}var i,a=k(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.$)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:N()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(function(e,r){n.ft(r)&&t(r)})}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var i=r.target;if(et(i))if(0===n){var a=new Oe(i.path);this.ct(t,a,ze.newNoDocument(a,ee.min()))}else R(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach(function(r,i){var a=t.wt(i);if(a){if(r.current&&et(a.target)){var o=new Oe(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,ze.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}});var r=An();this.rt.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))}),this.it.forEach(function(t,n){return n.setReadTime(e)});var i=new Pn(e,n,this.ot,this.it,r);return this.it=jn(),this.rt=Bn(),this.ot=new wn(Y),i}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Fn,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new wn(Y),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Fn),this.nt.getRemoteKeysForTarget(e).forEach(function(n){t.ct(e,n,null)})}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Bn(){return new gn(Oe.comparator)}function qn(){return new gn(Oe.comparator)}var zn={asc:"ASCENDING",desc:"DESCENDING"},Hn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wn=function e(t,n){Object(d.a)(this,e),this.databaseId=t,this.N=n};function Kn(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gn(e,t){return e.N?t.toBase64():t.toUint8Array()}function Qn(e,t){return Kn(e,t.toTimestamp())}function $n(e){return R(!!e),ee.fromTimestamp(function(e){var t=he(e);return new Z(t.seconds,t.nanos)}(e))}function Yn(e,t){return function(e){return new ae(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Xn(e){var t=ae.fromString(e);return R(br(t)),t}function Jn(e,t){return Yn(e.databaseId,t.path)}function Zn(e,t){var n=Xn(t);if(n.get(1)!==e.databaseId.projectId)throw new M(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Oe(rr(n))}function er(e,t){return Yn(e.databaseId,t)}function tr(e){var t=Xn(e);return 4===t.length?ae.emptyPath():rr(t)}function nr(e){return new ae(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rr(e){return R(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ir(e,t,n){return{name:Jn(e,t),fields:n.value.mapValue.fields}}function ar(e,t,n){var r=Zn(e,t.name),i=$n(t.updateTime),a=new Be({mapValue:{fields:t.fields}}),o=ze.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function or(e,t){return"found"in t?function(e,t){R(!!t.found),t.found.name,t.found.updateTime;var n=Zn(e,t.found.name),r=$n(t.found.updateTime),i=new Be({mapValue:{fields:t.found.fields}});return ze.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){R(!!t.missing),R(!!t.readTime);var n=Zn(e,t.missing),r=$n(t.readTime);return ze.newNoDocument(n,r)}(e,t):N()}function ur(e,t){var n;if(t instanceof an)n={update:ir(e,t.key,t.value)};else if(t instanceof hn)n={delete:Jn(e,t.key)};else if(t instanceof on)n={update:ir(e,t.key,t.data),updateMask:gr(t.fieldMask)};else{if(!(t instanceof dn))return N();n={verify:Jn(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof Vt)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bt)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof zt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wt)return{fieldPath:t.field.canonicalString(),increment:n.k};throw N()}(0,e)})),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Qn(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:N()}(e,t.precondition)),n}function sr(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Yt.updateTime($n(e.updateTime)):void 0!==e.exists?Yt.exists(e.exists):Yt.none()}(t.currentDocument):Yt.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;if("setToServerValue"in t)R("REQUEST_TIME"===t.setToServerValue),n=new Vt;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Bt(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new zt(i)}else"increment"in t?n=new Wt(e,t.increment):N();var a=ue.fromServerFormat(t.fieldPath);return new Qt(a,n)}(e,t)}):[];if(t.update){t.update.name;var i=Zn(e,t.update.name),a=new Be({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new se(t.map(function(e){return ue.fromServerFormat(e)}))}(t.updateMask);return new on(i,a,o,n,r)}return new an(i,a,n,r)}if(t.delete){var u=Zn(e,t.delete);return new hn(u,n)}if(t.verify){var s=Zn(e,t.verify);return new dn(s,n)}return N()}function cr(e,t){return{documents:[er(e,t.path)]}}function lr(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=er(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=er(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(De(e.value))return{unaryFilter:{field:pr(e.field),op:"IS_NAN"}};if(Pe(e.value))return{unaryFilter:{field:pr(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(De(e.value))return{unaryFilter:{field:pr(e.field),op:"IS_NOT_NAN"}};if(Pe(e.value))return{unaryFilter:{field:pr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pr(e.field),op:dr(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return function(e){return{field:pr(e.field),direction:hr(e.dir)}}(e)})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||be(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function fr(e){var t=tr(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){R(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[mr(t)]:void 0!==t.fieldFilter?[yr(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(e,t){return e.concat(t)}):N():[]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(e){return function(e){return new ht(vr(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}));var s=null;n.limit&&(s=function(e){var t;return be(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ft(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ft(n,t)}(n.endAt)),mt(t,i,u,o,s,"F",c,l)}function hr(e){return zn[e]}function dr(e){return Hn[e]}function pr(e){return{fieldPath:e.canonicalString()}}function vr(e){return ue.fromServerFormat(e.fieldPath)}function yr(e){return nt.create(vr(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return N()}}(e.fieldFilter.op),e.fieldFilter.value)}function mr(e){switch(e.unaryFilter.op){case"IS_NAN":var t=vr(e.unaryFilter.field);return nt.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=vr(e.unaryFilter.field);return nt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vr(e.unaryFilter.field);return nt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=vr(e.unaryFilter.field);return nt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return N()}}function gr(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function br(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function kr(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Or(t)),t=wr(e.get(n),t);return Or(t)}function wr(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Or(e){return e+"\x01\x01"}function _r(e){var t=e.length;if(R(t>=2),2===t)return R("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ae.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&N(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:N()}a=o+2}return new ae(r)}var xr=["userId","batchId"];function jr(e,t){return[e,kr(t)]}function Er(e,t,n){return[e,kr(t),n]}var Ir={},Tr=["parentPath","readTime"],Sr=["canonicalId","targetId"],Cr=["targetId","path"],Ar=["path","targetId"],Nr=["collectionId","parent"],Rr=["indexId","uid"],Pr=["uid","sequenceNumber"],Dr=["indexId","uid","arrayValue","directionalValue","documentKey"],Lr=["indexId","uid","documentKey"],Mr=["userId","collectionPath","documentId"],Ur=["userId","collectionPath","largestBatchId"],Fr=["userId","collectionGroup","largestBatchId"],Vr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Br=[].concat(Object(h.a)(Vr),["documentOverlays"]),qr=[].concat(Object(h.a)(Br),["indexConfiguration","indexState","indexEntries"]),zr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hr=function(){function e(){Object(d.a)(this,e),this.onCommittedListeners=[]}return Object(p.a)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}(),Wr=function(){function e(t){var n=this;Object(d.a)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return Object(p.a)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&N(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=k(t);try{var a=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}}]),e}(),Kr=function(){function e(t,n){var r=this;Object(d.a)(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new U,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new $r(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=ei(e.target.error);r.At.reject(new $r(t,n))}}return Object(p.a)(e,[{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(T("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Xr(t)}},{key:"Rt",get:function(){return this.At.promise}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new $r(n,t)}}}]),e}(),Gr=function(){function t(e,n,r){Object(d.a)(this,t),this.name=e,this.version=n,this.Pt=r,12.2===t.Vt(Object(g.m)())&&S("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Object(p.a)(t,[{key:"Nt",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return T("SimpleDb","Opening database:",this.name),e.next=5,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new $r(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new M(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new M(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new $r(t,n))},i.onupgradeneeded=function(e){T("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next(function(){T("SimpleDb","Database upgrade to version "+n.version+" complete")})}});case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o,s,c,l=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(u.a.mark(function e(){var n,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Nt(t);case 2:return l.db=e.sent,n=Kr.open(l.db,t,a?"readonly":"readwrite",r),(o=i(n).next(function(e){return n.bt(),e}).catch(function(e){return n.abort(e),Wr.reject(e)}).toPromise()).catch(function(){}),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}},e)})(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),c="FirebaseError"!==e.t1.name&&o<3,T("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return T("SimpleDb","Removing database:",e),Jr(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Object(g.s)())return!1;if(t.St())return!0;var e=Object(g.m)(),n=t.Vt(e),r=0<n&&n<10,i=t.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/croquistool",REACT_APP_API_KEY:"AIzaSyDH6rySddl7QAoqkwATwz7CgXrPe7LQis8",REACT_APP_APP_ID:"1:843301254465:web:046d03ff7cf7e8619f9dc0",REACT_APP_AUTH_DOMAIN:"croquistool.firebaseapp.com",REACT_APP_MEASUREMENT_ID:"G-JT9C23VQFT",REACT_APP_MESSAGIN_ID:"843301254465",REACT_APP_PROJECT_ID:"croquistool",REACT_APP_STORAGE_BUCKET:"croquistool.appspot.com"}))||void 0===t?void 0:t.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),t}(),Qr=function(){function e(t){Object(d.a)(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return Object(p.a)(e,[{key:"done",value:function(){this.Ft=!0}},{key:"qt",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Jr(this.$t.delete())}},{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}}]),e}(),$r=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,L.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(n)))).name="IndexedDbTransactionError",r}return Object(f.a)(t,e),t}(M);function Yr(e){return"IndexedDbTransactionError"===e.name}var Xr=function(){function e(t){Object(d.a)(this,e),this.store=t}return Object(p.a)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(T("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(T("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Jr(n)}},{key:"add",value:function(e){return T("SimpleDb","ADD",this.store.name,e,e),Jr(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Jr(this.store.get(e)).next(function(n){return void 0===n&&(n=null),T("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return T("SimpleDb","DELETE",this.store.name,e),Jr(this.store.delete(e))}},{key:"count",value:function(){return T("SimpleDb","COUNT",this.store.name),Jr(this.store.count())}},{key:"Ut",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,function(e,t){i.push(t)}).next(function(){return i})}var a=this.store.getAll(n.range);return new Wr(function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}})}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Wr(function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}})}},{key:"Qt",value:function(e,t){T("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,function(e,t,n){return n.delete()})}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Wr(function(n,r){t.onerror=function(e){var t=ei(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"Kt",value:function(e,t){var n=[];return new Wr(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Qr(i),o=t(i.primaryKey,i.value,a);if(o instanceof Wr){var u=o.catch(function(e){return a.done(),Wr.reject(e)});n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}}).next(function(){return Wr.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Jr(e){return new Wr(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ei(e.target.error);n(t)}})}var Zr=!1;function ei(e){var t=Gr.Vt(Object(g.m)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new M("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Zr||(Zr=!0,setTimeout(function(){throw r},0)),r}}return e}var ti=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).Ht=e,r.currentSequenceNumber=n,r}return Object(f.a)(t,e),t}(Hr);function ni(e,t){var n=D(e);return Gr.xt(n.Ht,t)}var ri=function(){function e(t,n,r,i){Object(d.a)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Object(p.a)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Zt(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=k(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&en(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=k(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&en(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ee.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},An())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&X(this.mutations,e.mutations,function(e,t){return nn(e,t)})&&X(this.baseMutations,e.baseMutations,function(e,t){return nn(e,t)})}}]),e}(),ii=function(){function e(t,n,r,i){Object(d.a)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Object(p.a)(e,null,[{key:"from",value:function(t,n,r){R(t.mutations.length===r.length);for(var i=Sn,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ai=function(){function e(t,n){Object(d.a)(this,e),this.largestBatchId=t,this.mutation=n}return Object(p.a)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),oi=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ee.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ee.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:le.EMPTY_BYTE_STRING;Object(d.a)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Object(p.a)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ui=function e(t){Object(d.a)(this,e),this.Jt=t};function si(e,t){var n;if(t.document)n=ar(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Oe.fromSegments(t.noDocument.path),i=di(t.noDocument.readTime);n=ze.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return N();var a=Oe.fromSegments(t.unknownDocument.path),o=di(t.unknownDocument.version);n=ze.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(fi(t.readTime)),n}function ci(e,t){var n=t.key.path.popLast().toArray(),r=li(t.readTime);if(t.isFoundDocument())return{document:function(e,t){return{name:Jn(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Kn(e,t.version.toTimestamp())}}(e.Jt,t),hasCommittedMutations:t.hasCommittedMutations,readTime:r,parentPath:n};if(t.isNoDocument()){var i=t.key.path.toArray(),a=t.hasCommittedMutations;return{noDocument:{path:i,readTime:hi(t.version)},hasCommittedMutations:a,readTime:r,parentPath:n}}return t.isUnknownDocument()?{unknownDocument:{path:t.key.path.toArray(),version:hi(t.version)},hasCommittedMutations:!0,readTime:r,parentPath:n}:N()}function li(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function fi(e){var t=new Z(e[0],e[1]);return ee.fromTimestamp(t)}function hi(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function di(e){var t=new Z(e.seconds,e.nanoseconds);return ee.fromTimestamp(t)}function pi(e,t){for(var n=(t.baseMutations||[]).map(function(t){return sr(e.Jt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map(function(t){return sr(e.Jt,t)}),u=Z.fromMillis(t.localWriteTimeMs);return new ri(t.batchId,u,n,o)}function vi(e){var t,n,r=di(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?di(e.lastLimboFreeSnapshotVersion):ee.min();return void 0!==e.query.documents?(R(1===(n=e.query).documents.length),t=jt(gt(tr(n.documents[0])))):t=function(e){return jt(fr(e))}(e.query),new oi(t,e.targetId,0,e.lastListenSequenceNumber,r,i,le.fromBase64String(e.resumeToken))}function yi(e,t){var n,r=hi(t.snapshotVersion),i=hi(t.lastLimboFreeSnapshotVersion);n=et(t.target)?cr(e.Jt,t.target):lr(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Je(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function mi(e){var t=fr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Et(t,t.limit,"L"):t}function gi(e,t){return new ai(t.largestBatchId,sr(e.Jt,t.overlayMutation))}function bi(e,t){var n=t.path.lastSegment();return[e,kr(t.path.popLast()),n]}var ki=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"getBundleMetadata",value:function(e,t){return wi(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:di(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return wi(e).put({bundleId:(n=t).id,createTime:hi($n(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Oi(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:mi(t.bundledQuery),readTime:di(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return Oi(e).put(function(e){return{name:e.name,readTime:hi($n(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function wi(e){return ni(e,"bundles")}function Oi(e){return ni(e,"namedQueries")}var _i=function(){function e(t,n){Object(d.a)(this,e),this.M=t,this.userId=n}return Object(p.a)(e,[{key:"getOverlay",value:function(e,t){var n=this;return xi(e).get(bi(this.userId,t)).next(function(e){return e?gi(n.M,e):null})}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach(function(n,a){var o=new ai(t,a);i.push(r.Xt(e,o))}),Wr.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach(function(e){return i.add(kr(e.getCollectionPath()))});var a=[];return i.forEach(function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(xi(e).Qt("collectionPathOverlayIndex",i))}),Wr.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Tn(),a=kr(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return xi(e).Ut("collectionPathOverlayIndex",o).next(function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=gi(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i})}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Tn(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xi(e).Wt({index:"collectionGroupOverlayIndex",range:u},function(e,t,n){var u=gi(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()}).next(function(){return o})}},{key:"Xt",value:function(e,t){return xi(e).put(function(e,t,n){var r=bi(t,n.mutation.key),i=Object(a.a)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ur(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function xi(e){return ni(e,"documentOverlays")}var ji=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(de(e.integerValue));else if("doubleValue"in e){var n=de(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),ke(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ae(pe(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ue(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Ue(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):N()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ue",value:function(e,t){var n=this;this.ne(t,37),Oe.fromName(e).path.forEach(function(e){n.ne(t,60),n.le(e,t)})}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function Ei(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ii(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ei(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ji.fe=new ji;var Ti=function(){function e(){Object(d.a)(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Object(p.a)(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Ii(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Ii(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Si=function(){function e(t){Object(d.a)(this,e),this.De=t}return Object(p.a)(e,[{key:"ae",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),Ci=function(){function e(t){Object(d.a)(this,e),this.De=t}return Object(p.a)(e,[{key:"ae",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Ai=function(){function e(){Object(d.a)(this,e),this.De=new Ti,this.Ce=new Si(this.De),this.xe=new Ci(this.De)}return Object(p.a)(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Ni=function(){function e(t,n,r,i){Object(d.a)(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Object(p.a)(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ri(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Pi(e.arrayValue,t.arrayValue))?n:0!==(n=Pi(e.directionalValue,t.directionalValue))?n:Oe.comparator(e.documentKey,t.documentKey)}function Pi(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Di=function(){function e(t){Object(d.a)(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=k(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.$e=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Object(p.a)(e,[{key:"Fe",value:function(e){var t=We(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Ke(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.$e){var a=n[r];if(!this.Le(this.$e,a)||!this.qe(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.qe(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=k(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"qe",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Li=function(){function e(){Object(d.a)(this,e),this.Ue=new Mi}return Object(p.a)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ue.add(t),Wr.resolve()}},{key:"getCollectionParents",value:function(e,t){return Wr.resolve(this.Ue.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Wr.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Wr.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Wr.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return Wr.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Wr.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Wr.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Wr.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Wr.resolve()}}]),e}(),Mi=function(){function e(){Object(d.a)(this,e),this.index={}}return Object(p.a)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wn(ae.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new wn(ae.comparator)).toArray()}}]),e}(),Ui=new Uint8Array(0),Fi=function(){function e(t){Object(d.a)(this,e),this.user=t,this.Ke=new Mi,this.Ge=new mn(function(e){return Je(e)},function(e,t){return Ze(e,t)}),this.uid=t.uid||""}return Object(p.a)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.Ke.add(t)});var a={collectionId:r,parent:kr(i)};return Vi(e).put(a)}return Wr.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[J(t),""],!1,!0);return Vi(e).Ut(r).next(function(e){var r,i=k(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(_r(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n})}},{key:"addFieldIndex",value:function(e,t){var n=qi(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(function(e){return[e.fieldPath.canonicalString(),e.kind]})}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=qi(e),r=zi(e),i=Bi(e);return n.delete(t.indexId).next(function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}).next(function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Bi(e),i=!0,a=new Map;return Wr.forEach(this.Qe(t),function(t){return n.getFieldIndex(e,t).next(function(e){i&&(i=!!e),a.set(t,e)})}).next(function(){if(i){var e=An();return Wr.forEach(a,function(i,a){var o;T("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map(function(e){return"".concat(e.fieldPath,":").concat(e.kind)}).join(",")))," to execute ").concat(Je(t)));var u=function(e,t){var n=We(i);if(void 0===n)return null;var r,a=k(tt(e,n.fieldPath));try{for(a.s();!(r=a.n()).done;){var o=r.value;switch(o.op){case"array-contains-any":return o.value.arrayValue.values||[];case"array-contains":return[o.value]}}}catch(u){a.e(u)}finally{a.f()}return null}(a),s=function(e,t){var n,r=new Map,i=k(Ke(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=k(tt(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=k(Ke(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=k(tt(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case"<":case"<=":d="nullValue"in(r=h.value)?xe:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Ae(ge.empty(),Oe.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:N();break;case"==":case"in":case">=":d=h.value;break;case">":d=h.value,p=!1;break;case"!=":case"not-in":d=xe}Fe(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.startAt.position[v];Fe(c,y)===y&&(c=y,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new ft(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=k(Ke(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=k(tt(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case">=":case">":d="nullValue"in(r=h.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Ae(ge.empty(),Oe.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?_e:N(),p=!1;break;case"==":case"in":case"<=":d=h.value;break;case"<":d=h.value,p=!1;break;case"!=":case"not-in":d=_e}Ve(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.endAt.position[v];Ve(c,y)===y&&(c=y,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new ft(i,a)}(a,i),f=n.je(i,a,c),h=n.je(i,a,l),d=n.We(i,a,s),p=n.ze(i.indexId,u,f,!!c&&c.inclusive,h,!!l&&l.inclusive,d);return Wr.forEach(p,function(n){return r.Gt(n,t.limit).next(function(t){t.forEach(function(t){e=e.add(new Oe(_r(t.documentKey)))})})})}).next(function(){return e})}return Wr.resolve(null)})}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):Ui,d=n?u.Je(e,f,n[s%c],r):u.Ye(e),p=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,Object(h.a)(u.createRange(d,p,o.map(function(t){return u.Je(e,f,t,!0)}))))},d=0;d<s;++d)f(d);return l}},{key:"Je",value:function(e,t,n,r){var i=new Ni(e,Oe.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Ni(e,Oe.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new Ni(e,Oe.empty(),Ui,Ui)}},{key:"getFieldIndex",value:function(e,t){var n=new Di(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(function(e){var t=e.filter(function(e){return n.Fe(e)});return t.sort(function(e,t){return t.fields.length-e.fields.length}),t.length>0?t[0]:null})}},{key:"Ze",value:function(e,t){var n,r=new Ai,i=k(Ke(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);ji.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Ai;return ji.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ai);var i,a=0,o=k(Ke(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=k(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.tn(t,s.fieldPath)&&Re(c))r=this.en(r,s,c);else{var h=f.Ne(s.kind);ji.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=Object(h.a)(e),a=[],o=k(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=k(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Ai;f.seed(l.Se()),ji.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find(function(e){return e instanceof nt&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)})}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=qi(e),i=zi(e);return(t?r.Ut("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.Ut()).next(function(e){var t=[];return Wr.forEach(e,function(e){return i.get([e.indexId,n.uid]).next(function(n){t.push(function(e,t){var n=t?new Qe(t.sequenceNumber,new $e(di(t.readTime),new Oe(_r(t.documentKey)),t.largestBatchId)):Qe.empty(),r=e.fields.map(function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return new Ge(ue.fromServerFormat(n),r)});return new He(e.indexId,e.collectionGroup,r,n)}(e,n))})}).next(function(){return t})})}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next(function(e){return 0===e.length?null:(e.sort(function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Y(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup)})}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=qi(e),a=zi(e);return this.sn(e).next(function(e){return i.Ut("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(function(t){return Wr.forEach(t,function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:hi(r.readTime),documentKey:kr(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))})})})}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Wr.forEach(t,function(t,i){var a=r.get(t.collectionGroup);return(a?Wr.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next(function(a){return r.set(t.collectionGroup,a),Wr.forEach(a,function(r){return n.rn(e,t,r).next(function(t){var a=n.on(i,r);return t.isEqual(a)?Wr.resolve():n.an(e,i,t,a)})})})})}},{key:"un",value:function(e,t,n){return Bi(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:kr(t.key.path)})}},{key:"cn",value:function(e,t,n){return Bi(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,kr(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=Bi(e),i=new wn(Ri);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,kr(t.path)])},function(e,r){i=i.add(new Ni(n.indexId,t,r.arrayValue,r.directionalValue))}).next(function(){return i})}},{key:"on",value:function(e,t){var n=new wn(Ri),r=this.Ze(t,e);if(null==r)return n;var i=We(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Re(a)){var o,u=k(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Ni(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Ni(t.indexId,e.key,Ui,r));return n}},{key:"an",value:function(e,t,n,r){var i=this;T("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=_n(a),s=_n(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=_n(o)):l?(i(u),u=_n(a)):(u=_n(a),s=_n(o))}}(n,r,Ri,function(n){a.push(i.un(e,t,n))},function(n){a.push(i.cn(e,t,n))}),Wr.waitFor(a)}},{key:"sn",value:function(e){var t=1;return zi(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},function(e,n,r){r.done(),t=n.sequenceNumber+1}).next(function(){return t})}},{key:"createRange",value:function(e,t,n){n=n.sort(function(e,t){return Ri(e,t)}).filter(function(e,t,n){return!t||0!==Ri(e,n[t-1])});var r=[];r.push(e);var i,a=k(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Ri(o,e),s=Ri(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function Vi(e){return ni(e,"collectionParents")}function Bi(e){return ni(e,"indexEntries")}function qi(e){return ni(e,"indexConfiguration")}function zi(e){return ni(e,"indexState")}var Hi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wi=function(){function e(t,n,r){Object(d.a)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Object(p.a)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ki(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},function(e,t,n){return u++,n.delete()});a.push(s.next(function(){R(1===u)}));var c,l=[],f=k(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Er(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Wr.waitFor(a).next(function(){return l})}function Gi(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw N();t=e.noDocument}return JSON.stringify(t).length}Wi.DEFAULT_COLLECTION_PERCENTILE=10,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wi.DEFAULT=new Wi(41943040,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wi.DISABLED=new Wi(-1,0,0);var Qi=function(){function e(t,n,r,i){Object(d.a)(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return Object(p.a)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yi(e).Wt({index:"userMutationsIndex",range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Xi(e),o=Yi(e);return o.add({}).next(function(u){R("number"==typeof u);var s,c=new ri(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map(function(t){return ur(e.Jt,t)}),i=n.mutations.map(function(t){return ur(e.Jt,t)});return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new wn(function(e,t){return Y(e.canonicalString(),t.canonicalString())}),d=k(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Er(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Ir))}}catch(y){d.e(y)}finally{d.f()}return h.forEach(function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.hn[u]=c.keys()}),Wr.waitFor(f).next(function(){return c})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Yi(e).get(t).next(function(e){return e?(R(e.userId===n.userId),pi(n.M,e)):null})}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?Wr.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Yi(e).Wt({index:"userMutationsIndex",range:i},function(e,t,i){t.userId===n.userId&&(R(t.batchId>=r),a=pi(n.M,t)),i.done()}).next(function(){return a})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Yi(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yi(e).Ut("userMutationsIndex",n).next(function(e){return e.map(function(e){return pi(t.M,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=jr(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Xi(e).Wt({range:i},function(r,i,u){var s=Object(a.a)(r,3),c=s[0],l=s[1],f=s[2],h=_r(l);if(c===n.userId&&t.path.isEqual(h))return Yi(e).get(f).next(function(e){if(!e)throw N();R(e.userId===n.userId),o.push(pi(n.M,e))});u.done()}).next(function(){return o})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new wn(Y),i=[];return t.forEach(function(t){var o=jr(n.userId,t.path),u=IDBKeyRange.lowerBound(o),s=Xi(e).Wt({range:u},function(e,i,o){var u=Object(a.a)(e,3),s=u[0],c=u[1],l=u[2],f=_r(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):o.done()});i.push(s)}),Wr.waitFor(i).next(function(){return n.fn(e,r)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,o=jr(this.userId,r),u=IDBKeyRange.lowerBound(o),s=new wn(Y);return Xi(e).Wt({range:u},function(e,t,o){var u=Object(a.a)(e,3),c=u[0],l=u[1],f=u[2],h=_r(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):o.done()}).next(function(){return n.fn(e,s)})}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Yi(e).get(t).next(function(e){if(null===e)throw N();R(e.userId===n.userId),r.push(pi(n.M,e))}))}),Wr.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ki(e.Ht,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.dn(t.batchId)}),Wr.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Wr.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Xi(e).Wt({range:r},function(e,n,r){if(e[0]===t.userId){var a=_r(e[1]);i.push(a)}else r.done()}).next(function(){R(0===i.length)})})}},{key:"containsKey",value:function(e,t){return $i(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return Ji(e).get(this.userId).next(function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}})}}],[{key:"Yt",value:function(t,n,r,i){return R(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function $i(e,t,n){var r=jr(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return Xi(e).Wt({range:o,jt:!0},function(e,n,r){var o=Object(a.a)(e,3),s=o[0],c=o[1];o[2];s===t&&c===i&&(u=!0),r.done()}).next(function(){return u})}function Yi(e){return ni(e,"mutations")}function Xi(e){return ni(e,"documentMutations")}function Ji(e){return ni(e,"mutationQueues")}var Zi=function(){function e(t){Object(d.a)(this,e),this.wn=t}return Object(p.a)(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),ea=function(){function e(t,n){Object(d.a)(this,e),this.referenceDelegate=t,this.M=n}return Object(p.a)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next(function(n){var r=new Zi(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next(function(e){return ee.fromTimestamp(new Z(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next(function(){return n.yn(e).next(function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ta(e).delete(t.targetId)}).next(function(){return n.yn(e)}).next(function(t){return R(t.targetCount>0),t.targetCount-=1,n.pn(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ta(e).Wt(function(o,u){var s=vi(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))}).next(function(){return Wr.waitFor(a)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return ta(e).Wt(function(e,n){var r=vi(n);t(r)})}},{key:"yn",value:function(e){return na(e).get("targetGlobalKey").next(function(e){return R(null!==e),e})}},{key:"pn",value:function(e,t){return na(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return ta(e).put(yi(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=Je(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ta(e).Wt({range:r,index:"queryTargetsIndex"},function(e,n,r){var a=vi(n);Ze(t,a.target)&&(i=a,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=ra(e);return t.forEach(function(t){var o=kr(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))}),Wr.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=ra(e);return Wr.forEach(t,function(t){var a=kr(t.path);return Wr.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=ra(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ra(e),i=An();return r.Wt({range:n,jt:!0},function(e,t,n){var r=_r(e[1]),a=new Oe(r);i=i.add(a)}).next(function(){return i})}},{key:"containsKey",value:function(e,t){var n=kr(t.path),r=IDBKeyRange.bound([n],[J(n)],!1,!0),i=0;return ra(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},function(e,t,n){var r=Object(a.a)(e,2),o=r[0];r[1];0!==o&&(i++,n.done())}).next(function(){return i>0})}},{key:"Et",value:function(e,t){return ta(e).get(t).next(function(e){return e?vi(e):null})}}]),e}();function ta(e){return ni(e,"targets")}function na(e){return ni(e,"targetGlobal")}function ra(e){return ni(e,"targetDocuments")}function ia(e){return aa.apply(this,arguments)}function aa(){return(aa=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===L.FAILED_PRECONDITION&&t.message===zr){e.next=2;break}throw t;case 2:T("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oa(e,t){var n=Object(a.a)(e,2),r=n[0],i=n[1],o=Object(a.a)(t,2),u=o[0],s=o[1],c=Y(r,u);return 0===c?Y(i,s):c}var ua=function(){function e(t){Object(d.a)(this,e),this.En=t,this.buffer=new wn(oa),this.An=0}return Object(p.a)(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();oa(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),sa=function(){function e(t,n){Object(d.a)(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return Object(p.a)(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;T("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Object(s.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Yr(n.t0)){n.next=12;break}T("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,ia(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}},n,null,[[1,6]])})))}},{key:"started",get:function(){return null!==this.Vn}}]),e}(),ca=function(){function e(t,n){Object(d.a)(this,e),this.Sn=t,this.params=n}return Object(p.a)(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Wr.resolve(G.A);var r=new ua(t);return this.Sn.forEachTarget(e,function(e){return r.bn(e.sequenceNumber)}).next(function(){return n.Sn.Cn(e,function(e){return r.bn(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; disabled"),Wr.resolve(Hi)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Hi):n.xn(e,t)})}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return s=Date.now(),E()<=m.a.DEBUG&&T("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Wr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),la=function(){function e(t,n){Object(d.a)(this,e),this.db=t,this.garbageCollector=function(e,t){return new ca(e,t)}(this,n)}return Object(p.a)(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return fa(e,n)}},{key:"removeReference",value:function(e,t,n){return fa(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return fa(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return Ji(e).zt(function(r){return $i(e,r,t).next(function(e){return e&&(n=!0),Wr.resolve(!e)})}).next(function(){return n})}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,function(o,u){if(u<=t){var s=n.Mn(e,o).next(function(t){if(!t)return a++,r.getEntry(e,o).next(function(){return r.removeEntry(o,ee.min()),ra(e).delete([0,kr(o.path)])})});i.push(s)}}).next(function(){return Wr.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return a})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return fa(e,t)}},{key:"kn",value:function(e,t){var n,r=ra(e),i=G.A;return r.Wt({index:"documentTargetsIndex"},function(e,r){var o=Object(a.a)(e,2),u=o[0],s=(o[1],r.path),c=r.sequenceNumber;0===u?(i!==G.A&&t(new Oe(_r(n)),i),i=c,n=s):i=G.A}).next(function(){i!==G.A&&t(new Oe(_r(n)),i)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function fa(e,t){return ra(e).put(function(e,t){return{targetId:0,path:kr(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ha=function(){function e(){Object(d.a)(this,e),this.changes=new mn(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return Object(p.a)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Wr.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),da=function(){function e(t){Object(d.a)(this,e),this.M=t}return Object(p.a)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return ya(e).put(ma(t),n)}},{key:"removeEntry",value:function(e,t){var n=ya(e),r=ma(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.On(e,r)})}},{key:"getEntry",value:function(e,t){var n=this;return ya(e).get(ma(t)).next(function(e){return n.$n(t,e)})}},{key:"Fn",value:function(e,t){var n=this;return ya(e).get(ma(t)).next(function(e){return{document:n.$n(t,e),size:Gi(e)}})}},{key:"getEntries",value:function(e,t){var n=this,r=jn();return this.Bn(e,t,function(e,t){var i=n.$n(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"Ln",value:function(e,t){var n=this,r=jn(),i=new gn(Oe.comparator);return this.Bn(e,t,function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Gi(t))}).next(function(){return{documents:r,qn:i}})}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return Wr.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return ya(e).Wt({range:r},function(e,t,r){for(var o=Oe.fromSegments(e);a&&Oe.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.qt(a.path.toArray()):r.done()}).next(function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}},{key:"getAll",value:function(e,t,n){var r=this,i=jn(),a=t.length+1,o={};if(n.isEqual(ee.min())){var u=t.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.toArray(),c=li(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index="collectionReadTimeIndex"}return ya(e).Wt(o,function(e,n,o){if(e.length===a){var u=r.$n(Oe.fromSegments(e),n);t.isPrefixOf(u.key.path)?i=i.insert(u.key,u):o.done()}}).next(function(){return i})}},{key:"newChangeBuffer",value:function(e){return new pa(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return va(e).get("remoteDocumentGlobalKey").next(function(e){return R(!!e),e})}},{key:"On",value:function(e,t){return va(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=si(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(ee.min()))return n}return ze.newInvalidDocument(e)}}]),e}(),pa=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).Un=e,r.trackRemovals=n,r.Kn=new mn(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new wn(function(e,t){return Y(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(a,o){var u=t.Kn.get(a);if(o.isValidDocument()){var s=ci(t.Un.M,o);i=i.add(a.path.popLast());var c=Gi(s);r+=c-u,n.push(t.Un.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=ci(t.Un.M,o.convertToNoDocument(ee.min()));n.push(t.Un.addEntry(e,a,l))}else n.push(t.Un.removeEntry(e,a))}),i.forEach(function(r){n.push(t.Un.indexManager.addToCollectionParentIndex(e,r))}),n.push(this.Un.updateMetadata(e,r)),Wr.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Un.Fn(e,t).next(function(e){return n.Kn.set(t,e.size),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Un.Ln(e,t).next(function(e){var t=e.documents;return e.qn.forEach(function(e,t){n.Kn.set(e,t)}),t})}}]),t}(ha);function va(e){return ni(e,"remoteDocumentGlobal")}function ya(e){return ni(e,"remoteDocuments")}function ma(e){return e.path.toArray()}var ga=function(){function e(t){Object(d.a)(this,e),this.M=t}return Object(p.a)(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Kr("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xr,{unique:!0}),e.createObjectStore("documentMutations")}(e),ba(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Wr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ba(e)),o=o.next(function(){return function(e){var t=a.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}()})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(e,t){return t.store("mutations").Ut().next(function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xr,{unique:!0});var r=t.store("mutations"),i=n.map(function(e){return r.put(e)});return Wr.waitFor(i)})}(e,a)})),o=o.next(function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(o=o.next(function(){return i.Gn(a)})),n<6&&r>=6&&(o=o.next(function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)})),n<7&&r>=7&&(o=o.next(function(){return i.jn(a)})),n<8&&r>=8&&(o=o.next(function(){return i.Wn(e,a)})),n<9&&r>=9&&(o=o.next(function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore("remoteDocuments");t.createIndex("readTimeIndex","readTime",{unique:!1}),t.createIndex("collectionReadTimeIndex",Tr,{unique:!1})}(t)})),n<10&&r>=10&&(o=o.next(function(){return i.zn(a)})),n<11&&r>=11&&(o=o.next(function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(o=o.next(function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Mr});t.createIndex("collectionPathOverlayIndex",Ur,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Fr,{unique:!1})}(e)})),n<13&&r>=13&&(o=o.next(function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Rr}).createIndex("sequenceNumberIndex",Pr,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Dr}).createIndex("documentKeyIndex",Lr,{unique:!1})}(e)})),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt(function(e,n){t+=Gi(n)}).next(function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}},{key:"Gn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.Ut().next(function(n){return Wr.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ut("userMutationsIndex",i).next(function(r){return Wr.forEach(r,function(r){R(r.userId===n.userId);var i=pi(t.M,r);return Ki(e,n.userId,i).next(function(){})})})})})}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(function(e){var r=[];return n.Wt(function(n,i){var a=new ae(n),o=[0,kr(a)];r.push(t.get(o).next(function(n){return n?Wr.resolve():function(n){return t.put({targetId:0,path:kr(n),sequenceNumber:e.highestListenSequenceNumber})}(a)}))}).next(function(){return Wr.waitFor(r)})})}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Nr});var n=t.store("collectionParents"),r=new Mi,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:kr(i)})}};return t.store("remoteDocuments").Wt({jt:!0},function(e,t){var n=new ae(e);return i(n.popLast())}).next(function(){return t.store("documentMutations").Wt({jt:!0},function(e,t){var n=Object(a.a)(e,3),r=(n[0],n[1]),o=(n[2],_r(r));return i(o.popLast())})})}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt(function(e,r){var i=vi(r),a=yi(t.M,i);return n.put(a)})}}]),e}();function ba(e){e.createObjectStore("targetDocuments",{keyPath:Cr}).createIndex("documentTargetsIndex",Ar,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Sr,{unique:!0}),e.createObjectStore("targetGlobal")}var ka="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wa=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if(Object(d.a)(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hn=a,this.window=o,this.document=u,this.Jn=c,this.Yn=l,this.Xn=f,this.Zn=null,this.ts=!1,this.isPrimary=!1,this.networkEnabled=!0,this.es=null,this.inForeground=!1,this.ns=null,this.ss=null,this.rs=Number.NEGATIVE_INFINITY,this.os=function(e){return Promise.resolve()},!e.vt())throw new M(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new la(this,i),this.us=n+"main",this.M=new ui(s),this.cs=new Gr(this.us,this.Xn,new ga(this.M)),this.hs=new ea(this.referenceDelegate,this.M),this.ls=function(e){return new da(e)}(this.M),this.fs=new ki,this.window&&this.window.localStorage?this.ds=this.window.localStorage:(this.ds=null,!1===l&&S("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Object(p.a)(e,[{key:"start",value:function(){var e=this;return this._s().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new M(L.FAILED_PRECONDITION,ka);return e.ws(),e.gs(),e.ys(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.hs.getHighestSequenceNumber(t)})}).then(function(t){e.Zn=new G(t,e.Jn)}).then(function(){e.ts=!0}).catch(function(t){return e.cs&&e.cs.close(),Promise.reject(t)})}},{key:"ps",value:function(e){var t=this;return this.os=function(){var n=Object(s.a)(u.a.mark(function n(r){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.cs.Ot(function(){var t=Object(s.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hn.enqueueAndForget(Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t._s();case 4:case"end":return e.stop()}},e)}))))}},{key:"_s",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return _a(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next(function(){if(e.isPrimary)return e.Is(t).next(function(t){t||(e.isPrimary=!1,e.Hn.enqueueRetryable(function(){return e.os(!1)}))})}).next(function(){return e.Ts(t)}).next(function(n){return e.isPrimary&&!n?e.Es(t).next(function(){return!1}):!!n&&e.As(t).next(function(){return!0})})}).catch(function(t){if(Yr(t))return T("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return T("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Hn.enqueueRetryable(function(){return e.os(t)}),e.isPrimary=t})}},{key:"Is",value:function(e){var t=this;return Oa(e).get("owner").next(function(e){return Wr.resolve(t.Rs(e))})}},{key:"bs",value:function(e){return _a(e).delete(this.clientId)}},{key:"Ps",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i,a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vs(this.rs,18e5)){e.next=6;break}return this.rs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var t=ni(e,"clientMetadata");return t.Ut().next(function(e){var n=a.vs(e,18e5),r=e.filter(function(e){return-1===n.indexOf(e)});return Wr.forEach(r,function(e){return t.delete(e.clientId)}).next(function(){return r})})}).catch(function(){return[]});case 4:if(t=e.sent,this.ds){n=k(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ds.removeItem(this.Ss(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"ys",value:function(){var e=this;this.ss=this.Hn.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e._s().then(function(){return e.Ps()}).then(function(){return e.ys()})})}},{key:"Rs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ts",value:function(e){var t=this;return this.Yn?Wr.resolve(!0):Oa(e).get("owner").next(function(n){if(null!==n&&t.Vs(n.leaseTimestampMs,5e3)&&!t.Ds(n.ownerId)){if(t.Rs(n)&&t.networkEnabled)return!0;if(!t.Rs(n)){if(!n.allowTabSynchronization)throw new M(L.FAILED_PRECONDITION,ka);return!1}}return!(!t.networkEnabled||!t.inForeground)||_a(e).Ut().next(function(e){return void 0===t.vs(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&T("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ts=!1,this.Cs(),this.ss&&(this.ss.cancel(),this.ss=null),this.xs(),this.Ns(),e.next=7,this.cs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],function(e){var n=new ti(e,G.A);return t.Es(n).next(function(){return t.bs(n)})});case 7:this.cs.close(),this.ks();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"vs",value:function(e,t){var n=this;return e.filter(function(e){return n.Vs(e.updateTimeMs,t)&&!n.Ds(e.clientId)})}},{key:"Ms",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return _a(t).Ut().next(function(t){return e.vs(t,18e5).map(function(e){return e.clientId})})})}},{key:"getMutationQueue",value:function(e,t){return Qi.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.hs}},{key:"getRemoteDocumentCache",value:function(){return this.ls}},{key:"getIndexManager",value:function(e){return new Fi(e)}},{key:"getDocumentOverlayCache",value:function(e){return _i.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.fs}},{key:"runTransaction",value:function(e,t,n){var r=this;T("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=13===(i=this.Xn)?qr:12===i?Br:11===i?Vr:void N();return this.cs.runTransaction(e,o,u,function(i){return a=new ti(i,r.Zn?r.Zn.next():G.A),"readwrite-primary"===t?r.Is(a).next(function(e){return!!e||r.Ts(a)}).next(function(t){if(!t)throw S("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hn.enqueueRetryable(function(){return r.os(!1)}),new M(L.FAILED_PRECONDITION,zr);return n(a)}).next(function(e){return r.As(a).next(function(){return e})}):r.Os(a).next(function(){return n(a)})}).then(function(e){return a.raiseOnCommittedEvent(),e})}},{key:"Os",value:function(e){var t=this;return Oa(e).get("owner").next(function(e){if(null!==e&&t.Vs(e.leaseTimestampMs,5e3)&&!t.Ds(e.ownerId)&&!t.Rs(e)&&!(t.Yn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new M(L.FAILED_PRECONDITION,ka)})}},{key:"As",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oa(e).put("owner",t)}},{key:"Es",value:function(e){var t=this,n=Oa(e);return n.get("owner").next(function(e){return t.Rs(e)?(T("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Wr.resolve()})}},{key:"Vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(S("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ws",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ns=function(){e.Hn.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e._s()})},this.document.addEventListener("visibilitychange",this.ns),this.inForeground="visible"===this.document.visibilityState)}},{key:"xs",value:function(){this.ns&&(this.document.removeEventListener("visibilitychange",this.ns),this.ns=null)}},{key:"gs",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.es=function(){t.Cs(),Object(g.w)()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hn.enterRestrictedMode(!0),t.Hn.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.es))}},{key:"Ns",value:function(){this.es&&(this.window.removeEventListener("pagehide",this.es),this.es=null)}},{key:"Ds",value:function(e){var t;try{var n=null!==(null===(t=this.ds)||void 0===t?void 0:t.getItem(this.Ss(e)));return T("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return S("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Cs",value:function(){if(this.ds)try{this.ds.setItem(this.Ss(this.clientId),String(Date.now()))}catch(e){S("Failed to set zombie client id.",e)}}},{key:"ks",value:function(){if(this.ds)try{this.ds.removeItem(this.Ss(this.clientId))}catch(e){}}},{key:"Ss",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}},{key:"started",get:function(){return this.ts}}],[{key:"vt",value:function(){return Gr.vt()}}]),e}();function Oa(e){return ni(e,"owner")}function _a(e){return ni(e,"clientMetadata")}function xa(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ja=function e(t,n){Object(d.a)(this,e),this.progress=t,this.$s=n},Ea=function(){function e(t,n,r){Object(d.a)(this,e),this.ls=t,this.Fs=n,this.indexManager=r}return Object(p.a)(e,[{key:"Bs",value:function(e,t){var n=this;return this.Fs.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.Ls(e,t,r)})}},{key:"Ls",value:function(e,t,n){return this.ls.getEntry(e,t).next(function(e){var t,r=k(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e})}},{key:"qs",value:function(e,t){e.forEach(function(e,n){var r,i=k(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}})}},{key:"Us",value:function(e,t){var n=this;return this.ls.getEntries(e,t).next(function(t){return n.Ks(e,t).next(function(){return t})})}},{key:"Ks",value:function(e,t){var n=this;return this.Fs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.qs(t,e)})}},{key:"Gs",value:function(e,t,n){return function(e){return Oe.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):_t(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new Oe(t)).next(function(e){var t=In();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=In();return this.indexManager.getCollectionParents(e,i).next(function(o){return Wr.forEach(o,function(o){var u=function(e,t){return new yt(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,u,n).next(function(e){e.forEach(function(e,t){a=a.insert(e,t)})})}).next(function(){return a})})}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.ls.getAll(e,t.path,n).next(function(n){return r=n,i.Fs.getAllMutationBatchesAffectingQuery(e,t)}).next(function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=k(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=ze.newInvalidDocument(s),r=r.insert(s,c)),en(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}}).next(function(){return r.forEach(function(e,n){Ct(t,n)||(r=r.remove(e))}),r})}}]),e}(),Ia=function(){function e(t,n,r,i){Object(d.a)(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return Object(p.a)(e,null,[{key:"Js",value:function(t,n){var r,i=An(),a=An(),o=k(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ta=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Gs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ee.min())?this.Zs(e,t):this.Xs.Us(e,r).next(function(a){var o=i.ti(t,a);return(bt(t)||kt(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(E()<=m.a.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),St(t)),i.Xs.Gs(e,t,n).next(function(e){return o.forEach(function(t){e=e.insert(t.key,t)}),e}))})}},{key:"ti",value:function(e,t){var n=new wn(At(e));return t.forEach(function(t,r){Ct(e,r)&&(n=n.add(r))}),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return E()<=m.a.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",St(t)),this.Xs.Gs(e,t,ee.min())}}]),e}(),Sa=function(){function e(t,n,r,i){Object(d.a)(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new gn(Y),this.ii=new mn(function(e){return Je(e)},Ze),this.ri=ee.min(),this.oi=t.getRemoteDocumentCache(),this.hs=t.getTargetCache(),this.fs=t.getBundleCache(),this.ai(r)}return Object(p.a)(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Fs=this.persistence.getMutationQueue(e,this.indexManager),this.ui=new Ea(this.oi,this.Fs,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ui)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.si)})}}]),e}();function Ca(e,t,n,r){return new Sa(e,t,n,r)}function Aa(e,t){return Na.apply(this,arguments)}function Na(){return(Na=Object(s.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.Fs.getAllMutationBatches(e).next(function(i){return t=i,r.ai(n),r.Fs.getAllMutationBatches(e)}).next(function(n){var i,a=[],o=[],u=An(),s=k(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=k(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,p=k(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=k(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(b){m.e(b)}finally{m.f()}}}catch(b){p.e(b)}finally{p.f()}return r.ui.Us(e,u).next(function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}})})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ra(e,t){var n=D(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Wr.resolve();return a.forEach(function(e){o=o.next(function(){return r.getEntry(t,e)}).next(function(t){var a=n.docVersions.get(e);R(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(function(){return e.Fs.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n.Fs.performConsistencyCheck(e)}).next(function(){return n.ui.Us(e,r)})})}function Pa(e){var t=D(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.hs.getLastRemoteSnapshotVersion(e)})}function Da(e,t){var n=D(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach(function(a,u){var s=i.get(u);if(s){o.push(n.hs.removeMatchingKeys(e,a.removedDocuments,u).next(function(){return n.hs.addMatchingKeys(e,a.addedDocuments,u)}));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(le.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.hs.updateTargetData(e,c))}});var u=jn();if(t.documentUpdates.forEach(function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(La(e,a,t.documentUpdates).next(function(e){u=e})),!r.isEqual(ee.min())){var s=n.hs.getLastRemoteSnapshotVersion(e).next(function(t){return n.hs.setTargetsMetadata(e,e.currentSequenceNumber,r)});o.push(s)}return Wr.waitFor(o).next(function(){return a.apply(e)}).next(function(){return n.ui.Ks(e,u)}).next(function(){return u})}).then(function(e){return n.si=i,e})}function La(e,t,n){var r=An();return n.forEach(function(e){return r=r.add(e)}),t.getEntries(e,r).next(function(e){var r=jn();return n.forEach(function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(ee.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):T("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),r})}function Ma(e,t){var n=D(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.Fs.getNextMutationBatchAfterBatchId(e,t)})}function Ua(e,t){var n=D(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.hs.getTargetData(e,t).next(function(i){return i?(r=i,Wr.resolve(r)):n.hs.allocateTargetId(e).next(function(i){return r=new oi(t,i,0,e.currentSequenceNumber),n.hs.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e})}function Fa(e,t,n){return Va.apply(this,arguments)}function Va(){return(Va=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=D(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Yr(e.t1)){e.next=12;break}throw e.t1;case 12:T("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function Ba(e,t,n){var r=D(e),i=ee.min(),a=An();return r.persistence.runTransaction("Execute query","readonly",function(e){return function(e,t,n){var r=D(e),i=r.ii.get(n);return void 0!==i?Wr.resolve(r.si.get(i)):r.hs.getTargetData(t,n)}(r,e,jt(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.hs.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.ni.Gs(e,t,n?i:ee.min(),n?a:An())}).next(function(e){return{documents:e,hi:a}})})}function qa(e,t){var n=D(e),r=D(n.hs),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.Et(e,t).next(function(e){return e?e.target:null})})}function za(e){var t=D(e);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return function(e,t,n){var r=D(e),i=jn(),a=li(n),o=ya(t),u=IDBKeyRange.lowerBound(a,!0);return o.Wt({index:"readTimeIndex",range:u},function(e,t){var n=si(r.M,t);i=i.insert(n.key,n),a=t.readTime}).next(function(){return{$s:i,readTime:fi(a)}})}(t.oi,e,t.ri)}).then(function(e){var n=e.$s,r=e.readTime;return t.ri=r,n})}function Ha(e){return Wa.apply(this,arguments)}function Wa(){return(Wa=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=D(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",function(e){return function(e){var t=ya(e),n=ee.min();return t.Wt({index:"readTimeIndex",reverse:!0},function(e,t,r){t.readTime&&(n=fi(t.readTime)),r.done()}).next(function(){return n})}(e)}).then(function(e){n.ri=e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ka(e,t,n,r){return Ga.apply(this,arguments)}function Ga(){return(Ga=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o,s,c,l,f,h,d,p,v;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=D(t),o=An(),s=jn(),c=k(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.li(f.metadata.name),f.document&&(o=o.add(h)),(d=n.fi(f)).setReadTime(n.di(f.metadata.readTime)),s=s.insert(h,d)}catch(u){c.e(u)}finally{c.f()}return p=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,Ua(a,function(e){return jt(gt(ae.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return La(e,p,s).next(function(t){return p.apply(e),t}).next(function(t){return a.hs.removeMatchingKeysForTargetId(e,v.targetId).next(function(){return a.hs.addMatchingKeys(e,o,v.targetId)}).next(function(){return a.ui.Ks(e,t)}).next(function(){return t})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qa(e,t){return $a.apply(this,arguments)}function $a(){return($a=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:An(),e.next=3,Ua(t,jt(mi(n.bundledQuery)));case 3:return i=e.sent,a=D(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=$n(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.fs.saveNamedQuery(e,n);var o=i.withResumeToken(le.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.hs.updateTargetData(e,o).next(function(){return a.hs.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return a.hs.addMatchingKeys(e,r,i.targetId)}).next(function(){return a.fs.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ya=function(){function e(t){Object(d.a)(this,e),this.M=t,this._i=new Map,this.wi=new Map}return Object(p.a)(e,[{key:"getBundleMetadata",value:function(e,t){return Wr.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:$n(n.createTime)}),Wr.resolve()}},{key:"getNamedQuery",value:function(e,t){return Wr.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:mi(e.bundledQuery),readTime:$n(e.readTime)}}(t)),Wr.resolve()}}]),e}(),Xa=function(){function e(){Object(d.a)(this,e),this.overlays=new gn(Oe.comparator),this.mi=new Map}return Object(p.a)(e,[{key:"getOverlay",value:function(e,t){return Wr.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach(function(n,i){r.Xt(e,t,i)}),Wr.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach(function(e){return r.overlays=r.overlays.remove(e)}),this.mi.delete(n)),Wr.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Tn(),i=t.length+1,a=new Oe(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Wr.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new gn(function(e,t){return e-t}),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Tn(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Tn(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach(function(e,t){return s.set(e,t)}),!(s.size()>=r)););return Wr.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ai(t,n));var a=this.mi.get(t);void 0===a&&(a=An(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),Ja=function(){function e(){Object(d.a)(this,e),this.gi=new wn(Za.yi),this.pi=new wn(Za.Ii)}return Object(p.a)(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Za(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.Ei(new Za(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"Ri",value:function(e){var t=this,n=new Oe(new ae([])),r=new Za(n,e),i=new Za(n,e+1),a=[];return this.pi.forEachInRange([r,i],function(e){t.Ei(e),a.push(e.key)}),a}},{key:"bi",value:function(){var e=this;this.gi.forEach(function(t){return e.Ei(t)})}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new Oe(new ae([])),n=new Za(t,e),r=new Za(t,e+1),i=An();return this.pi.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new Za(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Za=function(){function e(t,n){Object(d.a)(this,e),this.key=t,this.Vi=n}return Object(p.a)(e,null,[{key:"yi",value:function(e,t){return Oe.comparator(e.key,t.key)||Y(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return Y(e.Vi,t.Vi)||Oe.comparator(e.key,t.key)}}]),e}(),eo=function(){function e(t,n){Object(d.a)(this,e),this.indexManager=t,this.referenceDelegate=n,this.Fs=[],this.vi=1,this.Si=new wn(Za.yi)}return Object(p.a)(e,[{key:"checkEmpty",value:function(e){return Wr.resolve(0===this.Fs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.Fs.length>0&&this.Fs[this.Fs.length-1];var a=new ri(i,t,n,r);this.Fs.push(a);var o,u=k(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Si=this.Si.add(new Za(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Wr.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Wr.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return Wr.resolve(this.Fs.length>i?this.Fs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Wr.resolve(0===this.Fs.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return Wr.resolve(this.Fs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Za(t,0),i=new Za(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],function(e){var t=n.Di(e.Vi);a.push(t)}),Wr.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new wn(Y);return t.forEach(function(e){var t=new Za(e,0),i=new Za(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],function(e){r=r.add(e.Vi)})}),Wr.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Oe.isDocumentKey(i)||(i=i.child(""));var a=new Za(new Oe(i),0),o=new wn(Y);return this.Si.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)},a),Wr.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.Di(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;R(0===this.Ni(t.batchId,"removed")),this.Fs.shift();var r=this.Si;return Wr.forEach(t.mutations,function(i){var a=new Za(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.Si=r})}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Za(t,0),r=this.Si.firstAfterOrEqual(n);return Wr.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Fs.length,Wr.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.Fs.length?0:e-this.Fs[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.Fs.length?null:this.Fs[t]}}]),e}(),to=function(){function e(t){Object(d.a)(this,e),this.ki=t,this.docs=new gn(Oe.comparator),this.size=0}return Object(p.a)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Wr.resolve(n?n.document.mutableCopy():ze.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=jn();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ze.newInvalidDocument(e))}),Wr.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=jn(),i=new Oe(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||s.readTime.compareTo(n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Wr.resolve(r)}},{key:"Mi",value:function(e,t){return Wr.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new no(this)}},{key:"getSize",value:function(e){return Wr.resolve(this.size)}}]),e}(),no=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).Un=e,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.isValidDocument()?n.push(t.Un.addEntry(e,i)):t.Un.removeEntry(r)}),Wr.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Un.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Un.getEntries(e,t)}}]),t}(ha),ro=function(){function e(t){Object(d.a)(this,e),this.persistence=t,this.Oi=new mn(function(e){return Je(e)},Ze),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.$i=0,this.Fi=new Ja,this.targetCount=0,this.Bi=Zi.mn()}return Object(p.a)(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach(function(e,n){return t(n)}),Wr.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Wr.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Wr.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),Wr.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),Wr.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new Zi(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,Wr.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),Wr.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.Fi.Ri(t.targetId),this.targetCount-=1,Wr.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach(function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Wr.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return Wr.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return Wr.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Fi.Ti(t,n),Wr.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Fi.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),Wr.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Fi.Ri(t),Wr.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Fi.Pi(t);return Wr.resolve(n)}},{key:"containsKey",value:function(e,t){return Wr.resolve(this.Fi.containsKey(t))}}]),e}(),io=function(){function e(t,n){var r=this;Object(d.a)(this,e),this.Li={},this.overlays={},this.Zn=new G(0),this.ts=!1,this.ts=!0,this.referenceDelegate=t(this),this.hs=new ro(this),this.indexManager=new Li,this.ls=new to(function(e){return r.referenceDelegate.qi(e)}),this.M=new ui(n),this.fs=new Ya(this.M)}return Object(p.a)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ts=!1,Promise.resolve()}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Xa,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new eo(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.hs}},{key:"getRemoteDocumentCache",value:function(){return this.ls}},{key:"getBundleCache",value:function(){return this.fs}},{key:"runTransaction",value:function(e,t,n){var r=this;T("MemoryPersistence","Starting transaction:",e);var i=new ao(this.Zn.next());return this.referenceDelegate.Ui(),n(i).next(function(e){return r.referenceDelegate.Ki(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"Gi",value:function(e,t){return Wr.or(Object.values(this.Li).map(function(n){return function(){return n.containsKey(e,t)}}))}},{key:"started",get:function(){return this.ts}}]),e}(),ao=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).currentSequenceNumber=e,n}return Object(f.a)(t,e),t}(Hr),oo=function(){function e(t){Object(d.a)(this,e),this.persistence=t,this.Qi=new Ja,this.ji=null}return Object(p.a)(e,[{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),Wr.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),Wr.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),Wr.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach(function(e){return n.zi.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.zi.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"Ui",value:function(){this.ji=new Set}},{key:"Ki",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wr.forEach(this.zi,function(r){var i=Oe.fromPath(r);return t.Hi(e,i).next(function(e){e||n.removeEntry(i,ee.min())})}).next(function(){return t.ji=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next(function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())})}},{key:"qi",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return Wr.or([function(){return Wr.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gi(e,t)}])}},{key:"zi",get:function(){if(this.ji)return this.ji;throw N()}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function uo(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function so(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function co(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var lo=function(){function e(t,n,r,i){Object(d.a)(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Object(p.a)(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new M(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(S("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),fo=function(){function e(t,n,r){Object(d.a)(this,e),this.targetId=t,this.state=n,this.error=r}return Object(p.a)(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new M(i.error.code,i.error.message))),a?new e(t,i.state,r):(S("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ho=function(){function e(t,n){Object(d.a)(this,e),this.clientId=t,this.activeTargetIds=n}return Object(p.a)(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Rn(),o=0;i&&o<r.activeTargetIds.length;++o)i=we(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(S("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),po=function(){function e(t,n){Object(d.a)(this,e),this.clientId=t,this.onlineState=n}return Object(p.a)(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(S("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),vo=function(){function e(){Object(d.a)(this,e),this.activeTargetIds=Rn()}return Object(p.a)(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),yo=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.window=t,this.Hn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new gn(Y),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=uo(this.persistenceKey,this.tr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new vo),this.ur=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return Object(p.a)(e,[{key:"start",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i,a,o,s,c,l,f,h,d=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ms();case 2:t=e.sent,n=k(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(uo(this.persistenceKey,i)))&&(o=ho.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(s=this.storage.getItem(this.lr))&&(c=this.wr(s))&&this.mr(c),l=k(this.ir);try{for(l.s();!(f=l.n()).done;)h=f.value,this.nr(h)}catch(u){l.e(u)}finally{l.f()}this.ir=[],this.window.addEventListener("pagehide",function(){return d.shutdown()}),this.started=!0;case 28:case"end":return e.stop()}},e,this,[[4,16,19,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(co(this.persistenceKey,e));if(n){var r=fo.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(co(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.pr(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(){this.Ar()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return T("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){T("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){T("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(T("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void S("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hn.enqueueRetryable(Object(s.a)(u.a.mark(function e(){var r,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.ur.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=39;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=39;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(s));case 30:e.next=39;break;case 32:if(n.key!==t.ar){e.next=37;break}(c=function(e){var t=G.A;if(null!=e)try{var n=JSON.parse(e);R("number"==typeof n),t=n}catch(e){S("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==G.A&&t.sequenceNumberHandler(c),e.next=39;break;case 37:if(n.key!==t.dr){e.next=39;break}return e.abrupt("return",t.syncEngine.Cr());case 39:e.next=42;break;case 41:t.ir.push(n);case 42:case"end":return e.stop()}},e)})))}}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new lo(this.currentUser,e,t,n),i=so(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=so(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=co(this.persistenceKey,e),i=new fo(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(){this.setItem(this.dr,"value-not-used")}},{key:"Rr",value:function(e){var t=this.ur.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return ho.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return lo.Ji(new _(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return fo.Ji(r,t)}},{key:"wr",value:function(e){return po.Ji(e)}},{key:"vr",value:function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Nr(t.batchId,t.state,t.error));case 2:T("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.kr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach(function(e){i.has(e)||o.push(e)}),i.forEach(function(e){a.has(e)||u.push(e)}),this.syncEngine.Mr(o,u).then(function(){n.sr=r})}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Rn();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}},{key:"Ir",get:function(){return this.sr.get(this.tr)}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),mo=function(){function e(){Object(d.a)(this,e),this.Or=new vo,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Object(p.a)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Or.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Or.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Or.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Or.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Or.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Or=new vo,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),go=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"Fr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),bo=function(){function e(){var t=this;Object(d.a)(this,e),this.Br=function(){return t.Lr()},this.qr=function(){return t.Ur()},this.Kr=[],this.Gr()}return Object(p.a)(e,[{key:"Fr",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Br),window.removeEventListener("offline",this.qr)}},{key:"Gr",value:function(){window.addEventListener("online",this.Br),window.addEventListener("offline",this.qr)}},{key:"Lr",value:function(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=k(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ur",value:function(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=k(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ko={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wo=function(){function e(t){Object(d.a)(this,e),this.Qr=t.Qr,this.jr=t.jr}return Object(p.a)(e,[{key:"Wr",value:function(e){this.zr=e}},{key:"Hr",value:function(e){this.Jr=e}},{key:"onMessage",value:function(e){this.Yr=e}},{key:"close",value:function(){this.jr()}},{key:"send",value:function(e){this.Qr(e)}},{key:"Xr",value:function(){this.zr()}},{key:"Zr",value:function(e){this.Jr(e)}},{key:"eo",value:function(e){this.Yr(e)}}]),e}(),Oo=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"ao",value:function(e,t,n,r){return new Promise(function(i,a){var o=new b.g;o.listenOnce(b.c.COMPLETE,function(){try{switch(o.getLastErrorCode()){case b.a.NO_ERROR:var t=o.getResponseJson();T("Connection","XHR received:",JSON.stringify(t)),i(t);break;case b.a.TIMEOUT:T("Connection",'RPC "'+e+'" timed out'),a(new M(L.DEADLINE_EXCEEDED,"Request time out"));break;case b.a.HTTP_ERROR:var n=o.getStatus();if(T("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=r.status.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(t)>=0?t:L.UNKNOWN}();a(new M(u,r.message))}else a(new M(L.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new M(L.UNAVAILABLE,"Connection failed."));break;default:N()}}finally{T("Connection",'RPC "'+e+'" completed.')}});var u=JSON.stringify(r);o.send(t,"POST",u,n,15)})}},{key:"co",value:function(e,t,n){var r=[this.no,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(b.h)(),a=Object(b.i)(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new b.d({})),this.oo(o.initMessageHeaders,t,n),Object(g.t)()||Object(g.v)()||Object(g.p)()||Object(g.r)()||Object(g.x)()||Object(g.o)()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");T("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new wo({Qr:function(e){l?T("Connection","Not sending because WebChannel is closed:",e):(c||(T("Connection","Opening WebChannel transport."),s.open(),c=!0),T("Connection","WebChannel sending:",e),s.send(e))},jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return h(s,b.f.EventType.OPEN,function(){l||T("Connection","WebChannel transport opened.")}),h(s,b.f.EventType.CLOSE,function(){l||(l=!0,T("Connection","WebChannel transport closed"),f.Zr())}),h(s,b.f.EventType.ERROR,function(e){l||(l=!0,C("Connection","WebChannel transport errored:",e),f.Zr(new M(L.UNAVAILABLE,"The operation could not be completed")))}),h(s,b.f.EventType.MESSAGE,function(e){var t;if(!l){var n=e.data[0];R(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){T("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=ln[a];if(void 0!==t)return yn(t)}(),u=i.message;void 0===o&&(o=L.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Zr(new M(o,u)),s.close()}else T("Connection","WebChannel received:",n),f.eo(n)}}),h(a,b.b.STAT_EVENT,function(e){e.stat===b.e.PROXY?T("Connection","Detected buffering proxy"):e.stat===b.e.NOPROXY&&T("Connection","Detected no buffering proxy")}),setTimeout(function(){f.Xr()},0),f}}]),t}(function(){function e(t){Object(d.a)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.no=n+"://"+t.host,this.so="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Object(p.a)(e,[{key:"io",value:function(e,t,n,r,i){var a=this.ro(e,t);T("RestConnection","Sending: ",a,n);var o={};return this.oo(o,r,i),this.ao(e,a,o,n).then(function(e){return T("RestConnection","Received: ",e),e},function(t){throw C("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t})}},{key:"uo",value:function(e,t,n,r,i){return this.io(e,t,n,r,i)}},{key:"oo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+x,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(function(t,n){return e[n]=t}),n&&n.headers.forEach(function(t,n){return e[n]=t})}},{key:"ro",value:function(e,t){var n=ko[e];return"".concat(this.no,"/v1/").concat(t,":").concat(n)}}]),e}());function _o(){return"undefined"!=typeof window?window:null}function xo(){return"undefined"!=typeof document?document:null}function jo(e){return new Wn(e,!0)}var Eo=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Object(d.a)(this,e),this.Hn=t,this.timerId=n,this.ho=r,this.lo=i,this.fo=a,this._o=0,this.wo=null,this.mo=Date.now(),this.reset()}return Object(p.a)(e,[{key:"reset",value:function(){this._o=0}},{key:"yo",value:function(){this._o=this.fo}},{key:"po",value:function(e){var t=this;this.cancel();var n=Math.floor(this._o+this.Io()),r=Math.max(0,Date.now()-this.mo),i=Math.max(0,n-r);i>0&&T("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this._o," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.wo=this.Hn.enqueueAfterDelay(this.timerId,i,function(){return t.mo=Date.now(),e()}),this._o*=this.lo,this._o<this.ho&&(this._o=this.ho),this._o>this.fo&&(this._o=this.fo)}},{key:"To",value:function(){null!==this.wo&&(this.wo.skipDelay(),this.wo=null)}},{key:"cancel",value:function(){null!==this.wo&&(this.wo.cancel(),this.wo=null)}},{key:"Io",value:function(){return(Math.random()-.5)*this._o}}]),e}(),Io=function(){function e(t,n,r,i,a,o,u,s){Object(d.a)(this,e),this.Hn=t,this.Eo=r,this.Ao=i,this.Ro=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.bo=0,this.Po=null,this.Vo=null,this.stream=null,this.vo=new Eo(t,n)}return Object(p.a)(e,[{key:"So",value:function(){return 1===this.state||5===this.state||this.Do()}},{key:"Do",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Co()}},{key:"stop",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.So(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"xo",value:function(){this.state=0,this.vo.reset()}},{key:"No",value:function(){var e=this;this.Do()&&null===this.Po&&(this.Po=this.Hn.enqueueAfterDelay(this.Eo,6e4,function(){return e.ko()}))}},{key:"Mo",value:function(e){this.Oo(),this.stream.send(e)}},{key:"ko",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Do()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.Po&&(this.Po.cancel(),this.Po=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=Object(s.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.Oo(),this.$o(),this.vo.cancel(),this.bo++,4!==t?this.vo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(S(n.toString()),S("Using maximum backoff delay to prevent overloading the backend."),this.vo.yo()):n&&n.code===L.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Fo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Hr(n);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Bo(this.bo),n=this.bo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(t){var r=Object(a.a)(t,2),i=r[0],o=r[1];e.bo===n&&e.Lo(i,o)},function(n){t(function(){var t=new M(L.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)})})}},{key:"Lo",value:function(e,t){var n=this,r=this.Bo(this.bo);this.stream=this.Uo(e,t),this.stream.Wr(function(){r(function(){return n.state=2,n.Vo=n.Hn.enqueueAfterDelay(n.Ao,1e4,function(){return n.Do()&&(n.state=3),Promise.resolve()}),n.listener.Wr()})}),this.stream.Hr(function(e){r(function(){return n.qo(e)})}),this.stream.onMessage(function(e){r(function(){return n.onMessage(e)})})}},{key:"Co",value:function(){var e=this;this.state=5,this.vo.po(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"qo",value:function(e){return T("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Bo",value:function(e){var t=this;return function(n){t.Hn.enqueueAndForget(function(){return t.bo===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),To=function(e){function t(e,n,r,i,a,o){var u;return Object(d.a)(this,t),(u=Object(c.a)(this,Object(l.a)(t).call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o))).M=a,u}return Object(f.a)(t,e),Object(p.a)(t,[{key:"Uo",value:function(e,t){return this.Ro.co("Listen",e,t)}},{key:"onMessage",value:function(e){this.vo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:N()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(R(void 0===t||"string"==typeof t),le.fromBase64String(t||"")):(R(void 0===t||t instanceof Uint8Array),le.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?L.UNKNOWN:yn(e.code);return new M(t,e.message||"")}(o);n=new Un(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Zn(e,s.document.name),l=$n(s.document.updateTime),f=new Be({mapValue:{fields:s.document.fields}}),h=ze.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Ln(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Zn(e,v.document),m=v.readTime?$n(v.readTime):ee.min(),g=ze.newNoDocument(y,m),b=v.removedTargetIds||[];n=new Ln([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var k=t.documentRemove;k.document;var w=Zn(e,k.document),O=k.removedTargetIds||[];n=new Ln([],O,w,null)}else{if(!("filter"in t))return N();t.filter;var _=t.filter;_.targetId;var x=_.count||0,j=new pn(x),E=_.targetId;n=new Mn(E,j)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return ee.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ee.min():t.readTime?$n(t.readTime):ee.min()}(e);return this.listener.Ko(t,n)}},{key:"Go",value:function(e){var t={};t.database=nr(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=et(r)?{documents:cr(e,r)}:{query:lr(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Gn(e,t.resumeToken):t.snapshotVersion.compareTo(ee.min())>0&&(n.readTime=Kn(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return N()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Mo(t)}},{key:"Qo",value:function(e){var t={};t.database=nr(this.M),t.removeTarget=e,this.Mo(t)}}]),t}(Io),So=function(e){function t(e,n,r,i,a,o){var u;return Object(d.a)(this,t),(u=Object(c.a)(this,Object(l.a)(t).call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o))).M=a,u.jo=!1,u}return Object(f.a)(t,e),Object(p.a)(t,[{key:"start",value:function(){this.jo=!1,this.lastStreamToken=void 0,Object(i.a)(Object(l.a)(t.prototype),"start",this).call(this)}},{key:"Fo",value:function(){this.jo&&this.zo([])}},{key:"Uo",value:function(e,t){return this.Ro.co("Write",e,t)}},{key:"onMessage",value:function(e){if(R(!!e.streamToken),this.lastStreamToken=e.streamToken,this.jo){this.vo.reset();var t=function(e,t){return e&&e.length>0?(R(void 0!==t),e.map(function(e){return function(e,t){var n=e.updateTime?$n(e.updateTime):$n(t);return n.isEqual(ee.min())&&(n=$n(t)),new $t(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=$n(e.commitTime);return this.listener.Ho(n,t)}return R(!e.writeResults||0===e.writeResults.length),this.jo=!0,this.listener.Jo()}},{key:"Yo",value:function(){var e={};e.database=nr(this.M),this.Mo(e)}},{key:"zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return ur(t.M,e)})};this.Mo(n)}},{key:"Wo",get:function(){return this.jo}}]),t}(Io),Co=function(e){function t(e,n,r,i){var a;return Object(d.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this))).authCredentials=e,a.appCheckCredentials=n,a.Ro=r,a.M=i,a.Xo=!1,a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"Zo",value:function(){if(this.Xo)throw new M(L.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"io",value:function(e,t,n){var r=this;return this.Zo(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(i){var o=Object(a.a)(i,2),u=o[0],s=o[1];return r.Ro.io(e,t,n,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new M(L.UNKNOWN,e.toString())})}},{key:"uo",value:function(e,t,n){var r=this;return this.Zo(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(i){var o=Object(a.a)(i,2),u=o[0],s=o[1];return r.Ro.uo(e,t,n,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new M(L.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.Xo=!0}}]),t}(function(){return function e(){Object(d.a)(this,e)}}()),Ao=function(){function e(t,n){Object(d.a)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ta=0,this.ea=null,this.na=!0}return Object(p.a)(e,[{key:"sa",value:function(){var e=this;0===this.ta&&(this.ia("Unknown"),this.ea=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.ea=null,e.ra("Backend didn't respond within 10 seconds."),e.ia("Offline"),Promise.resolve()}))}},{key:"oa",value:function(e){"Online"===this.state?this.ia("Unknown"):(this.ta++,this.ta>=1&&(this.aa(),this.ra("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ia("Offline")))}},{key:"set",value:function(e){this.aa(),this.ta=0,"Online"===e&&(this.na=!1),this.ia(e)}},{key:"ia",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ra",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.na?(S(t),this.na=!1):T("OnlineStateTracker",t)}},{key:"aa",value:function(){null!==this.ea&&(this.ea.cancel(),this.ea=null)}}]),e}(),No=function e(t,n,r,i,a){var o=this;Object(d.a)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ua=[],this.ca=new Map,this.ha=new Set,this.la=[],this.fa=a,this.fa.Fr(function(e){r.enqueueAndForget(Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=zo(o),!e.t0){e.next=5;break}return T("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=D(t)).ha.add(4),e.next=4,Do(n);case 4:return n.da.set("Unknown"),n.ha.delete(4),e.next=8,Ro(n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}},e)})))}),this.da=new Ao(r,i)};function Ro(e){return Po.apply(this,arguments)}function Po(){return(Po=Object(s.a)(u.a.mark(function e(t){var n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!zo(t)){e.next=18;break}n=k(t.la),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function Do(e){return Lo.apply(this,arguments)}function Lo(){return(Lo=Object(s.a)(u.a.mark(function e(t){var n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=k(t.la),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function Mo(e,t){var n=D(e);n.ca.has(t.targetId)||(n.ca.set(t.targetId,t),qo(n)?Bo(n):gu(n).Do()&&Fo(n,t))}function Uo(e,t){var n=D(e),r=gu(n);n.ca.delete(t),r.Do()&&Vo(n,t),0===n.ca.size&&(r.Do()?r.No():zo(n)&&n.da.set("Unknown"))}function Fo(e,t){e._a.Z(t.targetId),gu(e).Go(t)}function Vo(e,t){e._a.Z(t),gu(e).Qo(t)}function Bo(e){e._a=new Vn({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.ca.get(t)||null}}),gu(e).start(),e.da.sa()}function qo(e){return zo(e)&&!gu(e).So()&&e.ca.size>0}function zo(e){return 0===D(e).ha.size}function Ho(e){e._a=void 0}function Wo(e){return Ko.apply(this,arguments)}function Ko(){return(Ko=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.ca.forEach(function(e,n){Fo(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Go(e,t){return Qo.apply(this,arguments)}function Qo(){return(Qo=Object(s.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ho(t),qo(t)?(t.da.oa(n),Bo(t)):t.da.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $o(e,t,n){return Yo.apply(this,arguments)}function Yo(){return(Yo=Object(s.a)(u.a.mark(function e(t,n,r){var i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.da.set("Online"),!(n instanceof Un&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=k(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.ca.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.ca.delete(o),t._a.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),T("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Xo(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof Ln?t._a.at(n):n instanceof Mn?t._a._t(n):t._a.ht(n),r.isEqual(ee.min())){e.next=29;break}return e.prev=14,e.next=17,Pa(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e._a.yt(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.ca.get(r);i&&e.ca.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.ca.get(t);if(n){e.ca.set(t,n.withResumeToken(le.EMPTY_BYTE_STRING,n.snapshotVersion)),Vo(e,t);var r=new oi(n.target,t,1,n.sequenceNumber);Fo(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),T("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Xo(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function Xo(e,t,n){return Jo.apply(this,arguments)}function Jo(){return(Jo=Object(s.a)(u.a.mark(function e(t,n,r){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Yr(n)){e.next=2;break}throw n;case 2:return t.ha.add(1),e.next=5,Do(t);case 5:t.da.set("Offline"),r||(r=function(){return Pa(t.localStore)}),t.asyncQueue.enqueueRetryable(Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.ha.delete(1),e.next=6,Ro(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zo(e,t){return t().catch(function(n){return Xo(e,n,t)})}function eu(e){return tu.apply(this,arguments)}function tu(){return(tu=Object(s.a)(u.a.mark(function e(t){var n,r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=D(t),r=bu(n),i=n.ua.length>0?n.ua[n.ua.length-1].batchId:-1;case 2:if(!nu(n)){e.next=19;break}return e.prev=3,e.next=6,Ma(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.ua.length&&r.No(),e.abrupt("break",19);case 10:i=a.batchId,ru(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Xo(n,e.t0);case 17:e.next=2;break;case 19:iu(n)&&au(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function nu(e){return zo(e)&&e.ua.length<10}function ru(e,t){e.ua.push(t);var n=bu(e);n.Do()&&n.Wo&&n.zo(t.mutations)}function iu(e){return zo(e)&&!bu(e).So()&&e.ua.length>0}function au(e){bu(e).start()}function ou(e){return uu.apply(this,arguments)}function uu(){return(uu=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:bu(t).Yo();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function su(e){return cu.apply(this,arguments)}function cu(){return(cu=Object(s.a)(u.a.mark(function e(t){var n,r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=bu(t),r=k(t.ua);try{for(r.s();!(i=r.n()).done;)a=i.value,n.zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lu(e,t,n){return fu.apply(this,arguments)}function fu(){return(fu=Object(s.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.ua.shift(),a=ii.from(i,n,r),e.next=3,Zo(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,eu(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hu(e,t){return du.apply(this,arguments)}function du(){return(du=Object(s.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&bu(t).Wo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!vn(i=n.code)||i===L.ABORTED){e.next=7;break}return r=t.ua.shift(),bu(t).xo(),e.next=5,Zo(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,eu(t);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:iu(t)&&au(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pu(e,t){return vu.apply(this,arguments)}function vu(){return(vu=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=D(t)).asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials"),i=zo(r),r.ha.add(3),e.next=6,Do(r);case 6:return i&&r.da.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.ha.delete(3),e.next=12,Ro(r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yu(e,t){return mu.apply(this,arguments)}function mu(){return(mu=Object(s.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=D(t),!n){e.next=7;break}return r.ha.delete(2),e.next=5,Ro(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.ha.add(2),e.next=12,Do(r);case 12:r.da.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gu(e){return e.wa||(e.wa=function(e,t,n){var r=D(e);return r.Zo(),new To(t,r.Ro,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Wr:Wo.bind(null,e),Hr:Go.bind(null,e),Ko:$o.bind(null,e)}),e.la.push(function(){var t=Object(s.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.wa.xo(),qo(e)?Bo(e):e.da.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.wa.stop();case 6:Ho(e);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.wa}function bu(e){return e.ma||(e.ma=function(e,t,n){var r=D(e);return r.Zo(),new So(t,r.Ro,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Wr:ou.bind(null,e),Hr:hu.bind(null,e),Jo:su.bind(null,e),Ho:lu.bind(null,e)}),e.la.push(function(){var t=Object(s.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.ma.xo(),t.next=4,eu(e);case 4:t.next=9;break;case 6:return t.next=8,e.ma.stop();case 8:e.ua.length>0&&(T("RemoteStore","Stopping write stream with ".concat(e.ua.length," pending writes")),e.ua=[]);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.ma}var ku=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new U,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return Object(p.a)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function wu(e,t){if(S("AsyncQueue","".concat(t,": ").concat(e)),Yr(e))return new M(L.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Ou=function(){function e(t){Object(d.a)(this,e),this.comparator=t?function(e,n){return t(e,n)||Oe.comparator(e.key,n.key)}:function(e,t){return Oe.comparator(e.key,t.key)},this.keyedMap=In(),this.sortedSet=new gn(this.comparator)}return Object(p.a)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},{key:"size",get:function(){return this.sortedSet.size}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),_u=function(){function e(){Object(d.a)(this,e),this.ga=new gn(Oe.comparator)}return Object(p.a)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):N():this.ga=this.ga.insert(t,e)}},{key:"ya",value:function(){var e=[];return this.ga.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),xu=function(){function e(t,n,r,i,a,o,u,s){Object(d.a)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Object(p.a)(e,[{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&It(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}},{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach(function(e){a.push({type:0,doc:e})}),new e(t,n,Ou.emptySet(n),a,r,i,!0,!1)}}]),e}(),ju=function e(){Object(d.a)(this,e),this.pa=void 0,this.listeners=[]},Eu=function e(){Object(d.a)(this,e),this.queries=new mn(function(e){return Tt(e)},It),this.onlineState="Unknown",this.Ia=new Set};function Iu(e,t){return Tu.apply(this,arguments)}function Tu(){return(Tu=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=D(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ju),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.pa=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=wu(e.t0,"Initialization of query '".concat(St(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ta(r.onlineState),o.pa&&n.Ea(o.pa)&&Au(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function Su(e,t){return Cu.apply(this,arguments)}function Cu(){return(Cu=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=D(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Au(e){e.Ia.forEach(function(e){e.next()})}var Nu=function(){function e(t,n,r){Object(d.a)(this,e),this.query=t,this.Aa=n,this.Ra=!1,this.ba=null,this.onlineState="Unknown",this.options=r||{}}return Object(p.a)(e,[{key:"Ea",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=k(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new xu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Ra?this.Pa(e)&&(this.Aa.next(e),a=!0):this.Va(e,this.onlineState)&&(this.va(e),a=!0),this.ba=e,a}},{key:"onError",value:function(e){this.Aa.error(e)}},{key:"Ta",value:function(e){this.onlineState=e;var t=!1;return this.ba&&!this.Ra&&this.Va(this.ba,e)&&(this.va(this.ba),t=!0),t}},{key:"Va",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Sa||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Pa",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ba&&this.ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"va",value:function(e){e=xu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Ra=!0,this.Aa.next(e)}}]),e}(),Ru=function(){function e(t,n){Object(d.a)(this,e),this.payload=t,this.byteLength=n}return Object(p.a)(e,[{key:"Da",value:function(){return"metadata"in this.payload}}]),e}(),Pu=function(){function e(t){Object(d.a)(this,e),this.M=t}return Object(p.a)(e,[{key:"li",value:function(e){return Zn(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?ar(this.M,e.document,!1):ze.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return $n(e)}}]),e}(),Du=function(){function e(t,n,r){Object(d.a)(this,e),this.Ca=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.progress=Lu(t)}return Object(p.a)(e,[{key:"xa",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Na",value:function(e){var t,n=new Map,r=new Pu(this.M),i=k(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.li(a.metadata.name),s=k(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||An()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(this.localStore,new Pu(this.M),this.documents,this.Ca.id);case 2:t=e.sent,n=this.Na(this.documents),r=k(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Qa(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new ja(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}},e,this,[[5,15,18,21]])}));return function(){return e.apply(this,arguments)}}()}]),e}();function Lu(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Mu=function e(t){Object(d.a)(this,e),this.key=t},Uu=function e(t){Object(d.a)(this,e),this.key=t},Fu=function(){function e(t,n){Object(d.a)(this,e),this.query=t,this.ka=n,this.Ma=null,this.current=!1,this.Oa=An(),this.mutatedKeys=An(),this.$a=At(t),this.Fa=new Ou(this.$a)}return Object(p.a)(e,[{key:"La",value:function(e,t){var n=this,r=t?t.qa:new _u,i=t?t.Fa:this.Fa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=bt(this.query)&&i.size===this.query.limit?i.last():null,c=kt(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),f=Ct(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ua(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.$a(f,s)>0||c&&n.$a(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))}),bt(this.query)||kt(this.query))for(;o.size>this.query.limit;){var l=bt(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Fa:o,qa:r,ei:u,mutatedKeys:a}}},{key:"Ua",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Fa;this.Fa=e.Fa,this.mutatedKeys=e.mutatedKeys;var a=e.qa.ya();a.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return N()}};return n(e)-n(t)}(e.type,t.type)||r.$a(e.doc,t.doc)}),this.Ka(n);var o=t?this.Ga():[],u=0===this.Oa.size&&this.current?1:0,s=u!==this.Ma;return this.Ma=u,0!==a.length||s?{snapshot:new xu(this.query,e.Fa,i,a,e.mutatedKeys,0===u,s,!1),Qa:o}:{Qa:o}}},{key:"Ta",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Fa:this.Fa,qa:new _u,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{Qa:[]}}},{key:"ja",value:function(e){return!this.ka.has(e)&&!!this.Fa.has(e)&&!this.Fa.get(e).hasLocalMutations}},{key:"Ka",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.ka=t.ka.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.ka=t.ka.delete(e)}),this.current=e.current)}},{key:"Ga",value:function(){var e=this;if(!this.current)return[];var t=this.Oa;this.Oa=An(),this.Fa.forEach(function(t){e.ja(t.key)&&(e.Oa=e.Oa.add(t.key))});var n=[];return t.forEach(function(t){e.Oa.has(t)||n.push(new Uu(t))}),this.Oa.forEach(function(e){t.has(e)||n.push(new Mu(e))}),n}},{key:"Wa",value:function(e){this.ka=e.hi,this.Oa=An();var t=this.La(e.documents);return this.applyChanges(t,!0)}},{key:"za",value:function(){return xu.fromInitialDocuments(this.query,this.Fa,this.mutatedKeys,0===this.Ma)}},{key:"Ba",get:function(){return this.ka}}]),e}(),Vu=function e(t,n,r){Object(d.a)(this,e),this.query=t,this.targetId=n,this.view=r},Bu=function e(t){Object(d.a)(this,e),this.key=t,this.Ha=!1},qu=function(){function e(t,n,r,i,a,o){Object(d.a)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ja={},this.Ya=new mn(function(e){return Tt(e)},It),this.Xa=new Map,this.Za=new Set,this.tu=new gn(Oe.comparator),this.eu=new Map,this.nu=new Ja,this.su={},this.iu=new Map,this.ru=Zi.gn(),this.onlineState="Unknown",this.ou=void 0}return Object(p.a)(e,[{key:"isPrimaryClient",get:function(){return!0===this.ou}}]),e}();function zu(e,t){return Hu.apply(this,arguments)}function Hu(){return(Hu=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ns(t),!(o=r.Ya.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.za(),e.next=15;break;case 6:return e.next=8,Ua(r.localStore,jt(n));case 8:return s=e.sent,r.isPrimaryClient&&Mo(r.remoteStore,s),c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Wu(r,n,i,"current"===c);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wu(e,t,n,r){return Ku.apply(this,arguments)}function Ku(){return(Ku=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o,c,l,f,h;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.au=function(e,n,r){return function(){var e=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.La(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,Ba(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.La(t,a)});case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(cs(t,n.targetId,s.Qa),s.snapshot));case 8:case"end":return e.stop()}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ba(t.localStore,n,!0);case 3:return a=e.sent,o=new Fu(n,a.hi),c=o.La(a.documents),l=Dn.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),f=o.applyChanges(c,t.isPrimaryClient,l),cs(t,r,f.Qa),h=new Vu(n,r,o),e.abrupt("return",(t.Ya.set(n,h),t.Xa.has(r)?t.Xa.get(r).push(n):t.Xa.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gu(e,t){return Qu.apply(this,arguments)}function Qu(){return(Qu=Object(s.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=D(t),i=r.Ya.get(n),!((a=r.Xa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Xa.set(i.targetId,a.filter(function(e){return!It(e,n)})),void r.Ya.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Fa(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),Uo(r.remoteStore,i.targetId),us(r,i.targetId)}).catch(ia);case 9:e.next=14;break;case 11:return us(r,i.targetId),e.next=14,Fa(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $u(e,t,n){return Yu.apply(this,arguments)}function Yu(){return(Yu=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rs(t),e.prev=1,e.next=4,function(e,t){var n,r=D(e),i=Z.now(),a=t.reduce(function(e,t){return e.add(t.key)},An());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.ui.Us(e,a).next(function(a){n=a;var o,u=[],s=k(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=tn(c,n.get(c.key));null!=l&&u.push(new on(c.key,l,qe(l.value.mapValue),Yt.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Fs.addMutationBatch(e,i,u,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.su[e.currentUser.toKey()];r||(r=new gn(Y)),r=r.insert(t,n),e.su[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,hs(i,a.changes);case 9:return e.next=11,eu(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=wu(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function Xu(e,t){return Ju.apply(this,arguments)}function Ju(){return(Ju=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(t),e.prev=1,e.next=4,Da(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.eu.get(t);n&&(R(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ha=!0:e.modifiedDocuments.size>0?R(n.Ha):e.removedDocuments.size>0&&(R(n.Ha),n.Ha=!1))}),e.next=8,hs(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ia(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Zu(e,t,n){var r=D(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ya.forEach(function(e,n){var r=n.view.Ta(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=D(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,a=k(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ta(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}}),r&&Au(n)}(r.eventManager,t),i.length&&r.Ja.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function es(){return(es=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=D(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.eu.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new gn(Oe.comparator)).insert(o,ze.newNoDocument(o,ee.min())),c=An().add(o),l=new Pn(ee.min(),new Map,new wn(Y),s,c),e.next=9,Xu(i,l);case 9:i.tu=i.tu.remove(o),i.eu.delete(n),fs(i),e.next=16;break;case 14:return e.next=16,Fa(i.localStore,n,!1).then(function(){return us(i,n,r)}).catch(ia);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ts(){return(ts=Object(s.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(t),i=n.batch.batchId,e.prev=1,e.next=4,Ra(r.localStore,n);case 4:return a=e.sent,os(r,i,null),as(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,hs(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ia(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function ns(){return(ns=Object(s.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=D(t),e.prev=1,e.next=4,function(e,t){var n=D(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.Fs.lookupMutationBatch(e,t).next(function(t){return R(null!==t),r=t.keys(),n.Fs.removeMutationBatch(e,t)}).next(function(){return n.Fs.performConsistencyCheck(e)}).next(function(){return n.ui.Us(e,r)})})}(i.localStore,n);case 4:return a=e.sent,os(i,n,r),as(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,hs(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ia(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return(is=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return zo((r=D(t)).remoteStore)||T("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=D(r.localStore);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.Fs.getHighestUnacknowledgedBatchId(e)})}();case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.iu.get(i)||[]).push(n),r.iu.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=wu(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function as(e,t){(e.iu.get(t)||[]).forEach(function(e){e.resolve()}),e.iu.delete(t)}function os(e,t,n){var r=D(e),i=r.su[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.su[r.currentUser.toKey()]=i}}function us(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=k(e.Xa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ya.delete(a),n&&e.Ja.uu(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Xa.delete(t),e.isPrimaryClient&&e.nu.Ri(t).forEach(function(t){e.nu.containsKey(t)||ss(e,t)})}function ss(e,t){e.Za.delete(t.path.canonicalString());var n=e.tu.get(t);null!==n&&(Uo(e.remoteStore,n),e.tu=e.tu.remove(t),e.eu.delete(n),fs(e))}function cs(e,t,n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Mu?(e.nu.addReference(a.key,t),ls(e,a)):a instanceof Uu?(T("SyncEngine","Document no longer in limbo: "+a.key),e.nu.removeReference(a.key,t),e.nu.containsKey(a.key)||ss(e,a.key)):N()}}catch(o){i.e(o)}finally{i.f()}}function ls(e,t){var n=t.key,r=n.path.canonicalString();e.tu.get(n)||e.Za.has(r)||(T("SyncEngine","New document in limbo: "+n),e.Za.add(r),fs(e))}function fs(e){for(;e.Za.size>0&&e.tu.size<e.maxConcurrentLimboResolutions;){var t=e.Za.values().next().value;e.Za.delete(t);var n=new Oe(ae.fromString(t)),r=e.ru.next();e.eu.set(r,new Bu(n)),e.tu=e.tu.insert(n,r),Mo(e.remoteStore,new oi(jt(gt(n.path)),r,2,G.A))}}function hs(e,t,n){return ds.apply(this,arguments)}function ds(){return(ds=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=D(t),a=[],o=[],c=[],e.t0=i.Ya.isEmpty(),e.t0){e.next=9;break}return i.Ya.forEach(function(e,t){c.push(i.au(t,n,r).then(function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Ia.Js(t.targetId,e);o.push(n)}}))}),e.next=6,Promise.all(c);case 6:return i.Ja.Ko(a),e.next=9,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c,l,f;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return Wr.forEach(n,function(t){return Wr.forEach(t.zs,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return Wr.forEach(t.Hs,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Yr(e.t0)){e.next=10;break}throw e.t0;case 10:T("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=k(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(c=r.si.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.si=r.si.insert(s,f))}catch(u){i.e(u)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ps(e,t){return vs.apply(this,arguments)}function vs(){return(vs=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=D(t)).currentUser.isEqual(n)){e.next=11;break}return T("SyncEngine","User change. New user:",n.toKey()),e.next=5,Aa(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.iu.forEach(function(e){e.forEach(function(e){e.reject(new M(L.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.iu.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,hs(r,i.ci);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ys(e,t){return ms.apply(this,arguments)}function ms(){return(ms=Object(s.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(t),e.next=3,Ba(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Wa(i),e.abrupt("return",(r.isPrimaryClient&&cs(r,n.targetId,a.Qa),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gs(e){return bs.apply(this,arguments)}function bs(){return(bs=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=D(t),e.abrupt("return",za(n.localStore).then(function(e){return hs(n,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ks(e,t,n,r){return ws.apply(this,arguments)}function ws(){return(ws=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(t),e.next=3,function(e,t){var n=D(e),r=D(n.Fs);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.ln(e,t).next(function(t){return t?n.ui.Us(e,t):Wr.resolve(null)})})}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,eu(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(os(a,n,i||null),as(a,n),function(e,t){D(D(e).Fs).dn(t)}(a.localStore,n)):N();case 11:return e.next=13,hs(a,o);case 13:e.next=16;break;case 15:T("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Os(e,t){return _s.apply(this,arguments)}function _s(){return(_s=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c,l,f;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ns(r=D(t)),Rs(r),!0!==n||!0===r.ou){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,xs(r,i.toArray());case 5:return a=e.sent,r.ou=!0,e.next=9,yu(r.remoteStore,!0);case 9:o=k(a);try{for(o.s();!(s=o.n()).done;)c=s.value,Mo(r.remoteStore,c)}catch(u){o.e(u)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ou){e.next=25;break}return l=[],f=Promise.resolve(),r.Xa.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then(function(){return us(r,t),Fa(r.localStore,t,!0)}),Uo(r.remoteStore,t)}),e.next=19,f;case 19:return e.next=21,xs(r,l);case 21:return function(e){var t=D(r);t.eu.forEach(function(e,n){Uo(t.remoteStore,n)}),t.nu.bi(),t.eu=new Map,t.tu=new gn(Oe.comparator)}(),r.ou=!1,e.next=25,yu(r.remoteStore,!1);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xs(e,t,n){return js.apply(this,arguments)}function js(){return(js=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c,l,f,h,d,p,v,y,m,g;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=D(t),a=[],o=[],s=k(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i.Xa.get(l))||0===h.length){e.next=34;break}return e.next=11,Ua(i.localStore,jt(h[0]));case 11:f=e.sent,d=k(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.Ya.get(v),e.next=20,ys(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,qa(i.localStore,l);case 36:return g=e.sent,e.next=39,Ua(i.localStore,g);case 39:return f=e.sent,e.next=42,Wu(i,Es(g),l,!1);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ja.Ko(o),a));case 54:case"end":return e.stop()}},e,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function Es(e){return mt(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Is(e){var t=D(e);return D(D(t.localStore).persistence).Ms()}function Ts(e,t,n,r){return Ss.apply(this,arguments)}function Ss(){return(Ss=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=D(t)).ou){e.next=5;break}T("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Xa.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0?9:"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,za(a.localStore);case 11:return o=e.sent,s=Pn.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,hs(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,Fa(a.localStore,n,!0);case 18:return us(a,n,i),e.abrupt("break",21);case 20:N();case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cs(e,t,n){return As.apply(this,arguments)}function As(){return(As=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c,l,f,h,d;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Ns(t)).ou){e.next=45;break}a=k(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Xa.has(s)){e.next=10;break}return T("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,qa(i.localStore,s);case 12:return c=e.sent,e.next=15,Ua(i.localStore,c);case 15:return l=e.sent,e.next=18,Wu(i,Es(c),l.targetId,!1);case 18:Mo(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=k(r),e.prev=30,d=u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.Xa.has(t),!e.t0){e.next=5;break}return e.next=5,Fa(i.localStore,t,!1).then(function(){Uo(i.remoteStore,t),us(i,t)}).catch(ia);case 5:case"end":return e.stop()}},e)}),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function Ns(e){var t=D(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(e,t){var n=D(e),r=n.eu.get(t);if(r&&r.Ha)return An().add(r.key);var i=An(),a=n.Xa.get(t);if(!a)return i;var o,u=k(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Ya.get(s);i=i.unionWith(c.view.Ba)}}catch(l){u.e(l)}finally{u.f()}return i}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(e,t,n){return es.apply(this,arguments)}.bind(null,t),t.Ja.Ko=function(e,t){var n,r=D(e),i=!1,a=k(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=k(s.listeners);try{for(l.s();!(c=l.n()).done;)c.value.Ea(o)&&(i=!0)}catch(f){l.e(f)}finally{l.f()}s.pa=o}}}catch(f){a.e(f)}finally{a.f()}i&&Au(r)}.bind(null,t.eventManager),t.Ja.uu=function(e,t,n){var r=D(e),i=r.queries.get(t);if(i){var a,o=k(i.listeners);try{for(o.s();!(a=o.n()).done;)a.value.onError(n)}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}.bind(null,t.eventManager),t}function Rs(e){var t=D(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(e,t){return ts.apply(this,arguments)}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=function(e,t,n){return ns.apply(this,arguments)}.bind(null,t),t}function Ps(e,t,n){var r=D(e);(function(){var e=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=D(e),r=$n(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n.fs.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(Lu(i)),a=new Du(i,t.localStore,n.M),e.next=14,n.cu();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.xa(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.cu();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return c=e.sent,e.next=30,hs(t,c.$s,void 0);case 30:return e.next=32,function(e,t){var n=D(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n.fs.saveBundleMetadata(e,t)})}(t.localStore,i);case 32:r._completeWith(c.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),C("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}},e,null,[[0,35]])}));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var Ds=function(){function e(){Object(d.a)(this,e),this.synchronizeTabs=!1}return Object(p.a)(e,[{key:"initialize",value:function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=jo(t.databaseInfo.databaseId),this.sharedClientState=this.hu(t),this.persistence=this.lu(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.fu(t),this.localStore=this.du(t);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fu",value:function(e){return null}},{key:"du",value:function(e){return Ca(this.persistence,new Ta,e.initialUser,this.M)}},{key:"lu",value:function(e){return new io(oo.Wi,this.M)}},{key:"hu",value:function(e){return new mo}},{key:"terminate",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),Ls=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this)))._u=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"initialize",value:function(){var e=Object(s.a)(u.a.mark(function e(n){var r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(Object(l.a)(t.prototype),"initialize",this).call(this,n);case 2:return e.next=4,Ha(this.localStore);case 4:return e.next=6,this._u.initialize(this,n);case 6:return e.next=8,Rs(this._u.syncEngine);case 8:return e.next=10,eu(this._u.remoteStore);case 10:return e.next=12,this.persistence.ps(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"du",value:function(e){return Ca(this.persistence,new Ta,e.initialUser,this.M)}},{key:"fu",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new sa(t,e.asyncQueue)}},{key:"lu",value:function(e){var t=xa(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Wi.withCacheSize(this.cacheSizeBytes):Wi.DEFAULT;return new wa(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,_o(),xo(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"hu",value:function(e){return new mo}}]),t}(Ds),Ms=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,n,!1)))._u=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"initialize",value:function(){var e=Object(s.a)(u.a.mark(function e(n){var r,a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(Object(l.a)(t.prototype),"initialize",this).call(this,n);case 2:if(r=this._u.syncEngine,e.t0=this.sharedClientState instanceof yo,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Nr:ks.bind(null,r),kr:Ts.bind(null,r),Mr:Cs.bind(null,r),Ms:Is.bind(null,r),Cr:gs.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ps(function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Os(a._u.syncEngine,t);case 2:a.gcScheduler&&(t&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):t||a.gcScheduler.stop());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t=_o();if(!yo.vt(t))throw new M(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=xa(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yo(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),t}(Ls),Us=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"initialize",value:function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Zu(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ps.bind(null,this.syncEngine),e.next=12,yu(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Eu}},{key:"createDatastore",value:function(e){var t,n=jo(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Oo(t));return function(e,t,n,r){return new Co(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Zu(o.syncEngine,e,0)},a=bo.vt()?new bo:new go,new No(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new qu(e,t,n,r,i,a);return o&&(u.ou=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=D(t),T("RemoteStore","RemoteStore shutting down."),n.ha.add(5),e.next=5,Do(n);case 5:n.fa.shutdown(),n.da.set("Unknown");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Fs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){var r=Object(s.a)(u.a.mark(function r(){var i;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}));return function(){return r.apply(this,arguments)}}(),cancel:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Vs=function(){function e(t){Object(d.a)(this,e),this.observer=t,this.muted=!1}return Object(p.a)(e,[{key:"next",value:function(e){this.observer.next&&this.wu(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.wu(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"mu",value:function(){this.muted=!0}},{key:"wu",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Bs=function(){function e(t,n){var r=this;Object(d.a)(this,e),this.gu=t,this.M=n,this.metadata=new U,this.buffer=new Uint8Array,this.yu=new TextDecoder("utf-8"),this.pu().then(function(e){e&&e.Da()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))},function(e){return r.metadata.reject(e)})}return Object(p.a)(e,[{key:"close",value:function(){return this.gu.cancel()}},{key:"getMetadata",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cu",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.pu());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"pu",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Iu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.yu.decode(t),r=Number(n),isNaN(r)&&this.Tu("length string (".concat(n,") is not valid number")),e.next=9,this.Eu(r);case 9:return i=e.sent,e.abrupt("return",new Ru(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Au",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"Iu",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Au()<0)){e.next=7;break}return e.next=3,this.Ru();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Au())<0&&this.Tu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Eu",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ru();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Tu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.yu.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Tu",value:function(e){throw this.gu.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ru",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gu.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),qs=function(){function e(t){Object(d.a)(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Object(p.a)(e,[{key:"lookup",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new M(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(t),i=nr(r.M)+"/documents",a={documents:n.map(function(e){return Jn(r.M,e)})},e.next=5,r.uo("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach(function(e){var t=or(r.M,e);s.set(t.key.toString(),t)}),c=[],e.abrupt("return",(n.forEach(function(e){var t=s.get(e.toString());R(!!t),c.push(t)}),c));case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach(function(e){return r.recordVersion(e)}),n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new hn(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(e,t){var r=Oe.fromPath(t);n.mutations.push(new dn(r,n.precondition(r)))}),e.next=7,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(t),i=nr(r.M)+"/documents",a={writes:n.map(function(e){return ur(r.M,e)})},e.next=3,r.io("Commit",i,a);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw N();t=ee.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new M(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Yt.updateTime(t):Yt.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new M(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yt.updateTime(t)}return Yt.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),zs=function(){function e(t,n,r,i){Object(d.a)(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.bu=5,this.vo=new Eo(this.asyncQueue,"transaction_retry")}return Object(p.a)(e,[{key:"run",value:function(){this.bu-=1,this.Pu()}},{key:"Pu",value:function(){var e=this;this.vo.po(Object(s.a)(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new qs(e.datastore),(r=e.Vu(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.vu(t)})})}).catch(function(t){e.vu(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"Vu",value:function(e){try{var t=this.updateFunction(e);return!be(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"vu",value:function(e){var t=this;this.bu>0&&this.Su(e)?(this.bu-=1,this.asyncQueue.enqueueAndForget(function(){return t.Pu(),Promise.resolve()})):this.deferred.reject(e)}},{key:"Su",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!vn(t)}return!1}}]),e}(),Hs=function(){function e(t,n,r,i){var a=this;Object(d.a)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_.UNAUTHENTICATED,this.clientId=$.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,function(e){return T("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)})}return Object(p.a)(e,[{key:"getConfiguration",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new M(L.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new U;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Object(s.a)(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=wu(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}},n,null,[[0,14]])}))),t.promise}}]),e}();function Ws(e,t){return Ks.apply(this,arguments)}function Ks(){return(Ks=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Aa(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gs(e,t){return Qs.apply(this,arguments)}function Qs(){return(Qs=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,$s(t);case 3:return r=e.sent,T("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return pu(n.remoteStore,e)}),t.setAppCheckTokenChangeListener(function(e,t){return pu(n.remoteStore,t)}),t.onlineComponents=n;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $s(e){return Ys.apply(this,arguments)}function Ys(){return(Ys=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return T("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Ws(t,new Ds);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xs(e){return Js.apply(this,arguments)}function Js(){return(Js=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return T("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Gs(t,new Us);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zs(e){return $s(e).then(function(e){return e.persistence})}function ec(e){return $s(e).then(function(e){return e.localStore})}function tc(e){return Xs(e).then(function(e){return e.remoteStore})}function nc(e){return Xs(e).then(function(e){return e.syncEngine})}function rc(e){return ic.apply(this,arguments)}function ic(){return(ic=Object(s.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xs(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=zu.bind(null,n.syncEngine),r.onUnlisten=Gu.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ac(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new U;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function i(){return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Vs({next:function(a){t.enqueueAndForget(function(){return Su(e,o)});var u=a.docs.has(n);!u&&a.fromCache?i.reject(new M(L.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new M(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Nu(gt(n.path),a,{includeMetadataChanges:!0,Sa:!0});return Iu(e,o)},i.next=3,rc(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function oc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new U;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function i(){return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Vs({next:function(n){t.enqueueAndForget(function(){return Su(e,o)}),n.fromCache&&"server"===r.source?i.reject(new M(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Nu(n,a,{includeMetadataChanges:!0,Sa:!0});return Iu(e,o)},i.next=3,rc(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}var uc=new Map;function sc(e,t,n){if(!n)throw new M(L.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cc(e,t,n,r){if(!0===t&&!0===r)throw new M(L.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function lc(e){if(!Oe.isDocumentKey(e))throw new M(L.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function fc(e){if(Oe.isDocumentKey(e))throw new M(L.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":N()}function dc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hc(e);throw new M(L.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function pc(e,t){if(t<=0)throw new M(L.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var vc=function(){function e(t){var n;if(Object(d.a)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new M(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new M(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,cc("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),yc=function(){function e(t,n,r){Object(d.a)(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vc({}),this._settingsFrozen=!1,t instanceof ge?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new M(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ge(e.options.projectId)}(t))}return Object(p.a)(e,[{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new M(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new V;switch(e.type){case"gapi":var t=e.client;return R(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new H(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new M(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=uc.get(e);t&&(T("ComponentProvider","Removing Datastore"),uc.delete(e),t.terminate())}(this),Promise.resolve()}},{key:"app",get:function(){if(!this._app)throw new M(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}}]),e}();function mc(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=dc(e,yc))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&C("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=_.MOCK_USER;else{o=Object(g.g)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new M(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new _(s)}e._authCredentials=new B(new F(o,u))}}var gc=function(){function e(t,n,r){Object(d.a)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object(p.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}},{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new kc(this.firestore,this.converter,this._key.path.popLast())}}]),e}(),bc=function(){function e(t,n,r){Object(d.a)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Object(p.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),kc=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this,e,n,gt(r))))._path=r,i.type="collection",i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._path)}},{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new gc(this.firestore,null,new Oe(e))}}]),t}(bc);function wc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(g.l)(e),sc("collection","path",t),e instanceof yc){var a=ae.fromString.apply(ae,[t].concat(r));return fc(a),new kc(e,null,a)}if(!(e instanceof gc||e instanceof kc))throw new M(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ae.fromString.apply(ae,[t].concat(r)));return fc(o),new kc(e.firestore,null,o)}function Oc(e,t){if(e=dc(e,yc),sc("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new M(L.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new bc(e,null,function(e){return new yt(ae.emptyPath(),e)}(t))}function _c(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(g.l)(e),1===arguments.length&&(t=$.R()),sc("doc","path",t),e instanceof yc){var a=ae.fromString.apply(ae,[t].concat(r));return lc(a),new gc(e,null,new Oe(a))}if(!(e instanceof gc||e instanceof kc))throw new M(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ae.fromString.apply(ae,[t].concat(r)));return lc(o),new gc(e.firestore,e instanceof kc?e.converter:null,new Oe(o))}function xc(e,t){return e=Object(g.l)(e),t=Object(g.l)(t),(e instanceof gc||e instanceof kc)&&(t instanceof gc||t instanceof kc)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function jc(e,t){return e=Object(g.l)(e),t=Object(g.l)(t),e instanceof bc&&t instanceof bc&&e.firestore===t.firestore&&It(e._query,t._query)&&e.converter===t.converter}var Ec=function(){function e(){var t=this;Object(d.a)(this,e),this.Du=Promise.resolve(),this.Cu=[],this.xu=!1,this.Nu=[],this.ku=null,this.Mu=!1,this.Ou=!1,this.$u=[],this.vo=new Eo(this,"async_queue_retry"),this.Fu=function(){var e=xo();e&&T("AsyncQueue","Visibility state changed to "+e.visibilityState),t.vo.To()};var n=xo();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Fu)}return Object(p.a)(e,[{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Bu(),this.Lu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.xu){this.xu=!0,this.Ou=e||!1;var t=xo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Fu)}}},{key:"enqueue",value:function(e){var t=this;if(this.Bu(),this.xu)return new Promise(function(){});var n=new U;return this.Lu(function(){return t.xu&&t.Ou?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.Cu.push(e),t.qu()})}},{key:"qu",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Cu.length){e.next=14;break}return e.prev=1,e.next=4,this.Cu[0]();case 4:this.Cu.shift(),this.vo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Yr(e.t0)){e.next=12;break}throw e.t0;case 12:T("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Cu.length>0&&this.vo.po(function(){return t.qu()});case 14:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"Lu",value:function(e){var t=this,n=this.Du.then(function(){return t.Mu=!0,e().catch(function(e){throw t.ku=e,t.Mu=!1,S("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(function(e){return t.Mu=!1,e})});return this.Du=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Bu(),this.$u.indexOf(e)>-1&&(t=0);var i=ku.createAndSchedule(this,e,t,n,function(e){return r.Uu(e)});return this.Nu.push(i),i}},{key:"Bu",value:function(){this.ku&&N()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ku",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Du,e.next=3,t;case 3:if(t!==this.Du){e.next=0;break}case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Gu",value:function(e){var t,n=k(this.Nu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Qu",value:function(e){var t=this;return this.Ku().then(function(){t.Nu.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=k(t.Nu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ku()})}},{key:"ju",value:function(e){this.$u.push(e)}},{key:"Uu",value:function(e){var t=this.Nu.indexOf(e);this.Nu.splice(t,1)}},{key:"isShuttingDown",get:function(){return this.xu}}]),e}();function Ic(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=k(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Tc=function(){function e(){Object(d.a)(this,e),this._progressObserver={},this._taskCompletionResolver=new U,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Object(p.a)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Sc=-1,Cc=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this,e,n,r))).type="firestore",i._queue=new Ec,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_terminate",value:function(){return this._firestoreClient||Nc(this),this._firestoreClient.terminate()}}]),t}(yc);function Ac(e){return e._firestoreClient||Nc(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Nc(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new me(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Hs(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Rc(e,t){qc(e=dc(e,Cc));var n=Ac(e),r=e._freezeSettings(),i=new Us;return Dc(n,i,new Ls(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Pc(e){qc(e=dc(e,Cc));var t=Ac(e),n=e._freezeSettings(),r=new Us;return Dc(t,r,new Ms(r,n.cacheSizeBytes))}function Dc(e,t,n){var r=new U;return e.asyncQueue.enqueue(Object(s.a)(u.a.mark(function i(){return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Ws(e,n);case 3:return i.next=5,Gs(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===L.FAILED_PRECONDITION||e.code===L.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function Lc(e){if(e._initialized&&!e._terminated)throw new M(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new U;return e._queue.enqueueAndForgetEvenWhileRestricted(Object(s.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Gr.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Gr.delete(n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(xa(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}function Mc(e){return function(e){var t=new U;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=rs,n.next=3,nc(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)}))),t.promise}(Ac(e=dc(e,Cc)))}function Uc(e){return function(e){return e.asyncQueue.enqueue(Object(s.a)(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zs(e);case 2:return n=t.sent,t.next=5,tc(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=D(r);return t.ha.delete(0),Ro(t)}()));case 7:case"end":return t.stop()}},t)})))}(Ac(e=dc(e,Cc)))}function Fc(e){return function(e){return e.asyncQueue.enqueue(Object(s.a)(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zs(e);case 2:return n=t.sent,t.next=5,tc(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=D(t)).ha.add(0),e.next=4,Do(n);case 4:n.da.set("Offline");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}},t)})))}(Ac(e=dc(e,Cc)))}function Vc(e,t){var n=Ac(e=dc(e,Cc)),r=new Tc;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Bs(e,t)}(function(e,t){if(e instanceof Uint8Array)return Fs(e,t);if(e instanceof ArrayBuffer)return Fs(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,jo(t));e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ps,t.next=3,nc(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}(n,e._databaseId,t,r),r}function Bc(e,t){return function(e,t){return e.asyncQueue.enqueue(Object(s.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=D(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n.fs.getNamedQuery(e,t)})},n.next=3,ec(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}(Ac(e=dc(e,Cc)),t).then(function(t){return t?new bc(e,null,t.query):null})}function qc(e){if(e._initialized||e._terminated)throw new M(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var zc=function(){function e(){Object(d.a)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new M(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(n)}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Hc=function(){function e(t){Object(d.a)(this,e),this._byteString=t}return Object(p.a)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(le.fromBase64String(t))}catch(t){throw new M(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(le.fromUint8Array(t))}}]),e}(),Wc=function e(t){Object(d.a)(this,e),this._methodName=t},Kc=function(){function e(t,n){if(Object(d.a)(this,e),!isFinite(t)||t<-90||t>90)throw new M(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new M(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}},{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}}]),e}(),Gc=/^__.*__$/,Qc=function(){function e(t,n,r){Object(d.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(p.a)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new on(e,this.data,this.fieldMask,t,this.fieldTransforms):new an(e,this.data,t,this.fieldTransforms)}}]),e}(),$c=function(){function e(t,n,r){Object(d.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(p.a)(e,[{key:"toMutation",value:function(e,t){return new on(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Yc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw N()}}var Xc=function(){function e(t,n,r,i,a,o){Object(d.a)(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Wu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Object(p.a)(e,[{key:"Hu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Ju",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Hu({path:n,Yu:!1});return r.Xu(e),r}},{key:"Zu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Hu({path:n,Yu:!1});return r.Wu(),r}},{key:"tc",value:function(e){return this.Hu({path:void 0,Yu:!0})}},{key:"ec",value:function(e){return ml(e,this.settings.methodName,this.settings.nc||!1,this.path,this.settings.sc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"Wu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Xu(this.path.get(e))}},{key:"Xu",value:function(e){if(0===e.length)throw this.ec("Document fields must not be empty");if(Yc(this.zu)&&Gc.test(e))throw this.ec('Document fields cannot begin and end with "__"')}},{key:"path",get:function(){return this.settings.path}},{key:"zu",get:function(){return this.settings.zu}}]),e}(),Jc=function(){function e(t,n,r){Object(d.a)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||jo(t)}return Object(p.a)(e,[{key:"ic",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Xc({zu:e,methodName:t,sc:n,path:ue.emptyPath(),Yu:!1,nc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Zc(e){var t=e._freezeSettings(),n=jo(e._databaseId);return new Jc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function el(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ic(a.merge||a.mergeFields?2:0,t,n,i);dl("Data must be an object, but it was:",o,r);var u,s,c=fl(r,o);if(a.merge)u=new se(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=k(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=pl(t,l.value,n);if(!o.contains(d))throw new M(L.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));gl(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new se(f),s=o.fieldTransforms.filter(function(e){return u.covers(e.field)})}else u=null,s=o.fieldTransforms;return new Qc(new Be(c),u,s)}var tl=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){if(2!==e.zu)throw 1===e.zu?e.ec("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ec("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof t}}]),t}(Wc);function nl(e,t,n){return new Xc({zu:3,sc:t.settings.sc,methodName:e._methodName,Yu:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var rl=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){return new Qt(e.path,new Vt)}},{key:"isEqual",value:function(e){return e instanceof t}}]),t}(Wc),il=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e))).rc=n,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){var t=nl(this,e,!0),n=this.rc.map(function(e){return ll(e,t)}),r=new Bt(n);return new Qt(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),t}(Wc),al=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e))).rc=n,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){var t=nl(this,e,!0),n=this.rc.map(function(e){return ll(e,t)}),r=new zt(n);return new Qt(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),t}(Wc),ol=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e))).oc=n,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){var t=new Wt(e.M,Dt(e.M,this.oc));return new Qt(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),t}(Wc);function ul(e,t,n,r){var i=e.ic(1,t,n);dl("Data must be an object, but it was:",i,r);var a=[],o=Be.empty();ne(r,function(e,r){var u=yl(t,e,n);r=Object(g.l)(r);var s=i.Zu(u);if(r instanceof tl)a.push(u);else{var c=ll(r,s);null!=c&&(a.push(u),o.set(u,c))}});var u=new se(a);return new $c(o,u,i.fieldTransforms)}function sl(e,t,n,r,i,a){var o=e.ic(1,t,n),u=[pl(t,r,n)],s=[i];if(a.length%2!=0)throw new M(L.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(pl(t,a[c])),s.push(a[c+1]);for(var l=[],f=Be.empty(),h=u.length-1;h>=0;--h)if(!gl(l,u[h])){var d=u[h],p=s[h];p=Object(g.l)(p);var v=o.Zu(d);if(p instanceof tl)l.push(d);else{var y=ll(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new se(l);return new $c(f,m,o.fieldTransforms)}function cl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ll(n,e.ic(r?4:3,t))}function ll(e,t){if(hl(e=Object(g.l)(e)))return dl("Unsupported field value:",t,e),fl(e,t);if(e instanceof Wc)return function(e,t){if(!Yc(t.zu))throw t.ec("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ec("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Yu&&4!==t.zu)throw t.ec("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=k(e);try{for(a.s();!(n=a.n()).done;){var o=ll(n.value,t.tc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Object(g.l)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Dt(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Z.fromDate(e);return{timestampValue:Kn(t.M,n)}}if(e instanceof Z){var r=new Z(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Kn(t.M,r)}}if(e instanceof Kc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Hc)return{bytesValue:Gn(t.M,e._byteString)};if(e instanceof gc){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ec("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Yn(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ec("Unsupported field value: ".concat(hc(e)))}(e,t)}function fl(e,t){var n={};return re(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ne(e,function(e,r){var i=ll(r,t.Ju(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function hl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Z||e instanceof Kc||e instanceof Hc||e instanceof gc||e instanceof Wc)}function dl(e,t,n){if(!hl(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=hc(n);throw"an object"===r?t.ec(e+" a custom object"):t.ec(e+" "+r)}}function pl(e,t,n){if((t=Object(g.l)(t))instanceof zc)return t._internalPath;if("string"==typeof t)return yl(e,t);throw ml("Field path arguments must be of type string or ",e,!1,void 0,n)}var vl=new RegExp("[~\\*/\\[\\]]");function yl(e,t,n){if(t.search(vl)>=0)throw ml("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Object(r.a)(zc,Object(h.a)(t.split(".")))._internalPath}catch(i){throw ml("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ml(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new M(L.INVALID_ARGUMENT,u+e+s)}function gl(e,t){return e.some(function(e){return e.isEqual(t)})}var bl=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Object(p.a)(e,[{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new kl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(wl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new gc(this._firestore,this._converter,this._key)}}]),e}(),kl=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"data",value:function(){return Object(i.a)(Object(l.a)(t.prototype),"data",this).call(this)}}]),t}(bl);function wl(e,t){return"string"==typeof t?yl(e,t):t instanceof zc?t._internalPath:t._delegate._internalPath}var Ol=function(){function e(t,n){Object(d.a)(this,e),this.hasPendingWrites=t,this.fromCache=n}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),_l=function(e){function t(e,n,r,i,a,o){var u;return Object(d.a)(this,t),(u=Object(c.a)(this,Object(l.a)(t).call(this,e,n,r,i,o)))._firestore=e,u._firestoreImpl=e,u.metadata=a,u}return Object(f.a)(t,e),Object(p.a)(t,[{key:"exists",value:function(){return Object(i.a)(Object(l.a)(t.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(wl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),t}(bl),xl=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)(Object(l.a)(t.prototype),"data",this).call(this,e)}}]),t}(_l),jl=function(){function e(t,n,r,i){Object(d.a)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ol(i.hasPendingWrites,i.fromCache),this.query=r}return Object(p.a)(e,[{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new xl(n._firestore,n._userDataWriter,r.key,r,new Ol(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new M(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new xl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ol(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new xl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ol(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:El(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}},{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}}]),e}();function El(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return N()}}function Il(e,t){return e instanceof _l&&t instanceof _l?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof jl&&t instanceof jl&&e._firestore===t._firestore&&jc(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Tl(e){if(kt(e)&&0===e.explicitOrderBy.length)throw new M(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sl=function e(){Object(d.a)(this,e)};function Cl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){e=a[i]._apply(e)}return e}var Al=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).ac=e,i.uc=n,i.cc=r,i.type="where",i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){var t=Zc(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new M(L.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Kl(o,a);var s,c=[],l=k(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Wl(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Wl(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Kl(o,a),u=cl(n,"where",o,"in"===a||"not-in"===a);var h=nt.create(i,a,u);return function(e,t){if(t.S()){var n=Ot(e);if(null!==n&&!n.isEqual(t.field))throw new M(L.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=wt(e);null!==r&&Gl(e,t.field,r)}var i=function(e,t){var n,r=k(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(t.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==i)throw i===t.op?new M(L.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new M(L.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ac,this.uc,this.cc);return new bc(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new yt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),t}(Sl);function Nl(e,t,n){var r=t,i=wl("where",e);return new Al(i,r,n)}var Rl=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).ac=e,r.hc=n,r.type="orderBy",r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new M(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new M(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ht(t,n);return function(e,t){if(null===wt(e)){var n=Ot(e);null!==n&&Gl(e,n,t.field)}}(e,r),r}(e._query,this.ac,this.hc);return new bc(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new yt(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),t}(Sl);function Pl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wl("orderBy",e);return new Rl(n,t)}var Dl=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).type=e,i.lc=n,i.fc=r,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){return new bc(e.firestore,e.converter,Et(e._query,this.lc,this.fc))}}]),t}(Sl);function Ll(e){return pc("limit",e),new Dl("limit",e,"F")}function Ml(e){return pc("limitToLast",e),new Dl("limitToLast",e,"L")}var Ul=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).type=e,i.dc=n,i._c=r,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){var t=Hl(e,this.type,this.dc,this._c);return new bc(e.firestore,e.converter,function(e,t){return new yt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),t}(Sl);function Fl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ul("startAt",t,!0)}function Vl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ul("startAfter",t,!1)}var Bl=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).type=e,i.dc=n,i._c=r,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){var t=Hl(e,this.type,this.dc,this._c);return new bc(e.firestore,e.converter,function(e,t){return new yt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),t}(Sl);function ql(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Bl("endBefore",t,!1)}function zl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Bl("endAt",t,!0)}function Hl(e,t,n,r){if(n[0]=Object(g.l)(n[0]),n[0]instanceof bl)return function(e,t,n,r,i){if(!r)throw new M(L.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=k(xt(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Ae(t,r.key));else{var c=r.data.field(s.field);if(ve(c))throw new M(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new M(L.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new ft(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Zc(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new M(L.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new M(L.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!_t(e)&&-1!==c.indexOf("/"))throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ae.fromString(c));if(!Oe.isDocumentKey(l))throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Oe(l);u.push(Ae(t,f))}else{var h=cl(n,r,c);u.push(h)}}return new ft(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Wl(e,t,n){if("string"==typeof(n=Object(g.l)(n))){if(""===n)throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_t(t)&&-1!==n.indexOf("/"))throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ae.fromString(n));if(!Oe.isDocumentKey(r))throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ae(e,new Oe(r))}if(n instanceof gc)return Ae(e,n._key);throw new M(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(hc(n),"."))}function Kl(e,t){if(!Array.isArray(e)||0===e.length)throw new M(L.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new M(L.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Gl(e,t,n){if(!n.isEqual(t))throw new M(L.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Ql=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(je(e)){case 0:return null;case 1:return e.booleanValue;case 2:return de(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pe(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw N()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return ne(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Kc(de(e.latitude),de(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=function e(t){var n=t.mapValue.fields.__previous_value__;return ve(n)?e(n):n}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ye(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=he(e);return new Z(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ae.fromString(e);R(br(n));var r=new ge(n.get(1),n.get(3)),i=new Oe(n.popFirst(5));return r.isEqual(t)||S("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function $l(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Yl=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).firestore=e,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"convertBytes",value:function(e){return new Hc(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new gc(this.firestore,null,t)}}]),t}(Ql),Xl=function(){function e(t,n){Object(d.a)(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zc(t)}return Object(p.a)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Jl(e,this._firestore),i=$l(r.converter,t,n),a=el(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Yt.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Jl(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Object(g.l)(t))||t instanceof zc?sl(this._dataReader,"WriteBatch.update",i._key,t,n,o):ul(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Yt.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Jl(e,this._firestore);return this._mutations=this._mutations.concat(new hn(t._key,Yt.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new M(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Jl(e,t){if((e=Object(g.l)(e)).firestore!==t)throw new M(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Zl(e){e=dc(e,gc);var t=dc(e.firestore,Cc);return ac(Ac(t),e._key).then(function(n){return pf(t,e,n)})}var ef=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).firestore=e,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"convertBytes",value:function(e){return new Hc(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new gc(this.firestore,null,t)}}]),t}(Ql);function tf(e){e=dc(e,gc);var t=dc(e.firestore,Cc),n=Ac(t),r=new ef(t);return function(e,t){var n=new U;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Object(s.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=D(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.ui.Bs(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new M(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=wu(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ec(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._key).then(function(n){return new _l(t,r,e._key,n,new Ol(null!==n&&n.hasLocalMutations,!0),e.converter)})}function nf(e){e=dc(e,gc);var t=dc(e.firestore,Cc);return ac(Ac(t),e._key,{source:"server"}).then(function(n){return pf(t,e,n)})}function rf(e){e=dc(e,bc);var t=dc(e.firestore,Cc),n=Ac(t),r=new ef(t);return Tl(e._query),oc(n,e._query).then(function(n){return new jl(t,r,e,n)})}function af(e){e=dc(e,bc);var t=dc(e.firestore,Cc),n=Ac(t),r=new ef(t);return function(e,t){var n=new U;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ba(t,n,!0);case 3:i=e.sent,a=new Fu(n,i.hi),o=a.La(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=wu(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ec(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._query).then(function(n){return new jl(t,r,e,n)})}function of(e){e=dc(e,bc);var t=dc(e.firestore,Cc),n=Ac(t),r=new ef(t);return oc(n,e._query,{source:"server"}).then(function(n){return new jl(t,r,e,n)})}function uf(e,t,n){e=dc(e,gc);var r=dc(e.firestore,Cc),i=$l(e.converter,t,n);return df(r,[el(Zc(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Yt.none())])}function sf(e,t,n){e=dc(e,gc);for(var r=dc(e.firestore,Cc),i=Zc(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return df(r,[("string"==typeof(t=Object(g.l)(t))||t instanceof zc?sl(i,"updateDoc",e._key,t,n,o):ul(i,"updateDoc",e._key,t)).toMutation(e._key,Yt.exists(!0))])}function cf(e){return df(dc(e.firestore,Cc),[new hn(e._key,Yt.none())])}function lf(e,t){var n=dc(e.firestore,Cc),r=_c(e),i=$l(e.converter,t);return df(n,[el(Zc(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Yt.exists(!1))]).then(function(){return r})}function ff(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Object(g.l)(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Ic(n[l])||(c=n[l],l++);var f,h,d,p={includeMetadataChanges:c.includeMetadataChanges};if(Ic(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[l+2]=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}if(e instanceof gc)h=dc(e.firestore,Cc),d=gt(e._key.path),f={next:function(t){n[l]&&n[l](pf(h,e,t))},error:n[l+1],complete:n[l+2]};else{var y=dc(e,bc);h=dc(y.firestore,Cc),d=y._query;var m=new ef(h);f={next:function(e){n[l]&&n[l](new jl(h,m,y,e))},error:n[l+1],complete:n[l+2]},Tl(e._query)}return function(e,t,n,r){var i=new Vs(f),a=new Nu(t,i,n);return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Iu,t.next=3,rc(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.mu(),e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Su,t.next=3,rc(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(Ac(h),d,p)}function hf(e,t){return function(e,t){var n=new Vs(t);return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){D(e).Ia.add(t),t.next()},t.next=3,rc(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){n.mu(),e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){D(e).Ia.delete(t)},t.next=3,rc(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(Ac(e=dc(e,Cc)),Ic(t)?t:{next:t})}function df(e,t){return function(e,t){var n=new U;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=$u,r.next=3,nc(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(Ac(e),t)}function pf(e,t,n){var r=n.docs.get(t._key),i=new ef(e);return new _l(e,i,t._key,r,new Ol(n.hasPendingWrites,n.fromCache),t.converter)}var vf=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,n)))._firestore=e,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"get",value:function(e){var n=this,r=Jl(e,this._firestore),a=new ef(this._firestore);return Object(i.a)(Object(l.a)(t.prototype),"get",this).call(this,e).then(function(e){return new _l(n._firestore,a,r._key,e._document,new Ol(!1,!1),r.converter)})}}]),t}(function(){function e(t,n){Object(d.a)(this,e),this._firestore=t,this._transaction=n,this._dataReader=Zc(t)}return Object(p.a)(e,[{key:"get",value:function(e){var t=this,n=Jl(e,this._firestore),r=new Yl(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return N();var i=e[0];if(i.isFoundDocument())return new bl(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new bl(t._firestore,r,n._key,null,n.converter);throw N()})}},{key:"set",value:function(e,t,n){var r=Jl(e,this._firestore),i=$l(r.converter,t,n),a=el(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Jl(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Object(g.l)(t))||t instanceof zc?sl(this._dataReader,"Transaction.update",i._key,t,n,o):ul(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Jl(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function yf(e,t){return function(e,t){var n=new U;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function r(){var i;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Xs(e).then(function(e){return e.datastore})}(e);case 2:i=r.sent,new zs(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}},r)}))),n.promise}(Ac(e=dc(e,Cc)),function(n){return t(new vf(e,n))})}function mf(){return new tl("deleteField")}function gf(){return new rl("serverTimestamp")}function bf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new il("arrayUnion",t)}function kf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new al("arrayRemove",t)}function wf(e){return new ol("increment",e)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){x=e}(v.SDK_VERSION),Object(v._registerComponent)(new y.a("firestore",function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Cc(i,new q(e.getProvider("auth-internal")),new K(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC")),Object(v.registerVersion)(O,"3.4.6",void 0),Object(v.registerVersion)(O,"3.4.6","esm2017")}()}).call(this,n(59))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(29);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var a=n(15);function o(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(a.a)(e):t}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";var r=n(34);var i=n(35);function a(e,t){return Object(r.a)(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||Object(i.a)()}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";n.r(t),n.d(t,"SDK_VERSION",function(){return P}),n.d(t,"_DEFAULT_ENTRY_NAME",function(){return w}),n.d(t,"_addComponent",function(){return j}),n.d(t,"_addOrOverwriteComponent",function(){return E}),n.d(t,"_apps",function(){return _}),n.d(t,"_clearComponents",function(){return C}),n.d(t,"_components",function(){return x}),n.d(t,"_getProvider",function(){return T}),n.d(t,"_registerComponent",function(){return I}),n.d(t,"_removeServiceInstance",function(){return S}),n.d(t,"deleteApp",function(){return U}),n.d(t,"getApp",function(){return L}),n.d(t,"getApps",function(){return M}),n.d(t,"initializeApp",function(){return D}),n.d(t,"onLog",function(){return B}),n.d(t,"registerVersion",function(){return V}),n.d(t,"setLogLevel",function(){return q});var r,i,a=n(14),o=n(0),u=n.n(o),s=n(2),c=n(5),l=n(1),f=n(3),h=n(16),d=n(20),p=n(6);function v(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"FirebaseError",function(){return p.c});var m=function(){function e(t){Object(l.a)(this,e),this.container=t}return Object(f.a)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(function(e){return e}).join(" ")}}]),e}();var g="@firebase/app",b="0.7.19",k=new d.b("@firebase/app"),w="[DEFAULT]",O=(r={},Object(c.a)(r,g,"fire-core"),Object(c.a)(r,"@firebase/app-compat","fire-core-compat"),Object(c.a)(r,"@firebase/analytics","fire-analytics"),Object(c.a)(r,"@firebase/analytics-compat","fire-analytics-compat"),Object(c.a)(r,"@firebase/app-check","fire-app-check"),Object(c.a)(r,"@firebase/app-check-compat","fire-app-check-compat"),Object(c.a)(r,"@firebase/auth","fire-auth"),Object(c.a)(r,"@firebase/auth-compat","fire-auth-compat"),Object(c.a)(r,"@firebase/database","fire-rtdb"),Object(c.a)(r,"@firebase/database-compat","fire-rtdb-compat"),Object(c.a)(r,"@firebase/functions","fire-fn"),Object(c.a)(r,"@firebase/functions-compat","fire-fn-compat"),Object(c.a)(r,"@firebase/installations","fire-iid"),Object(c.a)(r,"@firebase/installations-compat","fire-iid-compat"),Object(c.a)(r,"@firebase/messaging","fire-fcm"),Object(c.a)(r,"@firebase/messaging-compat","fire-fcm-compat"),Object(c.a)(r,"@firebase/performance","fire-perf"),Object(c.a)(r,"@firebase/performance-compat","fire-perf-compat"),Object(c.a)(r,"@firebase/remote-config","fire-rc"),Object(c.a)(r,"@firebase/remote-config-compat","fire-rc-compat"),Object(c.a)(r,"@firebase/storage","fire-gcs"),Object(c.a)(r,"@firebase/storage-compat","fire-gcs-compat"),Object(c.a)(r,"@firebase/firestore","fire-fst"),Object(c.a)(r,"@firebase/firestore-compat","fire-fst-compat"),Object(c.a)(r,"fire-js","fire-js"),Object(c.a)(r,"firebase","fire-js-all"),r),_=new Map,x=new Map;function j(e,t){try{e.container.addComponent(t)}catch(n){k.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function E(e,t){e.container.addOrOverwriteComponent(t)}function I(e){var t=e.name;if(x.has(t))return k.debug("There were multiple attempts to register component ".concat(t,".")),!1;x.set(t,e);var n,r=v(_.values());try{for(r.s();!(n=r.n()).done;){j(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function T(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;T(e,t).clearInstance(n)}function C(){x.clear()}var A=(i={},Object(c.a)(i,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(c.a)(i,"bad-app-name","Illegal App name: '{$appName}"),Object(c.a)(i,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Object(c.a)(i,"app-deleted","Firebase App named '{$appName}' already deleted"),Object(c.a)(i,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Object(c.a)(i,"invalid-log-argument","First argument to `onLog` must be null or a function."),Object(c.a)(i,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),Object(c.a)(i,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),Object(c.a)(i,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),Object(c.a)(i,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),i),N=new p.b("app","Firebase",A),R=function(){function e(t,n,r){var i=this;Object(l.a)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new h.a("app",function(){return i},"PUBLIC"))}return Object(f.a)(e,[{key:"checkDestroyed",value:function(){if(this.isDeleted)throw N.create("app-deleted",{appName:this._name})}},{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}}]),e}(),P="9.6.9";function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!==typeof t&&(t={name:t});var n=Object.assign({name:w,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!==typeof r||!r)throw N.create("bad-app-name",{appName:String(r)});var i=_.get(r);if(i){if(Object(p.i)(e,i.options)&&Object(p.i)(n,i.config))return i;throw N.create("duplicate-app",{appName:r})}var a,o=new h.b(r),u=v(x.values());try{for(u.s();!(a=u.n()).done;){var s=a.value;o.addComponent(s)}}catch(l){u.e(l)}finally{u.f()}var c=new R(e,n,o);return _.set(r,c),c}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=_.get(e);if(!t)throw N.create("no-app",{appName:e});return t}function M(){return Array.from(_.values())}function U(e){return F.apply(this,arguments)}function F(){return(F=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!_.has(n)){e.next=6;break}return _.delete(n),e.next=5,Promise.all(t.container.getProviders().map(function(e){return e.delete()}));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(e,t,n){var r,i=null!==(r=O[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void k.warn(u.join(" "))}I(new h.a("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function B(e,t){if(null!==e&&"function"!==typeof e)throw N.create("invalid-log-argument");Object(d.d)(e,t)}function q(e){Object(d.c)(e)}var z="firebase-heartbeat-database",H=1,W="firebase-heartbeat-store",K=null;function G(){return K||(K=Object(p.y)(z,H,function(e,t){switch(t){case 0:e.createObjectStore(W)}}).catch(function(e){throw N.create("storage-open",{originalErrorMessage:e.message})})),K}function Q(e){return $.apply(this,arguments)}function $(){return($=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G();case 3:return n=e.sent,e.abrupt("return",n.transaction(W).objectStore(W).get(J(t)));case 7:throw e.prev=7,e.t0=e.catch(0),N.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Y(e,t){return X.apply(this,arguments)}function X(){return(X=Object(s.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G();case 3:return r=e.sent,i=r.transaction(W,"readwrite"),a=i.objectStore(W),e.next=8,a.put(n,J(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),N.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}function J(e){return"".concat(e.name,"!").concat(e.options.appId)}var Z=1024,ee=function(){function e(t){var n=this;Object(l.a)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ie(r),this._heartbeatsCachePromise=this._storage.read().then(function(e){return n._heartbeatsCache=e,e})}return Object(f.a)(e,[{key:"triggerHeartbeat",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=te(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some(function(e){return e.date===r})){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=te(),n=ne(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Object(p.e)(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();function te(){return(new Date).toISOString().substring(0,10)}function ne(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,r=[],i=e.slice(),a=v(e);try{var o=function(){var e=t.value,a=r.find(function(t){return t.agent===e.agent});if(a){if(a.dates.push(e.date),ae(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ae(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var re,ie=function(){function e(t){Object(l.a)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Object(f.a)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.s)()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",Object(p.B)().then(function(){return!0}).catch(function(){return!1}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Q(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Y(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Y(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Object(a.a)(r.heartbeats),Object(a.a)(t.heartbeats))}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function ae(e){return Object(p.e)(JSON.stringify({version:2,heartbeats:e})).length}re="",I(new h.a("platform-logger",function(e){return new m(e)},"PRIVATE")),I(new h.a("heartbeat",function(e){return new ee(e)},"PRIVATE")),V(g,b,re),V(g,b,"esm2017"),V("fire-js","")},function(e,t,n){"use strict";var r=n(36);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return y});var r=n(0),i=n.n(r),a=n(14),o=n(2),u=n(12),s=n(1),c=n(3),l=n(6);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(){function e(t,n,r){Object(s.a)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Object(c.a)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),p="[DEFAULT]",v=function(){function e(t,n){Object(s.a)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Object(c.a)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new l.a;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:p})}catch(c){}var t,n=f(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(u.a)(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Object(a.a)(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),Object(a.a)(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=f(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=Object(u.a)(i.value,2),c=s[0],l=s[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===p?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return this.component?this.component.multipleInstances?e:p:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var y=function(){function e(t){Object(s.a)(this,e),this.name=t,this.providers=new Map}return Object(c.a)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new v(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"b",function(){return I}),n.d(t,"c",function(){return y}),n.d(t,"d",function(){return R}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return E});var r=n(25),i=n(4),a=n.n(i),o=n(23),u=n(47),s=n(24),c=n(19),l=n(38),f=n.n(l),h=(n(65),n(28)),d=(n(48),function(e){var t=Object(u.a)();return t.displayName=e,t}),p=d("Router-History"),v=d("Router"),y=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen(function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e})),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return a.a.createElement(v.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.a.createElement(p.Provider,{children:this.props.children||null,value:this.props.history}))},t}(a.a.Component);a.a.Component;var m=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(a.a.Component);var g={},b=1e4,k=0;function w(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(g[e])return g[e];var t=f.a.compile(e);return k<b&&(g[e]=t,k++),t}(e)(t,{pretty:!0})}function O(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return a.a.createElement(v.Consumer,null,function(e){e||Object(s.a)(!1);var r=e.history,u=e.staticContext,l=i?r.push:r.replace,f=Object(o.c)(t?"string"===typeof n?w(n,t.params):Object(c.a)({},n,{pathname:w(n.pathname,t.params)}):n);return u?(l(f),null):a.a.createElement(m,{onMount:function(){l(f)},onUpdate:function(e,t){var n=Object(o.c)(t.to);Object(o.f)(n,Object(c.a)({},f,{key:n.key}))||l(f)},to:n})})}var _={},x=1e4,j=0;function E(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce(function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=_[n]||(_[n]={});if(r[e])return r[e];var i=[],a={regexp:f()(e,i,t),keys:i};return j<x&&(r[e]=a,j++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],h=s.slice(1),d=e===l;return a&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:o.reduce(function(e,t,n){return e[t.name]=h[n],e},{})}},null)}var I=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(v.Consumer,null,function(t){t||Object(s.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?E(n.pathname,e.props):t.match,i=Object(c.a)({},t,{location:n,match:r}),o=e.props,u=o.children,l=o.component,f=o.render;return Array.isArray(u)&&function(e){return 0===a.a.Children.count(e)}(u)&&(u=null),a.a.createElement(v.Provider,{value:i},i.match?u?"function"===typeof u?u(i):u:l?a.a.createElement(l,i):f?f(i):null:"function"===typeof u?u(i):null)})},t}(a.a.Component);function T(e){return"/"===e.charAt(0)?e:"/"+e}function S(e,t){if(!e)return t;var n=T(e);return 0!==t.pathname.indexOf(n)?t:Object(c.a)({},t,{pathname:t.pathname.substr(n.length)})}function C(e){return"string"===typeof e?e:Object(o.e)(e)}function A(e){return function(){Object(s.a)(!1)}}function N(){}a.a.Component;var R=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(v.Consumer,null,function(t){t||Object(s.a)(!1);var n,r,i=e.props.location||t.location;return a.a.Children.forEach(e.props.children,function(e){if(null==r&&a.a.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?E(i.pathname,Object(c.a)({},e.props,{path:o})):t.match}}),r?a.a.cloneElement(n,{location:i,computedMatch:r}):null})},t}(a.a.Component);a.a.useContext},function(e,t,n){"use strict";var r=n(7);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return y}),n.d(t,"d",function(){return m});var r,i=n(1),a=n(3),o=n(5);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c,l=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(c||(c={}));var f={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},h=c.INFO,d=(r={},Object(o.a)(r,c.DEBUG,"log"),Object(o.a)(r,c.VERBOSE,"log"),Object(o.a)(r,c.INFO,"info"),Object(o.a)(r,c.WARN,"warn"),Object(o.a)(r,c.ERROR,"error"),r),p=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=d[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},v=function(){function e(t){Object(i.a)(this,e),this.name=t,this._logLevel=h,this._logHandler=p,this._userLogHandler=null,l.push(this)}return Object(a.a)(e,[{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?f[e]:e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.DEBUG].concat(t)),this._logHandler.apply(this,[this,c.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.VERBOSE].concat(t)),this._logHandler.apply(this,[this,c.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.INFO].concat(t)),this._logHandler.apply(this,[this,c.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.WARN].concat(t)),this._logHandler.apply(this,[this,c.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.ERROR].concat(t)),this._logHandler.apply(this,[this,c.ERROR].concat(t))}},{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in c))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}}]),e}();function y(e){l.forEach(function(t){t.setLogLevel(e)})}function m(e,t){var n,r=u(l);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=f[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map(function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:c[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(5);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Object(r.a)(e,t,n[t])})}return e}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return vr}),n.d(t,"b",function(){return mr}),n.d(t,"c",function(){return yr}),n.d(t,"d",function(){return br}),n.d(t,"e",function(){return gr}),n.d(t,"f",function(){return kr}),n.d(t,"g",function(){return wr}),n.d(t,"h",function(){return dr}),n.d(t,"i",function(){return pr});var r=n(11),i=n(18),a=n(7),o=n(10),u=n(1),s=n(3);function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f,h="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},d={},p=p||{},v=h||self;function y(){}function m(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function g(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var b="closure_uid_"+(1e9*Math.random()>>>0),k=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function O(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _(e,t,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:O).apply(null,arguments)}function x(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function j(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function E(){this.s=this.s,this.o=this.o}var I={};E.prototype.s=!1,E.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,b)&&e[b]||(e[b]=++k)}(this);delete I[e]}},E.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var T=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},S=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function C(e){return Array.prototype.concat.apply([],arguments)}function A(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e){return/^[\s\xa0]*$/.test(e)}var R,P=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function D(e,t){return-1!=e.indexOf(t)}function L(e,t){return e<t?-1:e>t?1:0}e:{var M=v.navigator;if(M){var U=M.userAgent;if(U){R=U;break e}}R=""}function F(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function V(e){var t={};for(var n in e)t[n]=e[n];return t}var B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<B.length;a++)n=B[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function z(e){return z[" "](e),e}z[" "]=y;var H,W=D(R,"Opera"),K=D(R,"Trident")||D(R,"MSIE"),G=D(R,"Edge"),Q=G||K,$=D(R,"Gecko")&&!(D(R.toLowerCase(),"webkit")&&!D(R,"Edge"))&&!(D(R,"Trident")||D(R,"MSIE"))&&!D(R,"Edge"),Y=D(R.toLowerCase(),"webkit")&&!D(R,"Edge");function X(){var e=v.document;return e?e.documentMode:void 0}e:{var J="",Z=function(){var e=R;return $?/rv:([^\);]+)(\)|;)/.exec(e):G?/Edge\/([\d\.]+)/.exec(e):K?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Y?/WebKit\/(\S+)/.exec(e):W?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Z&&(J=Z?Z[1]:""),K){var ee=X();if(null!=ee&&ee>parseFloat(J)){H=String(ee);break e}}H=J}var te,ne={};function re(){return function(e){var t=ne;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}(function(){for(var e=0,t=P(String(H)).split("."),n=P("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=L(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||L(0==a[2].length,0==o[2].length)||L(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e})}if(v.document&&K){var ie=X();te=ie||(parseInt(H,10)||void 0)}else te=void 0;var ae=te,oe=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{v.addEventListener("test",y,t),v.removeEventListener("test",y,t)}catch(n){}return e}();function ue(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function se(e,t){if(ue.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if($){e:{try{z(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ce[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&se.Z.h.call(this)}}ue.prototype.h=function(){this.defaultPrevented=!0},j(se,ue);var ce={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),fe=0;function he(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++fe,this.ca=this.fa=!1}function de(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function pe(e){this.src=e,this.g={},this.h=0}function ve(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=T(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(de(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ye(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}pe.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ye(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new he(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ge={};function be(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,a){if(Array.isArray(n)){for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);return null}r=Ee(r);return t&&t[le]?t.O(n,r,g(i)?!!i.capture:!!i,a):ke(t,n,r,!0,i,a)}(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)be(e,t[a],n,r,i);return null}return n=Ee(n),e&&e[le]?e.N(t,n,g(r)?!!r.capture:!!r,i):ke(e,t,n,!1,r,i)}function ke(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=g(i)?!!i.capture:!!i,u=xe(e);if(u||(e[me]=u=new pe(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=_e;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)oe||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function we(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[le])ve(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xe(t))?(ve(n,e),0==n.h&&(n.src=null,t[me]=null)):de(e)}}}function Oe(e){return e in ge?ge[e]:ge[e]="on"+e}function _e(e,t){if(e.ca)e=!0;else{t=new se(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&we(e),e=n.call(r,t)}return e}function xe(e){return(e=e[me])instanceof pe?e:null}var je="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ee(e){return"function"===typeof e?e:(e[je]||(e[je]=function(t){return e.handleEvent(t)}),e[je])}function Ie(){E.call(this),this.i=new pe(this),this.P=this,this.I=null}function Te(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ue(t,e);else if(t instanceof ue)t.target=t.target||e;else{var i=t;q(t=new ue(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Se(o,r,!0,t)&&i}if(i=Se(o=t.g=e,r,!0,t)&&i,i=Se(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Se(o=t.g=n[a],r,!1,t)&&i}function Se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&ve(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}j(Ie,E),Ie.prototype[le]=!0,Ie.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,a){if(Array.isArray(n))for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);else i=g(i)?!!i.capture:!!i,r=Ee(r),t&&t[le]?(t=t.i,(n=String(n).toString())in t.g&&-1<(r=ye(o=t.g[n],r,i,a))&&(de(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete t.g[n],t.h--))):t&&(t=xe(t))&&(n=t.g[n.toString()],t=-1,n&&(t=ye(n,r,i,a)),(r=-1<t?n[t]:null)&&we(r))}(this,e,t,n,r)},Ie.prototype.M=function(){if(Ie.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)de(n[r]);delete t.g[e],t.h--}}this.I=null},Ie.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ie.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ce=v.JSON.stringify;function Ae(){var e=Fe,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ne,Re=function(){function e(){Object(u.a)(this,e),this.h=this.g=null}return Object(s.a)(e,[{key:"add",value:function(e,t){var n=Pe.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Pe=new(function(){function e(t,n){Object(u.a)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Object(s.a)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new De},function(e){return e.reset()}),De=function(){function e(){Object(u.a)(this,e),this.next=this.g=this.h=null}return Object(s.a)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Le(e){v.setTimeout(function(){throw e},0)}function Me(e,t){Ne||function(){var e=v.Promise.resolve(void 0);Ne=function(){e.then(Ve)}}(),Ue||(Ne(),Ue=!0),Fe.add(e,t)}var Ue=!1,Fe=new Re;function Ve(){for(var e;e=Ae();){try{e.h.call(e.g)}catch(n){Le(n)}var t=Pe;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ue=!1}function Be(e,t){Ie.call(this),this.h=e||1,this.g=t||v,this.j=_(this.kb,this),this.l=Date.now()}function qe(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ze(e,t,n){if("function"===typeof e)n&&(e=_(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_(e.handleEvent,e)}return 2147483647<Number(t)?-1:v.setTimeout(e,t||0)}j(Be,Ie),(f=Be.prototype).da=!1,f.S=null,f.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Te(this,"tick"),this.da&&(qe(this),this.start()))}},f.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},f.M=function(){Be.Z.M.call(this),qe(this),delete this.g};var He=function(e){function t(e,n){var i;return Object(u.a)(this,t),(i=Object(r.a)(this,Object(a.a)(t).call(this))).m=e,i.j=n,i.h=null,i.i=!1,i.g=null,i}return Object(o.a)(t,e),Object(s.a)(t,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=ze(function(){t.g=null,t.i&&(t.i=!1,e(t))},t.j);var n=t.h;t.h=null,t.m.apply(null,n)}(this)}},{key:"M",value:function(){Object(i.a)(Object(a.a)(t.prototype),"M",this).call(this),this.g&&(v.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),t}(E);function We(e){E.call(this),this.h=e,this.g={}}j(We,E);var Ke=[];function Ge(e,t,n,r){Array.isArray(n)||(n&&(Ke[0]=n.toString()),n=Ke);for(var i=0;i<n.length;i++){var a=be(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Qe(e){F(e.g,function(e,t){this.g.hasOwnProperty(t)&&we(e)},e),e.g={}}function $e(){this.g=!0}function Ye(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ce(n)}catch(u){return t}}(e,n)+(r?" "+r:"")})}We.prototype.M=function(){We.Z.M.call(this),Qe(this)},We.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$e.prototype.Aa=function(){this.g=!1},$e.prototype.info=function(){};var Xe={},Je=null;function Ze(){return Je=Je||new Ie}function et(e){ue.call(this,Xe.Ma,e)}function tt(e){var t=Ze();Te(t,new et(t,e))}function nt(e,t){ue.call(this,Xe.STAT_EVENT,e),this.stat=t}function rt(e){var t=Ze();Te(t,new nt(t,e))}function it(e,t){ue.call(this,Xe.Na,e),this.size=t}function at(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return v.setTimeout(function(){e()},t)}Xe.Ma="serverreachability",j(et,ue),Xe.STAT_EVENT="statevent",j(nt,ue),Xe.Na="timingevent",j(it,ue);var ot={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ut={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function st(){}function ct(e){return e.h||(e.h=e.i())}function lt(){}st.prototype.h=null;var ft,ht={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dt(){ue.call(this,"d")}function pt(){ue.call(this,"c")}function vt(){}function yt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new We(this),this.P=gt,e=Q?125:void 0,this.W=new Be(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}j(dt,ue),j(pt,ue),j(vt,st),vt.prototype.g=function(){return new XMLHttpRequest},vt.prototype.i=function(){return{}},ft=new vt;var gt=45e3,bt={},kt={};function wt(e,t,n){e.K=1,e.v=Ht(Ut(t)),e.s=n,e.U=!0,Ot(e,null)}function Ot(e,t){e.F=Date.now(),Et(e),e.A=Ut(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),rn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new mt,e.g=or(e.l,n?t:null,!e.s),0<e.O&&(e.L=new He(_(e.Ia,e,e.g),e.O)),Ge(e.V,e.g,"readystatechange",e.gb),t=e.H?V(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),tt(1),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function _t(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function xt(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=jt(e,n))==kt){4==t&&(e.o=4,rt(14),i=!1),Ye(e.j,e.m,null,"[Incomplete Response]");break}if(r==bt){e.o=4,rt(15),Ye(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ye(e.j,e.m,r,null),At(e,r)}_t(e)&&r!=kt&&r!=bt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,rt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jn(t),t.L=!0,rt(11))):(Ye(e.j,e.m,n,"[Invalid Chunked Response]"),Ct(e),St(e))}function jt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?kt:(n=Number(t.substring(n,r)),isNaN(n)?bt:(r+=1)+n>t.length?kt:(t=t.substr(r,n),e.C=r+n,t))}function Et(e){e.Y=Date.now()+e.P,It(e,e.P)}function It(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=at(_(e.eb,e),t)}function Tt(e){e.B&&(v.clearTimeout(e.B),e.B=null)}function St(e){0==e.l.G||e.I||tr(e.l,e)}function Ct(e){Tt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,qe(e.W),Qe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function At(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||hn(n.i,e)))if(n.I=e.N,!e.J&&hn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;er(n),zn(n)}Xn(n),rt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=at(_(n.ab,n),6e3));if(1>=fn(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else rr(n,11)}else if((e.J||n.g==e)&&er(n),!N(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(D(l,"spdy")||D(l,"quic")||D(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(dn(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,zt(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=ar(r,r.H?r.la:null,r.W),d.J){pn(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Tt(p),Et(p)),r.g=d}else Yn(r);0<n.l.length&&Kn(n)}else"stop"!=a[0]&&"close"!=a[0]||rr(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?rr(n,7):qn(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}tt(4)}catch(a){}}function Nt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(m(e)||"string"===typeof e)S(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(m(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(m(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Rt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Rt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Pt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Dt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Dt(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(f=yt.prototype).setTimeout=function(e){this.P=e},f.gb=function(e){e=e.target;var t=this.L;t&&3==Mn(e)?t.l():this.Ia(e)},f.Ia=function(e){try{if(e==this.g)e:{var t=Mn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Q||this.g&&(this.h.h||this.g.ga()||Un(this.g)))){this.I||4!=t||7==n||tt(8==n||0>=r?3:2),Tt(this);var i=this.g.ba();this.N=i;t:if(_t(this)){var a=Un(this.g);e="";var o=a.length,u=4==Mn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ct(this),St(this);var s="";break t}this.h.i=new v.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,rt(12),Ct(this),St(this);break e}Ye(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,At(this,i)}this.U?(xt(this,t,s),Q&&this.i&&3==t&&(Ge(this.V,this.W,"tick",this.fb),this.W.start())):(Ye(this.j,this.m,s,null),At(this,s)),4==t&&Ct(this),this.i&&!this.I&&(4==t?tr(this.l,this):(this.i=!1,Et(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,rt(12)):(this.o=0,rt(13)),Ct(this),St(this)}}}catch(t){}},f.fb=function(){if(this.g){var e=Mn(this.g),t=this.g.ga();this.C<t.length&&(Tt(this),xt(this,e,t),this.i&&4!=e&&Et(this))}},f.cancel=function(){this.I=!0,Ct(this)},f.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(tt(3),rt(17)),Ct(this),this.o=2,St(this)):It(this,this.Y-e)},(f=Rt.prototype).R=function(){Pt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},f.T=function(){return Pt(this),this.g.concat()},f.get=function(e,t){return Dt(this.h,e)?this.h[e]:t},f.set=function(e,t){Dt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},f.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Lt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Mt){this.g=void 0!==t?t:e.g,Ft(this,e.j),this.s=e.s,Vt(this,e.i),Bt(this,e.m),this.l=e.l,t=e.h;var n=new Zt;n.i=t.i,t.g&&(n.g=new Rt(t.g),n.h=t.h),qt(this,n),this.o=e.o}else e&&(n=String(e).match(Lt))?(this.g=!!t,Ft(this,n[1]||"",!0),this.s=Wt(n[2]||""),Vt(this,n[3]||"",!0),Bt(this,n[4]),this.l=Wt(n[5]||"",!0),qt(this,n[6]||"",!0),this.o=Wt(n[7]||"")):(this.g=!!t,this.h=new Zt(null,this.g))}function Ut(e){return new Mt(e)}function Ft(e,t,n){e.j=n?Wt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vt(e,t,n){e.i=n?Wt(t,!0):t}function Bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function qt(e,t,n){t instanceof Zt?(e.h=t,function(e,t){t&&!e.j&&(en(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(tn(this,t),rn(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Kt(t,Xt)),e.h=new Zt(t,e.g))}function zt(e,t,n){e.h.set(t,n)}function Ht(e){return zt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Kt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Kt(t,Qt,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Kt(t,Qt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Kt(n,"/"==n.charAt(0)?Yt:$t,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Kt(n,Jt)),e.join("")};var Qt=/[#\/\?@]/g,$t=/[#\?:]/g,Yt=/[#\?]/g,Xt=/[#\?@]/g,Jt=/#/g;function Zt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function en(e){e.g||(e.g=new Rt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function tn(e,t){en(e),t=an(e,t),Dt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Dt((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Pt(e)))}function nn(e,t){return en(e),t=an(e,t),Dt(e.g.h,t)}function rn(e,t,n){tn(e,t),0<n.length&&(e.i=null,e.g.set(an(e,t),A(n)),e.h+=n.length)}function an(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(f=Zt.prototype).add=function(e,t){en(this),this.i=null,e=an(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},f.forEach=function(e,t){en(this),this.g.forEach(function(n,r){S(n,function(n){e.call(t,n,r,this)},this)},this)},f.T=function(){en(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},f.R=function(e){en(this);var t=[];if("string"===typeof e)nn(this,e)&&(t=C(t,this.g.get(an(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=C(t,e[n])}return t},f.set=function(e,t){return en(this),this.i=null,nn(this,e=an(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},f.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},f.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var on=function e(t,n){Object(u.a)(this,e),this.h=t,this.g=n};function un(e){this.l=e||cn,v.PerformanceNavigationTiming?e=0<(e=v.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(v.g&&v.g.Ea&&v.g.Ea()&&v.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var sn,cn=10;function ln(e){return!!e.h||!!e.g&&e.g.size>=e.j}function fn(e){return e.h?1:e.g?e.g.size:0}function hn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function dn(e,t){e.g?e.g.add(t):e.h=t}function pn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function vn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=c(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return A(e.i)}function yn(){}function mn(){this.g=new yn}function gn(e,t,n){var r=n||"";try{Nt(e,function(e,n){var i=e;g(e)&&(i=Ce(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function bn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function kn(e){this.l=e.$b||null,this.j=e.ib||!1}function wn(e,t){Ie.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=On,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}un.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=c(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},yn.prototype.stringify=function(e){return v.JSON.stringify(e,void 0)},yn.prototype.parse=function(e){return v.JSON.parse(e,void 0)},j(kn,st),kn.prototype.g=function(){return new wn(this.l,this.j)},kn.prototype.i=(sn={},function(){return sn}),j(wn,Ie);var On=0;function _n(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function xn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,jn(e)}function jn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(f=wn.prototype).open=function(e,t){if(this.readyState!=On)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,jn(this)},f.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||v).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},f.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xn(this)),this.readyState=On},f.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jn(this)),this.g&&(this.readyState=3,jn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof v.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_n(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},f.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xn(this):jn(this),3==this.readyState&&_n(this)}},f.Ua=function(e){this.g&&(this.response=this.responseText=e,xn(this))},f.Ta=function(e){this.g&&(this.response=e,xn(this))},f.ha=function(){this.g&&xn(this)},f.setRequestHeader=function(e,t){this.v.append(e,t)},f.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},f.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var En=v.JSON.parse;function In(e){Ie.call(this),this.headers=new Rt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tn,this.K=this.L=!1}j(In,Ie);var Tn="",Sn=/^https?$/i,Cn=["POST","PUT"];function An(e){return"content-type"==e.toLowerCase()}function Nn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Rn(e),Dn(e)}function Rn(e){e.D||(e.D=!0,Te(e,"complete"),Te(e,"error"))}function Pn(e){if(e.h&&"undefined"!=typeof p&&(!e.C[1]||4!=Mn(e)||2!=e.ba()))if(e.v&&4==Mn(e))ze(e.Fa,0,e);else if(Te(e,"readystatechange"),4==Mn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Lt)[1]||null;if(!a&&v.self&&v.self.location){var o=v.self.location.protocol;a=o.substr(0,o.length-1)}i=!Sn.test(a?a.toLowerCase():"")}t=i}if(t)Te(e,"complete"),Te(e,"success");else{e.m=6;try{var u=2<Mn(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Rn(e)}}finally{Dn(e)}}}function Dn(e,t){if(e.g){Ln(e);var n=e.g,r=e.C[0]?y:null;e.g=null,e.C=null,t||Te(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ln(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(v.clearTimeout(e.A),e.A=null)}function Mn(e){return e.g?e.g.readyState:0}function Un(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Tn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Fn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return F(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):zt(e,t,n))}function Vn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Bn(e){this.za=0,this.l=[],this.h=new $e,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vn("baseRetryDelayMs",5e3,e),this.$a=Vn("retryDelaySeedMs",1e4,e),this.Ya=Vn("forwardChannelMaxRetries",2,e),this.ra=Vn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new un(e&&e.concurrentRequestLimit),this.Ca=new mn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function qn(e){if(Hn(e),3==e.G){var t=e.V++,n=Ut(e.F);zt(n,"SID",e.J),zt(n,"RID",t),zt(n,"TYPE","terminate"),Qn(e,n),(t=new yt(e,e.h,t,void 0)).K=2,t.v=Ht(Ut(n)),n=!1,v.navigator&&v.navigator.sendBeacon&&(n=v.navigator.sendBeacon(t.v.toString(),"")),!n&&v.Image&&((new Image).src=t.v,n=!0),n||(t.g=or(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Et(t)}ir(e)}function zn(e){e.g&&(Jn(e),e.g.cancel(),e.g=null)}function Hn(e){zn(e),e.u&&(v.clearTimeout(e.u),e.u=null),er(e),e.i.cancel(),e.m&&("number"===typeof e.m&&v.clearTimeout(e.m),e.m=null)}function Wn(e,t){e.l.push(new on(e.Za++,t)),3==e.G&&Kn(e)}function Kn(e){ln(e.i)||e.m||(e.m=!0,Me(e.Ha,e),e.C=0)}function Gn(e,t){var n;n=t?t.m:e.V++;var r=Ut(e.F);zt(r,"SID",e.J),zt(r,"RID",n),zt(r,"AID",e.U),Qn(e,r),e.o&&e.s&&Fn(r,e.o,e.s),n=new yt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=$n(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),dn(e.i,n),wt(n,r,t)}function Qn(e,t){e.j&&Nt({},function(e,n){zt(t,n,e)})}function $n(e,t,n){n=Math.min(e.l.length,n);var r=e.j?_(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{gn(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Yn(e){e.g||e.u||(e.Y=1,Me(e.Ga,e),e.A=0)}function Xn(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=at(_(e.Ga,e),nr(e,e.A)),e.A++,!0)}function Jn(e){null!=e.B&&(v.clearTimeout(e.B),e.B=null)}function Zn(e){e.g=new yt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ut(e.oa);zt(t,"RID","rpc"),zt(t,"SID",e.J),zt(t,"CI",e.N?"0":"1"),zt(t,"AID",e.U),Qn(e,t),zt(t,"TYPE","xmlhttp"),e.o&&e.s&&Fn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ht(Ut(t)),n.s=null,n.U=!0,Ot(n,e)}function er(e){null!=e.v&&(v.clearTimeout(e.v),e.v=null)}function tr(e,t){var n=null;if(e.g==t){er(e),Jn(e),e.g=null;var r=2}else{if(!hn(e.i,t))return;n=t.D,pn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Te(r=Ze(),new it(r,n,t,i)),Kn(e)}else Yn(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(fn(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=at(_(e.Ha,e,t),nr(e,e.C)),e.C++,!0))}(e,t)||2==r&&Xn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:rr(e,5);break;case 4:rr(e,10);break;case 3:rr(e,6);break;default:rr(e,2)}}function nr(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function rr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=_(e.jb,e);n||(n=new Mt("//www.google.com/images/cleardot.gif"),v.location&&"http"==v.location.protocol||Ft(n,"https"),Ht(n)),function(e,t){var n=new $e;if(v.Image){var r=new Image;r.onload=x(bn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=x(bn,n,r,"TestLoadImage: error",!1,t),r.onabort=x(bn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=x(bn,n,r,"TestLoadImage: timeout",!1,t),v.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else rt(2);e.G=0,e.j&&e.j.va(t),ir(e),Hn(e)}function ir(e){e.G=0,e.I=-1,e.j&&(0==vn(e.i).length&&0==e.l.length||(e.i.i.length=0,A(e.l),e.l.length=0),e.j.ua())}function ar(e,t,n){var r=function(e){return e instanceof Mt?Ut(e):new Mt(e,void 0)}(n);if(""!=r.i)t&&Vt(r,t+"."+r.i),Bt(r,r.m);else{var i=v.location;r=function(e,t,n,r){var i=new Mt(null,void 0);return e&&Ft(i,e),t&&Vt(i,t),n&&Bt(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&F(e.aa,function(e,t){zt(r,t,e)}),t=e.D,n=e.sa,t&&n&&zt(r,t,n),zt(r,"VER",e.ma),Qn(e,r),r}function or(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new In(new kn({ib:!0})):new In(e.qa)).L=e.H,t}function ur(){}function sr(){if(K&&!(10<=Number(ae)))throw Error("Environmental error: no available transport.")}function cr(e,t){Ie.call(this),this.g=new Bn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!N(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hr(this)}function lr(e){dt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fr(){pt.call(this),this.status=1}function hr(e){this.g=e}(f=In.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ft.g(),this.C=this.u?ct(this.u):ct(ft),this.g.onreadystatechange=_(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Nn(this,a)}e=n||"";var i=new Rt(this.headers);r&&Nt(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=An,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=v.FormData&&e instanceof v.FormData,!(0<=T(Cn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ln(this),0<this.B&&((this.K=function(e){return K&&re()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_(this.pa,this)):this.A=ze(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Nn(this,a)}},f.pa=function(){"undefined"!=typeof p&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Te(this,"timeout"),this.abort(8))},f.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Te(this,"complete"),Te(this,"abort"),Dn(this))},f.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dn(this,!0)),In.Z.M.call(this)},f.Fa=function(){this.s||(this.F||this.v||this.l?Pn(this):this.cb())},f.cb=function(){Pn(this)},f.ba=function(){try{return 2<Mn(this)?this.g.status:-1}catch(sn){return-1}},f.ga=function(){try{return this.g?this.g.responseText:""}catch(sn){return""}},f.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),En(t)}},f.Da=function(){return this.m},f.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(f=Bn.prototype).ma=8,f.G=1,f.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},f.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new yt(this,this.h,e,void 0),n=this.s;if(this.P&&(n?q(n=V(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=$n(this,t,r),zt(i=Ut(this.F),"RID",e),zt(i,"CVER",22),this.D&&zt(i,"X-HTTP-Session-Id",this.D),Qn(this,i),this.o&&n&&Fn(i,this.o,n),dn(this.i,t),this.Ra&&zt(i,"TYPE","init"),this.ja?(zt(i,"$req",r),zt(i,"SID","null"),t.$=!0,wt(t,i,null)):wt(t,i,r),this.G=2}}else 3==this.G&&(e?Gn(this,e):0==this.l.length||ln(this.i)||Gn(this))},f.Ga=function(){if(this.u=null,Zn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=at(_(this.bb,this),e)}},f.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rt(10),zn(this),Zn(this))},f.ab=function(){null!=this.v&&(this.v=null,zn(this),Xn(this),rt(19))},f.jb=function(e){e?(this.h.info("Successfully pinged google.com"),rt(2)):(this.h.info("Failed to ping google.com"),rt(1))},(f=ur.prototype).xa=function(){},f.wa=function(){},f.va=function(){},f.ua=function(){},f.Oa=function(){},sr.prototype.g=function(e,t){return new cr(e,t)},j(cr,Ie),cr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Me(_(e.hb,e,t))),rt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ar(e,null,e.W),Kn(e)},cr.prototype.close=function(){qn(this.g)},cr.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Wn(this.g,t)}else this.v?((t={}).__data__=Ce(e),Wn(this.g,t)):Wn(this.g,e)},cr.prototype.M=function(){this.g.j=null,delete this.j,qn(this.g),delete this.g,cr.Z.M.call(this)},j(lr,dt),j(fr,pt),j(hr,ur),hr.prototype.xa=function(){Te(this.g,"a")},hr.prototype.wa=function(e){Te(this.g,new lr(e))},hr.prototype.va=function(e){Te(this.g,new fr(e))},hr.prototype.ua=function(){Te(this.g,"b")},sr.prototype.createWebChannel=sr.prototype.g,cr.prototype.send=cr.prototype.u,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,ut.COMPLETE="complete",lt.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Ie.prototype.listen=Ie.prototype.N,In.prototype.listenOnce=In.prototype.O,In.prototype.getLastError=In.prototype.La,In.prototype.getLastErrorCode=In.prototype.Da,In.prototype.getStatus=In.prototype.ba,In.prototype.getResponseJson=In.prototype.Qa,In.prototype.getResponseText=In.prototype.ga,In.prototype.send=In.prototype.ea;var dr=d.createWebChannelTransport=function(){return new sr},pr=d.getStatEventTarget=function(){return Ze()},vr=d.ErrorCode=ot,yr=d.EventType=ut,mr=d.Event=Xe,gr=d.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},br=d.FetchXmlHttpFactory=kn,kr=d.WebChannel=lt,wr=d.XhrIo=In}).call(this,n(32))},function(e,t,n){"use strict";var r=n(19);function i(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],u=e&&i(e),s=t&&i(t),c=u||s;if(e&&i(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var l=o[o.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=o.length;h>=0;h--){var d=o[h];"."===d?a(o,h):".."===d?(a(o,h),f++):f&&(a(o,h),f--)}if(!c)for(;f--;f)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function u(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var s=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});if("object"===typeof t||"object"===typeof n){var r=u(t),i=u(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every(function(r){return e(t[r],n[r])})}return!1},c=n(24);function l(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function v(e,t,n,i){var a;"string"===typeof e?(a=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(a=Object(r.a)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(u){throw u instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):u}return n&&(a.key=n),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function y(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&s(e.state,t.state)}function m(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}n.d(t,"a",function(){return _}),n.d(t,"b",function(){return S}),n.d(t,"d",function(){return A}),n.d(t,"c",function(){return v}),n.d(t,"f",function(){return y}),n.d(t,"e",function(){return p});var g=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var k="popstate",w="hashchange";function O(){try{return window.history.state||{}}catch(e){return{}}}function _(e){void 0===e&&(e={}),g||Object(c.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,u=void 0!==o&&o,s=a.getUserConfirmation,f=void 0===s?b:s,y=a.keyLength,_=void 0===y?6:y,x=e.basename?d(l(e.basename)):"";function j(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return x&&(a=h(a,x)),v(a,r,n)}function E(){return Math.random().toString(36).substr(2,_)}var I=m();function T(e){Object(r.a)(V,e),V.length=t.length,I.notifyListeners(V.location,V.action)}function S(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||N(j(e.state))}function C(){N(j(O()))}var A=!1;function N(e){if(A)A=!1,T();else{I.confirmTransitionTo(e,"POP",f,function(t){t?T({action:"POP",location:e}):function(e){var t=V.location,n=P.indexOf(t.key);-1===n&&(n=0);var r=P.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(A=!0,L(i))}(e)})}}var R=j(O()),P=[R.key];function D(e){return x+p(e)}function L(e){t.go(e)}var M=0;function U(e){1===(M+=e)&&1===e?(window.addEventListener(k,S),i&&window.addEventListener(w,C)):0===M&&(window.removeEventListener(k,S),i&&window.removeEventListener(w,C))}var F=!1;var V={length:t.length,action:"POP",location:R,createHref:D,push:function(e,r){var i=v(e,r,E(),V.location);I.confirmTransitionTo(i,"PUSH",f,function(e){if(e){var r=D(i),a=i.key,o=i.state;if(n)if(t.pushState({key:a,state:o},null,r),u)window.location.href=r;else{var s=P.indexOf(V.location.key),c=P.slice(0,s+1);c.push(i.key),P=c,T({action:"PUSH",location:i})}else window.location.href=r}})},replace:function(e,r){var i=v(e,r,E(),V.location);I.confirmTransitionTo(i,"REPLACE",f,function(e){if(e){var r=D(i),a=i.key,o=i.state;if(n)if(t.replaceState({key:a,state:o},null,r),u)window.location.replace(r);else{var s=P.indexOf(V.location.key);-1!==s&&(P[s]=i.key),T({action:"REPLACE",location:i})}else window.location.replace(r)}})},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=I.setPrompt(e);return F||(U(1),F=!0),function(){return F&&(F=!1,U(-1)),t()}},listen:function(e){var t=I.appendListener(e);return U(1),function(){U(-1),t()}}};return V}var x="hashchange",j={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function E(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function I(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function T(e){window.location.replace(E(window.location.href)+"#"+e)}function S(e){void 0===e&&(e={}),g||Object(c.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,a=void 0===i?b:i,o=n.hashType,u=void 0===o?"slash":o,s=e.basename?d(l(e.basename)):"",f=j[u],y=f.encodePath,k=f.decodePath;function w(){var e=k(I());return s&&(e=h(e,s)),v(e)}var O=m();function _(e){Object(r.a)(V,e),V.length=t.length,O.notifyListeners(V.location,V.action)}var S=!1,C=null;function A(){var e,t,n=I(),r=y(n);if(n!==r)T(r);else{var i=w(),o=V.location;if(!S&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(C===p(i))return;C=null,function(e){if(S)S=!1,_();else{O.confirmTransitionTo(e,"POP",a,function(t){t?_({action:"POP",location:e}):function(e){var t=V.location,n=D.lastIndexOf(p(t));-1===n&&(n=0);var r=D.lastIndexOf(p(e));-1===r&&(r=0);var i=n-r;i&&(S=!0,L(i))}(e)})}}(i)}}var N=I(),R=y(N);N!==R&&T(R);var P=w(),D=[p(P)];function L(e){t.go(e)}var M=0;function U(e){1===(M+=e)&&1===e?window.addEventListener(x,A):0===M&&window.removeEventListener(x,A)}var F=!1;var V={length:t.length,action:"POP",location:P,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=E(window.location.href)),n+"#"+y(s+p(e))},push:function(e,t){var n=v(e,void 0,void 0,V.location);O.confirmTransitionTo(n,"PUSH",a,function(e){if(e){var t=p(n),r=y(s+t);if(I()!==r){C=t,function(e){window.location.hash=e}(r);var i=D.lastIndexOf(p(V.location)),a=D.slice(0,i+1);a.push(t),D=a,_({action:"PUSH",location:n})}else _()}})},replace:function(e,t){var n=v(e,void 0,void 0,V.location);O.confirmTransitionTo(n,"REPLACE",a,function(e){if(e){var t=p(n),r=y(s+t);I()!==r&&(C=t,T(r));var i=D.indexOf(p(V.location));-1!==i&&(D[i]=t),_({action:"REPLACE",location:n})}})},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=O.setPrompt(e);return F||(U(1),F=!0),function(){return F&&(F=!1,U(-1)),t()}},listen:function(e){var t=O.appendListener(e);return U(1),function(){U(-1),t()}}};return V}function C(e,t,n){return Math.min(Math.max(e,t),n)}function A(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,a=void 0===i?["/"]:i,o=t.initialIndex,u=void 0===o?0:o,s=t.keyLength,c=void 0===s?6:s,l=m();function f(e){Object(r.a)(k,e),k.length=k.entries.length,l.notifyListeners(k.location,k.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=C(u,0,a.length-1),y=a.map(function(e){return v(e,void 0,"string"===typeof e?h():e.key||h())}),g=p;function b(e){var t=C(k.index+e,0,k.entries.length-1),r=k.entries[t];l.confirmTransitionTo(r,"POP",n,function(e){e?f({action:"POP",location:r,index:t}):f()})}var k={length:y.length,action:"POP",location:y[d],index:d,entries:y,createHref:g,push:function(e,t){var r=v(e,t,h(),k.location);l.confirmTransitionTo(r,"PUSH",n,function(e){if(e){var t=k.index+1,n=k.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),f({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,t){var r=v(e,t,h(),k.location);l.confirmTransitionTo(r,"REPLACE",n,function(e){e&&(k.entries[k.index]=r,f({action:"REPLACE",location:r}))})},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=k.index+e;return t>=0&&t<k.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return k}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=!0,i="Invariant failed";function a(e,t){if(!e){if(r)throw new Error(i);var n="function"===typeof t?t():t;throw new Error(n?i+": "+n:i)}}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r,i=n(5),a=n(1),o=n(3),u=n(6),s=n(16),c=n(13),l=n(20),f=function(){function e(t,n){var r=this;Object(a.a)(this,e),this._delegate=t,this.firebase=n,Object(c._addComponent)(t,new s.a("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return Object(o.a)(e,[{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),Object(c.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Object(c._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Object(c._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}},{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}}]),e}(),h=(r={},Object(i.a)(r,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(i.a)(r,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),r),d=new u.b("app-compat","Firebase",h);var p=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=c.initializeApp(r,i);if(Object(u.f)(t,a.name))return t[a.name];var o=new e(a,n);return t[a.name]=o,o},app:r,registerVersion:c.registerVersion,setLogLevel:c.setLogLevel,onLog:c.onLog,apps:null,SDK_VERSION:c.SDK_VERSION,INTERNAL:{registerComponent:function(t){var i=t.name,a=i.replace("-compat","");if(c._registerComponent(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!==typeof e[a])throw d.create("invalid-app-argument",{appName:i});return e[a]()};void 0!==t.serviceProps&&Object(u.j)(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=this._getService.bind(this,i),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(this,t.multipleInstances?r:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:c}};function r(e){if(e=e||c._DEFAULT_ENTRY_NAME,!Object(u.f)(t,e))throw d.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),r.App=e,n}(f);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(u.j)(t,e)},createSubscribe:u.h,ErrorFactory:u.b,deepExtend:u.j}),t}(),v=new l.b("@firebase/app-compat"),y="@firebase/app-compat",m="0.1.20";if(Object(u.n)()&&void 0!==self.firebase){v.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&v.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b,k=p;Object(c.registerVersion)(y,m,b)},function(e,t,n){"use strict";var r=n(26);n.d(t,"a",function(){return r.a});r.a.registerVersion("firebase","9.6.9","app-compat")},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(29);function i(e,t,n){return(i=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Object(r.a)(a,n.prototype),a}).apply(null,arguments)}},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return m});var r=n(17),i=n(25),a=n(4),o=n.n(a),u=n(23),s=n(19),c=n(28),l=n(24);o.a.Component;var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(u.b)(t.props),t}return Object(i.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.c,{history:this.history,children:this.props.children})},t}(o.a.Component);var h=function(e,t){return"function"===typeof e?e(t):e},d=function(e,t){return"string"===typeof e?Object(u.c)(e,null,null,t):e},p=function(e){return e},v=o.a.forwardRef;"undefined"===typeof v&&(v=p);var y=v(function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,a=Object(c.a)(e,["innerRef","navigate","onClick"]),u=a.target,l=Object(s.a)({},a,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=p!==v&&t||n,o.a.createElement("a",l)});var m=v(function(e,t){var n=e.component,i=void 0===n?y:n,a=e.replace,f=e.to,m=e.innerRef,g=Object(c.a)(e,["component","replace","to","innerRef"]);return o.a.createElement(r.e.Consumer,null,function(e){e||Object(l.a)(!1);var n=e.history,r=d(h(f,e.location),e.location),c=r?n.createHref(r):"",y=Object(s.a)({},g,{href:c,navigate:function(){var t=h(f,e.location),r=Object(u.e)(e.location)===Object(u.e)(d(t));(a||r?n.replace:n.push)(t)}});return p!==v?y.ref=t||m:y.innerRef=m,o.a.createElement(i,y)})}),g=function(e){return e},b=o.a.forwardRef;"undefined"===typeof b&&(b=g);b(function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,a=e.activeClassName,u=void 0===a?"active":a,f=e.activeStyle,p=e.className,v=e.exact,y=e.isActive,k=e.location,w=e.sensitive,O=e.strict,_=e.style,x=e.to,j=e.innerRef,E=Object(c.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.a.createElement(r.e.Consumer,null,function(e){e||Object(l.a)(!1);var n=k||e.location,a=d(h(x,n),n),c=a.pathname,I=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),T=I?Object(r.f)(n.pathname,{path:I,exact:v,sensitive:w,strict:O}):null,S=!!(y?y(T,n):T),C="function"===typeof p?p(S):p,A="function"===typeof _?_(S):_;S&&(C=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}(C,u),A=Object(s.a)({},A,f));var N=Object(s.a)({"aria-current":S&&i||null,className:C,style:A,to:a},E);return g!==b?N.ref=t||j:N.innerRef=j,o.a.createElement(m,N)})})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(62)()},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}n.d(t,"a",function(){return r})},,function(e,t,n){var r=n(64);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],b=n[6],k=n[7];u&&(r.push(u),u="");var w=null!=v&&null!=p&&p!==v,O="+"===b||"*"===b,_="?"===b||"*"===b,x=n[2]||l,j=m||g;r.push({name:y||a++,prefix:v||"",delimiter:x,optional:_,repeat:O,partial:w,asterisk:!!k,pattern:j?c(j):k?".*":"[^"+s(x)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in n=Object(arguments[s]))i.call(n,c)&&(u[c]=n[c]);if(r){o=r(n);for(var l=0;l<o.length;l++)a.call(n,o[l])&&(u[o[l]]=n[o[l]])}}return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(41),o=(r=a)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"update",value:function(e){this.x=e.x,this.y=e.y}},{key:"moveByAngle",value:function(e,t){var n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}},{key:"equalsTo",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"getDifferenceTo",value:function(e){return new o.default(this.x-e.x,this.y-e.y)}},{key:"getDistanceTo",value:function(e){var t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}},{key:"getAngleTo",value:function(e){var t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}return r(e,[{key:"update",value:function(e){this.x=e.x,this.y=e.y}},{key:"getDifferenceTo",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"getDistanceTo",value:function(e){var t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}}]),e}();t.default=i},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(52)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyPoint=t.Point=t.LazyBrush=void 0;var r=o(n(60)),i=o(n(41)),a=o(n(40));function o(e){return e&&e.__esModule?e:{default:e}}t.LazyBrush=r.default,t.Point=i.default,t.LazyPoint=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point=t.Catenary=void 0;var r=a(n(61)),i=a(n(42));function a(e){return e&&e.__esModule?e:{default:e}}t.Catenary=r.default,t.Point=i.default},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i="undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),a="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},o=2;var u=20,s=["top","right","bottom","left","width","height","size","weight"],c="undefined"!==typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function u(){n&&(n=!1,e()),r&&c()}function s(){a(u)}function c(){var e=Date.now();if(n){if(e-i<o)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return c}(this.refresh.bind(this),u)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),f=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},h=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},d=b(0,0,0,0);function p(e){return parseFloat(e)||0}function v(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+p(e["border-"+n+"-width"])},0)}function y(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=h(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=e["padding-"+i];t[i]=p(a)}return t}(r),a=i.left+i.right,o=i.top+i.bottom,u=p(r.width),s=p(r.height);if("border-box"===r.boxSizing&&(Math.round(u+a)!==t&&(u-=v(r,"left","right")+a),Math.round(s+o)!==n&&(s-=v(r,"top","bottom")+o)),!function(e){return e===h(e).document.documentElement}(e)){var c=Math.round(u+a)-t,l=Math.round(s+o)-n;1!==Math.abs(c)&&(u-=c),1!==Math.abs(l)&&(s-=l)}return b(i.left,i.top,u,s)}var m="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof h(e).SVGGraphicsElement}:function(e){return e instanceof h(e).SVGElement&&"function"===typeof e.getBBox};function g(e){return r?m(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):y(e):d}function b(e,t,n,r){return{x:e,y:t,width:n,height:r}}var k=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),w=function(){return function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(a.prototype);return f(o,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),o}(t);f(this,{target:e,contentRect:n})}}(),O=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new k(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new w(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),_="undefined"!==typeof WeakMap?new WeakMap:new n,x=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),r=new O(t,n,this);_.set(this,r)}}();["observe","unobserve","disconnect"].forEach(function(e){x.prototype[e]=function(){var t;return(t=_.get(this))[e].apply(t,arguments)}});var j="undefined"!==typeof i.ResizeObserver?i.ResizeObserver:x;t.a=j}).call(this,n(32))},function(e,t,n){"use strict";(function(e){var r=n(4),i=n.n(r),a=n(25),o=n(33),u=n.n(o),s=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};var l=i.a.createContext||function(e,t){var n,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",l=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(n,r){e=n,t.forEach(function(t){return t(e,r)})}}}(t.props.value),t}Object(a.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((a=r)===(o=i)?0!==a||1/a===1/o:a!==a&&o!==o)?n=0:(n="function"===typeof t?t(r,i):s,0!==(n|=0)&&this.emitter.set(e.value,n))}var a,o},r.render=function(){return this.props.children},n}(r.Component);l.childContextTypes=((n={})[o]=u.a.object.isRequired,n);var f=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(a.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?s:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?s:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return f.contextTypes=((i={})[o]=u.a.object,i),{Provider:l,Consumer:f}};t.a=l}).call(this,n(32))},function(e,t,n){"use strict";var r=n(67),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(b){}}}}return t}},function(e,t,n){"use strict";var r=n(7),i=n(29);var a=n(30);function o(e){var t="function"===typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return Object(a.a)(e,arguments,Object(r.a)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Object(i.a)(o,e)})(e)}n.d(t,"a",function(){return o})},,function(e,t,n){"use strict";var r=n(39),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var b=g.prototype=new m;b.constructor=g,r(b,y.prototype),b.isPureReactComponent=!0;var k={current:null},w=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!O.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:k.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var j=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+E(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(j,"$&/")+"/"),I(o,t,n,"",function(e){return e})):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(j,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+E(u=e[c],c);s+=I(u,t,n,l,o)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(u=e.next()).done;)s+=I(u=u.value,t,n,l=r+E(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function T(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function S(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}if(1===e._status)return e._result;throw e._result}var C={current:null};function A(){var e=C.current;if(null===e)throw Error(d(321));return e}var N={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!x(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!O.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:S}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";var r=n(4),i=n(39),a=n(53);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new y(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new y(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new y(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new y(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new y(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,b);m[t]=new y(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,b);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,b);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=60103,_=60106,x=60107,j=60108,E=60114,I=60109,T=60110,S=60112,C=60113,A=60120,N=60115,R=60116,P=60121,D=60128,L=60129,M=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var F=Symbol.for;O=F("react.element"),_=F("react.portal"),x=F("react.fragment"),j=F("react.strict_mode"),E=F("react.profiler"),I=F("react.provider"),T=F("react.context"),S=F("react.forward_ref"),C=F("react.suspense"),A=F("react.suspense_list"),N=F("react.memo"),R=F("react.lazy"),P=F("react.block"),F("react.scope"),D=F("react.opaque.id"),L=F("react.debug_trace_mode"),M=F("react.offscreen"),U=F("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var H=!1;function W(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case j:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case N:return G(e.type);case P:return G(e._render);case R:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ve,ye=(ve=function(e,t){if(e.namespaceURI!==fe.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ve(e,t)})}:ve);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function ke(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ke(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ge).forEach(function(e){be.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]})});var Oe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(Oe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if(!("object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Te=null;function Se(e){if(e=Xr(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=Zr(t),Ee(e.stateNode,e.type,t))}}function Ce(e){Ie?Te?Te.push(e):Te=[e]:Ie=e}function Ae(){if(Ie){var e=Ie,t=Te;if(Te=Ie=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ne(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function Pe(){}var De=Ne,Le=!1,Me=!1;function Ue(){null===Ie&&null===Te||(Pe(),Ae())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=Zr(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ve){Ve=!1}var qe=!1,ze=null,He=!1,We=null,Ke={onError:function(e){qe=!0,ze=e}};function Ge(e,t,n,r,i,a,o,u,s){qe=!1,ze=null,function(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}.apply(Ke,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ye(e){if(Qe(e)!==e)throw Error(o(188))}function Xe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ye(i),e;if(a===r)return Ye(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Je(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Ze,et,tt,nt,rt=!1,it=[],at=null,ot=null,ut=null,st=new Map,ct=new Map,lt=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function dt(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":ot=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":st.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function pt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=ht(t,n,r,i,a),null!==t&&(null!==(t=Xr(t))&&et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vt(e){var t=Yr(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void nt(e.lanePriority,function(){a.unstable_runWithPriority(e.priority,function(){tt(n)})})}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Xr(n))&&et(t),e.blockedOn=n,!1;t.shift()}return!0}function mt(e,t,n){yt(e)&&n.delete(t)}function gt(){for(rt=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=Xr(e.blockedOn))&&Ze(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&it.shift()}null!==at&&yt(at)&&(at=null),null!==ot&&yt(ot)&&(ot=null),null!==ut&&yt(ut)&&(ut=null),st.forEach(mt),ct.forEach(mt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,rt||(rt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,gt)))}function kt(e){function t(t){return bt(t,e)}if(0<it.length){bt(it[0],e);for(var n=1;n<it.length;n++){var r=it[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&bt(at,e),null!==ot&&bt(ot,e),null!==ut&&bt(ut,e),st.forEach(t),ct.forEach(t),n=0;n<lt.length;n++)(r=lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<lt.length&&null===(n=lt[0]).blockedOn;)vt(n),null===n.blockedOn&&lt.shift()}function wt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ot={animationend:wt("Animation","AnimationEnd"),animationiteration:wt("Animation","AnimationIteration"),animationstart:wt("Animation","AnimationStart"),transitionend:wt("Transition","TransitionEnd")},_t={},xt={};function jt(e){if(_t[e])return _t[e];if(!Ot[e])return e;var t,n=Ot[e];for(t in n)if(n.hasOwnProperty(t)&&t in xt)return _t[e]=n[t];return e}f&&(xt=document.createElement("div").style,"AnimationEvent"in window||(delete Ot.animationend.animation,delete Ot.animationiteration.animation,delete Ot.animationstart.animation),"TransitionEvent"in window||delete Ot.transitionend.transition);var Et=jt("animationend"),It=jt("animationiteration"),Tt=jt("animationstart"),St=jt("transitionend"),Ct=new Map,At=new Map,Nt=["abort","abort",Et,"animationEnd",It,"animationIteration",Tt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",St,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),At.set(r,t),Ct.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Pt=8;function Dt(e){if(0!==(1&e))return Pt=15,1;if(0!==(2&e))return Pt=14,2;if(0!==(4&e))return Pt=13,4;var t=24&e;return 0!==t?(Pt=12,t):0!==(32&e)?(Pt=11,32):0!==(t=192&e)?(Pt=10,t):0!==(256&e)?(Pt=9,256):0!==(t=3584&e)?(Pt=8,t):0!==(4096&e)?(Pt=7,4096):0!==(t=4186112&e)?(Pt=6,t):0!==(t=62914560&e)?(Pt=5,t):67108864&e?(Pt=4,67108864):0!==(134217728&e)?(Pt=3,134217728):0!==(t=805306368&e)?(Pt=2,t):0!==(1073741824&e)?(Pt=1,1073741824):(Pt=8,e)}function Lt(e,t){var n=e.pendingLanes;if(0===n)return Pt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Pt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Dt(s),i=Pt):0!==(u&=a)&&(r=Dt(u),i=Pt)}else 0!==(a=n&~o)?(r=Dt(a),i=Pt):0!==u&&(r=Dt(u),i=Pt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Dt(t),i<=Pt)return t;Pt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function Mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ft(24&~t))?Ut(10,t):e;case 10:return 0===(e=Ft(192&~t))?Ut(8,t):e;case 8:return 0===(e=Ft(3584&~t))&&(0===(e=Ft(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ft(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ft(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(zt(e)/Ht|0)|0},zt=Math.log,Ht=Math.LN2;var Wt=a.unstable_UserBlockingPriority,Kt=a.unstable_runWithPriority,Gt=!0;function Qt(e,t,n,r){Le||Pe();var i=Yt,a=Le;Le=!0;try{Re(i,e,t,n,r)}finally{(Le=a)||Ue()}}function $t(e,t,n,r){Kt(Wt,Yt.bind(null,e,t,n,r))}function Yt(e,t,n,r){var i;if(Gt)if((i=0===(4&t))&&0<it.length&&-1<ft.indexOf(e))e=ht(null,e,t,n,r),it.push(e);else{var a=Xt(e,t,n,r);if(null===a)i&&dt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=ht(a,e,t,n,r),void it.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=pt(at,e,t,n,r,i),!0;case"dragenter":return ot=pt(ot,e,t,n,r,i),!0;case"mouseover":return ut=pt(ut,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return st.set(a,pt(st.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ct.set(a,pt(ct.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;dt(e,r)}Sr(e,t,r,null,n)}}}function Xt(e,t,n,r){var i=je(r);if(null!==(i=Yr(i))){var a=Qe(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=$e(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Sr(e,t,r,i,n),null}var Jt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function an(){return!1}function on(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var un,sn,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=on(ln),hn=i({},ln,{view:0,detail:0}),dn=on(hn),pn=i({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(un=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=un=0,cn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),vn=on(pn),yn=on(i({},pn,{dataTransfer:0})),mn=on(i({},hn,{relatedTarget:0})),gn=on(i({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=on(i({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),kn=on(i({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},On={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function jn(){return xn}var En=on(i({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?On[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),In=on(i({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(i({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),Sn=on(i({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=on(i({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),An=[9,13,27,32],Nn=f&&"CompositionEvent"in window,Rn=null;f&&"documentMode"in document&&(Rn=document.documentMode);var Pn=f&&"TextEvent"in window&&!Rn,Dn=f&&(!Nn||Rn&&8<Rn&&11>=Rn),Ln=String.fromCharCode(32),Mn=!1;function Un(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function zn(e,t,n,r){Ce(r),0<(t=Ar(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Kn(e){_r(e,0)}function Gn(e){if(X(Jr(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(f){var Yn;if(f){var Xn="oninput"in document;if(!Xn){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),Xn="function"===typeof Jn.oninput}Yn=Xn}else Yn=!1;$n=Yn&&(!document.documentMode||9<document.documentMode)}function Zn(){Hn&&(Hn.detachEvent("onpropertychange",er),Wn=Hn=null)}function er(e){if("value"===e.propertyName&&Gn(Wn)){var t=[];if(zn(t,Wn,e,je(e)),e=Kn,Le)e(t);else{Le=!0;try{Ne(e,t)}finally{Le=!1,Ue()}}}}function tr(e,t,n){"focusin"===e?(Zn(),Wn=n,(Hn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Wn)}function rr(e,t){if("click"===e)return Gn(t)}function ir(e,t){if("input"===e||"change"===e)return Gn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},or=Object.prototype.hasOwnProperty;function ur(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!or.call(t,n[r])||!ar(e[n[r]],t[n[r]]))return!1;return!0}function sr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=sr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sr(r)}}function lr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var hr=f&&"documentMode"in document&&11>=document.documentMode,dr=null,pr=null,vr=null,yr=!1;function mr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==dr||dr!==J(r)||("selectionStart"in(r=dr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ur(vr,r)||(vr=r,0<(r=Ar(pr,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=dr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Nt,2);for(var gr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),br=0;br<gr.length;br++)At.set(gr[br],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wr=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ge.apply(this,arguments),qe){if(!qe)throw Error(o(198));var l=ze;qe=!1,ze=null,He||(He=!0,We=l)}}(r,t,void 0,e),e.currentTarget=null}function _r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Or(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Or(i,u,c),a=s}}}if(He)throw e=We,He=!1,We=null,e}function xr(e,t){var n=ei(t),r=e+"__bubble";n.has(r)||(Tr(t,e,2,!1),n.add(r))}var jr="_reactListening"+Math.random().toString(36).slice(2);function Er(e){e[jr]||(e[jr]=!0,u.forEach(function(t){wr.has(t)||Ir(t,!1,e,null),Ir(t,!0,e,null)}))}function Ir(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&wr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=ei(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Tr(a,e,i,t),o.add(u))}function Tr(e,t,n,r){var i=At.get(t);switch(void 0===i?2:i){case 0:i=Qt;break;case 1:i=$t;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Sr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=Yr(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Me)return e(t,n);Me=!0;try{De(e,t,n)}finally{Me=!1,Ue()}}(function(){var r=a,i=je(n),o=[];e:{var u=Ct.get(e);if(void 0!==u){var s=fn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Et:case It:case Tt:s=gn;break;case St:s=Sn;break;case"scroll":s=dn;break;case"wheel":s=Cn;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=In}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Fe(p,h))&&l.push(Cr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!Yr(c)&&!c[Qr])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?Yr(c):null)&&(c!==(f=Qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:Jr(s),d=null==c?u:Jr(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,Yr(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Nr(d))p++;for(d=0,v=h;v;v=Nr(v))d++;for(;0<p-d;)l=Nr(l),p--;for(;0<d-p;)h=Nr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Nr(l),h=Nr(h)}l=null}else l=null;null!==s&&Rr(o,u,s,l,!1),null!==c&&null!==f&&Rr(o,f,c,l,!0)}if("select"===(s=(u=r?Jr(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Qn;else if(qn(u))if($n)y=ir;else{y=nr;var m=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=rr);switch(y&&(y=y(e,r))?zn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?Jr(r):window,e){case"focusin":(qn(m)||"true"===m.contentEditable)&&(dr=m,pr=r,vr=null);break;case"focusout":vr=pr=dr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,mr(o,n,i);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":mr(o,n,i)}var g;if(Nn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(g=tn()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Vn=!0)),0<(m=Ar(r,b)).length&&(b=new kn(b,e,null,n,i),o.push({event:b,listeners:m}),g?b.data=g:null!==(g=Fn(n))&&(b.data=g))),(g=Pn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Mn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Mn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Nn&&Un(e,t)?(e=tn(),en=Zt=Jt=null,Vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Ar(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}_r(o,t)})}function Cr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ar(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Fe(e,n))&&r.unshift(Cr(e,a,i)),null!=(a=Fe(e,t))&&r.push(Cr(e,a,i))),e=e.return}return r}function Nr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Rr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Fe(n,a))&&o.unshift(Cr(n,s,u)):i||null!=(s=Fe(n,a))&&o.push(Cr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Pr(){}var Dr=null,Lr=null;function Mr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ur(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Fr="function"===typeof setTimeout?setTimeout:void 0,Vr="function"===typeof clearTimeout?clearTimeout:void 0;function Br(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function zr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Hr=0;var Wr=Math.random().toString(36).slice(2),Kr="__reactFiber$"+Wr,Gr="__reactProps$"+Wr,Qr="__reactContainer$"+Wr,$r="__reactEvents$"+Wr;function Yr(e){var t=e[Kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[Kr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=zr(e);null!==e;){if(n=e[Kr])return n;e=zr(e)}return t}n=(e=n).parentNode}return null}function Xr(e){return!(e=e[Kr]||e[Qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Jr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Zr(e){return e[Gr]||null}function ei(e){var t=e[$r];return void 0===t&&(t=e[$r]=new Set),t}var ti=[],ni=-1;function ri(e){return{current:e}}function ii(e){0>ni||(e.current=ti[ni],ti[ni]=null,ni--)}function ai(e,t){ti[++ni]=e.current,e.current=t}var oi={},ui=ri(oi),si=ri(!1),ci=oi;function li(e,t){var n=e.type.contextTypes;if(!n)return oi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function fi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function hi(){ii(si),ii(ui)}function di(e,t,n){if(ui.current!==oi)throw Error(o(168));ai(ui,t),ai(si,n)}function pi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function vi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oi,ci=ui.current,ai(ui,e),ai(si,si.current),!0}function yi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=pi(e,t,ci),r.__reactInternalMemoizedMergedChildContext=e,ii(si),ii(ui),ai(ui,e)):ii(si),ai(si,n)}var mi=null,gi=null,bi=a.unstable_runWithPriority,ki=a.unstable_scheduleCallback,wi=a.unstable_cancelCallback,Oi=a.unstable_shouldYield,_i=a.unstable_requestPaint,xi=a.unstable_now,ji=a.unstable_getCurrentPriorityLevel,Ei=a.unstable_ImmediatePriority,Ii=a.unstable_UserBlockingPriority,Ti=a.unstable_NormalPriority,Si=a.unstable_LowPriority,Ci=a.unstable_IdlePriority,Ai={},Ni=void 0!==_i?_i:function(){},Ri=null,Pi=null,Di=!1,Li=xi(),Mi=1e4>Li?xi:function(){return xi()-Li};function Ui(){switch(ji()){case Ei:return 99;case Ii:return 98;case Ti:return 97;case Si:return 96;case Ci:return 95;default:throw Error(o(332))}}function Fi(e){switch(e){case 99:return Ei;case 98:return Ii;case 97:return Ti;case 96:return Si;case 95:return Ci;default:throw Error(o(332))}}function Vi(e,t){return e=Fi(e),bi(e,t)}function Bi(e,t,n){return e=Fi(e),ki(e,t,n)}function qi(){if(null!==Pi){var e=Pi;Pi=null,wi(e)}zi()}function zi(){if(!Di&&null!==Ri){Di=!0;var e=0;try{var t=Ri;Vi(99,function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}}),Ri=null}catch(n){throw null!==Ri&&(Ri=Ri.slice(e+1)),ki(Ei,qi),n}finally{Di=!1}}}var Hi=w.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ki=ri(null),Gi=null,Qi=null,$i=null;function Yi(){$i=Qi=Gi=null}function Xi(e){var t=Ki.current;ii(Ki),e.type._context._currentValue=t}function Ji(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function Zi(e,t){Gi=e,$i=Qi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Co=!0),e.firstContext=null)}function ea(e,t){if($i!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||($i=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qi){if(null===Gi)throw Error(o(308));Qi=t,Gi.dependencies={lanes:0,firstContext:t,responders:null}}else Qi=Qi.next=t;return e._currentValue}var ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function oa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ua(e,t,n,r){var a=e.updateQueue;ta=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ta=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Ru|=u,e.lanes=u,e.memoizedState=h}}function sa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var ca=(new r.Component).refs;function la(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=is(),i=as(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),os(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=is(),i=as(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),os(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=is(),r=as(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),os(e,r,n)}};function ha(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function da(e,t,n){var r=!1,i=oi,a=t.contextType;return"object"===typeof a&&null!==a?a=ea(a):(i=fi(t)?ci:ui.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?li(e,i):oi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function pa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function va(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ca,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ea(a):(a=fi(t)?ci:ui.current,i.context=li(e,a)),ua(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(la(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&fa.enqueueReplaceState(i,i.state,null),ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var ya=Array.isArray;function ma(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ca&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ga(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function ba(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ds(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fs(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=ma(e,t,n),r.return=e,r):((r=Ls(n.type,n.key,n.props,null,e.mode,r)).ref=ma(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ms(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Fs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case O:return(n=Ls(t.type,t.key,t.props,null,e.mode,n)).ref=ma(e,null,t),n.return=e,n;case _:return(t=Vs(t,e.mode,n)).return=e,t}if(ya(t)||q(t))return(t=Ms(t,e.mode,n,null)).return=e,t;ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case O:return n.key===i?n.type===x?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(ya(n)||q(n))return null!==i?null:f(e,t,n,r,null);ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case O:return e=e.get(null===r.key?n:r.key)||null,r.type===x?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ya(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);ga(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach(function(e){return t(i,e)}),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),u=a(b,u,y),null===f?l=b:f.sibling=b,f=b,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach(function(e){return t(i,e)}),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===x&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case O:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(a.type===x){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}break;default:if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=ma(e,c,a),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}a.type===x?((r=Ms(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ls(a.type,a.key,a.props,null,e.mode,s)).ref=ma(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Vs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Fs(a,e.mode,s)).return=e,e=r),u(e);if(ya(a))return v(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&ga(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var ka=ba(!0),wa=ba(!1),Oa={},_a=ri(Oa),xa=ri(Oa),ja=ri(Oa);function Ea(e){if(e===Oa)throw Error(o(174));return e}function Ia(e,t){switch(ai(ja,t),ai(xa,e),ai(_a,Oa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ii(_a),ai(_a,t)}function Ta(){ii(_a),ii(xa),ii(ja)}function Sa(e){Ea(ja.current);var t=Ea(_a.current),n=de(t,e.type);t!==n&&(ai(xa,e),ai(_a,n))}function Ca(e){xa.current===e&&(ii(_a),ii(xa))}var Aa=ri(0);function Na(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ra=null,Pa=null,Da=!1;function La(e,t){var n=Rs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ma(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ua(e){if(Da){var t=Pa;if(t){var n=t;if(!Ma(e,t)){if(!(t=qr(n.nextSibling))||!Ma(e,t))return e.flags=-1025&e.flags|2,Da=!1,void(Ra=e);La(Ra,n)}Ra=e,Pa=qr(t.firstChild)}else e.flags=-1025&e.flags|2,Da=!1,Ra=e}}function Fa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ra=e}function Va(e){if(e!==Ra)return!1;if(!Da)return Fa(e),Da=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ur(t,e.memoizedProps))for(t=Pa;t;)La(e,t),t=qr(t.nextSibling);if(Fa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pa=qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pa=null}}else Pa=Ra?qr(e.stateNode.nextSibling):null;return!0}function Ba(){Pa=Ra=null,Da=!1}var qa=[];function za(){for(var e=0;e<qa.length;e++)qa[e]._workInProgressVersionPrimary=null;qa.length=0}var Ha=w.ReactCurrentDispatcher,Wa=w.ReactCurrentBatchConfig,Ka=0,Ga=null,Qa=null,$a=null,Ya=!1,Xa=!1;function Ja(){throw Error(o(321))}function Za(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function eo(e,t,n,r,i,a){if(Ka=a,Ga=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ha.current=null===e||null===e.memoizedState?Eo:Io,e=n(r,i),Xa){a=0;do{if(Xa=!1,!(25>a))throw Error(o(301));a+=1,$a=Qa=null,t.updateQueue=null,Ha.current=To,e=n(r,i)}while(Xa)}if(Ha.current=jo,t=null!==Qa&&null!==Qa.next,Ka=0,$a=Qa=Ga=null,Ya=!1,t)throw Error(o(300));return e}function to(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$a?Ga.memoizedState=$a=e:$a=$a.next=e,$a}function no(){if(null===Qa){var e=Ga.alternate;e=null!==e?e.memoizedState:null}else e=Qa.next;var t=null===$a?Ga.memoizedState:$a.next;if(null!==t)$a=t,Qa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Qa=e).memoizedState,baseState:Qa.baseState,baseQueue:Qa.baseQueue,queue:Qa.queue,next:null},null===$a?Ga.memoizedState=$a=e:$a=$a.next=e}return $a}function ro(e,t){return"function"===typeof t?t(e):t}function io(e){var t=no(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Qa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Ka&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Ga.lanes|=l,Ru|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,ar(r,t.memoizedState)||(Co=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ao(e){var t=no(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);ar(a,t.memoizedState)||(Co=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function oo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ka&e)===e)&&(t._workInProgressVersionPrimary=r,qa.push(t))),e)return n(t._source);throw qa.push(t),Error(o(350))}function uo(e,t,n,r){var i=ju;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ha.current,c=s.useState(function(){return oo(i,t,n)}),l=c[1],f=c[0];c=$a;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Ga;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect(function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!ar(u,e)){e=n(t._source),ar(f,e)||(l(e),e=as(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-qt(o),c=1<<s;r[s]|=e,o&=~c}}},[n,t,r]),s.useEffect(function(){return r(t._source,function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=as(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n(function(){throw a})}})},[t,r]),ar(p,n)&&ar(v,t)&&ar(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ro,lastRenderedState:f}).dispatch=l=xo.bind(null,Ga,e),c.queue=e,c.baseQueue=null,f=oo(i,t,n),c.memoizedState=c.baseState=f),f}function so(e,t,n){return uo(no(),e,t,n)}function co(e){var t=to();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ro,lastRenderedState:e}).dispatch=xo.bind(null,Ga,e),[t.memoizedState,e]}function lo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ga.updateQueue)?(t={lastEffect:null},Ga.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function fo(e){return e={current:e},to().memoizedState=e}function ho(){return no().memoizedState}function po(e,t,n,r){var i=to();Ga.flags|=e,i.memoizedState=lo(1|t,n,void 0,void 0===r?null:r)}function vo(e,t,n,r){var i=no();r=void 0===r?null:r;var a=void 0;if(null!==Qa){var o=Qa.memoizedState;if(a=o.destroy,null!==r&&Za(r,o.deps))return void lo(t,n,a,r)}Ga.flags|=e,i.memoizedState=lo(1|t,n,a,r)}function yo(e,t){return po(516,4,e,t)}function mo(e,t){return vo(516,4,e,t)}function go(e,t){return vo(4,2,e,t)}function bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,vo(4,2,bo.bind(null,t,e),n)}function wo(){}function Oo(e,t){var n=no();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Za(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _o(e,t){var n=no();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Za(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xo(e,t,n){var r=is(),i=as(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Ga||null!==o&&o===Ga)Xa=Ya=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,ar(s,u))return}catch(c){}os(e,i,r)}}var jo={readContext:ea,useCallback:Ja,useContext:Ja,useEffect:Ja,useImperativeHandle:Ja,useLayoutEffect:Ja,useMemo:Ja,useReducer:Ja,useRef:Ja,useState:Ja,useDebugValue:Ja,useDeferredValue:Ja,useTransition:Ja,useMutableSource:Ja,useOpaqueIdentifier:Ja,unstable_isNewReconciler:!1},Eo={readContext:ea,useCallback:function(e,t){return to().memoizedState=[e,void 0===t?null:t],e},useContext:ea,useEffect:yo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,po(4,2,bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return po(4,2,e,t)},useMemo:function(e,t){var n=to();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=to();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=xo.bind(null,Ga,e),[r.memoizedState,e]},useRef:fo,useState:co,useDebugValue:wo,useDeferredValue:function(e){var t=co(e),n=t[0],r=t[1];return yo(function(){var t=Wa.transition;Wa.transition=1;try{r(e)}finally{Wa.transition=t}},[e]),n},useTransition:function(){var e=co(!1),t=e[0];return fo(e=function(e,t){var n=Ui();Vi(98>n?98:n,function(){e(!0)}),Vi(97<n?97:n,function(){var n=Wa.transition;Wa.transition=1;try{e(!1),t()}finally{Wa.transition=n}})}.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=to();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},uo(r,e,t,n)},useOpaqueIdentifier:function(){if(Da){var e=!1,t=function(e){return{$$typeof:D,toString:e,valueOf:e}}(function(){throw e||(e=!0,n("r:"+(Hr++).toString(36))),Error(o(355))}),n=co(t)[1];return 0===(2&Ga.mode)&&(Ga.flags|=516,lo(5,function(){n("r:"+(Hr++).toString(36))},void 0,null)),t}return co(t="r:"+(Hr++).toString(36)),t},unstable_isNewReconciler:!1},Io={readContext:ea,useCallback:Oo,useContext:ea,useEffect:mo,useImperativeHandle:ko,useLayoutEffect:go,useMemo:_o,useReducer:io,useRef:ho,useState:function(){return io(ro)},useDebugValue:wo,useDeferredValue:function(e){var t=io(ro),n=t[0],r=t[1];return mo(function(){var t=Wa.transition;Wa.transition=1;try{r(e)}finally{Wa.transition=t}},[e]),n},useTransition:function(){var e=io(ro)[0];return[ho().current,e]},useMutableSource:so,useOpaqueIdentifier:function(){return io(ro)[0]},unstable_isNewReconciler:!1},To={readContext:ea,useCallback:Oo,useContext:ea,useEffect:mo,useImperativeHandle:ko,useLayoutEffect:go,useMemo:_o,useReducer:ao,useRef:ho,useState:function(){return ao(ro)},useDebugValue:wo,useDeferredValue:function(e){var t=ao(ro),n=t[0],r=t[1];return mo(function(){var t=Wa.transition;Wa.transition=1;try{r(e)}finally{Wa.transition=t}},[e]),n},useTransition:function(){var e=ao(ro)[0];return[ho().current,e]},useMutableSource:so,useOpaqueIdentifier:function(){return ao(ro)[0]},unstable_isNewReconciler:!1},So=w.ReactCurrentOwner,Co=!1;function Ao(e,t,n,r){t.child=null===e?wa(t,null,n,r):ka(t,e.child,n,r)}function No(e,t,n,r,i){n=n.render;var a=t.ref;return Zi(t,i),r=eo(e,t,n,r,a,i),null===e||Co?(t.flags|=1,Ao(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Zo(e,t,i))}function Ro(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ps(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ls(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Po(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:ur)(i,r)&&e.ref===t.ref)?Zo(e,t,a):(t.flags|=1,(e=Ds(o,r)).ref=t.ref,e.return=t,t.child=e)}function Po(e,t,n,r,i,a){if(null!==e&&ur(e.memoizedProps,r)&&e.ref===t.ref){if(Co=!1,0===(a&i))return t.lanes=e.lanes,Zo(e,t,a);0!==(16384&e.flags)&&(Co=!0)}return Mo(e,t,n,r,a)}function Do(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},ds(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ds(t,e),null;t.memoizedState={baseLanes:0},ds(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,ds(t,r);return Ao(e,t,i,n),t.child}function Lo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Mo(e,t,n,r,i){var a=fi(n)?ci:ui.current;return a=li(t,a),Zi(t,i),n=eo(e,t,n,r,a,i),null===e||Co?(t.flags|=1,Ao(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Zo(e,t,i))}function Uo(e,t,n,r,i){if(fi(n)){var a=!0;vi(t)}else a=!1;if(Zi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),da(t,n,r),va(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ea(c):c=li(t,c=fi(n)?ci:ui.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&pa(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,ua(t,r,o,i),s=t.memoizedState,u!==r||h!==s||si.current||ta?("function"===typeof l&&(la(t,n,l,r),s=t.memoizedState),(u=ta||ha(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Wi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=ea(s):s=li(t,s=fi(n)?ci:ui.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&pa(t,o,r,s),ta=!1,h=t.memoizedState,o.state=h,ua(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||si.current||ta?("function"===typeof d&&(la(t,n,d,r),p=t.memoizedState),(c=ta||ha(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Fo(e,t,n,r,a,i)}function Fo(e,t,n,r,i,a){Lo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&yi(t,n,!1),Zo(e,t,a);r=t.stateNode,So.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ka(t,e.child,null,a),t.child=ka(t,null,u,a)):Ao(e,t,u,a),t.memoizedState=r.state,i&&yi(t,n,!0),t.child}function Vo(e){var t=e.stateNode;t.pendingContext?di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&di(0,t.context,!1),Ia(e,t.containerInfo)}var Bo,qo,zo,Ho,Wo={dehydrated:null,retryLane:0};function Ko(e,t,n){var r,i=t.pendingProps,a=Aa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),ai(Aa,1&a),null===e?(void 0!==i.fallback&&Ua(t),e=i.children,a=i.fallback,o?(e=Go(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Go(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wo,t.lanes=33554432,e):((n=Us({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=$o(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Wo,i):(n=Qo(e,t,i.children,n),t.memoizedState=null,n))}function Go(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Us(t,i,0,null),n=Ms(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function Qo(e,t,n,r){var i=e.child;return e=i.sibling,n=Ds(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function $o(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ds(o,u),null!==e?r=Ds(e,r):(r=Ms(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Yo(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ji(e.return,t)}function Xo(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function Jo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ao(e,t,r.children,n),0!==(2&(r=Aa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Yo(e,n);else if(19===e.tag)Yo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ai(Aa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Na(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Xo(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Na(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Xo(t,!0,n,null,a,t.lastEffect);break;case"together":Xo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Zo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ru|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ds(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ds(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function eu(e,t){if(!Da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fi(t.type)&&hi(),null;case 3:return Ta(),ii(si),ii(ui),za(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Va(t)?t.flags|=4:r.hydrate||(t.flags|=256)),qo(t),null;case 5:Ca(t);var a=Ea(ja.current);if(n=t.type,null!==e&&null!=t.stateNode)zo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ea(_a.current),Va(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Kr]=t,r[Gr]=u,n){case"dialog":xr("cancel",r),xr("close",r);break;case"iframe":case"object":case"embed":xr("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)xr(kr[e],r);break;case"source":xr("error",r);break;case"img":case"image":case"link":xr("error",r),xr("load",r);break;case"details":xr("toggle",r);break;case"input":ee(r,u),xr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},xr("invalid",r);break;case"textarea":se(r,u),xr("invalid",r)}for(var c in _e(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&xr("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Pr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe.html&&(e=he(n)),e===fe.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Kr]=t,e[Gr]=r,Bo(e,t,!1,!1),t.stateNode=e,c=xe(n,r),n){case"dialog":xr("cancel",e),xr("close",e),a=r;break;case"iframe":case"object":case"embed":xr("load",e),a=r;break;case"video":case"audio":for(a=0;a<kr.length;a++)xr(kr[a],e);a=r;break;case"source":xr("error",e),a=r;break;case"img":case"image":case"link":xr("error",e),xr("load",e),a=r;break;case"details":xr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),xr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),xr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),xr("invalid",e);break;default:a=r}_e(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?we(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&me(e,f):"number"===typeof f&&me(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&xr("scroll",e):null!=f&&k(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Pr)}Mr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ho(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ea(ja.current),Ea(_a.current),Va(t)?(r=t.stateNode,n=t.memoizedProps,r[Kr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Kr]=t,t.stateNode=r)}return null;case 13:return ii(Aa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Va(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Aa.current)?0===Cu&&(Cu=3):(0!==Cu&&3!==Cu||(Cu=4),null===ju||0===(134217727&Ru)&&0===(134217727&Pu)||cs(ju,Iu))),(r||n)&&(t.flags|=4),null);case 4:return Ta(),qo(t),null===e&&Er(t.stateNode.containerInfo),null;case 10:return Xi(t),null;case 17:return fi(t.type)&&hi(),null;case 19:if(ii(Aa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)eu(r,!1);else{if(0!==Cu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Na(e))){for(t.flags|=64,eu(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ai(Aa,1&Aa.current|2),t.child}e=e.sibling}null!==r.tail&&Mi()>Uu&&(t.flags|=64,u=!0,eu(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Na(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),eu(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Da)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Mi()-r.renderingStartTime>Uu&&1073741824!==n&&(t.flags|=64,u=!0,eu(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Mi(),n.sibling=null,t=Aa.current,ai(Aa,u?1&t|2:1&t),n):null;case 23:case 24:return ps(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function nu(e){switch(e.tag){case 1:fi(e.type)&&hi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ta(),ii(si),ii(ui),za(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ca(e),null;case 13:return ii(Aa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ii(Aa),null;case 4:return Ta(),null;case 10:return Xi(e),null;case 23:case 24:return ps(),null;default:return null}}function ru(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function iu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}Bo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qo=function(){},zo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ea(_a.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Pr)}for(f in _e(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&xr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===D?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Ho=function(e,t,n,r){n!==r&&(t.flags|=4)};var au="function"===typeof WeakMap?WeakMap:Map;function ou(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qu||(qu=!0,zu=r),iu(0,t)},n}function uu(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return iu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this),iu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var su="function"===typeof WeakSet?WeakSet:Set;function cu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Cs(e,n)}else t.current=null}function lu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Wi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Br(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function fu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Is(n,e),Es(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Wi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&sa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}sa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Mr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&kt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function hu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=ke("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function du(e,t){if(gi&&"function"===typeof gi.onCommitFiberUnmount)try{gi.onCommitFiberUnmount(mi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Is(t,n);else{r=t;try{i()}catch(a){Cs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(cu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Cs(t,a)}break;case 5:cu(t);break;case 4:mu(e,t)}}function pu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function vu(e){return 5===e.tag||3===e.tag||4===e.tag}function yu(e){e:{for(var t=e.return;null!==t;){if(vu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(me(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||vu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode,n.insertBefore(t,r)):(n=r,n.appendChild(t)),r=r._reactRootContainer,null!==r&&void 0!==r||null!==n.onclick||(n.onclick=Pr));else if(4!==i&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function mu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(du(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(du(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function gu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Gr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),xe(e,i),t=xe(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?we(n,s):"dangerouslySetInnerHTML"===u?ye(n,s):"children"===u?me(n,s):k(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,kt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Mu=Mi(),hu(t.child,!0)),void bu(t);case 19:return void bu(t);case 17:return;case 23:case 24:return void hu(t,null!==t.memoizedState)}throw Error(o(163))}function bu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new su),t.forEach(function(t){var r=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ui()?1:2:(0===es&&(es=Nu),0===(t=Ft(62914560&~es))&&(t=4194304))),n=is(),null!==(e=us(e,t))&&(Bt(e,t,n),ss(e,n))}.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ku(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var wu=Math.ceil,Ou=w.ReactCurrentDispatcher,_u=w.ReactCurrentOwner,xu=0,ju=null,Eu=null,Iu=0,Tu=0,Su=ri(0),Cu=0,Au=null,Nu=0,Ru=0,Pu=0,Du=0,Lu=null,Mu=0,Uu=1/0;function Fu(){Uu=Mi()+500}var Vu,Bu=null,qu=!1,zu=null,Hu=null,Wu=!1,Ku=null,Gu=90,Qu=[],$u=[],Yu=null,Xu=0,Ju=null,Zu=-1,es=0,ts=0,ns=null,rs=!1;function is(){return 0!==(48&xu)?Mi():-1!==Zu?Zu:Zu=Mi()}function as(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ui()?1:2;if(0===es&&(es=Nu),0!==Hi.transition){0!==ts&&(ts=null!==Lu?Lu.pendingLanes:0),e=es;var t=4186112&~ts;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ui(),0!==(4&xu)&&98===e?e=Ut(12,es):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),es),e}function os(e,t,n){if(50<Xu)throw Xu=0,Ju=null,Error(o(185));if(null===(e=us(e,t)))return null;Bt(e,t,n),e===ju&&(Pu|=t,4===Cu&&cs(e,Iu));var r=Ui();1===t?0!==(8&xu)&&0===(48&xu)?ls(e):(ss(e,n),0===xu&&(Fu(),qi())):(0===(4&xu)||98!==r&&99!==r||(null===Yu?Yu=new Set([e]):Yu.add(e)),ss(e,n)),Lu=e}function us(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ss(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-qt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Dt(c);var f=Pt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Lt(e,e===ju?Iu:0),t=Pt,0===r)null!==n&&(n!==Ai&&wi(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ai&&wi(n)}15===t?(n=ls.bind(null,e),null===Ri?(Ri=[n],Pi=ki(Ei,zi)):Ri.push(n),n=Ai):14===t?n=Bi(99,ls.bind(null,e)):n=Bi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),function e(t){Zu=-1;ts=es=0;if(0!==(48&xu))throw Error(o(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var r=Lt(t,t===ju?Iu:0);if(0===r)return null;var i=r;var a=xu;xu|=16;var u=ms();ju===t&&Iu===i||(Fu(),vs(t,i));for(;;)try{ks();break}catch(s){ys(t,s)}Yi();Ou.current=u;xu=a;null!==Eu?i=0:(ju=null,Iu=0,i=Cu);if(0!==(Nu&Pu))vs(t,0);else if(0!==i){if(2===i&&(xu|=64,t.hydrate&&(t.hydrate=!1,Br(t.containerInfo)),0!==(r=Mt(t))&&(i=gs(t,r))),1===i)throw n=Au,vs(t,0),cs(t,r),ss(t,Mi()),n;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,i){case 0:case 1:throw Error(o(345));case 2:_s(t);break;case 3:if(cs(t,r),(62914560&r)===r&&10<(i=Mu+500-Mi())){if(0!==Lt(t,0))break;if(((a=t.suspendedLanes)&r)!==r){is(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Fr(_s.bind(null,t),i);break}_s(t);break;case 4:if(cs(t,r),(4186112&r)===r)break;for(i=t.eventTimes,a=-1;0<r;){var c=31-qt(r);u=1<<c,(c=i[c])>a&&(a=c),r&=~u}if(r=a,10<(r=(120>(r=Mi()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wu(r/1960))-r)){t.timeoutHandle=Fr(_s.bind(null,t),r);break}_s(t);break;case 5:_s(t);break;default:throw Error(o(329))}}ss(t,Mi());return t.callbackNode===n?e.bind(null,t):null}.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function cs(e,t){for(t&=~Du,t&=~Pu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function ls(e){if(0!==(48&xu))throw Error(o(327));if(js(),e===ju&&0!==(e.expiredLanes&Iu)){var t=Iu,n=gs(e,t);0!==(Nu&Pu)&&(n=gs(e,t=Lt(e,t)))}else n=gs(e,t=Lt(e,0));if(0!==e.tag&&2===n&&(xu|=64,e.hydrate&&(e.hydrate=!1,Br(e.containerInfo)),0!==(t=Mt(e))&&(n=gs(e,t))),1===n)throw n=Au,vs(e,0),cs(e,t),ss(e,Mi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,_s(e),ss(e,Mi()),null}function fs(e,t){var n=xu;xu|=1;try{return e(t)}finally{0===(xu=n)&&(Fu(),qi())}}function hs(e,t){var n=xu;xu&=-2,xu|=8;try{return e(t)}finally{0===(xu=n)&&(Fu(),qi())}}function ds(e,t){ai(Su,Tu),Tu|=t,Nu|=t}function ps(){Tu=Su.current,ii(Su)}function vs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Vr(n)),null!==Eu)for(n=Eu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&hi();break;case 3:Ta(),ii(si),ii(ui),za();break;case 5:Ca(r);break;case 4:Ta();break;case 13:case 19:ii(Aa);break;case 10:Xi(r);break;case 23:case 24:ps()}n=n.return}ju=e,Eu=Ds(e.current,null),Iu=Tu=Nu=t,Cu=0,Au=null,Du=Pu=Ru=0}function ys(e,t){for(;;){var n=Eu;try{if(Yi(),Ha.current=jo,Ya){for(var r=Ga.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Ya=!1}if(Ka=0,$a=Qa=Ga=null,Xa=!1,_u.current=null,null===n||null===n.return){Cu=1,Au=t,Eu=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Iu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Aa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=ia(-1,1);g.tag=2,aa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new au,s=new Set,b.set(c,s)):void 0===(s=b.get(c))&&(s=new Set,b.set(c,s)),!s.has(u)){s.add(u);var k=As.bind(null,a,c,u);c.then(k,k)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Cu&&(Cu=2),s=ru(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,oa(h,ou(0,a,t));break e;case 1:a=s;var w=h.type,O=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==O&&"function"===typeof O.componentDidCatch&&(null===Hu||!Hu.has(O)))){h.flags|=4096,t&=-t,h.lanes|=t,oa(h,uu(h,a,t));break e}}h=h.return}while(null!==h)}Os(n)}catch(_){t=_,Eu===n&&null!==n&&(Eu=n=n.return);continue}break}}function ms(){var e=Ou.current;return Ou.current=jo,null===e?jo:e}function gs(e,t){var n=xu;xu|=16;var r=ms();for(ju===e&&Iu===t||vs(e,t);;)try{bs();break}catch(i){ys(e,i)}if(Yi(),xu=n,Ou.current=r,null!==Eu)throw Error(o(261));return ju=null,Iu=0,Cu}function bs(){for(;null!==Eu;)ws(Eu)}function ks(){for(;null!==Eu&&!Oi();)ws(Eu)}function ws(e){var t=Vu(e.alternate,e,Tu);e.memoizedProps=e.pendingProps,null===t?Os(e):Eu=t,_u.current=null}function Os(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=tu(n,t,Tu)))return void(Eu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Tu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=nu(t)))return n.flags&=2047,void(Eu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Eu=t);Eu=t=e}while(null!==t);0===Cu&&(Cu=5)}function _s(e){var t=Ui();return Vi(99,function(e,t){do{js()}while(null!==Ku);if(0!==(48&xu))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-qt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==Yu&&0===(24&r)&&Yu.has(e)&&Yu.delete(e),e===ju&&(Eu=ju=null,Iu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=xu,xu|=32,_u.current=null,Dr=Gt,fr(u=lr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(E){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;Lr={focusedElem:u,selectionRange:s},Gt=!1,ns=null,rs=!1,Bu=r;do{try{xs()}catch(E){if(null===Bu)throw Error(o(330));Cs(Bu,E),Bu=Bu.nextEffect}}while(null!==Bu);ns=null,Bu=r;do{try{for(u=e;null!==Bu;){var b=Bu.flags;if(16&b&&me(Bu.stateNode,""),128&b){var k=Bu.alternate;if(null!==k){var w=k.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:yu(Bu),Bu.flags&=-3;break;case 6:yu(Bu),Bu.flags&=-3,gu(Bu.alternate,Bu);break;case 1024:Bu.flags&=-1025;break;case 1028:Bu.flags&=-1025,gu(Bu.alternate,Bu);break;case 4:gu(Bu.alternate,Bu);break;case 8:mu(u,s=Bu);var O=s.alternate;pu(s),null!==O&&pu(O)}Bu=Bu.nextEffect}}catch(E){if(null===Bu)throw Error(o(330));Cs(Bu,E),Bu=Bu.nextEffect}}while(null!==Bu);if(w=Lr,k=lr(),b=w.focusedElem,u=w.selectionRange,k!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==u&&fr(b)&&(k=u.start,void 0===(w=u.end)&&(w=k),"selectionStart"in b?(b.selectionStart=k,b.selectionEnd=Math.min(w,b.value.length)):(w=(k=b.ownerDocument||document)&&k.defaultView||window).getSelection&&(w=w.getSelection(),s=b.textContent.length,O=Math.min(u.start,s),u=void 0===u.end?O:Math.min(u.end,s),!w.extend&&O>u&&(s=u,u=O,O=s),s=cr(b,O),a=cr(b,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((k=k.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),O>u?(w.addRange(k),w.extend(a.node,a.offset)):(k.setEnd(a.node,a.offset),w.addRange(k))))),k=[];for(w=b;w=w.parentNode;)1===w.nodeType&&k.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<k.length;b++)(w=k[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Gt=!!Dr,Lr=Dr=null,e.current=n,Bu=r;do{try{for(b=e;null!==Bu;){var _=Bu.flags;if(36&_&&fu(b,Bu.alternate,Bu),128&_){k=void 0;var x=Bu.ref;if(null!==x){var j=Bu.stateNode;switch(Bu.tag){case 5:k=j;break;default:k=j}"function"===typeof x?x(k):x.current=k}}Bu=Bu.nextEffect}}catch(E){if(null===Bu)throw Error(o(330));Cs(Bu,E),Bu=Bu.nextEffect}}while(null!==Bu);Bu=null,Ni(),xu=i}else e.current=n;if(Wu)Wu=!1,Ku=e,Gu=t;else for(Bu=r;null!==Bu;)t=Bu.nextEffect,Bu.nextEffect=null,8&Bu.flags&&((_=Bu).sibling=null,_.stateNode=null),Bu=t;if(0===(r=e.pendingLanes)&&(Hu=null),1===r?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,n=n.stateNode,gi&&"function"===typeof gi.onCommitFiberRoot)try{gi.onCommitFiberRoot(mi,n,void 0,64===(64&n.current.flags))}catch(E){}if(ss(e,Mi()),qu)throw qu=!1,e=zu,zu=null,e;return 0!==(8&xu)?null:(qi(),null)}.bind(null,e,t)),null}function xs(){for(;null!==Bu;){var e=Bu.alternate;rs||null===ns||(0!==(8&Bu.flags)?Je(Bu,ns)&&(rs=!0):13===Bu.tag&&ku(e,Bu)&&Je(Bu,ns)&&(rs=!0));var t=Bu.flags;0!==(256&t)&&lu(e,Bu),0===(512&t)||Wu||(Wu=!0,Bi(97,function(){return js(),null})),Bu=Bu.nextEffect}}function js(){if(90!==Gu){var e=97<Gu?97:Gu;return Gu=90,Vi(e,Ts)}return!1}function Es(e,t){Qu.push(t,e),Wu||(Wu=!0,Bi(97,function(){return js(),null}))}function Is(e,t){$u.push(t,e),Wu||(Wu=!0,Bi(97,function(){return js(),null}))}function Ts(){if(null===Ku)return!1;var e=Ku;if(Ku=null,0!==(48&xu))throw Error(o(331));var t=xu;xu|=32;var n=$u;$u=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Cs(a,c)}}for(n=Qu,Qu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Cs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return xu=t,qi(),!0}function Ss(e,t,n){aa(e,t=ou(0,t=ru(n,t),1)),t=is(),null!==(e=us(e,1))&&(Bt(e,1,t),ss(e,t))}function Cs(e,t){if(3===e.tag)Ss(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ss(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){var i=uu(n,e=ru(t,e),1);if(aa(n,i),i=is(),null!==(n=us(n,1)))Bt(n,1,i),ss(n,i);else if("function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function As(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=is(),e.pingedLanes|=e.suspendedLanes&n,ju===e&&(Iu&n)===n&&(4===Cu||3===Cu&&(62914560&Iu)===Iu&&500>Mi()-Mu?vs(e,0):Du|=n),ss(e,t)}function Ns(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(e,t,n,r){return new Ns(e,t,n,r)}function Ps(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ds(e,t){var n=e.alternate;return null===n?((n=Rs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ls(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ps(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Ms(n.children,i,a,t);case L:u=8,i|=16;break;case j:u=8,i|=1;break;case E:return(e=Rs(12,n,t,8|i)).elementType=E,e.type=E,e.lanes=a,e;case C:return(e=Rs(13,n,t,i)).type=C,e.elementType=C,e.lanes=a,e;case A:return(e=Rs(19,n,t,i)).elementType=A,e.lanes=a,e;case M:return Us(n,i,a,t);case U:return(e=Rs(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case S:u=11;break e;case N:u=14;break e;case R:u=16,r=null;break e;case P:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rs(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ms(e,t,n,r){return(e=Rs(7,e,r,t)).lanes=n,e}function Us(e,t,n,r){return(e=Rs(23,e,r,t)).elementType=M,e.lanes=n,e}function Fs(e,t,n){return(e=Rs(6,e,null,t)).lanes=n,e}function Vs(e,t,n){return(t=Rs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function qs(e,t,n,r){var i=t.current,a=is(),u=as(i);e:if(n){t:{if(Qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(fi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(fi(c)){n=pi(n,c,s);break e}}n=s}else n=oi;return null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),os(i,u,a),u}function zs(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Hs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ws(e,t){Hs(e,t),(e=e.alternate)&&Hs(e,t)}function Ks(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Bs(e,t,null!=n&&!0===n.hydrate),t=Rs(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,na(t),e[Qr]=n.current,Er(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Gs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qs(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=zs(o);u.call(e)}}qs(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ks(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=zs(o);s.call(e)}}hs(function(){qs(t,o,e,i)})}return zs(o)}function $s(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gs(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Vu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||si.current)Co=!0;else{if(0===(n&r)){switch(Co=!1,t.tag){case 3:Vo(t),Ba();break;case 5:Sa(t);break;case 1:fi(t.type)&&vi(t);break;case 4:Ia(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ai(Ki,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ko(e,t,n):(ai(Aa,1&Aa.current),null!==(t=Zo(e,t,n))?t.sibling:null);ai(Aa,1&Aa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return Jo(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ai(Aa,Aa.current),r)break;return null;case 23:case 24:return t.lanes=0,Do(e,t,n)}return Zo(e,t,n)}Co=0!==(16384&e.flags)}else Co=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=li(t,ui.current),Zi(t,n),i=eo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,fi(r)){var a=!0;vi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&la(t,r,u,e),i.updater=fa,t.stateNode=i,i._reactInternals=t,va(t,r,e,n),t=Fo(null,t,r,!0,a,n)}else t.tag=0,Ao(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ps(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===N)return 14}return 2}(i),e=Wi(i,e),a){case 0:t=Mo(null,t,i,e,n);break e;case 1:t=Uo(null,t,i,e,n);break e;case 11:t=No(null,t,i,e,n);break e;case 14:t=Ro(null,t,i,Wi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Mo(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:if(Vo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ra(e,t),ua(t,r,null,n),(r=t.memoizedState.element)===i)Ba(),t=Zo(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Pa=qr(t.stateNode.containerInfo.firstChild),Ra=t,a=Da=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],qa.push(a);for(n=wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ao(e,t,r,n),Ba();t=t.child}return t;case 5:return Sa(t),null===e&&Ua(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Ur(r,i)?u=null:null!==a&&Ur(r,a)&&(t.flags|=16),Lo(e,t),Ao(e,t,u,n),t.child;case 6:return null===e&&Ua(t),null;case 13:return Ko(e,t,n);case 4:return Ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ka(t,null,r,n):Ao(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return Ao(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ao(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(ai(Ki,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=ar(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!si.current){t=Zo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=ia(-1,n&-n)).tag=2,aa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ji(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Ao(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,Zi(t,n),r=r(i=ea(i,a.unstable_observedBits)),t.flags|=1,Ao(e,t,r,n),t.child;case 14:return a=Wi(i=t.type,t.pendingProps),Ro(e,t,i,a=Wi(i.type,a),r,n);case 15:return Po(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,fi(r)?(e=!0,vi(t)):e=!1,Zi(t,n),da(t,r,i),va(t,r,i,n),Fo(null,t,r,!0,e,n);case 19:return Jo(e,t,n);case 23:case 24:return Do(e,t,n)}throw Error(o(156,t.tag))},Ks.prototype.render=function(e){qs(e,this._internalRoot,null,null)},Ks.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;qs(null,e,null,function(){t[Qr]=null})},Ze=function(e){13===e.tag&&(os(e,4,is()),Ws(e,4))},et=function(e){13===e.tag&&(os(e,67108864,is()),Ws(e,67108864))},tt=function(e){if(13===e.tag){var t=is(),n=as(e);os(e,n,t),Ws(e,n)}},nt=function(e,t){return t()},Ee=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Zr(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Ne=fs,Re=function(e,t,n,r,i){var a=xu;xu|=4;try{return Vi(98,e.bind(null,t,n,r,i))}finally{0===(xu=a)&&(Fu(),qi())}},Pe=function(){0===(49&xu)&&(function(){if(null!==Yu){var e=Yu;Yu=null,e.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,ss(e,Mi())})}qi()}(),js())},De=function(e,t){var n=xu;xu|=2;try{return e(t)}finally{0===(xu=n)&&(Fu(),qi())}};var Ys={Events:[Xr,Jr,Zr,Ce,Ae,js,{current:!1}]},Xs={findFiberByHostInstance:Yr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Js={bundleType:Xs.bundleType,version:Xs.version,rendererPackageName:Xs.rendererPackageName,rendererConfig:Xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:Xs.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zs.isDisabled&&Zs.supportsFiber)try{mi=Zs.inject(Js),gi=Zs}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ys,t.createPortal=$s,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=xu;if(0!==(48&n))return e(t);xu|=1;try{if(e)return Vi(99,e.bind(null,t))}finally{xu=n,qi()}},t.hydrate=function(e,t,n){if(!Gs(t))throw Error(o(200));return Qs(null,e,t,!0,n)},t.render=function(e,t,n){if(!Gs(t))throw Error(o(200));return Qs(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Gs(e))throw Error(o(40));return!!e._reactRootContainer&&(hs(function(){Qs(null,null,e,!1,function(){e._reactRootContainer=null,e[Qr]=null})}),!0)},t.unstable_batchedUpdates=fs,t.unstable_createPortal=function(e,t){return $s(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gs(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Qs(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(54)},function(e,t,n){"use strict";var r,i,a,o;if("object"===typeof performance&&"function"===typeof performance.now){var u=performance;t.unstable_now=function(){return u.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,f=null,h=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(h,0))},i=function(e,t){f=setTimeout(e,t)},a=function(){clearTimeout(f)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var y=!1,m=null,g=-1,b=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,O=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+b;try{m(!0,e)?O.postMessage(null):(y=!1,m=null)}catch(n){throw O.postMessage(null),n}}else y=!1},r=function(e){m=e,y||(y=!0,O.postMessage(null))},i=function(e,n){g=d(function(){e(t.unstable_now())},n)},a=function(){p(g),g=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function j(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],T=[],S=1,C=null,A=3,N=!1,R=!1,P=!1;function D(e){for(var t=x(T);null!==t;){if(null===t.callback)j(T);else{if(!(t.startTime<=e))break;j(T),t.sortIndex=t.expirationTime,_(I,t)}t=x(T)}}function L(e){if(P=!1,D(e),!R)if(null!==x(I))R=!0,r(M);else{var t=x(T);null!==t&&i(L,t.startTime-e)}}function M(e,n){R=!1,P&&(P=!1,a()),N=!0;var r=A;try{for(D(n),C=x(I);null!==C&&(!(C.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=C.callback;if("function"===typeof o){C.callback=null,A=C.priorityLevel;var u=o(C.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?C.callback=u:C===x(I)&&j(I),D(n)}else j(I);C=x(I)}if(null!==C)var s=!0;else{var c=x(T);null!==c&&i(L,c.startTime-n),s=!1}return s}finally{C=null,A=r,N=!1}}var U=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||N||(R=!0,r(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return x(I)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,n,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:S++,callback:n,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,_(T,e),null===x(I)&&e===x(T)&&(P?a():P=!0,i(L,o-u))):(e.sortIndex=s,_(I,e),R||N||(R=!0,r(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},function(e,t,n){var r=function(){return this||"object"===typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(56),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(o){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag",c="object"===typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=k;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={},y={};y[o]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==r&&i.call(g,o)&&(y=g);var b=x.prototype=O.prototype=Object.create(y);_.prototype=b.constructor=x,x.constructor=_,x[s]=_.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(b),e},l.awrap=function(e){return{__await:e}},j(E.prototype),E.prototype[u]=function(){return this},l.AsyncIterator=E,l.async=function(e,t,n,r){var i=new E(k(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},j(b),b[s]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return u.type="throw",u.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function k(e,t,n,r){var i=t&&t.prototype instanceof O?t:O,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=w(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function O(){}function _(){}function x(){}function j(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(e){var t;this._invoke=function(n,r){function a(){return new Promise(function(t,a){!function t(n,r,a,o){var u=w(e[n],e,r);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"===typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,a,o)},function(e){t("throw",e,a,o)}):Promise.resolve(c).then(function(e){s.value=e,a(s)},function(e){return t("throw",e,a,o)})}o(u.arg)}(n,r,t,a)})}return t=t?t.then(a,a):a()}}function I(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,I(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,v;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}return{next:N}}function N(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},function(e,t,n){"use strict";n(58)},function(e,t,n){"use strict";(function(e){var t=n(0),r=n.n(t),i=n(1),a=n(3),o=n(2),u=n(26),s=n(8),c=n(16),l=n(6),f="@firebase/auth-compat",h="0.2.10",d=1e3;function p(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.m)();return!("file:"!==p()&&"ionic:"!==p()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.m)();return Object(l.r)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.m)();return/Edge\/\d+/.test(e)}(e)}function m(){try{var e=self.localStorage,t=s.s();if(e)return e.setItem(t,"1"),e.removeItem(t),!y()||Object(l.s)()}catch(n){return g()&&Object(l.s)()}return!1}function g(){return"undefined"!==typeof e&&"WorkerGlobalScope"in e&&"importScripts"in e}function b(){return("http:"===p()||"https:"===p()||Object(l.o)()||v())&&!(Object(l.v)()||Object(l.u)())&&m()&&!g()}function k(){return v()&&"undefined"!==typeof document}function w(){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise(function(e){var t=setTimeout(function(){e(!1)},d);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _={LOCAL:"local",NONE:"none",SESSION:"session"},x=s.p,j="persistence";function E(e,t){x(Object.values(_).includes(t),e,"invalid-persistence-type"),Object(l.v)()?x(t!==_.SESSION,e,"unsupported-persistence-type"):Object(l.u)()?x(t===_.NONE,e,"unsupported-persistence-type"):g()?x(t===_.NONE||t===_.LOCAL&&Object(l.s)(),e,"unsupported-persistence-type"):x(t===_.NONE||m(),e,"unsupported-persistence-type")}function I(e){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(r.a.mark(function e(t){var n,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=S(),i=s.v(j,t.config.apiKey,t.name),n&&n.setItem(i,t._getPersistence());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var C=s.p,A=function(){function e(){Object(i.a)(this,e),this.browserResolver=s.t(s.z),this.cordovaResolver=s.t(s.E),this.underlyingResolver=null,this._redirectPersistence=s.A,this._completeRedirectFn=s.u}return Object(a.a)(e,[{key:"_initialize",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Object(o.a)(r.a.mark(function e(t,n,i,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,i,a));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Object(o.a)(r.a.mark(function e(t,n,i,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,i,a));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"selectUnderlyingResolver",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_shouldInitProactively",get:function(){return k()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return C(this.underlyingResolver,"internal-error"),this.underlyingResolver}}]),e}();function N(e){return e.unwrap()}function R(e){var t=(e instanceof l.c?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof l.c)&&"temporaryProof"in t&&"phoneNumber"in t)return s.i.credentialFromResult(e);var n,r=t.providerId;if(!r||r===s.k.PASSWORD)return null;switch(r){case s.k.GOOGLE:n=s.f;break;case s.k.FACEBOOK:n=s.d;break;case s.k.GITHUB:n=s.e;break;case s.k.TWITTER:n=s.o;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,c=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?s.m._create(r,u):s.g._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new s.h(r).credential({idToken:i,accessToken:a,rawNonce:c}):null}return e instanceof l.c?n.credentialFromError(e):n.credentialFromResult(e)}function P(e,t){return t.catch(function(t){throw t instanceof l.c&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new M(e,s.J(e,t));else if(r){var i=R(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,R(t)),additionalUserInfo:s.I(e),user:U.getOrCreate(r)}})}function D(e,t){return L.apply(this,arguments)}function L(){return(L=Object(o.a)(r.a.mark(function e(t,n){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return i=e.sent,e.abrupt("return",{verificationId:i.verificationId,confirm:function(e){return P(t,i.confirm(e))}});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var M=function(){function e(t,n){Object(i.a)(this,e),this.resolver=n,this.auth=t.wrapped()}return Object(a.a)(e,[{key:"resolveSignIn",value:function(e){return P(N(this.auth),this.resolver.resolveSignIn(e))}},{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}}]),e}(),U=function(){function e(t){Object(i.a)(this,e),this._delegate=t,this.multiFactor=s.S(t)}return Object(a.a)(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(this.auth,s.O(this._delegate,t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Object(o.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(this.auth,s.P(this._delegate,t,n)));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(this.auth,s.Q(this._delegate,t,A)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(s.q(this.auth));case 2:return e.abrupt("return",s.R(this._delegate,t,A));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(this.auth,s.T(this._delegate,t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return D(this.auth,s.U(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return P(this.auth,s.V(this._delegate,e,A))}},{key:"reauthenticateWithRedirect",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(s.q(this.auth));case 2:return e.abrupt("return",s.W(this._delegate,t,A));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return s.X(this._delegate,e)}},{key:"unlink",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.ib(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return s.jb(this._delegate,e)}},{key:"updatePassword",value:function(e){return s.kb(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return s.lb(this._delegate,e)}},{key:"updateProfile",value:function(e){return s.mb(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return s.nb(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();U.USER_MAP=new WeakMap;var F=s.p,V=function(){function e(t,n){if(Object(i.a)(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;F(r,"invalid-api-key",{appName:t.name}),F(r,"invalid-api-key",{appName:t.name});var a="undefined"!==typeof window?A:void 0;this._delegate=n.initialize({options:{persistence:q(r,t.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(s.G),this.linkUnderlyingAuth()}return Object(a.a)(e,[{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){s.D(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return s.x(this._delegate,e)}},{key:"checkActionCode",value:function(e){return s.B(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return s.C(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Object(o.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(this._delegate,s.F(this._delegate,t,n)));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return s.H(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return s.N(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(b(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,s.K(this._delegate,A);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",P(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){s.w(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=B(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=B(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return s.Z(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return s.Y(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var n,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E(this._delegate,t),e.t0=t,e.next=e.t0===_.SESSION?4:e.t0===_.LOCAL?6:e.t0===_.NONE?11:13;break;case 4:return n=s.A,e.abrupt("break",14);case 6:return e.next=8,s.t(s.M)._isAvailable();case 8:return i=e.sent,n=i?s.M:s.y,e.abrupt("break",14);case 11:return n=s.L,e.abrupt("break",14);case 13:return e.abrupt("return",s.r("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return P(this._delegate,s.ab(this._delegate))}},{key:"signInWithCredential",value:function(e){return P(this._delegate,s.bb(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return P(this._delegate,s.cb(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return P(this._delegate,s.db(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return P(this._delegate,s.eb(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return D(this._delegate,s.fb(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(b(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",P(this._delegate,s.gb(this._delegate,t,A)));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(b(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,I(this._delegate);case 3:return e.abrupt("return",s.hb(this._delegate,t,A));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return s.ob(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}},{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?U.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}}]),e}();function B(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&U.getOrCreate(e))},error:t,complete:n}}function q(e,t){var n=function(e,t){var n=S();if(!n)return[];var r=s.v(j,e,t);switch(n.getItem(r)){case _.NONE:return[s.L];case _.LOCAL:return[s.M,s.A];case _.SESSION:return[s.A];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(s.M)||n.push(s.M),"undefined"!==typeof window)for(var r=0,i=[s.y,s.A];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(s.L)||n.push(s.L),n}V.Persistence=_;var z=function(){function e(){Object(i.a)(this,e),this.providerId="phone",this._delegate=new s.i(N(u.a.auth()))}return Object(a.a)(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return s.i.credential(e,t)}}]),e}();z.PHONE_SIGN_IN_METHOD=s.i.PHONE_SIGN_IN_METHOD,z.PROVIDER_ID=s.i.PROVIDER_ID;var H,W=s.p,K=function(){function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.a.app();Object(i.a)(this,e),W(null===(r=a.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:a.name}),this._delegate=new s.l(t,n,a.auth()),this.type=this._delegate.type}return Object(a.a)(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),G="auth-compat";(H=u.a).INTERNAL.registerComponent(new c.a(G,function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new V(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:s.a.EMAIL_SIGNIN,PASSWORD_RESET:s.a.PASSWORD_RESET,RECOVER_EMAIL:s.a.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:s.a.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:s.a.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:s.a.VERIFY_EMAIL}},EmailAuthProvider:s.c,FacebookAuthProvider:s.d,GithubAuthProvider:s.e,GoogleAuthProvider:s.f,OAuthProvider:s.h,SAMLAuthProvider:s.n,PhoneAuthProvider:z,PhoneMultiFactorGenerator:s.j,RecaptchaVerifier:K,TwitterAuthProvider:s.o,Auth:V,AuthCredential:s.b,Error:l.c}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion(f,h)}).call(this,n(32))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],l=!1,f=-1;function h(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=u(h);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(40),o=(r=a)&&r.__esModule?r:{default:r};var u=30,s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.radius,r=void 0===n?u:n,i=t.enabled,a=void 0===i||i,s=t.initialPoint,c=void 0===s?{x:0,y:0}:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.radius=r,this._isEnabled=a,this.pointer=new o.default(c.x,c.y),this.brush=new o.default(c.x,c.y),this.angle=0,this.distance=0,this._hasMoved=!1}return i(e,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"isEnabled",value:function(){return this._isEnabled}},{key:"setRadius",value:function(e){this.radius=e}},{key:"getRadius",value:function(){return this.radius}},{key:"getBrushCoordinates",value:function(){return this.brush.toObject()}},{key:"getPointerCoordinates",value:function(){return this.pointer.toObject()}},{key:"getBrush",value:function(){return this.brush}},{key:"getPointer",value:function(){return this.pointer}},{key:"getAngle",value:function(){return this.angle}},{key:"getDistance",value:function(){return this.distance}},{key:"brushHasMoved",value:function(){return this._hasMoved}},{key:"update",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).both,n=void 0!==t&&t;return this._hasMoved=!1,!(this.pointer.equalsTo(e)&&!n)&&(this.pointer.update(e),n?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(42),o=(r=a)&&r.__esModule?r:{default:r};var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.segments,r=void 0===n?50:n,i=t.iterationLimit,a=void 0===i?100:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.p1=new o.default,this.p2=new o.default,this.segments=r,this.iterationLimit=a}return i(e,[{key:"drawToCanvas",value:function(e,t,n,r){this.p1.update(t),this.p2.update(n);var i=this.p1.x>this.p2.x,a=i?this.p2:this.p1,o=i?this.p1:this.p2,u=[],s=!0;if(a.getDistanceTo(o)<r)if(o.x-a.x>.01){var c=o.x-a.x,l=o.y-a.y,f=-this.getCatenaryParameter(c,l,r,this.iterationLimit),h=.5*(f*Math.log((r+l)/(r-l))-c),d=f*Math.cosh(h/f),p=a.x-h,v=a.y-d;u=this.getCurve(f,a,o,p,v,this.segments),s=!1}else{var y=.5*(a.x+o.x),m=.5*(a.y+o.y+r);u=[[a.x,a.y],[y,m],[o.x,o.y]]}else u=[[a.x,a.y],[o.x,o.y]];return s?this.drawLine(u,e):this.drawCurve(u,e),u}},{key:"getCatenaryParameter",value:function(e,t,n,r){for(var i=Math.sqrt(n*n-t*t)/e,a=Math.acosh(i)+1,o=-1,u=0;Math.abs(a-o)>1e-6&&u<r;)o=a,a-=(Math.sinh(a)-i*a)/(Math.cosh(a)-i),u++;return e/(2*a)}},{key:"getCurve",value:function(e,t,n,r,i,a){for(var o=[t.x,e*Math.cosh((t.x-r)/e)+i],u=n.x-t.x,s=a-1,c=0;c<s;c++){var l=t.x+u*(c+.5)/s,f=e*Math.cosh((l-r)/e)+i;o.push(l,f)}return o.push(n.x,e*Math.cosh((n.x-r)/e)+i),o}},{key:"drawLine",value:function(e,t){t.moveTo(e[0][0],e[0][1]),t.lineTo(e[1][0],e[1][1])}},{key:"drawCurve",value:function(e,t){var n=.5*e.length-1,r=e[2],i=e[3],a=[];t.moveTo(e[0],e[1]);for(var o=2;o<n;o++){var u=e[2*o],s=e[2*o+1],c=.5*(u+r),l=.5*(s+i);a.push([r,i,c,l]),t.quadraticCurveTo(r,i,c,l),r=u,i=s}return n=e.length,t.quadraticCurveTo(e[n-4],e[n-3],e[n-2],e[n-1]),a}}]),e}();t.default=u},function(e,t,n){"use strict";var r=n(63);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";e.exports=n(66)},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,k=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function O(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case h:case o:case s:case u:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case y:case c:return e;default:return t}}case a:return t}}}function _(e){return O(e)===h}t.AsyncMode=f,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=o,t.Lazy=m,t.Memo=y,t.Portal=a,t.Profiler=s,t.StrictMode=u,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||O(e)===f},t.isConcurrentMode=_,t.isContextConsumer=function(e){return O(e)===l},t.isContextProvider=function(e){return O(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return O(e)===d},t.isFragment=function(e){return O(e)===o},t.isLazy=function(e){return O(e)===m},t.isMemo=function(e){return O(e)===y},t.isPortal=function(e){return O(e)===a},t.isProfiler=function(e){return O(e)===s},t.isStrictMode=function(e){return O(e)===u},t.isSuspense=function(e){return O(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===u||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===y||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===b||e.$$typeof===k||e.$$typeof===w||e.$$typeof===g)},t.typeOf=O},function(e,t,n){"use strict";e.exports=n(68)},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,k=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function O(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case h:case o:case s:case u:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case y:case c:return e;default:return t}}case a:return t}}}function _(e){return O(e)===h}t.AsyncMode=f,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=o,t.Lazy=m,t.Memo=y,t.Portal=a,t.Profiler=s,t.StrictMode=u,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||O(e)===f},t.isConcurrentMode=_,t.isContextConsumer=function(e){return O(e)===l},t.isContextProvider=function(e){return O(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return O(e)===d},t.isFragment=function(e){return O(e)===o},t.isLazy=function(e){return O(e)===m},t.isMemo=function(e){return O(e)===y},t.isPortal=function(e){return O(e)===a},t.isProfiler=function(e){return O(e)===s},t.isStrictMode=function(e){return O(e)===u},t.isSuspense=function(e){return O(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===u||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===y||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===b||e.$$typeof===k||e.$$typeof===w||e.$$typeof===g)},t.typeOf=O},,,function(e,t,n){"use strict";var r=n(1),i=n(3),a=n(26),o=n(14),u=n(0),s=n.n(u),c=n(2),l=n(12),f=n(11),h=n(7),d=n(10),p=n(15),v=n(13),y=n(6),m=n(16);function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k="firebasestorage.googleapis.com",w="storageBucket",O=12e4,_=6e5,x=function(e){function t(e,n){var i;return Object(r.a)(this,t),(i=Object(f.a)(this,Object(h.a)(t).call(this,j(e),"Firebase Storage: ".concat(n," (").concat(j(e),")")))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Object(p.a)(Object(p.a)(i)),t.prototype),i}return Object(d.a)(t,e),Object(i.a)(t,[{key:"_codeEquals",value:function(e){return j(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),t}(y.c);function j(e){return"storage/"+e}function E(){return new x("unknown","An unknown error occurred, please check the error payload for server response.")}function I(){return new x("canceled","User canceled the upload/download.")}function T(){return new x("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function S(e){return new x("invalid-argument",e)}function C(){return new x("app-deleted","The Firebase app was deleted.")}function A(e){return new x("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function N(e,t){return new x("invalid-format","String does not match format '"+e+"': "+t)}function R(e){throw new x("internal-error","Internal error: "+e)}var P,D=function(){function e(t,n){Object(r.a)(this,e),this.bucket=t,this.path_=n}return Object(i.a)(e,[{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}},{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new x("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null;var i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var o=n.replace(/[.]/g,"\\."),u=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat("([A-Za-z0-9.\\-_]+)","/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat(n===k?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat("([A-Za-z0-9.\\-_]+)","/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}],s=0;s<u.length;s++){var c=u[s],l=c.regex.exec(t);if(l){var f=l[c.indices.bucket],h=l[c.indices.path];h||(h=""),r=new e(f,h),c.postModify(r);break}}if(null==r)throw function(e){return new x("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),L=function(){function e(t){Object(r.a)(this,e),this.promise_=Promise.reject(t)}return Object(i.a)(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}]),e}();function M(e){return"string"===typeof e||e instanceof String}function U(e){return F()&&e instanceof Blob}function F(){return"undefined"!==typeof Blob}function V(e,t,n,r){if(r<t)throw S("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw S("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function B(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function q(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(P||(P={}));var z=function(){function e(t,n,i,a,o,u,s,c,l,f,h){var d=this;Object(r.a)(this,e),this.url_=t,this.method_=n,this.headers_=i,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=s,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(function(e,t){d.resolve_=e,d.reject_=t,d.start_()})}return Object(i.a)(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());void 0!==o?r(o):r()}catch(s){i(s)}else if(null!==a){var u=E();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?C():I());else i(new x("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new H(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout(function(){i=null,e(d,s())},t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout(function(){o=!0,v(!0)},n),v}(function(t,n){if(n)t(!1,new H(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===P.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new H(o,r))}else{var u=r.getErrorCode()===P.ABORT;t(!1,new H(!1,null,u))}})}},t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),H=function e(t,n,i){Object(r.a)(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!i};function W(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}var K={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},G=function e(t,n){Object(r.a)(this,e),this.data=t,this.contentType=n||null};function Q(e,t){switch(e){case K.RAW:return new G($(t));case K.BASE64:case K.BASE64URL:return new G(Y(e,t));case K.DATA_URL:return new G(function(e){var t=new X(e);return t.base64?Y(K.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw N(K.DATA_URL,"Malformed data URL.")}return $(t)}(t.rest)}(t),new X(t).contentType)}throw E()}function $(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Y(e,t){switch(e){case K.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw N(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case K.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw N(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw N(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var X=function e(t){Object(r.a)(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw N(K.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var i=n[1]||null;null!=i&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)};var J=function(){function e(t,n){Object(r.a)(this,e);var i=0,a="";U(t)?(this.data_=t,i=t.size,a=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=a}return Object(i.a)(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(U(this.data_)){var r=this.data_,i=(o=t,u=n,(a=r).webkitSlice?a.webkitSlice(o,u):a.mozSlice?a.mozSlice(o,u):a.slice?a.slice(o,u):null);return null===i?null:new e(i)}var a,o,u,s=new Uint8Array(this.data_.buffer,t,n-t);return new e(s,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(F()){var i=n.map(function(t){return t instanceof e?t.data_:t});return new e(function(){for(var e=W(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(F())return new Blob(n);throw new x("unsupported-environment","This browser doesn't seem to support creating Blobs")}.apply(null,i))}var a=n.map(function(e){return M(e)?Q(K.RAW,e).data:e.data_}),o=0;a.forEach(function(e){o+=e.byteLength});var u=new Uint8Array(o),s=0;return a.forEach(function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]}),new e(u,!0)}}]),e}();function Z(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t}function ee(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function te(e,t){return t}var ne=function e(t,n,i,a){Object(r.a)(this,e),this.server=t,this.local=n||t,this.writable=!!i,this.xform=a||te},re=null;function ie(){if(re)return re;var e=[];e.push(new ne("bucket")),e.push(new ne("generation")),e.push(new ne("metageneration")),e.push(new ne("name","fullPath",!0));var t=new ne("name");t.xform=function(e,t){return function(e){return!M(e)||e.length<2?e:ee(e)}(t)},e.push(t);var n=new ne("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ne("timeCreated")),e.push(new ne("updated")),e.push(new ne("md5Hash",null,!0)),e.push(new ne("cacheControl",null,!0)),e.push(new ne("contentDisposition",null,!0)),e.push(new ne("contentEncoding",null,!0)),e.push(new ne("contentLanguage",null,!0)),e.push(new ne("contentType",null,!0)),e.push(new ne("metadata","customMetadata",!0)),re=e}function ae(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new D(n,r);return t._makeStorageReference(i)}})}(r,e),r}function oe(e,t,n){var r=Z(t);return null===r?null:ae(e,r,n)}function ue(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var se="prefixes",ce="items";function le(e,t,n){var r=Z(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[se]){var i,a=g(n[se]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new D(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[ce]){var s,c=g(n[ce]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new D(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var fe=function e(t,n,i,a){Object(r.a)(this,e),this.url=t,this.method=n,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function he(e){if(!e)throw E()}function de(e,t){return function(n,r){var i=oe(e,r,t);return he(null!==i),i}}function pe(e,t){return function(n,r){var i=oe(e,r,t);return he(null!==i),function(e,t,n,r){var i=Z(t);if(null===i)return null;if(!M(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map(function(t){var i=e.bucket,a=e.fullPath;return B("/b/"+o(i)+"/o/"+o(a),n,r)+q({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function ve(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new x("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new x("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new x("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new x("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function ye(e){var t=ve(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new x("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function me(e,t,n){var r=B(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new fe(r,"GET",de(e,n),i);return a.errorHandler=ye(t),a}function ge(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=B(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new fe(o,"GET",function(e,t){return function(n,r){var i=le(e,t,r);return he(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=ve(t),s}function be(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ke(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=be(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ue(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=J.getBlob(c,r,l);if(null===f)throw T();var h={name:s.fullPath},d=B(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new fe(d,"POST",de(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=ve(t),v}var we=function e(t,n,i,a){Object(r.a)(this,e),this.current=t,this.total=n,this.finalized=!!i,this.metadata=a||null};function Oe(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){he(!1)}return he(!!n&&-1!==(t||["active"]).indexOf(n)),n}function _e(e,t,n,r,i,a,o,u){var s=new we(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new x("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw T();var v=t.maxUploadRetryTime,y=new fe(n,"POST",function(e,n){var i,o=Oe(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?de(t,a)(e,n):null,new we(u,c,"final"===o,i)},v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=ve(e),y}var xe={STATE_CHANGED:"state_changed"},je={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ee(e){switch(e){case"running":case"pausing":case"canceling":return je.RUNNING;case"paused":return je.PAUSED;case"success":return je.SUCCESS;case"canceled":return je.CANCELED;case"error":default:return je.ERROR}}var Ie=function e(t,n,i){if(Object(r.a)(this,e),"function"===typeof t||null!=n||null!=i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==i&&void 0!==i?i:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}};function Te(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then(function(){return e.apply(void 0,n)})}}var Se=null,Ce=function(){function e(){var t=this;Object(r.a)(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=P.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=P.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=P.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return Object(i.a)(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw R("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw R("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw R("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw R("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw R("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Ae=function(e){function t(){return Object(r.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),t}(Ce);function Ne(){return Se?Se():new Ae}var Re=function(){function e(t,n){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(r.a)(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=a,this._mappings=ie(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){i._request=void 0,i._chunkMultiplier=1,e._codeEquals("canceled")?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=e,i._transition("error"))},this._metadataErrorHandler=function(e){i._request=void 0,e._codeEquals("canceled")?i.completeTransitions_():(i._error=e,i._transition("error"))},this._promise=new Promise(function(e,t){i._resolve=e,i._reject=t,i._start()}),this._promise.then(null,function(){})}return Object(i.a)(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=Object(l.a)(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}})}},{key:"_createResumable",value:function(){var e=this;this._resolveToken(function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=be(t,r,i),u={name:o.fullPath},s=B(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=ue(o,n),f=e.maxUploadRetryTime,h=new fe(s,"POST",function(e){var t;Oe(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){he(!1)}return he(M(t)),t},f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=ve(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ne,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken(function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new fe(n,"POST",function(e){var t=Oe(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){he(!1)}n||he(!1);var i=Number(n);return he(!isNaN(i)),new we(i,r.size(),"final"===t)},i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=ve(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Ne,n,r);e._request=a,a.getPromise().then(function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})}},{key:"_continueUpload",value:function(){var e=this,t=262144*this._chunkMultiplier,n=new we(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,a){var o;try{o=_e(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Ne,i,a);e._request=u,u.getPromise().then(function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})}},{key:"_increaseMultiplier",value:function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken(function(t,n){var r=me(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Ne,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._transition("success")},e._metadataErrorHandler)})}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken(function(t,n){var r=ke(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ne,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=I(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Ie(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Ee(this._state)){case je.SUCCESS:Te(this._resolve.bind(null,this.snapshot))();break;case je.CANCELED:case je.ERROR:Te(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Ee(this._state)){case je.RUNNING:case je.PAUSED:e.next&&Te(e.next.bind(e,this.snapshot))();break;case je.SUCCESS:e.complete&&Te(e.complete.bind(e))();break;case je.CANCELED:case je.ERROR:e.error&&Te(e.error.bind(e,this._error))();break;default:e.error&&Te(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}},{key:"snapshot",get:function(){var e=Ee(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}}]),e}(),Pe=function(){function e(t,n){Object(r.a)(this,e),this._service=t,this._location=n instanceof D?n:D.makeFromUrl(n,t.host)}return Object(i.a)(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw A(e)}},{key:"root",get:function(){var e=new D(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return ee(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new D(this._location.bucket,t);return new e(this._service,n)}}]),e}();function De(e,t,n){return Le.apply(this,arguments)}function Le(){return(Le=Object(c.a)(s.a.mark(function e(t,n,r){var i,a,u,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u={pageToken:r},e.next=3,Me(t,u);case 3:if(c=e.sent,(i=n.prefixes).push.apply(i,Object(o.a)(c.prefixes)),(a=n.items).push.apply(a,Object(o.a)(c.items)),null==c.nextPageToken){e.next=9;break}return e.next=9,De(t,n,c.nextPageToken);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Me(e,t){null!=t&&"number"===typeof t.maxResults&&V("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=ge(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Ne)}function Ue(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=B(t.fullServerUrl(),e.host,e._protocol),a=ue(n,r),o=e.maxOperationRetryTime,u=new fe(i,"PATCH",de(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=ye(t),u}(e.storage,e._location,t,ie());return e.storage.makeRequestWithTokens(n,Ne)}function Fe(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=B(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new fe(r,"GET",pe(e,n),i);return a.errorHandler=ye(t),a}(e.storage,e._location,ie());return e.storage.makeRequestWithTokens(t,Ne).then(function(e){if(null===e)throw new x("no-download-url","The given file does not have any download URLs.");return e})}function Ve(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=B(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new fe(n,"DELETE",function(e,t){},r);return i.successCodes=[200,204],i.errorHandler=ye(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Ne)}function Be(e,t){var n=function(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new D(e._location.bucket,n);return new Pe(e.storage,r)}function qe(e,t){if(e instanceof We){var n=e;if(null==n._bucket)throw new x("no-default-bucket","No default bucket found. Did you set the '"+w+"' property when initializing the app?");var r=new Pe(n,n._bucket);return null!=t?qe(r,t):r}return void 0!==t?Be(e,t):e}function ze(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof We)return new Pe(e,t);throw S("To use ref(service, url), the first argument must be a Storage instance.")}return qe(e,t)}function He(e,t){var n=null===t||void 0===t?void 0:t[w];return null==n?null:D.makeFromBucketSpec(n,e)}var We=function(){function e(t,n,i,a,o){Object(r.a)(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host=k,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=O,this._maxUploadRetryTime=_,this._requests=new Set,this._bucket=null!=a?D.makeFromBucketSpec(a,this._host):He(this._host,this.app.options)}return Object(i.a)(e,[{key:"_getAuthToken",value:function(){var e=Object(c.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Object(c.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Pe(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new L(C());var a=function(e,t,n,r,i,a){var o=q(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new z(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(function(){return i._requests.delete(a)},function(){return i._requests.delete(a)}),a}},{key:"makeRequestWithTokens",value:function(){var e=Object(c.a)(s.a.mark(function e(t,n){var r,i,a,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=Object(l.a)(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=D.makeFromBucketSpec(this._url,e):this._bucket=He(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){V("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){V("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}}]),e}(),Ke="@firebase/storage",Ge="0.9.3",Qe="storage";function $e(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Re(e,new J(t),n)}(e=Object(y.l)(e),t,n)}function Ye(e){return function(e){e._throwIfRoot("getMetadata");var t=me(e.storage,e._location,ie());return e.storage.makeRequestWithTokens(t,Ne)}(e=Object(y.l)(e))}function Xe(e){return function(e){var t={prefixes:[],items:[]};return De(e,t).then(function(){return t})}(e=Object(y.l)(e))}function Je(e,t){return ze(e=Object(y.l)(e),t)}function Ze(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Object(y.g)(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function et(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new We(r,i,a,n,v.SDK_VERSION)}Object(v._registerComponent)(new m.a(Qe,et,"PUBLIC").setMultipleInstances(!0)),Object(v.registerVersion)(Ke,Ge,""),Object(v.registerVersion)(Ke,Ge,"esm2017");var tt=function(){function e(t,n,i){Object(r.a)(this,e),this._delegate=t,this.task=n,this.ref=i}return Object(i.a)(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),nt=function(){function e(t,n){Object(r.a)(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object(i.a)(e,[{key:"then",value:function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new tt(t,n,n._ref))},t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new tt(e,i,i._ref))}:{next:t.next?function(e){return t.next(new tt(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}},{key:"snapshot",get:function(){return new tt(this._delegate.snapshot,this,this._ref)}}]),e}(),rt=function(){function e(t,n){Object(r.a)(this,e),this._delegate=t,this._service=n}return Object(i.a)(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new it(t,e._service)})}},{key:"items",get:function(){var e=this;return this._delegate.items.map(function(t){return new it(t,e._service)})}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),it=function(){function e(t,n){Object(r.a)(this,e),this._delegate=t,this.storage=n}return Object(i.a)(e,[{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){return new e(function(e,t){return Be(e,t)}(this._delegate,t),this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new nt($e(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Q(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new nt(new Re(this._delegate,new J(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Xe(this._delegate).then(function(t){return new rt(t,e.storage)})}},{key:"list",value:function(e){var t=this;return function(e,t){return Me(e=Object(y.l)(e),t)}(this._delegate,e||void 0).then(function(e){return new rt(e,t.storage)})}},{key:"getMetadata",value:function(){return Ye(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Ue(e=Object(y.l)(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return e=this._delegate,Fe(e=Object(y.l)(e));var e}},{key:"delete",value:function(){return this._throwIfRoot("delete"),e=this._delegate,Ve(e=Object(y.l)(e));var e}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw A(e)}},{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}}]),e}(),at=function(){function e(t,n){Object(r.a)(this,e),this.app=t,this._delegate=n}return Object(i.a)(e,[{key:"ref",value:function(e){if(ot(e))throw S("ref() expected a child path but got a URL, use refFromURL instead.");return new it(Je(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!ot(e))throw S("refFromURL() expected a full URL but got a child path, use ref() instead.");try{D.makeFromUrl(e,this._delegate.host)}catch(t){throw S("refFromUrl() expected a valid full URL but got an invalid one.")}return new it(Je(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ze(this._delegate,e,t,n)}},{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}}]),e}();function ot(e){return/^[A-Za-z]+:\/\//.test(e)}var ut="@firebase/storage-compat",st="0.1.11",ct="storage-compat";function lt(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new at(r,i)}!function(e){var t={TaskState:je,TaskEvent:xe,StringFormat:K,Storage:at,Reference:it};e.INTERNAL.registerComponent(new m.a(ct,lt,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(ut,st)}(a.a)},function(e,t,n){"use strict";var r=n(30),i=n(11),a=n(7),o=n(10),u=n(1),s=n(3),c=n(26),l=n(9),f=n(6),h=n(16);function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v="@firebase/firestore-compat",y="0.1.15";function m(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new l.g("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function g(){if("undefined"===typeof Uint8Array)throw new l.g("unimplemented","Uint8Arrays are not available in this environment.")}function b(){if(!Object(l.r)())throw new l.g("unimplemented","Blobs are unavailable in Firestore in this environment.")}var k=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"toBase64",value:function(){return b(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return g(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return b(),new e(l.b.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return g(),new e(l.b.fromUint8Array(t))}}]),e}();function w(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=d(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var O=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return Object(l.F)(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return Object(l.G)(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return Object(l.x)(e._delegate)}}]),e}(),_=function(){function e(t,n,r){var i=this;Object(u.a)(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof l.m||(this._appCompat=t)}return Object(s.a)(e,[{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Object(l.s)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(l.A)(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Object(l.H)(this._delegate)}},{key:"disableNetwork",value:function(){return Object(l.D)(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Object(l.t)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return Object(l.lb)(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Object(l.Y)(this._delegate,e)}},{key:"collection",value:function(e){try{return new M(this,Object(l.y)(this._delegate,e))}catch(t){throw S(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new T(this,Object(l.E)(this._delegate,e))}catch(t){throw S(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new P(this,Object(l.z)(this._delegate,e))}catch(t){throw S(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Object(l.db)(this._delegate,function(n){return e(new j(t,n))})}},{key:"batch",value:function(){var e=this;return Object(l.K)(this._delegate),new E(new l.l(this._delegate,function(t){return Object(l.L)(e._delegate,t)}))}},{key:"loadBundle",value:function(e){return Object(l.V)(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Object(l.W)(this._delegate,e).then(function(e){return e?new P(t,e):null})}},{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"app",get:function(){if(!this._appCompat)throw new l.g("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}}]),e}(),x=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(i.a)(this,Object(a.a)(t).call(this))).firestore=e,n}return Object(o.a)(t,e),Object(s.a)(t,[{key:"convertBytes",value:function(e){return new k(new l.b(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return T.forKey(t,this.firestore,null)}}]),t}(l.a);var j=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new x(t)}return Object(s.a)(e,[{key:"get",value:function(e){var t=this,n=U(e);return this._delegate.get(n).then(function(e){return new N(t._firestore,new l.e(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=U(e);return n?(m("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=U(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=U(e);return this._delegate.delete(t),this}}]),e}(),E=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"set",value:function(e,t,n){var r=U(e);return n?(m("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=U(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=U(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),I=function(){function e(t,n,r){Object(u.a)(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Object(s.a)(e,[{key:"fromFirestore",value:function(e,t){var n=new l.i(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new R(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new x(t),n),i.set(n,a)),a}}]),e}();I.INSTANCES=new WeakMap;var T=function(){function e(t,n){Object(u.a)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new x(t)}return Object(s.a)(e,[{key:"collection",value:function(e){try{return new M(this.firestore,Object(l.y)(this._delegate,e))}catch(t){throw S(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Object(f.l)(e))instanceof l.d&&Object(l.cb)(this._delegate,e)}},{key:"set",value:function(e,t){t=m("DocumentReference.set",t);try{return t?Object(l.fb)(this._delegate,e,t):Object(l.fb)(this._delegate,e)}catch(n){throw S(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Object(l.kb)(this._delegate,e):l.kb.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw S(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Object(l.B)(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=C(n),a=A(n,function(t){return new N(e.firestore,new l.e(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return Object(l.X)(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Object(l.N)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Object(l.O)(this._delegate):Object(l.M)(this._delegate)).then(function(e){return new N(t.firestore,new l.e(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(I.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new M(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new l.g("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new l.d(n._delegate,r,new l.n(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new l.d(n._delegate,r,t))}}]),e}();function S(e,t,n){return e.message=e.message.replace(t,n),e}function C(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!w(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function A(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=w(e[0])?e[0]:w(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var N=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Object(l.hb)(this._delegate,e._delegate)}},{key:"ref",get:function(){return new T(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}}]),e}(),R=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"data",value:function(e){var t=this._delegate.data(e);return Object(l.q)(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}]),t}(N),P=function(){function e(t,n){Object(u.a)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new x(t)}return Object(s.a)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.mb)(t,n,r)))}catch(i){throw S(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.Z)(t,n)))}catch(r){throw S(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.T)(t)))}catch(n){throw S(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.U)(t)))}catch(n){throw S(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.jb.apply(void 0,arguments)))}catch(t){throw S(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.ib.apply(void 0,arguments)))}catch(t){throw S(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.J.apply(void 0,arguments)))}catch(t){throw S(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.I.apply(void 0,arguments)))}catch(t){throw S(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Object(l.bb)(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Object(l.Q)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Object(l.R)(this._delegate):Object(l.P)(this._delegate)).then(function(e){return new L(t.firestore,new l.j(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=C(n),a=A(n,function(t){return new L(e.firestore,new l.j(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return Object(l.X)(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(I.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),D=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new R(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),L=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new D(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new R(n._firestore,r))})}},{key:"isEqual",value:function(e){return Object(l.hb)(this._delegate,e._delegate)}},{key:"query",get:function(){return new P(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new R(e._firestore,t)})}}]),e}(),M=function(e){function t(e,n){var r;return Object(u.a)(this,t),(r=Object(i.a)(this,Object(a.a)(t).call(this,e,n))).firestore=e,r._delegate=n,r}return Object(o.a)(t,e),Object(s.a)(t,[{key:"doc",value:function(e){try{return new T(this.firestore,void 0===e?Object(l.E)(this._delegate):Object(l.E)(this._delegate,e))}catch(t){throw S(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return Object(l.u)(this._delegate,e).then(function(e){return new T(t.firestore,e)})}},{key:"isEqual",value:function(e){return Object(l.cb)(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new t(this.firestore,e?this._delegate.withConverter(I.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new T(this.firestore,e):null}}]),t}(P);function U(e){return Object(l.p)(e,l.d)}var F=function(){function e(){Object(u.a)(this,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this._delegate=Object(r.a)(l.f,n)}return Object(s.a)(e,[{key:"isEqual",value:function(e){return(e=Object(f.l)(e))instanceof l.f&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(l.o.keyField().canonicalString())}}]),e}(),V=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=Object(l.eb)();return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=Object(l.C)();return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=l.w.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=l.v.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=Object(l.S)(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),B={Firestore:_,GeoPoint:l.h,Timestamp:l.k,Blob:k,Transaction:j,WriteBatch:E,DocumentReference:T,DocumentSnapshot:N,Query:P,QueryDocumentSnapshot:R,QuerySnapshot:L,CollectionReference:M,FieldPath:F,FieldValue:V,setLogLevel:function(e){Object(l.gb)(e)},CACHE_SIZE_UNLIMITED:l.c};!function(e){var t;t=function(e,t){return new _(e,t,new O)},e.INTERNAL.registerComponent(new h.a("firestore-compat",function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)},"PUBLIC").setServiceProps(Object.assign({},B))),e.registerVersion(v,y)}(c.a)}]]);
//# sourceMappingURL=2.0696a11b.chunk.js.map