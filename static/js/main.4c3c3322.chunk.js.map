{"version":3,"sources":["fbase.js","coordinateSystem.js","interactionStateMachine.js","makePassiveEventOption.js","canvasDrawIndex.js","drawImage.js","components/Csubmit.js","components/Csubmitbook.js","lz-string-1.3.3.js","routes/Profile.js","routes/Auth.js","routes/Home.js","components/Navigation.js","routes/DoProko.js","ZoomButtons.js","StateDebugView.js","Utils.js","PinchZoomPan.js","routes/DoSoty.js","routes/videojs-framebyframe/videojs.framebyframe.js","routes/video.js","routes/DoSakuga.js","routes/Special.js","routes/Specialcopy.js","routes/Adorka.js","routes/x-frame-bypass.js","routes/LineOfAction.js","routes/twitter.js","routes/ChaDesign.js","components/Dsubmit.js","routes/ChaDrawing.js","routes/dragsprite.js","routes/360.js","routes/DoManga.js","routes/Special2.js","components/Router.js","components/App.js","index.js","routes/soche.png","routes/soche2.png","myfile.csv","routes/soche3.png"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","authService","auth","dbService","firestore","storageService","storage","NULL_VIEW_POINT","Object","freeze","x","y","untransformedX","untransformedY","NULL_BOUNDS","canvasWidth","canvasHeight","left","top","right","bottom","viewMin","viewMax","IDENTITY","a","b","c","d","e","f","CoordinateSystem","_ref","_this","this","scaleExtents","documentSize","classCallCheck","_canvas","_view","scale","_viewChangeListeners","Set","setScale","setView","clampView","_ref2","_this$scaleExtents","min","max","_this$documentSize","width","height","_ref3","canvasRect","maxx","minx","maxy","miny","Math","resetView","view","newView","objectSpread","_this$_view","forEach","listener","scaleAtClientPoint","deltaScale","clientPoint","viewPt","clientPointToViewPoint","clientPtPostScale","viewPointToClientPoint","clientX","clientY","_ref4","arguments","length","undefined","_ref5","relativeClientX","relativeClientY","_ref6","_ref7","relativeX","relativeY","attachViewChangeListener","add","_scaleExtents","_documentSize","canvas","_ref8","_ref9","_this$_canvas$getBoun","getBoundingClientRect","SUPPRESS_SCROLL","preventDefault","DefaultState","_this2","handleMouseWheel","canvasDraw","_canvasDraw$props","props","disabled","enablePanAndZoom","mouseZoomFactor","DisabledState","handleDrawStart","console","log","controlPan","PanState","WaitForPinchState","handleDrawMove","_viewPointFromEvent","viewPointFromEvent","coordSystem","lazy","update","handleDrawEnd","_this3","_this4","bind","dragStart","clientPointFromEvent","panStart","_clientPointFromEvent","dx","dy","_this5","touches","ScaleOrPanState","DrawingState","clientPt","deferredPoints","push","Date","valueOf","startTimestamp","startClientPoint","abs","issueDeferredPoints","nextState","i","deferredPt","syntheticEvt","SyntheticEvent","_this6","start","getTouchMetrics","scaleStart","_this6$recentMetrics","recentMetrics","centroid","distance","TouchScaleState","TouchPanState","_clientPointFromEvent2","t1x","t1y","_clientPointFromEvent3","t2x","t2y","t1","t2","sqrt","scaleOrPanState","_this7","ref","_ref$recentMetrics","_this8","_ref$recentMetrics2","dScale","_this9","_viewPointFromEvent2","both","_viewPointFromEvent3","isDisabled","isEnabled","isDrawing","points","clampPointToDocument","brush","toObject","drawPoints","brushColor","brushRadius","saveLine","changedTouches","options","passive","window","addEventListener","removeEventListener","midPointBtw","p1","p2","canvasStyle","display","position","canvasTypes","penstate","CanvasDraw","possibleConstructorReturn","getPrototypeOf","call","undo","lines","slice","erasedLines","pop","clearExceptErasedLines","simulateDrawingLines","immediate","triggerOnChange","eraseAll","toConsumableArray","clear","getSaveData","JSON","stringify","getDataURL","fileType","useBgImage","backgroundColour","canvasToExport","drawing","context","getContext","storedImageData","getImageData","compositeOperation","globalCompositeOperation","imgSrc","drawImage","fillStyle","fillRect","imageData","toDataURL","concat","clearRect","putImageData","loadSaveData","saveData","immediateLoading","Error","_JSON$parse","parse","scaleX","scaleY","scaleAvg","map","line","p","componentWillUnmount","canvasObserver","unobserve","canvasContainer","CustomKeyDown","key","handleWheel","interactionSM","assertThisInitialized","allowOnlyPointerType","pointerType","mouseHasMoved","applyView","ctx","name","clearWindow","m","transformMatrix","setTransform","deferRedrawOnViewChange","drawGrid","grid","redrawImage","loop","once","handleCanvasResize","entries","_step","_iterator","_createForOfIteratorHelper","s","n","done","_entry$contentRect","value","contentRect","setCanvasSize","interface","temp","err","point","clampLinesToDocument","image","complete","img","w","h","offsetX","offsetY","cx","cy","cw","ch","iw","ih","r","nw","nh","ar","curTime","timeoutGap","loadTimeOffset","_loop","setTimeout","style","lineJoin","lineCap","strokeStyle","lineWidth","moveTo","beginPath","len","midPoint","quadraticCurveTo","lineTo","closePath","fill","stroke","inClientSpace","onChange","valuesChanged","_ref4$once","pointer","getPointerCoordinates","getBrushCoordinates","drawInterface","requestAnimationFrame","ctxs","action","save","restore","Image","crossOrigin","onload","src","hideGrid","_this$coordSystem$can","canvasBounds","floor","setLineDash","gridColor","gridLineWidth","hideGridX","countX","gridSizeX","hideGridY","countY","gridSizeY","hideInterface","arc","PI","catenaryColor","state","controlPan2","zoomscale","catenary","Catenary","isPressing","zoomExtents","LazyBrush","radius","lazyRadius","devicePixelRatio","enabled","initialPoint","innerWidth","innerHeight","chainLength","ResizeObserver","observer","observe","initX","initY","prevProps","setRadius","react_default","createElement","Fragment","className","background","backgroundColor","touchAction","container","isInterface","styles","opacity","zIndex","onPointerDown","onPointerMove","onPointerUp","onPointerOut","onClick","setState","PureComponent","defaultProps","PanControl","refreshBackgroundImage","CCsubmit","CsubmitObj","isOwner","_useState","viewDeleyToggle","useState","_useState2","slicedToArray","editing","setEditing","_useState3","text","_useState4","canvasRef2","useRef","_useState5","_useState6","setOnOff","uploadDay","createdAt","_useState7","_useState8","viewRefPin","setViewRefpin","_useState9","_useState10","setRefUrl","_useState11","_useState12","imgs","setImgs","_useState13","_useState14","setHideGrid","_useState15","_useState16","setBrushColor","onHeartClick","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","doc","id","heart","FieldValue","arrayUnion","refPinUrl","stop","apply","float","border","event","current","children","document","dataUrl","data","canvasDrawIndex_CanvasDraw","margin","padding","confirm","delete","pre","toLocaleString","navigator","language","userLanguage","includes","localStorage","setItem","collection","creatorId","drawingTime","startsWith","replace","frameBorder","scrolling","CCsubmitbook","CsubmitbookObj","build","LZString","_keyStr","_f","String","fromCharCode","compressToBase64","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","compress","charCodeAt","NaN","isNaN","charAt","decompressFromBase64","output_","ol","indexOf","decompress","compressToUTF16","status","decompressFromUTF16","uncompressed","ii","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data_string","context_data_val","context_data_position","prototype","hasOwnProperty","pow","compressed","bits","resb","maxpower","power","dictionary","enlargeIn","dictSize","numBits","entry","result","string","val","index","Profile","userObj","Csubmits","setCsubmits","Csubmitbooks","setCsubmitbooks","Cdate","bookListOn","setBookListOn","bookListOnFirst","setBookListOnFisrt","startDate","setStartDate","_useState17","_useState18","bookListEnd","setBookListEnd","_useState19","_useState20","listEnd","setListEnd","_useState21","_useState22","isCalendar","setIsCalender","_useState23","_useState24","isMemo","setIsMemo","_useState25","_useState26","isMemoEdit","setIsMemoEdit","_useState27","_useState28","memo","setMemo","useEffect","uid","get","then","exists","Cmemo","catch","error","where","orderBy","limit","onSnapshot","snapshot","CsubmitArray","docs","CsubmitbookArray","signOut","esm","onClickDay","getTime","calendarType","target","type","placeholder","cols","rows","whiteSpace","substring","Csubmitbook","components_Csubmitbook","viewsToggle","marginRight","Csubmit","components_Csubmit","Auth","email","setEmail","password","setPassword","newAccount","setError","_event$target","onSubmit","signInWithEmailAndPassword","sent","t0","message","_x","required","Home","isAndroid","penType","canvasRef","pinNum","setPinNum","randomPinNum","setRandomPinNum","pinReload","setPinreload","pinID","setPinID","drawNum","setDrawNum","croquisTime","setCroquisTime","allowPointerType","pointerTypeIndex","setPointerTypeIndex","setMin","sec","setSec","time","timeId","croquisTimeDB","eraseRadius","drawSetting","setDrawSetting","timeSetBottonToggle","setTimeSetBottonToggle","_useState29","_useState30","_useState31","_useState32","repeat","setRepeat","_useState33","_useState34","hideDraw","setHideDraw","_useState35","_useState36","hideDrawsec","setHideDrawSec","_useState37","_useState38","repeatDraw","setRepeatDraw","_useState39","_useState40","blank","setblank","_useState41","_useState42","repeatNum","onNextClick","onSetRandom","random","shuffleArray","updateSetting","refreshAndSubmit","_drawNum","getItem","parseInt","now","noRefreshAndSubmit","array","j","setInterval","clearInterval","refUrl","redrawUrl","unshift","onSubmitOnlyCanvas","onChangeTime","prevState","onSubmitTime","clickRepeat","clickHideDraw","onDeletePinClick","arrayRemove","onClearClick","onUndoClick","onEraseClick","onShadowClick","onBrushClick","ordinal_suffix_of","k","sexagesimal","react_hot_keys_esm","keyName","onKeyDown","handle","transform","textAlign","match","pinDocRef","split","Navigation","borderLeft","react_router_dom","to","DoProko","setCsubmit","youtubeUrlIndex","setYoutubeUrlIndex","youtubeUrls","playListName","url","playLists","defaultValue","containerStyle","ZoomButtons","minScale","maxScale","onZoomInClick","onZoomOutClick","marginTop","marginLeft","color","StateDebugView","overflow","overflowDisplay","filter","o","join","snapToTarget","tolerance","constrain","lowerBound","upperBound","negate","getRelativePosition","relativeToElement","rect","getPinchLength","touch1","touch2","isEqualDimensions","dimensions1","dimensions2","getDimensions","object","offsetWidth","offsetHeight","isEqualTransform","transform1","transform2","round","getAutofitScale","containerDimensions","imageDimensions","imageWidth","imageHeight","getMinScale","createSelector","minScaleProp","toLowerCase","number","precision","pair","tryCancelEvent","cancelable","calculateOverflowLeft","calculateOverflowTop","calculateOverflowRight","calculateOverflowBottom","getImageOverflow","DOUBLE_TAP_THRESHOLD","ANIMATION_SPEED","isInitialized","imageStyle","cursor","transformOrigin","imageOverflow","browserPanActions","trim","PinchZoomPan","handleTouchStart","cancelAnimation","lastPinchLength","lastPanPointerPosition","pointerDown","handleTouchMove","pinchChange","requestedPan","pan","controlOverscrollViaCss","hasOverflowX","hasOverflowY","up","down","panX","panY","handleTouchEnd","lastPointerUpTimeStamp","timeStamp","pointerPosition","imageRef","parentNode","doubleClick","maybeAdjustCurrentTransform","handleMouseDown","handleMouseMove","buttons","handleMouseDoubleClick","deltaY","zoomOut","zoomIn","handleImageLoad","debug","isImageLoaded","maybeHandleDimensionsChanged","onLoad","React","Children","only","handleZoomInClick","handleZoomOutClick","handleWindowResize","handleRefImage","setRef","clientPosition","pointerClientPosition","isTransformInitialized","translateX","translateY","constrainAndApplyTransform","doubleTapBehavior","applyInitialTransform","midpoint","getPinchMidpoint","zoom","speed","factor","requestedScale","containerRelativePoint","_this$state","imageRelativePoint","nextScale","getConstrainedScale","incrementalScalePercentage","nextTop","nextLeft","isImageReady","requestedTop","requestedLeft","requestedTransform","getCorrectedTransform","applyTransform","animation","frame","translateScale","nextTransform","lowerBoundFactor","upperBoundFactor","negativeSpace","calculateNegativeSpace","_this$props","initialTop","initialLeft","_this$state2","constrainedTransform","correctedTransform","initialPosition","_this$state3","_this$props2","initialScale","warning","childElement","_this$props3","zoomButtons","src_ZoomButtons","assign","cloneElement","onTouchStart","onTouchEnd","onMouseDown","onMouseMove","onDoubleClick","onWheel","onDragStart","onContextMenu","_this$state4","cancelAnimationFrame","tagName","CSS","supports","nextProps","Component","DoSoty","canvasRef3","who","setWho","sotyIndex","setSotyIndex","setYoshinariIndex","sotyUrlarr","setSotyUrlarr","tempUrlarr","setTempUrlarr","randomOn","setRandomOn","extendOn","setExtendOn","drawingOn","setDrawingOn","offOn","setOffOn","customUrl","setCustomUrl","extractNumberFromURL","parts","handleMessage","randomIndex","whois","yoshinariIndex","urlarr","yoshinari","refUrl2","PinchZoomPan_PinchZoomPan","alt","VjsButton","videojs","getComponent","FBFButton","extend","constructor","player","frameTime","fps","step_size","on","pause","dist","currentTime","framebyframe","ready","steps","opt","controlBar","addChild","el","dom","createEl","innerHTML","role","step","VideoPlayer","registerPlugin","plugin","videoNode","addClass","dispose","videoUrl","videoJsOptions","autoplay","controls","sources","data-vjs-player","node","DoSakuga","searchTerm","setSearchTerm","setVideoUrl","videoPage","setVideoPage","searchHeight","setSearchHeight","searchResults","setSearchResults","jsons","setJsons","booruResults","setBooruResults","booruTag","setBooruTag","booruUrl","setBooruUrl","videoInfo","setVideoInfo","bookmarkLists","setBookmarkLists","randomLists","setRandomLists","videowidth","setVideowidth","bookmarkListRefresh","setBookmarkListRefresh","bookmarkListOn","setBookmarkListOn","herokuOn","setHerokuOn","consolog","setConsolog","handleChange","str","results","tagg","_useState43","_useState44","_useState45","_useState46","_useState47","_useState48","_useState49","_useState50","_useState51","_useState52","fetch","sakuga","response","json","jsonData","onSubmitSearch","refreshSearch","ok","onPrePageClick","onForPageClick","onBookmarkListClick","setBookMark","DimgUrl","DvideoUrl","Dtag","Did","playbackRates","pictureInPictureToggle","fullscreenToggle","plugins","hotkeys","seekStep","enableModifiersForNumbers","customKeys","DforwardKey","which","handler","SrewindKey","E1forwardKey","W1rewindKey","R5forwardKey","Q5rewindKey","jsonDatas","child","putString","fileUrls","item","file_url","appearance","borderRadius","preview_url","tags","tagItem","video_VideoPlayer","href","Special","croquisList","setCroquisList","randomCroquisList","setRandomCroquisList","savedRandomPinNum","setSavedRandomPinNum","allstarRandom","setAllstarRandom","submitField","setSubmitField","upFile","setUpFile","refWidth","setRefWidth","newname","blob","renamedBlob","Blob","newFileRef","storeDir","put","getDownloadURL","startIndex","endIndex","shorturl","defineProperty","keys","list","data2","sort","localeCompare","new_array","flatMap","obj","values","onSubmitOnlyCanvasAndRedraw","base64Image","callback","modifiedBase64Image","lowerImageTransparency","selectChange","onAllStarRandom","onSubmitImage","handleFilesUploadOnFirebaseStorage","handleFileUploadOnFirebaseStorage","_callee2","bucketName","file","uploadTask","_context2","abrupt","fileURL","_x2","_x3","_callee3","files","downloadFileResponse","shortresult","_pinDocRef5","_file","_downloadFileResponse","_url","_startIndex","_endIndex","_shortresult","_context3","_x4","_x5","selected","paddingLeft","accept","multiple","Specialcopy","redrawText","Adorka","is","customElements","define","_HTMLIFrameElement","_class","inherits","createClass","load","sandbox","srcdoc","fetchProxy","res","proxies","statusText","wrapNativeSuper","HTMLIFrameElement","extends","LineOfAction","twitter","twitterUrl","setTwitterUrl","isBookmarked","setIsBookmarked","isListOn","setIsListOn","isListDelOn","setIsListDelOn","bookmarkList","setBookmarkList","twitterBookmark","script","setAttribute","getElementsByClassName","appendChild","filtered","element","class","data-width","data-height","ChaDesign","socheNum","setSocheNum","charOn","setCharOn","charList","setCharList","charNum","setCharNum","timer","clearTimeout","Papa","mycsv","download","records","noRefreshAndSubmitWithImg","inputValue","Soche","Soche2","toString","CDsubmit","DsubmitObj","ChaDrawing","Dsubmits","setDsubmits","Dmemo","DsubmitArray","Dsubmit","components_Dsubmit","DragSprite","imagesrc","spriteImage","spriteRows","setSpriteRows","spriteCols","setSpriteCols","spriteNum","setSpriteNum","currenIndex","setCurrenIndex","spriteWidth","setSpriteWidth","spriteHeight","setSpriteHeight","calScale","setCalScale","modelName","setModelName","col","row","num","words","inde","modelname","Number","spriteStyle","backgroundImage","backgroundPosition","spriteRef","Row","Col","setPosition","initialX","inix","iniindex","inindex","deltaX","indexx","currentindex","_360","newRow","setNewRow","newCol","setNewCol","processInfo","setprocessInfo","onChangeCol","onChangeRow","oldname","filedir","namepart","oldfileRef","downurl","fullurl","inputmode","dragsprite","DoManga","croquisPage","setCroquisPage","_useState53","_useState54","_useState55","_useState56","pageArray","page","lastpagename","newPage","_callee4","_context4","_callee5","_context5","_x6","_x7","Special2","AppRouter","isLoggedIn","components_Navigation","react_router","exact","path","routes_Home","from","routes_Auth","App","init","setInit","setIsLoggedIn","setIsAndroid","setUserObj","setPenType","varUA","userAgent","onAuthStateChanged","user","Router","ReactDOM","render","StrictMode","components_App","getElementById","module","exports","__webpack_require__"],"mappings":"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","file":"static/js/main.4c3c3322.chunk.js","sourcesContent":["import   firebase from \"firebase/compat/app\";\r\n\r\n\r\nimport \"firebase/compat/auth\";\r\nimport \"firebase/compat/firestore\";\r\nimport \"firebase/compat/storage\"\r\nconst firebaseConfig = {\r\n    // apiKey: \"AIzaSyDH6rySddl7QAoqkwATwz7CgXrPe7LQis8\",\r\n    // authDomain: \"croquistool.firebaseapp.com\",\r\n    // projectId: \"croquistool\",\r\n    // storageBucket: \"croquistool.appspot.com\",\r\n    // messagingSenderId: \"843301254465\",\r\n    // appId: \"1:843301254465:web:046d03ff7cf7e8619f9dc0\",\r\n    // measurementId: \"G-JT9C23VQFT\"\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    projectId: process.env.REACT_APP_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGIN_ID,\r\n    appId: process.env.REACT_APP_APP_ID,\r\n    measurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n  };\r\n\r\n  export default firebase.initializeApp(firebaseConfig);\r\n \r\n const authService =  firebase.auth();\r\n const dbService = firebase.firestore();\r\n const storageService = firebase.storage();\r\nexport {firebase, authService,dbService,storageService}","/**\r\n * @type {ViewPoint}\r\n */\r\nconst NULL_VIEW_POINT = Object.freeze({\r\n  x: 0, y: 0, untransformedX: 0, untransformedY: 0\r\n});\r\n\r\n/**\r\n * @type {CanvasBounds}\r\n */\r\nconst NULL_BOUNDS = Object.freeze({\r\n  canvasWidth: 0, canvasHeight: 0,\r\n  left: 0, top: 0, right: 0, bottom: 0,\r\n  viewMin: NULL_VIEW_POINT, viewMax: NULL_VIEW_POINT,\r\n});\r\n\r\n/**\r\n * The identity matrix (a transform that results in view coordinates that are\r\n * identical to relative client coordinates).\r\n * @type {Matrix}\r\n */\r\nexport const IDENTITY = Object.freeze({ a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 });\r\n\r\nfunction valueOrDefault(value, defaultValue) {\r\n  if (value === null || (typeof value) === \"undefined\") {\r\n    return defaultValue;\r\n  } else {\r\n    return value;\r\n  }\r\n}\r\n\r\n/**\r\n * Facilitates calculation and manipulation of a zoom-and-pannable view within a\r\n * canvas.\r\n */\r\nexport default class CoordinateSystem {\r\n  /**\r\n   * @typedef Extents\r\n   * @property {number} min the minimal value in the range\r\n   * @property {number} max the maximal value in the range\r\n   */\r\n\r\n  /**\r\n   * @typedef Size\r\n   * @property {number} width the span of the element's horizontal axis\r\n   * @property {number} height the span of the element's vertical axis\r\n   */\r\n\r\n  /**\r\n   * @param {Object} parameters the initialization parameters for this instance.\r\n   * @param {Extents} parameters.scaleExtents the minimum and maximum allowable scale factor.\r\n   * @param {Sizee} parameters.documentSize the width and height of the document, in client space.\r\n   */\r\n  constructor({ scaleExtents, documentSize }) {\r\n    this._scaleExtents = scaleExtents;\r\n    this._documentSize = documentSize;\r\n  }\r\n\r\n  /**\r\n   * @type {Extents}\r\n   */\r\n  _scaleExtents;\r\n\r\n  /**\r\n   * @type {Size}\r\n   */\r\n  _documentSize;\r\n\r\n  /**\r\n   * @typedef Canvas\r\n   * @property {number} width the canvas's width\r\n   * @property {number} height the canvas's height\r\n   * @property {() => Object} getBoundingClientRect returns the client bounds\r\n   */\r\n\r\n  /**\r\n   * @type {Canvas}\r\n   * @private\r\n   */\r\n  _canvas = null;\r\n\r\n  /**\r\n   * @typedef View\r\n   * @property {number} scale the zoom factor\r\n   * @property {number} x the current x offset\r\n   * @property {number} y the current y offset\r\n   */\r\n\r\n  /**\r\n   * @type {View}\r\n   * @private\r\n   */\r\n  _view = { scale: 1.0, x: 0, y: 0 };\r\n\r\n  /**\r\n   * Describes a callback function that receives info about view changes\r\n   * @typedef {(update: { view: View, transform: Matrix }) => void} ViewListener\r\n   */\r\n\r\n   /**\r\n    * @type {ViewListener[]}\r\n    * @private\r\n    */\r\n   _viewChangeListeners = new Set();\r\n\r\n  /**\r\n   * @returns {Canvas} the canvas currently associated with this instance.\r\n   */\r\n  get canvas() {\r\n    return this._canvas;\r\n  }\r\n\r\n  /**\r\n   * Updates the canvas for this coordinate system and recalculates the view.\r\n   * @param {Canvas} canvas the new canvas to associate with this instance.\r\n   */\r\n  set canvas(canvas) {\r\n    this._canvas = canvas;\r\n    this.setView();\r\n  }\r\n\r\n  /**\r\n   * @returns {number} the current zoom factor\r\n   */\r\n  get scale() {\r\n    return this._view.scale;\r\n  }\r\n\r\n  /**\r\n   * Sets the zoom factor (clamped by the scale extents) and updates the view.\r\n   * @param {number} the new zoom factor\r\n   */\r\n  setScale = (scale) => {\r\n    this.setView({ scale });\r\n  };\r\n\r\n  /**\r\n   * @returns {number} the horizontal component of the current pan offset\r\n   */\r\n  get x() {\r\n    return this._view.x;\r\n  }\r\n\r\n  /**\r\n   * Sets the horizontal pan offset (clamped by the document extents) and\r\n   * updates the view.\r\n   * @param {number} x the new offset\r\n   */\r\n  set x(x) {\r\n    this.setView({ x });\r\n  }\r\n\r\n  /**\r\n   * @retruns {number} the vertical component of the current pan offset\r\n   */\r\n  get y() {\r\n    return this._view.y;\r\n  }\r\n\r\n  /**\r\n   * Sets the vertical pan offset (clamped by the document extents) and\r\n   * updates the view.\r\n   * @param {number} y the new offset\r\n   */\r\n  set y(y) {\r\n    this.setView({ y });\r\n  }\r\n\r\n  /**\r\n   * @returns {View} a copy of this instance's current view state.\r\n   */\r\n  get view() {\r\n    return { ...this._view };\r\n  }\r\n\r\n  /**\r\n   * @returns {Extents} a copy of the scale extents currently applied to this\r\n   * instance.\r\n   */\r\n  get scaleExtents() {\r\n    return { ...this._scaleExtents };\r\n  }\r\n\r\n  /**\r\n   * Updates the minimum and maximum scale and resets the view transform if it\r\n   * is outside the new extents.\r\n   * @param {Extents} extents the new scale extents.\r\n   */\r\n  set scaleExtents({ min, max }) {\r\n    this._scaleExtents = { min, max };\r\n    this.setView();\r\n  }\r\n\r\n  /**\r\n   * @returns {Size} the current document size (used to constrain the pan\r\n   * offset).\r\n   */\r\n  get documentSize() {\r\n    return { ...this._documentSize };\r\n  }\r\n\r\n  /**\r\n   * Sets the document size and recalculates the view if it is outside the new\r\n   * bounds.\r\n   * @param {Size} size the new document size.\r\n   */\r\n  set documentSize({ width, height }) {\r\n    this._documentSize = { width, height };\r\n    this.setView();\r\n  }\r\n\r\n  /**\r\n   * A view matrix expressing a series of transformations.\r\n   * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setTransform\r\n   * @typedef Matrix\r\n   * @property {number} a horizontal scaling factor (1 == unscaled)\r\n   * @property {number} b vertical skewing factor (0 == unskewed)\r\n   * @property {number} c horizontal skewing factor (0 == unskewed)\r\n   * @property {number} d vertical scaling factor (1 == unscaled)\r\n   * @property {number} e horizontal translation (0 == untranslated)\r\n   * @property {number} f vertical translation (0 == untranslated)\r\n   */\r\n\r\n  /**\r\n   * @returns {Matrix} this coordinate system's current transformation matrix\r\n   */\r\n  get transformMatrix() {\r\n    //\r\n    return {\r\n      a: this._view.scale, // horizontal scaling\r\n      b: 0, // vertical skewing\r\n      c: 0, // horizontal skewing\r\n      d: this._view.scale, // vertical scaling\r\n      e: this._view.x,\r\n      f: this._view.y,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * An object expressing the bounds of a canvas object in terms of the\r\n   * coordinate system.\r\n   * @typedef CanvasBounds\r\n   * @property {number} left the left edge of the canvas in client space\r\n   * @property {number} right the right edge of the canvas in client space\r\n   * @property {number} top the top edge of the canvas in client space\r\n   * @property {number} bottom the bottom edge of the canvas in client space\r\n   * @property {number} canvasWidth the width of the canvas in client space\r\n   * @property {number} canvasHeight the height of the canvas in client space\r\n   * @property {ViewPoint} viewMin the top-left corner of the canvas in view space\r\n   * @property {ViewPoint} viewMax the bottom-right corner of the canvas in view space\r\n   */\r\n\r\n  /**\r\n   * @returns {CanvasBounds | undefined} the boundaries of the canvas linked to\r\n   * this coordinate system, or undefined if no canvas is set.\r\n   */\r\n  get canvasBounds() {\r\n    if (this._canvas) {\r\n      const { left, top, right, bottom } = this._canvas.getBoundingClientRect();\r\n      return {\r\n        viewMin: this.clientPointToViewPoint({ clientX: left, clientY: top }),\r\n        viewMax: this.clientPointToViewPoint({ clientX: right, clientY: bottom }),\r\n        left, top, right, bottom,\r\n        canvasWidth: this._canvas.width,\r\n        canvasHeight: this._canvas.height,\r\n      };\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @return {{left: number, top: number} | undefined}\r\n   */\r\n  get canvasRect() {\r\n    if (this.canvas) {\r\n      return this.canvas.getBoundingClientRect();\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calculates a variant of the given view clamped according to the scale and\r\n   * document bounds. Does not modify this instance.\r\n   * @param {View} view the view constraints to clamp.\r\n   * @returns {View} a new view object representing the constrained input.\r\n   */\r\n  clampView = ({ scale, x, y }) => {\r\n    const { min, max } = this.scaleExtents;\r\n    const { width, height } = this.documentSize;\r\n    const { left, top, right, bottom } = this.canvasRect || NULL_BOUNDS;\r\n\r\n    const canvasWidth = right - left;\r\n    const canvasHeight = bottom - top;\r\n\r\n    const maxx = canvasWidth / 2;\r\n    const minx = -(width * this._view.scale - canvasWidth / 2);\r\n    const maxy = canvasHeight / 2;\r\n    const miny = -(height * this._view.scale - canvasHeight / 2);\r\n\r\n    // Clamp values to acceptible range.\r\n    return {\r\n      scale: Math.min(Math.max(scale, min), max),\r\n      x: Math.min(Math.max(x, minx), maxx),\r\n      y: Math.min(Math.max(y, miny), maxy),\r\n    };\r\n  };\r\n\r\n  /**\r\n   * Resets the view transform to its default state.\r\n   */\r\n  resetView = () => {\r\n    this.setView({ scale: 1.0, x: 0, y: 0 });\r\n  };\r\n\r\n  /**\r\n   * Updates the view, ensuring that it is within the document and scale bounds.\r\n   * @param {View} view\r\n   *    the new view state. Any view property not specified will remain\r\n   *    unchanged.\r\n   * @return {View}\r\n   *    a copy of the view state after having been constrained and applied.\r\n   */\r\n  setView = (view) => {\r\n    const newView = this.clampView({ ...this._view, ...(view || {}) });\r\n    const { scale, x, y } = this._view;\r\n\r\n    // Only trigger if the view actually changed.\r\n    if (newView.scale !== scale || newView.x !== x || newView.y !== y) {\r\n      this._view = newView;\r\n      this._viewChangeListeners.forEach(listener => listener && listener(newView));\r\n    }\r\n\r\n    return { ...this._view };\r\n  };\r\n\r\n  /**\r\n   * Updates the current view scale while attempting to keep the given point\r\n   * fixed within the canvas.\r\n   *\r\n   * @param {number} deltaScale the amount by which to change the current scale factor.\r\n   * @param {ClientPoint} clientPoint the origin of the zoom, in client space.\r\n   *\r\n   * @returns {View} the newly computed view.\r\n   */\r\n  scaleAtClientPoint = (deltaScale, clientPoint) => {\r\n    const viewPt = this.clientPointToViewPoint(clientPoint);\r\n    const newView = this.clampView({ ...this._view, scale: this._view.scale + deltaScale });\r\n    const clientPtPostScale = this.viewPointToClientPoint(viewPt, newView);\r\n\r\n    newView.x = this._view.x - (clientPtPostScale.clientX - clientPoint.clientX);\r\n    newView.y = this._view.y - (clientPtPostScale.clientY - clientPoint.clientY);\r\n\r\n    return this.setView(newView);\r\n  };\r\n\r\n  /**\r\n   * Describes a point in view space (client space after the viewport transform\r\n   * has been applied).\r\n   * @typedef ViewPoint\r\n   * @property {number} x\r\n   *    the x-coordinate in view space\r\n   * @property {number} y\r\n   *    the y-coordinate in view space\r\n   * @property {number} relativeClientX\r\n   *    the x-coordinate of the point in client space, relative to the top-left\r\n   *    corner of the canvas\r\n   * @property {number} relativeClientY\r\n   *    the y-coordinate of the point in client space, relative to the top-left\r\n   *    corner of the canvas\r\n   */\r\n\r\n  /**\r\n   * @param {ClientPoint} point the point to transform in client space\r\n   * @param {View} view the view transform to apply (defaults to the current view)\r\n   * @returns {ViewPoint} the result of converting the given client coordinate\r\n   * to view space. If there is no canvas set, a top-left corner of (0, 0) is\r\n   * assumed.\r\n   */\r\n  clientPointToViewPoint = ({ clientX, clientY }, view = this._view) => {\r\n    const { left, top } = this.canvasRect || NULL_BOUNDS;\r\n    const relativeClientX = clientX - left;\r\n    const relativeClientY = clientY - top;\r\n\r\n    return {\r\n      x: (relativeClientX - view.x) / view.scale,\r\n      y: (relativeClientY - view.y) / view.scale,\r\n      relativeClientX,\r\n      relativeClientY,\r\n    };\r\n  };\r\n\r\n  /**\r\n   * @typedef ClientPoint\r\n   * @property {number} clientX\r\n   *    the x-coordinate in client space\r\n   * @property {number} clientY\r\n   *    the y-coordinate in client space\r\n   * @property {number} x\r\n   *    an alias for clientX\r\n   * @property {number} y\r\n   *    an alias for clientY\r\n   * @property {number} relativeX\r\n   *    the x-coordinate in client space, relative to the top-left corner of the\r\n   *    canvas\r\n   * @property {number} relativeY\r\n   *    the y-coordinate in client space, relative to the top-left corner of the\r\n   *    canvas\r\n   */\r\n\r\n   /**\r\n    * @param {ViewPoint} point the point to transform in view space\r\n    * @param {number} point.x the point's x-coordinate\r\n    * @param {number} point.y the point's y-coordinate\r\n    * @param {View} view the view transform to apply (defaults to the current view)\r\n    * @returns {ClientPoint} the result of converting the given coordinate to\r\n    * client space. If there is no canvas set, a top-left corner of (0, 0) is\r\n    * assumed.\r\n    */\r\n  viewPointToClientPoint = ({ x, y }, view = this._view) => {\r\n    const { left, top } = this.canvasRect || NULL_BOUNDS;\r\n    const relativeX = x * view.scale + view.x;\r\n    const relativeY = y * view.scale + view.y;\r\n    const clientX = relativeX + left;\r\n    const clientY = relativeY + top;\r\n\r\n    return { clientX, clientY, relativeX, relativeY, x: clientX, y: clientY };\r\n  };\r\n\r\n  /**\r\n   * Adds a new callback function that will be invoked each time the view\r\n   * transform changes.\r\n   * @param {ViewListener} listener the callback to execute.\r\n   */\r\n  attachViewChangeListener = (listener) => {\r\n    this._viewChangeListeners.add(listener);\r\n  };\r\n}\r\n","const TOUCH_SLOP = 10;\r\nconst PINCH_TIMEOUT_MS = 250;\r\nconst SUPPRESS_SCROLL = (e) => {\r\n  // No zooming while drawing, but we'll cancel the scroll event.\r\n  e.preventDefault();\r\n  return this;\r\n};\r\n\r\n/**\r\n * The default state for the interaction state machine. Supports zoom and\r\n * initiating pan and drawing actions.\r\n */\r\nexport class DefaultState {\r\n  // constructor(controlPan) {\r\n  //  this.PanOn = controlPan;\r\n  // }\r\n  handleMouseWheel = (e, canvasDraw) => {\r\n    const { disabled, enablePanAndZoom, mouseZoomFactor } = canvasDraw.props;\r\n    if (disabled ) {\r\n      return new DisabledState();\r\n    } \r\n    // 컨트롤+휠 비활성화\r\n    // else if (enablePanAndZoom && e.ctrlKey) {\r\n    //   e.preventDefault();\r\n    //   canvasDraw.coordSystem.scaleAtClientPoint(mouseZoomFactor * e.deltaY, clientPointFromEvent(e));\r\n    // }\r\n    return this;\r\n  };\r\n\r\n  handleDrawStart = (e, canvasDraw) => {\r\n    console.log(canvasDraw.controlPan);\r\n    if (canvasDraw.props.disabled) {\r\n      return new DisabledState();\r\n    } \r\n    // 컨트롤 비활성화\r\n    //else if ((canvasDraw.controlPan|| e.ctrlKey) && canvasDraw.props.enablePanAndZoom) {\r\n    else if (canvasDraw.controlPan && canvasDraw.props.enablePanAndZoom) {\r\n      \r\n      return (new PanState()).handleDrawStart(e, canvasDraw);\r\n    } else {\r\n      return (new WaitForPinchState()).handleDrawStart(e, canvasDraw);\r\n    }\r\n  };\r\n\r\n  handleDrawMove = (e, canvasDraw) => {\r\n    if (canvasDraw.props.disabled) {\r\n      return new DisabledState();\r\n    } else {\r\n      const { x, y } = viewPointFromEvent(canvasDraw.coordSystem, e);\r\n      canvasDraw.lazy.update({ x, y });\r\n      return this;\r\n    }\r\n  };\r\n\r\n  handleDrawEnd = (e, canvasDraw) => {\r\n    return canvasDraw.props.disabled ? (new DisabledState()) : this;\r\n  };\r\n};\r\n\r\n/**\r\n * This state is used as long as the disabled prop is active. It ignores all\r\n * events and doesn't prevent default actions. The disabled state can only be\r\n * triggered from the default state (i.e., while no action is actively being\r\n * performed).\r\n */\r\nexport class DisabledState {\r\n  handleMouseWheel = (e, canvasDraw) => {\r\n    if (canvasDraw.props.disabled) {\r\n      return this;\r\n    } else {\r\n      return (new DefaultState()).handleMouseWheel(e, canvasDraw);\r\n    }\r\n  };\r\n\r\n  handleDrawStart = (e, canvasDraw) => {\r\n    if (canvasDraw.props.disabled) {\r\n      return this;\r\n    } else {\r\n      return (new DefaultState()).handleDrawStart(e, canvasDraw);\r\n    }\r\n  };\r\n\r\n  handleDrawMove = (e, canvasDraw) => {\r\n    if (canvasDraw.props.disabled) {\r\n      return this;\r\n    } else {\r\n      return (new DefaultState()).handleDrawMove(e, canvasDraw);\r\n    }\r\n  };\r\n\r\n  handleDrawEnd = (e, canvasDraw) => {\r\n    if (canvasDraw.props.disabled) {\r\n      return this;\r\n    } else {\r\n      return (new DefaultState()).handleDrawEnd(e, canvasDraw);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * This state is active as long as the user is panning the image. This state is\r\n * retained until the pan ceases.\r\n */\r\nexport class PanState {\r\n  handleMouseWheel = SUPPRESS_SCROLL.bind(this);\r\n\r\n  handleDrawStart = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n\r\n    this.dragStart = clientPointFromEvent(e);\r\n    this.panStart = { x: canvasDraw.coordSystem.x, y: canvasDraw.coordSystem.y };\r\n\r\n    return this;\r\n  };\r\n\r\n  handleDrawMove = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n\r\n    const { clientX, clientY } = clientPointFromEvent(e);\r\n    const dx = clientX - this.dragStart.clientX;\r\n    const dy = clientY - this.dragStart.clientY;\r\n    canvasDraw.coordSystem.setView({ x: this.panStart.x + dx, y: this.panStart.y + dy });\r\n\r\n    return this;\r\n  };\r\n\r\n  handleDrawEnd = () => new DefaultState();\r\n}\r\n\r\n/**\r\n * This state is active when the user has initiated the drawing action but has\r\n * not yet created any lines. We use this state to try and detect a second touch\r\n * event to initiate a pinch-zoom action. We'll give up on that if enough time\r\n * or movement happens without a second touch.\r\n */\r\nexport class WaitForPinchState {\r\n  constructor() {\r\n    this.startClientPoint = null;\r\n    this.startTimestamp = (new Date()).valueOf();\r\n    this.deferredPoints = [];\r\n  }\r\n\r\n  handleMouseWheel = SUPPRESS_SCROLL.bind(this);\r\n\r\n  handleDrawStart  = (e, canvasDraw) => {\r\n    const { enablePanAndZoom } = canvasDraw.props;\r\n    e.preventDefault();\r\n\r\n    // We're going to transition immediately into lazy-drawing mode if\r\n    // pan-and-zoom isn't enabled or if this event wasn't triggered by a touch.\r\n    if (!e.touches || !e.touches.length || !enablePanAndZoom) {\r\n      return (new DrawingState()).handleDrawStart(e, canvasDraw);\r\n    }\r\n\r\n    // If we already have two touch events, we can move straight into pinch/pan\r\n    if (enablePanAndZoom && e.touches && e.touches.length >= 2) {\r\n      return (new ScaleOrPanState()).handleDrawStart(e, canvasDraw);\r\n    }\r\n\r\n    return this.handleDrawMove(e, canvasDraw);\r\n  };\r\n\r\n  handleDrawMove = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n\r\n    // If we have two touches, move to pinch/pan (we don't have to recheck\r\n    // whether zoom is enabled because that happend in draw start).\r\n    if (e.touches && e.touches.length >= 2) {\r\n      // Use the start draw to handler to transition.\r\n      return (new ScaleOrPanState()).handleDrawStart(e, canvasDraw);\r\n    }\r\n\r\n    const clientPt = clientPointFromEvent(e);\r\n    this.deferredPoints.push(clientPt);\r\n\r\n    // If we've already moved far enough, or if enough time has passed, give up\r\n    // and switch over to drawing.\r\n    if ((new Date()).valueOf() - this.startTimestamp < PINCH_TIMEOUT_MS) {\r\n      if (this.startClientPoint === null) {\r\n        this.startClientPoint = clientPt;\r\n      }\r\n\r\n      // Note that we're using \"manhattan distance\" rather than computing a\r\n      // hypotenuse here as a cheap approximation\r\n      const d =\r\n        Math.abs(clientPt.clientX - this.startClientPoint.clientX)\r\n        + Math.abs(clientPt.clientY - this.startClientPoint.clientY);\r\n\r\n      if (d < TOUCH_SLOP) {\r\n        // We're not ready to give up yet.\r\n        return this;\r\n      }\r\n    }\r\n\r\n    // Okay, give up and start drawing.\r\n    return this.issueDeferredPoints(canvasDraw);\r\n  };\r\n\r\n  handleDrawEnd = (e, canvasDraw) => {\r\n    // The user stopped drawing before we decided what to do. Just treat this as\r\n    // if they were drawing all along.\r\n    return this.issueDeferredPoints(canvasDraw).handleDrawEnd(e, canvasDraw);\r\n  };\r\n\r\n  issueDeferredPoints = (canvasDraw) => {\r\n    // Time to give up. Play our deferred points out to the drawing state.\r\n    // The first point will have been a start draw.\r\n    let nextState = new DrawingState();\r\n    for (let i = 0; i < this.deferredPoints.length; i++) {\r\n      const deferredPt = this.deferredPoints[i];\r\n      const syntheticEvt = new SyntheticEvent(deferredPt);\r\n      const func = i === 0 ? nextState.handleDrawStart : nextState.handleDrawMove;\r\n      nextState = func(syntheticEvt, canvasDraw);\r\n    }\r\n    return nextState;\r\n  };\r\n}\r\n\r\n/**\r\n * This state is active when the user has added at least two touch points but we\r\n * don't yet know if they intend to pan or zoom.\r\n */\r\nexport class ScaleOrPanState {\r\n  handleMouseWheel = SUPPRESS_SCROLL.bind(this);\r\n\r\n  handleDrawStart = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n    if (!e.touches || e.touches.length < 2) {\r\n      return new DefaultState();\r\n    }\r\n    this.start = this.getTouchMetrics(e);\r\n    this.panStart = { x: canvasDraw.coordSystem.x, y: canvasDraw.coordSystem.y };\r\n    this.scaleStart = canvasDraw.coordSystem.scale;\r\n    return this;\r\n  };\r\n\r\n  handleDrawMove = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n    if (!e.touches || e.touches.length < 2) {\r\n      return new DefaultState();\r\n    }\r\n\r\n    const { centroid, distance } = this.recentMetrics = this.getTouchMetrics(e);\r\n\r\n    // Switch to scaling?\r\n    const dd = Math.abs(distance - this.start.distance);\r\n    if (dd >= TOUCH_SLOP) {\r\n      return new TouchScaleState(this).handleDrawMove(e, canvasDraw);\r\n    }\r\n\r\n    // Switch to panning?\r\n    const dx = centroid.clientX - this.start.centroid.clientX;\r\n    const dy = centroid.clientY - this.start.centroid.clientY;\r\n    const dc = Math.abs(dx) + Math.abs(dy);\r\n    if (dc >= TOUCH_SLOP) {\r\n      return new TouchPanState(this).handleDrawMove(e, canvasDraw);\r\n    }\r\n\r\n    // Not enough movement yet\r\n    return this;\r\n  };\r\n\r\n  handleDrawEnd = () => new DefaultState();\r\n\r\n  getTouchMetrics = (e) => {\r\n    const { clientX: t1x, clientY: t1y } = clientPointFromEvent(e.touches[0]);\r\n    const { clientX: t2x, clientY: t2y } = clientPointFromEvent(e.touches[1]);\r\n\r\n    const dx = t2x - t1x;\r\n    const dy = t2y - t1y;\r\n\r\n    return {\r\n      t1: { clientX: t1x, clientY: t1y },\r\n      t2: { clientX: t2x, clientY: t2y },\r\n      distance: Math.sqrt(dx * dx + dy * dy),\r\n      centroid: { clientX: (t1x + t2x) / 2.0, clientY: (t1y + t2y) / 2.0 },\r\n    };\r\n  };\r\n}\r\n\r\n/**\r\n * The user is actively using touch gestures to pan the image.\r\n */\r\nexport class TouchPanState {\r\n  constructor(scaleOrPanState) {\r\n    this.scaleOrPanState = scaleOrPanState;\r\n  }\r\n\r\n  handleMouseWheel = SUPPRESS_SCROLL.bind(this);\r\n  handleDrawStart = () => this;\r\n\r\n  handleDrawMove = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n    if (!e.touches || e.touches.length < 2) {\r\n      return new DefaultState();\r\n    }\r\n\r\n    const ref = this.scaleOrPanState;\r\n    const { centroid, distance } = ref.recentMetrics = ref.getTouchMetrics(e);\r\n\r\n    const dx = centroid.clientX - ref.start.centroid.clientX;\r\n    const dy = centroid.clientY - ref.start.centroid.clientY;\r\n\r\n    canvasDraw.setView({ x: ref.panStart.x + dx, y: ref.panStart.y + dy });\r\n\r\n    return this;\r\n  };\r\n\r\n  handleDrawEnd = () => new DefaultState();\r\n}\r\n\r\n/**\r\n * The user is actively using touch gestures to scale the drawing.\r\n */\r\nexport class TouchScaleState {\r\n  constructor(scaleOrPanState) {\r\n    this.scaleOrPanState = scaleOrPanState;\r\n  }\r\n\r\n  handleMouseWheel = SUPPRESS_SCROLL.bind(this);\r\n  handleDrawStart = () => this;\r\n\r\n  handleDrawMove = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n    if (!e.touches || e.touches.length < 2) {\r\n      return new DefaultState();\r\n    }\r\n\r\n    const ref = this.scaleOrPanState;\r\n    const { centroid, distance } = ref.recentMetrics = ref.getTouchMetrics(e);\r\n\r\n    const targetScale = ref.scaleStart * (distance / ref.start.distance);\r\n    const dScale = targetScale - canvasDraw.coordSystem.scale;\r\n    canvasDraw.coordSystem.scaleAtClientPoint(dScale, centroid);\r\n\r\n    return this;\r\n  };\r\n\r\n  handleDrawEnd = () => new DefaultState();\r\n}\r\n\r\n/**\r\n * This state is active when the user is drawing.\r\n */\r\nexport class DrawingState {\r\n  constructor() {\r\n    this.isDrawing = false;\r\n  }\r\n\r\n  handleMouseWheel = SUPPRESS_SCROLL.bind(this);\r\n\r\n  handleDrawStart = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n\r\n    if (e.touches && e.touches.length) {\r\n      // on touch, set catenary position to touch pos\r\n      const { x, y } = viewPointFromEvent(canvasDraw.coordSystem, e);\r\n      canvasDraw.lazy.update({ x, y }, { both: true });\r\n    }\r\n\r\n    return this.handleDrawMove(e, canvasDraw);\r\n  };\r\n\r\n  handleDrawMove = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n\r\n    const { x, y } = viewPointFromEvent(canvasDraw.coordSystem, e);\r\n    canvasDraw.lazy.update({ x, y });\r\n    const isDisabled = !canvasDraw.lazy.isEnabled();\r\n\r\n    if (!this.isDrawing || isDisabled) {\r\n      // Start drawing and add point\r\n      canvasDraw.points.push(canvasDraw.clampPointToDocument(canvasDraw.lazy.brush.toObject()));\r\n      this.isDrawing = true;\r\n    }\r\n\r\n    // Add new point\r\n    canvasDraw.points.push(canvasDraw.clampPointToDocument(canvasDraw.lazy.brush.toObject()));\r\n\r\n    // Draw current points\r\n    canvasDraw.drawPoints({\r\n      points: canvasDraw.points,\r\n      brushColor: canvasDraw.props.brushColor,\r\n      brushRadius: canvasDraw.props.brushRadius\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\n  handleDrawEnd = (e, canvasDraw) => {\r\n    e.preventDefault();\r\n\r\n    // Draw to this end pos\r\n    this.handleDrawMove(e, canvasDraw);\r\n    canvasDraw.saveLine();\r\n\r\n    return new DefaultState();\r\n  };\r\n}\r\n\r\nexport class SyntheticEvent {\r\n  constructor({ clientX, clientY }) {\r\n    this.clientX = clientX;\r\n    this.clientY = clientY;\r\n    this.touches = [ { clientX, clientY } ];\r\n  }\r\n\r\n  preventDefault = () => {};\r\n}\r\n\r\nexport function clientPointFromEvent(e) {\r\n  // use cursor pos as default\r\n  let clientX = e.clientX;\r\n  let clientY = e.clientY;\r\n\r\n  // use first touch if available\r\n  if (e.changedTouches && e.changedTouches.length > 0) {\r\n    clientX = e.changedTouches[0].clientX;\r\n    clientY = e.changedTouches[0].clientY;\r\n  }\r\n\r\n  return { clientX, clientY };\r\n}\r\n\r\nexport function viewPointFromEvent(coordSystem, e) {\r\n  return coordSystem.clientPointToViewPoint(clientPointFromEvent(e));\r\n}\r\n","// Determines if the browser supprots passive events\r\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\r\nlet passiveSupported = false;\r\ntry {\r\n  const options = {\r\n    get passive() {\r\n      passiveSupported = true;\r\n      return false; \r\n    }\r\n  };\r\n  window.addEventListener(\"test\", options, options);\r\n  window.removeEventListener(\"test\", options, options);\r\n} catch(e) {\r\n  passiveSupported = false;\r\n}\r\n\r\nexport default function makePassiveEventOption(passive) {\r\n  return passiveSupported ? { passive } : passive;\r\n}\r\n","import React, { PureComponent } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { LazyBrush } from \"lazy-brush\";\r\nimport { Catenary } from \"catenary-curve\";\r\n\r\nimport ResizeObserver from \"resize-observer-polyfill\";\r\n\r\nimport CoordinateSystem, { IDENTITY } from \"./coordinateSystem\";\r\nimport drawImage from \"./drawImage\";\r\nimport { DefaultState } from \"./interactionStateMachine\";\r\nimport makePassiveEventOption from \"./makePassiveEventOption\";\r\n////휠리스너 끔 handleWheel검색하면 언마운트도있음\r\n\r\n// // this.saveLine({ brushColor, brushRadius });\r\n        //버그인지 오류 실수인지 saveLine이 2개있었음 참고\r\nfunction midPointBtw(p1, p2) {\r\n  return {\r\n    x: p1.x + (p2.x - p1.x) / 2,\r\n    y: p1.y + (p2.y - p1.y) / 2,\r\n  };\r\n}\r\n\r\nconst canvasStyle = {\r\n  display: \"block\",\r\n  position: \"absolute\",\r\n};\r\nconst canvasStyle2 = {\r\n  opacity: \"70%\",\r\n  position: \"absolute\",\r\n};\r\n// The order of these is important: grid > drawing > temp > interface\r\nconst canvasTypes = [\"grid\",\"drawing\",  \"temp\", \"interface\"];\r\n\r\nlet eraseOn = false\r\nlet shadowOn = false\r\nlet penstate = \"brush\"\r\nconst dimensionsPropTypes = PropTypes.oneOfType([\r\n  PropTypes.number,\r\n  PropTypes.string,\r\n]);\r\n\r\nconst boundsProp = PropTypes.shape({\r\n  min: PropTypes.number.isRequired,\r\n  max: PropTypes.number.isRequired,\r\n});\r\n\r\nexport default class CanvasDraw extends PureComponent {\r\n  static propTypes = {\r\n    onChange: PropTypes.func,\r\n    loadTimeOffset: PropTypes.number,\r\n    lazyRadius: PropTypes.number,\r\n    allowOnlyPointerType :PropTypes.string,\r\n    brushRadius: PropTypes.number,\r\n    brushColor: PropTypes.string,\r\n    catenaryColor: PropTypes.string,\r\n    gridColor: PropTypes.string,\r\n    backgroundColor: PropTypes.string,\r\n    hideGrid: PropTypes.bool,\r\n    canvasWidth: dimensionsPropTypes,\r\n    canvasHeight: dimensionsPropTypes,\r\n    disabled: PropTypes.bool,\r\n    imgSrc: PropTypes.string,\r\n    saveData: PropTypes.string,\r\n    immediateLoading: PropTypes.bool,\r\n    hideInterface: PropTypes.bool,\r\n    gridSizeX: PropTypes.number,\r\n    gridSizeY: PropTypes.number,\r\n    gridLineWidth: PropTypes.number,\r\n    hideGridX: PropTypes.bool,\r\n    hideGridY: PropTypes.bool,\r\n    enablePanAndZoom: PropTypes.bool,\r\n    PanControl: PropTypes.bool,\r\n    mouseZoomFactor: PropTypes.number,\r\n    zoomExtents: boundsProp,\r\n    clampLinesToDocument: PropTypes.bool,\r\n    refreshBackgroundImage: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onChange: null,\r\n    loadTimeOffset: 5,\r\n    lazyRadius: 12,\r\n    allowOnlyPointerType : \"pen\",\r\n    brushRadius: 10,\r\n    brushColor: \"#444\",\r\n    catenaryColor: \"#0a0302\",\r\n    gridColor: \"rgba(150,150,150,0.17)\",\r\n    backgroundColor: \"#FFF\",\r\n    hideGrid: false,\r\n    canvasWidth: 400,\r\n    canvasHeight: 400,\r\n    disabled: false,\r\n    imgSrc: \"\",\r\n    saveData: \"\",\r\n    immediateLoading: false,\r\n    hideInterface: false,\r\n    gridSizeX: 25,\r\n    gridSizeY: 25,\r\n    gridLineWidth: 0.5,\r\n    hideGridX: false,\r\n    hideGridY: false,\r\n    enablePanAndZoom: true,\r\n    PanControl:false,\r\n    mouseZoomFactor: 0.01,\r\n    zoomExtents: { min: 0.33, max: 3 },\r\n    clampLinesToDocument: false,\r\n    refreshBackgroundImage: false,\r\n  };\r\n\r\n  ///// public APIctx /////////////////////////////////////////////////////////////\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.controlPan=false;\r\n    //this.zoomscale=1;\r\n    this.state = {\r\n      controlPan2: false,\r\n      zoomscale:0\r\n    };\r\n    this.canvas = {};\r\n    this.ctx = {};\r\n\r\n    this.catenary = new Catenary();\r\n\r\n    this.points = [];\r\n    this.lines = [];\r\n    this.erasedLines = [];\r\n\r\n    this.mouseHasMoved = true;\r\n    this.valuesChanged = true;\r\n    this.isDrawing = false;\r\n    this.isPressing = false;\r\n    this.deferRedrawOnViewChange = false;\r\n\r\n    this.interactionSM = new DefaultState();\r\n    this.coordSystem = new CoordinateSystem({\r\n      scaleExtents: props.zoomExtents,\r\n      documentSize: { width: props.canvasWidth, height: props.canvasHeight },\r\n    });\r\n    this.coordSystem.attachViewChangeListener(this.applyView.bind(this));\r\n  }\r\n\r\n  undo = () => {\r\n    let lines = [];\r\n    if (this.lines.length) {\r\n      lines = this.lines.slice(0, -1);\r\n    } else if (this.erasedLines.length) {\r\n      lines = this.erasedLines.pop();\r\n    }\r\n    this.clearExceptErasedLines();\r\n    this.simulateDrawingLines({ lines, immediate: true });\r\n    this.triggerOnChange();\r\n  };\r\n\r\n  eraseAll = () => {\r\n    this.erasedLines.push([...this.lines]);\r\n    this.clearExceptErasedLines();\r\n    this.triggerOnChange();\r\n  };\r\n\r\n  clear = () => {\r\n    this.erasedLines = [];\r\n    this.clearExceptErasedLines();\r\n    this.resetView();\r\n  };\r\n\r\n  resetView = () => {\r\n    return this.coordSystem.resetView();\r\n  };\r\n\r\n  setView = (view) => {\r\n    return this.coordSystem.setView(view);\r\n  };\r\n\r\n  getSaveData = () => {\r\n    // Construct and return the stringified saveData object\r\n    return JSON.stringify({\r\n      lines: this.lines,\r\n      width: this.props.canvasWidth,\r\n      height: this.props.canvasHeight,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Combination of work by Ernie Arrowsmith and emizz\r\n   * References:\r\n   * https://stackoverflow.com/questions/32160098/change-html-canvas-black-background-to-white-background-when-creating-jpg-image\r\n   * https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL\r\n\r\n   * This function will export the canvas to a data URL, which can subsequently be used to share or manipulate the image file.\r\n   * @param {string} fileType Specifies the file format to export to. Note: should only be the file type, not the \"image/\" prefix.\r\n   *  For supported types see https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL\r\n   * @param {bool} useBgImage Specifies whether the canvas' current background image should also be exported. Default is false.\r\n   * @param {string} backgroundColour The desired background colour hex code, e.g. \"#ffffff\" for white.\r\n   */\r\n  getDataURL = (fileType, useBgImage, backgroundColour) => {\r\n    // Get a reference to the \"drawing\" layer of the canvas\r\n    let canvasToExport = this.canvas.drawing;\r\n\r\n    let context = canvasToExport.getContext(\"2d\");\r\n\r\n    //cache height and width\r\n    let width = canvasToExport.width;\r\n    let height = canvasToExport.height;\r\n\r\n    //get the current ImageData for the canvas\r\n    let storedImageData = context.getImageData(0, 0, width, height);\r\n\r\n    //store the current globalCompositeOperation\r\n    var compositeOperation = context.globalCompositeOperation;\r\n\r\n    //set to draw behind current content\r\n    context.globalCompositeOperation = \"destination-over\";\r\n\r\n    // If \"useBgImage\" has been set to true, this takes precedence over the background colour parameter\r\n    if (useBgImage) {\r\n      if (!this.props.imgSrc) return \"Background image source not set\";\r\n\r\n      // Write the background image\r\n      this.drawImage();\r\n    } else if (backgroundColour != null) {\r\n      //set background color\r\n      context.fillStyle = backgroundColour;\r\n\r\n      //fill entire canvas with background colour\r\n      context.fillRect(0, 0, width, height);\r\n    }\r\n\r\n    // If the file type has not been specified, default to PNG\r\n    if (!fileType) fileType = \"png\";\r\n\r\n    // Export the canvas to data URL\r\n    let imageData = canvasToExport.toDataURL(`image/${fileType}`);\r\n\r\n    //clear the canvas\r\n    context.clearRect(0, 0, width, height);\r\n\r\n    //restore it with original / cached ImageData\r\n    context.putImageData(storedImageData, 0, 0);\r\n\r\n    //reset the globalCompositeOperation to what it was\r\n    context.globalCompositeOperation = compositeOperation;\r\n\r\n    return imageData;\r\n  };\r\n\r\n  loadSaveData = (saveData, immediate = this.props.immediateLoading) => {\r\n    if (typeof saveData !== \"string\") {\r\n      throw new Error(\"saveData needs to be of type string!\");\r\n    }\r\n\r\n    const { lines, width, height } = JSON.parse(saveData);\r\n\r\n    if (!lines || typeof lines.push !== \"function\") {\r\n      throw new Error(\"saveData.lines needs to be an array!\");\r\n    }\r\n\r\n    this.clear();\r\n\r\n\r\n    \r\n    if (\r\n      width === this.props.canvasWidth &&\r\n      height === this.props.canvasHeight\r\n    ) {\r\n      this.simulateDrawingLines({\r\n        lines,\r\n        immediate,\r\n      });\r\n    } else {\r\n      // we need to rescale the lines based on saved & current dimensions\r\n      const scaleX = this.props.canvasWidth / width;\r\n      const scaleY = this.props.canvasHeight / height;\r\n      const scaleAvg = (scaleX + scaleY) / 2;\r\n\r\n      this.simulateDrawingLines({\r\n        lines: lines.map((line) => ({\r\n          ...line,\r\n          points: line.points.map((p) => ({\r\n            x: p.x * scaleX,\r\n            y: p.y * scaleY,\r\n          })),\r\n          brushRadius: line.brushRadius * scaleAvg,\r\n        })),\r\n        immediate,\r\n      });\r\n    }\r\n  };\r\n\r\n  ///// private API ////////////////////////////////////////////////////////////\r\n\r\n  ///// React Lifecycle\r\n\r\n  componentDidMount() {\r\n\r\n    \r\n\r\n    this.lazy = new LazyBrush({\r\n      radius: this.props.lazyRadius * window.devicePixelRatio,\r\n      enabled: true,\r\n      initialPoint: {\r\n        x: window.innerWidth / 2,\r\n        y: window.innerHeight / 2,\r\n      },\r\n    });\r\n    this.chainLength = this.props.lazyRadius * window.devicePixelRatio;\r\n\r\n    this.canvasObserver = new ResizeObserver((entries, observer) =>\r\n      this.handleCanvasResize(entries, observer)\r\n    );\r\n    this.canvasObserver.observe(this.canvasContainer);\r\n\r\n    this.drawImage();\r\n    this.loop();\r\n\r\n    window.setTimeout(() => {\r\n      const initX = window.innerWidth / 2;\r\n      const initY = window.innerHeight / 2;\r\n      this.lazy.update(\r\n        { x: initX - this.chainLength / 4, y: initY },\r\n        { both: true }\r\n      );\r\n      this.lazy.update(\r\n        { x: initX + this.chainLength / 4, y: initY },\r\n        { both: false }\r\n      );\r\n      this.mouseHasMoved = true;\r\n      this.valuesChanged = true;\r\n      this.clearExceptErasedLines();\r\n\r\n      // Load saveData from prop if it exists\r\n      if (this.props.saveData) {\r\n        this.loadSaveData(this.props.saveData);\r\n      }\r\n    }, 100);\r\n\r\n    // Attach our wheel event listener here instead of in the render so that we can specify a non-passive listener.\r\n    // This is necessary to prevent the default event action on chrome.\r\n    // https://github.com/facebook/react/issues/14856\r\n    \r\n    //휠리스너 끔 handleWheel검색하면 언마운트도있음\r\n    // this.canvas.interface &&\r\n    //   this.canvas.interface.addEventListener(\r\n    //     \"wheel\",\r\n    //     this.handleWheel,\r\n    //     makePassiveEventOption()\r\n    //   );\r\n\r\n\r\n    //키 이벤트리스너\r\n      // document.addEventListener(\r\n      //   \"keydown\",\r\n      //   this.CustomKeyDown,\r\n      //  false\r\n      // );\r\n       \r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.lazyRadius !== this.props.lazyRadius) {\r\n      // Set new lazyRadius values\r\n      this.chainLength = this.props.lazyRadius * window.devicePixelRatio;\r\n      this.lazy.setRadius(this.props.lazyRadius * window.devicePixelRatio);\r\n    }\r\n\r\n    if (prevProps.saveData !== this.props.saveData) {\r\n      this.loadSaveData(this.props.saveData);\r\n    }\r\n\r\n    if (JSON.stringify(prevProps) !== JSON.stringify(this.props)) {\r\n      // Signal this.loop function that values changed\r\n      this.valuesChanged = true;\r\n    }\r\n    // Refresh the Background Canvas if refreshBackgroundImage is true\r\n    // if (this.props.refreshBackgroundImage) {\r\n      if (prevProps.imgSrc !== this.props.imgSrc){\r\n        // console.log(\"img up\")\r\n      this.drawImage();\r\n      this.clearWindow(this.ctx.grid)\r\n      this.drawGrid(this.ctx.grid);\r\n      // this.drawImage({ ctx: this.ctx.grid, img: this.image });\r\n      \r\n  }\r\n\r\n    this.coordSystem.scaleExtents = this.props.zoomExtents;\r\n    if (!this.props.enablePanAndZoom) {\r\n      this.coordSystem.resetView();\r\n    }\r\n\r\n    if (prevProps.imgSrc !== this.props.imgSrc) {\r\n      // this.drawImage();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    this.canvasObserver.unobserve(this.canvasContainer);\r\n    // this.canvas.interface &&\r\n    //   this.canvas.interface.removeEventListener(\"wheel\", this.handleWheel);\r\n    //휠리스너 끔 handleWheel검색하면 언마운트도있음\r\n  };\r\n\r\n  render() {\r\n    return (<>\r\n      <div\r\n        className={this.props.className}\r\n        \r\n        style={{\r\n          display: \"block\",\r\n          background: this.props.backgroundColor,\r\n          touchAction: \"none\",\r\n          width: this.props.canvasWidth,\r\n          height: this.props.canvasHeight,\r\n          ...this.props.style,\r\n        }}\r\n        ref={(container) => {\r\n          if (container) {\r\n            this.canvasContainer = container;\r\n          }\r\n        }}\r\n      >\r\n        {canvasTypes.map((name) => {\r\n          const isInterface = name === \"interface\";\r\n          let styles =  canvasStyle;\r\n            if (name === \"temp\") {\r\n    styles = {\r\n      ...styles,\r\n      width:this.props.canvasWidth,\r\n      opacity: this.props.brushColor ===\"erase\"? \"70%\":\"100%\",\r\n      zIndex: this.props.brushColor === \"shadow\" ? 0 : 1,\r\n    }}else{\r\nstyles = {\r\n      ...styles,\r\n      zIndex: 1,\r\n    \r\n    };\r\n  }\r\n          return (\r\n            <canvas\r\n              key={name}\r\n              ref={(canvas) => {\r\n                if (canvas) {\r\n                  this.canvas[name] = canvas;\r\n                  this.ctx[name] = canvas.getContext(\"2d\");\r\n                  if (isInterface) {\r\n                    this.coordSystem.canvas = canvas;\r\n                  }\r\n                }\r\n              }}\r\n              style={{ ...styles, }}\r\n              \r\n              // onMouseDown={isInterface ? this.handleDrawStart : undefined}\r\n              // onMouseMove={isInterface ? this.handleDrawMove : undefined}\r\n              // onMouseUp={isInterface ? this.handleDrawEnd : undefined}\r\n              // onMouseOut={isInterface ? this.handleDrawEnd : undefined}\r\n              onPointerDown={isInterface ? this.handleDrawStart : undefined}\r\n              onPointerMove={isInterface ? this.handleDrawMove : undefined}\r\n              onPointerUp={isInterface ? this.handleDrawEnd : undefined}\r\n              onPointerOut={isInterface ? this.handleDrawEnd : undefined}\r\n              // onTouchStart={isInterface ? this.handleDrawStart : undefined}\r\n              // onTouchMove={isInterface ? this.handleDrawMove : undefined}\r\n              // onTouchEnd={isInterface ? this.handleDrawEnd : undefined}\r\n              // onTouchCancel={isInterface ? this.handleDrawEnd : undefined}\r\n              \r\n              \r\n              \r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n      <div><button onClick={() => {\r\n  this.controlPan = !this.controlPan;\r\n  console.log(this.controlPan);\r\n  this.setState({ controlPan2: !this.state.controlPan2 });\r\n}}>{this.state.controlPan2 ? \"Pan on\" : \"Pan off\"}</button>\r\n<button onClick={()=>{this.resetView()}}>reset</button>\r\n\r\n\r\n<button onClick={()=>{this.setState({ zoomscale: this.state.zoomscale-0.1 });this.coordSystem.scaleAtClientPoint(0.1,{ clientX: 600, clientY: 300 })}}>+</button>\r\n<button onClick={()=>{this.coordSystem.scaleAtClientPoint(this.state.zoomscale,{ clientX: 600, clientY: 300 });this.setState({ zoomscale: 0 });}}>o</button>\r\n<button onClick={()=>{this.setState({ zoomscale: this.state.zoomscale+0.1 });this.coordSystem.scaleAtClientPoint(-0.1,{ clientX: 600, clientY: 300 })}}>-</button>\r\n\r\n\r\n\r\n</div>\r\n      </>\r\n    );\r\n  }\r\n  \r\n  ///// Event Handlers\r\n  CustomKeyDown = (e) =>{\r\n    console.log(\"키\",e.key)\r\n    if (e.key === \"z\") {\r\n      //undo\r\n      console.log(\"undo\")\r\n      this.undo()\r\n    }\r\n    if (e.key === \"c\") {\r\n      //erase\r\n      console.log(\"erase\")\r\n      if (penstate != \"erase\") { penstate = \"erase\" }\r\n      else{penstate = \"brush\" }\r\n        \r\n    }\r\n    if (e.key === \"x\") {\r\n      //shadow\r\n      if (penstate != \"shadow\") { penstate = \"shadow\" }\r\n      else{penstate = \"brush\" }\r\n    }\r\n  }\r\n  handleWheel = (e) => {\r\n    this.interactionSM = this.interactionSM.handleMouseWheel(e, this);\r\n  };\r\n\r\n  handleDrawStart = (e) => {\r\n    if (this.props.allowOnlyPointerType == 'all' ||\r\n    e.pointerType == this.props.allowOnlyPointerType\r\n       ){\r\n         \r\n         \r\n      this.interactionSM = this.interactionSM.handleDrawStart(e, this);\r\n    this.mouseHasMoved = true;\r\n    }\r\n   \r\n  };\r\n\r\n  handleDrawMove = (e) => {\r\n    if (this.props.allowOnlyPointerType == 'all' ||\r\n    e.pointerType == this.props.allowOnlyPointerType ){\r\n    this.interactionSM = this.interactionSM.handleDrawMove(e, this);\r\n    this.mouseHasMoved = true;\r\n    }\r\n  };\r\n\r\n  handleDrawEnd = (e) => {\r\n    if (this.props.allowOnlyPointerType == 'all' ||\r\n    e.pointerType == this.props.allowOnlyPointerType ){\r\n    this.interactionSM = this.interactionSM.handleDrawEnd(e, this);\r\n    this.mouseHasMoved = true;\r\n    }\r\n  };\r\n\r\n  applyView = () => {\r\n    if (!this.ctx.drawing) {\r\n      return;\r\n    }\r\n\r\n    canvasTypes\r\n      .map((name) => this.ctx[name])\r\n      .forEach((ctx) => {\r\n        this.clearWindow(ctx);\r\n        const m = this.coordSystem.transformMatrix;\r\n        ctx.setTransform(m.a, m.b, m.c, m.d, m.e, m.f);\r\n      });\r\n\r\n    if (!this.deferRedrawOnViewChange) {\r\n      this.drawGrid(this.ctx.grid);\r\n      this.redrawImage();\r\n      this.loop({ once: true });\r\n\r\n      const lines = this.lines;\r\n      this.lines = [];\r\n      this.simulateDrawingLines({ lines, immediate: true });\r\n    }\r\n  };\r\n\r\n  handleCanvasResize = (entries) => {\r\n    const saveData = this.getSaveData();\r\n    this.deferRedrawOnViewChange = true;\r\n    try {\r\n      for (const entry of entries) {\r\n        const { width, height } = entry.contentRect;\r\n        this.setCanvasSize(this.canvas.interface, width, height);\r\n        this.setCanvasSize(this.canvas.drawing, width, height);\r\n        this.setCanvasSize(this.canvas.temp, width, height);\r\n        this.setCanvasSize(this.canvas.grid, width, height);\r\n\r\n        this.coordSystem.documentSize = { width, height };\r\n        this.drawGrid(this.ctx.grid);\r\n        this.drawImage();\r\n        this.loop({ once: true });\r\n      }\r\n      this.loadSaveData(saveData, true);\r\n    } finally {\r\n      this.deferRedrawOnViewChange = false;\r\n    }\r\n  };\r\n\r\n  ///// Helpers\r\n\r\n  clampPointToDocument = (point) => {\r\n    if (this.props.clampLinesToDocument) {\r\n      return {\r\n        x: Math.max(Math.min(point.x, this.props.canvasWidth), 0),\r\n        y: Math.max(Math.min(point.y, this.props.canvasHeight), 0),\r\n      };\r\n    } else {\r\n      return point;\r\n    }\r\n  };\r\n\r\n  redrawImage = () => {\r\n    this.image &&\r\n      this.image.complete &&\r\n      drawImage({ ctx: this.ctx.grid, img: this.image });\r\n  };\r\n\r\n  simulateDrawingLines = ({ lines, immediate }) => {\r\n    // Simulate live-drawing of the loaded lines\r\n    // TODO use a generator\r\n    let curTime = 0;\r\n    let timeoutGap = immediate ? 0 : this.props.loadTimeOffset;\r\n\r\n    lines.forEach((line) => {\r\n      const { points, brushColor, brushRadius } = line;\r\n\r\n      // Draw all at once if immediate flag is set, instead of using setTimeout\r\n      if (immediate) {\r\n\r\n\r\n       \r\n        \r\n          \r\n            // this.drawPoints({\r\n            //   points: points.slice(0, 1),\r\n            //   brushColor,\r\n            //   brushRadius,\r\n            // });\r\n    \r\n            // // Save line with the drawn points\r\n            // this.points = points;\r\n            // this.saveLine({ brushColor, brushRadius });\r\n\r\n\r\n        // Draw the points\r\n        this.drawPoints({\r\n          points,\r\n          brushColor,\r\n          brushRadius,\r\n        });\r\n\r\n        // Save line with the drawn points\r\n        this.points = points;\r\n        this.saveLine({ brushColor, brushRadius });\r\n        // this.saveLine({ brushColor, brushRadius });\r\n        //버그인지 오류 실수인지 saveLine이 2개있었음 참고\r\n        \r\n        return;\r\n\r\n\r\n\r\n      }\r\n       else {\r\n        \r\n      \r\n      // Use timeout to draw\r\n      for (let i = 1; i < points.length; i++) {\r\n        curTime += timeoutGap;\r\n        window.setTimeout(() => {\r\n          this.drawPoints({\r\n            points: points.slice(0, i + 1),\r\n            brushColor,\r\n            brushRadius,\r\n          });\r\n        }, curTime);\r\n      }\r\n\r\n      curTime += timeoutGap;\r\n      window.setTimeout(() => {\r\n        // Save this line with its props instead of this.props\r\n        this.points = points;\r\n        this.saveLine({ brushColor, brushRadius });\r\n      }, curTime);\r\n    }\r\n    });\r\n    \r\n  };\r\n\r\n  setCanvasSize = (canvas, width, height) => {\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    canvas.style.width = width;\r\n    canvas.style.height = height;\r\n  };\r\n\r\n  drawPoints = ({ points, brushColor, brushRadius }) => {\r\n    this.ctx.temp.lineJoin = \"round\";\r\n    this.ctx.temp.lineCap = \"round\";\r\n    this.ctx.temp.strokeStyle = (brushColor === \"erase\")\r\n    //||(penstate=== \"erase\")\r\n    ? \"#dbb7bb\" : brushColor;\r\n    \r\n    this.ctx.drawing.globalCompositeOperation = (brushColor === \"erase\")\r\n    //||(penstate=== \"erase\") \r\n    ? \"destination-out\" : (brushColor === \"shadow\")\r\n    //||(penstate=== \"shadow\")\r\n    ? \"destination-over\":\"source-over\";\r\n    // let radiusMul = 1;\r\n    // if(penstate=== \"erase\"){\r\n    //   radiusMul =  20;\r\n    // }\r\n    this.clearWindow(this.ctx.temp);\r\n   \r\n      // this.ctx.temp.lineWidth = brushRadius * 2*radiusMul;\r\n      this.ctx.temp.lineWidth = brushRadius * 2;\r\n    \r\n    \r\n    \r\n    \r\n    let p1 = points[0];\r\n    let p2 = points[1];\r\n\r\n    this.ctx.temp.moveTo(p2.x, p2.y);\r\n    this.ctx.temp.beginPath();\r\n\r\n    for (var i = 1, len = points.length; i < len; i++) {\r\n      // we pick the point between pi+1 & pi+2 as the\r\n      // end point and p1 as our control point\r\n      var midPoint = midPointBtw(p1, p2);\r\n      this.ctx.temp.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\r\n      p1 = points[i];\r\n      p2 = points[i + 1];\r\n    }\r\n    // Draw last line as a straight line while\r\n    // we wait for the next point to be able to calculate\r\n    // the bezier control point\r\n    this.ctx.temp.lineTo(p1.x, p1.y);\r\n    \r\n    if((brushColor == \"shadow\")\r\n    //||(penstate=== \"shadow\")\r\n    ){\r\n      this.ctx.temp.closePath();\r\n      this.ctx.temp.fillStyle= '#DADADA';\r\n      // this.ctx.temp.fillStyle = 'rgba(255k, 0, 0, 0.5)';\r\n      this.ctx.temp.fill();\r\n    }\r\n    else{\r\n      this.ctx.temp.stroke();\r\n    }\r\n    \r\n  };\r\n\r\n  saveLine = ({ brushColor, brushRadius } = {}) => {\r\n    if (this.points.length < 2) return;\r\n    \r\n    // Save as new line\r\n    this.lines.push({\r\n      points: [...this.points],\r\n      brushColor: brushColor || this.props.brushColor,\r\n      brushRadius: brushRadius || this.props.brushRadius,\r\n    });\r\n\r\n    // Reset points array\r\n    this.points.length = 0;\r\n\r\n    // Copy the line to the drawing canvas\r\n    this.inClientSpace([this.ctx.drawing, this.ctx.temp], () => {\r\n      this.ctx.drawing.drawImage(\r\n        this.canvas.temp,\r\n        0,\r\n        0,\r\n        this.canvas.drawing.width,\r\n        this.canvas.drawing.height\r\n      );\r\n    });\r\n\r\n    // Clear the temporary line-drawing canvas\r\n    this.clearWindow(this.ctx.temp);\r\n\r\n    this.triggerOnChange();\r\n  };\r\n\r\n  triggerOnChange = () => {\r\n    this.props.onChange && this.props.onChange(this);\r\n  };\r\n\r\n  clearWindow = (ctx) => {\r\n    this.inClientSpace([ctx], () =>\r\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    );\r\n  };\r\n\r\n  clearExceptErasedLines = () => {\r\n    this.lines = [];\r\n    this.valuesChanged = true;\r\n    this.clearWindow(this.ctx.drawing);\r\n    this.clearWindow(this.ctx.temp);\r\n  };\r\n\r\n  loop = ({ once = false } = {}) => {\r\n    if (this.mouseHasMoved || this.valuesChanged) {\r\n      const pointer = this.lazy.getPointerCoordinates();\r\n      const brush = this.lazy.getBrushCoordinates();\r\n      \r\n\r\n      this.drawInterface(this.ctx.interface, pointer, brush);\r\n      this.mouseHasMoved = false;\r\n      this.valuesChanged = false;\r\n    }\r\n\r\n    if (!once) {\r\n      window.requestAnimationFrame(() => {\r\n        this.loop();\r\n      });\r\n    }\r\n  };\r\n\r\n  inClientSpace = (ctxs, action) => {\r\n    ctxs.forEach((ctx) => {\r\n      ctx.save();\r\n      ctx.setTransform(\r\n        IDENTITY.a,\r\n        IDENTITY.b,\r\n        IDENTITY.c,\r\n        IDENTITY.d,\r\n        IDENTITY.e,\r\n        IDENTITY.f\r\n      );\r\n    });\r\n\r\n    try {\r\n      action();\r\n    } finally {\r\n      ctxs.forEach((ctx) => ctx.restore());\r\n    }\r\n  };\r\n\r\n  ///// Canvas Rendering\r\n\r\n  drawImage = () => {\r\n    if (!this.props.imgSrc) return;\r\n    \r\n    // Load the image\r\n    this.image = new Image();\r\n    // this.image.src = this.props.imgSrc;\r\n    // Prevent SecurityError \"Tainted canvases may not be exported.\" #70\r\n    this.image.crossOrigin = \"anonymous\";\r\n\r\n    // Draw the image once loaded\r\n    this.image.onload = this.redrawImage;\r\n    this.image.src = this.props.imgSrc;\r\n  };\r\n\r\n  drawGrid = (ctx) => {\r\n    if (this.props.hideGrid) return;\r\n\r\n    this.clearWindow(ctx);\r\n\r\n    const gridSize = 25;\r\n    const { viewMin, viewMax } = this.coordSystem.canvasBounds;\r\n    const minx = Math.floor(viewMin.x / gridSize - 1) * gridSize;\r\n    const miny = Math.floor(viewMin.y / gridSize - 1) * gridSize;\r\n    const maxx = viewMax.x + gridSize;\r\n    const maxy = viewMax.y + gridSize;\r\n\r\n    ctx.beginPath();\r\n    ctx.setLineDash([5, 1]);\r\n    ctx.setLineDash([]);\r\n    ctx.strokeStyle = this.props.gridColor;\r\n    ctx.lineWidth = this.props.gridLineWidth;\r\n\r\n    if (!this.props.hideGridX) {\r\n      let countX = minx;\r\n      const gridSizeX = this.props.gridSizeX;\r\n      while (countX < maxx) {\r\n        countX += gridSizeX;\r\n        ctx.moveTo(countX, miny);\r\n        ctx.lineTo(countX, maxy);\r\n      }\r\n      ctx.stroke();\r\n    }\r\n\r\n    if (!this.props.hideGridY) {\r\n      let countY = miny;\r\n      const gridSizeY = this.props.gridSizeY;\r\n      while (countY < maxy) {\r\n        countY += gridSizeY;\r\n        ctx.moveTo(minx, countY);\r\n        ctx.lineTo(maxx, countY);\r\n      }\r\n      ctx.stroke();\r\n    }\r\n  };\r\n\r\n  drawInterface = (ctx, pointer, brush) => {\r\n    if (this.props.hideInterface) return;\r\n\r\n    this.clearWindow(ctx);\r\n    \r\n    // Draw brush preview\r\n    ctx.beginPath();\r\n    ctx.fillStyle = this.props.brushColor;\r\n    ctx.arc(brush.x, brush.y, this.props.brushRadius, 0, Math.PI * 2, true);\r\n    ctx.fill();\r\n\r\n    // Draw mouse point (the one directly at the cursor)\r\n    ctx.beginPath();\r\n    ctx.fillStyle = this.props.catenaryColor;\r\n    ctx.arc(pointer.x, pointer.y, 2, 0, Math.PI * 2, true);\r\n    ctx.fill();\r\n\r\n    // // Draw catenary\r\n    // if (this.lazy.isEnabled()) {\r\n    //   ctx.beginPath();\r\n    //   ctx.lineWidth = 2;\r\n    //   ctx.lineCap = \"round\";\r\n    //   ctx.setLineDash([2, 4]);\r\n    //   ctx.strokeStyle = this.props.catenaryColor;\r\n    //   this.catenary.drawToCanvas(\r\n    //     this.ctx.interface,\r\n    //     brush,\r\n    //     pointer,\r\n    //     this.chainLength\r\n    //   );\r\n    //   ctx.stroke();\r\n    // }\r\n\r\n    // Draw brush point (the one in the middle of the brush preview)\r\n    ctx.beginPath();\r\n    ctx.fillStyle = this.props.catenaryColor;\r\n    ctx.arc(brush.x, brush.y, 1, 0, Math.PI * 2, true);\r\n    ctx.fill();\r\n  };\r\n}\r\n","/** \r\n * Original from: https://stackoverflow.com/questions/21961839/simulation-background-size-cover-in-canvas\r\n * Original By Ken Fyrstenberg Nilsen\r\n * \r\n * Note: img must be fully loaded or have correct width & height set.\r\n */\r\nexport default function drawImageProp({ctx, img, x, y, w, h, offsetX, offsetY} = {}) {\r\n  // Defaults\r\n  if (typeof x !== \"number\") x = 0;\r\n  if (typeof y !== \"number\") y = 0;\r\n  if (typeof w !== \"number\") w = ctx.canvas.width;\r\n  if (typeof h !== \"number\") h = ctx.canvas.height;\r\n  if (typeof offsetX !== \"number\") offsetX = 0.5;\r\n  if (typeof offsetY !== \"number\") offsetY = 0.5;\r\n\r\n  // keep bounds [0.0, 1.0]\r\n  if (offsetX < 0) offsetX = 0;\r\n  if (offsetY < 0) offsetY = 0;\r\n  if (offsetX > 1) offsetX = 1;\r\n  if (offsetY > 1) offsetY = 1;\r\n\r\n  var iw = img.width,\r\n    ih = img.height,\r\n    r = Math.min(w / iw, h / ih),\r\n    nw = iw * r, // new prop. width\r\n    nh = ih * r, // new prop. height\r\n    cx,\r\n    cy,\r\n    cw,\r\n    ch,\r\n    ar = 1;\r\n\r\n  // decide which gap to fill\r\n  if (nw < w) ar = w / nw;\r\n  if (Math.abs(ar - 1) < 1e-14 && nh < h) ar = h / nh; // updated\r\n  nw *= ar;\r\n  nh *= ar;\r\n\r\n  // calc source rectangle\r\n  cw = iw / (nw / w);\r\n  ch = ih / (nh / h);\r\n\r\n  cx = (iw - cw) * offsetX;\r\n  cy = (ih - ch) * offsetY;\r\n\r\n  // make sure source rectangle is valid\r\n  if (cx < 0) cx = 0;\r\n  if (cy < 0) cy = 0;\r\n  if (cw > iw) cw = iw;\r\n  if (ch > ih) ch = ih;\r\n\r\n  // fill image in dest. rectangle\r\n  ctx.drawImage(img, cx, cy, cw, ch, x, y, w, h);\r\n}\r\n","import { dbService } from \"fbase\";\r\nimport React, { useEffect, useRef,useState } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport   firebase from \"firebase/compat/app\";\r\n\r\nconst CCsubmit =({CsubmitObj, isOwner,viewDeleyToggle})=>{\r\n    const [editing,setEditing]= useState(false);\r\n    const [newCsubmit,setnewCsubmit]=useState(CsubmitObj.text);\r\n    // const [givedHeart,setGivedHeart]=useState(false)\r\n    // const [yourheart,setYourHeart]=useState(CsubmitObj.heart);\r\n    const canvasRef2 = useRef();\r\n    const [onOff,setOnOff]=useState(true);\r\n    // const [onReview,setOnReview]= useState(false);\r\n    // const [offReview,setoffReview]= useState(false);\r\n    // // canvasRef2.current.loadSaveData(CsubmitObj.text);\r\n    let uploadDay= new Date(CsubmitObj.createdAt);\r\n    const [viewRefPin,setViewRefpin]=useState(false);\r\n    const [refUrl,setRefUrl]=useState(\"\");\r\n    const [imgs,setImgs]=useState(\"\")\r\n    const [hideGrid,setHideGrid]=useState(false)\r\n    const [brushColor,setBrushColor]=useState(\"#df6161\")\r\n    // useEffect(() => {\r\n    //    \r\n    //     //  if(viewsToggle && onOff){\r\n    //     //     canvasRef2.current.loadSaveData(CsubmitObj.text,true);\r\n    //     //     setOnOff(false)\r\n    //     //  }\r\n        \r\n    // },[editing]);\r\n    const onDeleteClick= () => {\r\n        const ok = window.confirm(\"wanna delete this?\")\r\n        if(ok){\r\n            dbService.doc(`Csubmit/${CsubmitObj.id}`).delete();\r\n            \r\n        }\r\n    };\r\n    const toggleReview=()=> {\r\n        canvasRef2.current.clear();\r\n        // canvasRef2.current.loadSaveData(CsubmitObj.text);\r\n        if((CsubmitObj.text) !== \"\"){\r\n        canvasRef2.current.loadSaveData(CsubmitObj.text);\r\n        }\r\n    };\r\n    const offReview=()=>{\r\n        setEditing(false);\r\n            // 강제 이미지추가\r\n            // console.log('none')\r\n            // const dataUrl=canvasRef2.current.getDataURL();\r\n        \r\n    \r\n        \r\n            // dbService.doc(`Csubmit/${CsubmitObj.id}`).update({\r\n            \r\n            // dataUrl:dataUrl,\r\n           //  refPhoto:{refPhoto},\r\n            //pinNumber:randomPinNum,\r\n        // });\r\n        \r\n    }\r\n    const onReview=()=> {setEditing(true);\r\n        setHideGrid(false)\r\n        setTimeout(function() {\r\n            if((CsubmitObj.text) !== \"\"){\r\n            canvasRef2.current.loadSaveData(CsubmitObj.text);\r\n            }\r\n            \r\n          }, 5);\r\n        }\r\n    const onSubmit = (event)=> {\r\n        event.preventDefault();\r\n        if(imgs.length>0){\r\n            const width = canvasRef2.current.props.canvasWidth;\r\n            const height = canvasRef2.current.props.canvasHeight;\r\n            const background = canvasRef2.current.canvasContainer.children[0]; \r\n            const drawing = canvasRef2.current.canvasContainer.children[1]; \r\n            const canvas = document.createElement('canvas');\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n        \r\n            // composite now\r\n            canvas.getContext('2d').drawImage(background, 0, 0);\r\n            // canvas.getContext('2d').globalAlpha = 1.0; \r\n            canvas.getContext('2d').drawImage(drawing, 0, 0);\r\n        \r\n            const dataUrl = canvas.toDataURL('image/png');\r\n        //const dataUrl=canvasRef2.current.getDataURL();\r\n        dbService.doc(`Csubmit/${CsubmitObj.id}`).update({\r\n            text:\"\",\r\n            dataUrl:dataUrl\r\n        });\r\n        setEditing(false);\r\n        }else{\r\n        const data = canvasRef2.current.getSaveData();\r\n        const dataUrl=canvasRef2.current.getDataURL();\r\n        dbService.doc(`Csubmit/${CsubmitObj.id}`).update({\r\n            text:data,\r\n            dataUrl:dataUrl\r\n        });\r\n        setEditing(false);\r\n    }\r\n    setImgs(\"\")\r\n    }\r\n    const bookmark = (event)=>{\r\n        const ok = window.confirm(\"wanna bookmark this?\")\r\n                        if(ok){\r\n        event.preventDefault();\r\n        dbService.collection(\"Csubmitbook\").add({\r\n            text:CsubmitObj.text,\r\n            createdAt: CsubmitObj.createdAt,\r\n            creatorId: CsubmitObj.creatorId,\r\n            drawingTime:CsubmitObj.drawingTime,\r\n            heart:CsubmitObj.heart,\r\n            dataUrl:CsubmitObj.dataUrl,\r\n            refPinUrl:CsubmitObj.refPinUrl\r\n           //  refPhoto:{refPhoto},\r\n            //pinNumber:randomPinNum,\r\n        });}\r\n    }\r\n    const onChange = (event)=> {\r\n        const {target:{value},\r\n        }=event;\r\n        setnewCsubmit(value);\r\n    }\r\n    //const toggleheart=()=> setYourHeart(prev => !prev);\r\n    const onHeartClick= async() =>{\r\n        setOnOff(prev => !prev);\r\n        await dbService.doc(`Csubmit/${CsubmitObj.id}`).update({\r\n           heart:(1+(CsubmitObj.heart)),\r\n        })\r\n        console.log(CsubmitObj.heart)\r\n        const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n        pinDocRef.update({\r\n            heart:firebase.firestore.FieldValue.arrayUnion(CsubmitObj.refPinUrl)\r\n        });\r\n    }\r\n\r\n\r\n    \r\n     \r\n    return(\r\n        <div   style={{float:'left', border: '10px solid rgba(0, 0, 0, 0.05)',width:\"420px\"\r\n        }}>\r\n            \r\n        {\r\n            editing ? (\r\n            <>\r\n            <button onClick={onSubmit}>Up</button>\r\n            <button onClick={e=>{setImgs(CsubmitObj.dataUrl)\r\n            setHideGrid(true)}}>img</button>\r\n            <button onClick={e=>{canvasRef2.current.undo()}}>◀</button>\r\n            {(brushColor == \"erase\") ? (\r\n                <><button onClick={e=>{ setBrushColor(\"#df6161\")}}>brush</button></>\r\n              ) : (<><button onClick={e=>{ setBrushColor(\"erase\")}}>erase</button></>)}\r\n            {/* <form onSubmit={onSubmit}><input value={newCsubmit} required onChange={onChange}/>\r\n            <input type={\"submit\"} value=\"edit\"/>\r\n            </form> */}\r\n            \r\n            <div><CanvasDraw \r\n            // style={{ touchAction: 'disabled'  ? 'auto' : 'none' }}\r\n            ref={canvasRef2}\r\n            //  disabled\r\n            // hideInterface\r\n            imgSrc={imgs}\r\n            \r\n            brushRadius={(brushColor==\"erase\") ? 5 : 0.6}\r\n              lazyRadius={0.5}\r\n              hideGrid={hideGrid}\r\n              brushColor={brushColor}\r\n              allowOnlyPointerType={\"pen\"}\r\n             loadTimeOffset={5}\r\n             /></div>\r\n             \r\n             <button onClick={toggleReview}>Rewind</button>\r\n             <button onClick={offReview}>Cancel</button>\r\n             \r\n            </>\r\n            ):(\r\n            <>\r\n            \r\n            <div style={{margin: '0 auto'}}>\r\n            <img\r\n            \r\n      \r\n      width={400}\r\n      src={CsubmitObj.dataUrl} // use normal <img> attributes as props\r\n       />\r\n      {/* <img src={CsubmitObj.dataUrl} height=\"400px\" ></img> */}\r\n      </div>\r\n            \r\n            \r\n        {isOwner ? (\r\n            <>\r\n\r\n            {/* <button disabled>❤ {CsubmitObj.heart}</button> */}\r\n            {/* <button onClick={onHeartClick} style={{padding: \"0px 0px\"}}>❤{CsubmitObj.heart}</button> */}\r\n            <button onClick={onHeartClick} style={{padding: \"0px 0px\"}}>{CsubmitObj.heart==0 ? (<>❤</>):(<>+{CsubmitObj.heart}</>)}</button>\r\n            <button onClick={onDeleteClick}>Delete</button>\r\n            <button onClick={onReview}>Review</button>\r\n            \r\n            \r\n            </>\r\n        ):(\r\n            <>\r\n            <button onClick={onHeartClick}>❤ {CsubmitObj.heart}</button>\r\n            \r\n            </>\r\n        )}\r\n\r\n            \r\n            \r\n                \r\n            \r\n            \r\n            \r\n            \r\n        </>\r\n            \r\n            \r\n            \r\n            \r\n\r\n            )}\r\n            <button onClick={()=>{setViewRefpin(pre=>!pre);setRefUrl(CsubmitObj.refPinUrl)}}>Ref Pin</button>\r\n            {\"   \"}  {uploadDay.toLocaleString(navigator.language || navigator.userLanguage)}\r\n            {viewRefPin ? (<>\r\n                <div>\r\n                    <div><button onClick={e=>{\r\n                        const ok = window.confirm(\"wanna redraw this?\")\r\n                        if(ok){\r\n                            if((typeof(CsubmitObj.refPinUrl)==\"string\")&&(CsubmitObj.refPinUrl.includes(\"firebasestorage.googleapis.com\"))){\r\n                        localStorage.setItem(\"redraw\", CsubmitObj.refPinUrl)\r\n\r\n                    }else{\r\n                        localStorage.setItem(\"redraw\", \"https://assets.pinterest.com/ext/embed.html?id=\"+CsubmitObj.refPinUrl)\r\n                    }\r\n                        }}}>redraw</button>\r\n                        <button onClick={\r\n                        bookmark}>bookmark</button></div>\r\n                    \r\n                    {(CsubmitObj.refPinUrl.startsWith(\"pot.com/o/\"))?(<>\r\n                        <img  src={CsubmitObj.refPinUrl.replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")}  width={415} frameBorder={0} scrolling=\"no\"></img>\r\n                    </>):(<>\r\n                    \r\n                     \r\n                    {(typeof(CsubmitObj.refPinUrl)==\"string\")&&(CsubmitObj.refPinUrl.includes(\"firebasestorage.googleapis.com\"))?(  \r\n                    // (console.log(typeof(CsubmitObj.refPinUrl))\r\n                    <>\r\n                    \r\n                        <img  src={CsubmitObj.refPinUrl}  width={415} frameBorder={0} scrolling=\"no\"></img>\r\n                    </>\r\n                    ):(<>\r\n                        <iframe  src={\"https://assets.pinterest.com/ext/embed.html?id=\"+CsubmitObj.refPinUrl} height=\"600\" width=\"300\" frameBorder={0} scrolling=\"no\" ></iframe>\r\n                    </>)}\r\n                    </>)}  \r\n                </div></>):(<></>)}\r\n    </div>\r\n)\r\n};\r\n    \r\n\r\nexport default CCsubmit;","import { dbService } from \"fbase\";\r\nimport React, { useEffect, useRef,useState } from \"react\";\r\nimport CanvasDraw from \"../canvasDrawIndex\";\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport   firebase from \"firebase/compat/app\";\r\n\r\nconst CCsubmitbook =({CsubmitbookObj, isOwner,viewDeleyToggle})=>{\r\n    const [editing,setEditing]= useState(false);\r\n    const [newCsubmitbook,setnewCsubmitbook]=useState(CsubmitbookObj.text);\r\n    // const [givedHeart,setGivedHeart]=useState(false)\r\n    // const [yourheart,setYourHeart]=useState(CsubmitbookObj.heart);\r\n    const canvasRef2 = useRef();\r\n    const [onOff,setOnOff]=useState(true);\r\n    // const [onReview,setOnReview]= useState(false);\r\n    // const [offReview,setoffReview]= useState(false);\r\n    // // canvasRef2.current.loadSaveData(CsubmitbookObj.text);\r\n    let uploadDay= new Date(CsubmitbookObj.createdAt);\r\n    const [viewRefPin,setViewRefpin]=useState(false);\r\n    const [refUrl,setRefUrl]=useState(\"\");\r\n    // useEffect(() => {\r\n    //    \r\n    //     //  if(viewsToggle && onOff){\r\n    //     //     canvasRef2.current.loadSaveData(CsubmitbookObj.text,true);\r\n    //     //     setOnOff(false)\r\n    //     //  }\r\n        \r\n    // },[editing]);\r\n    const onDeleteClick= () => {\r\n        const ok = window.confirm(\"wanna delete this?\")\r\n        if(ok){\r\n            dbService.doc(`Csubmitbook/${CsubmitbookObj.id}`).delete();\r\n            \r\n        }\r\n    };\r\n    const toggleReview=()=> {\r\n        canvasRef2.current.clear();\r\n        // canvasRef2.current.loadSaveData(CsubmitbookObj.text);\r\n        canvasRef2.current.loadSaveData(CsubmitbookObj.text);\r\n        \r\n    };\r\n    const offReview=()=>{\r\n        setEditing(false);\r\n            // 강제 이미지추가\r\n            // console.log('none')\r\n            // const dataUrl=canvasRef2.current.getDataURL();\r\n        \r\n    \r\n        \r\n            // dbService.doc(`Csubmitbook/${CsubmitbookObj.id}`).update({\r\n            \r\n            // dataUrl:dataUrl,\r\n           //  refPhoto:{refPhoto},\r\n            //pinNumber:randomPinNum,\r\n        // });\r\n        \r\n    }\r\n    const onReview=()=> {setEditing(true);\r\n        setTimeout(function() {\r\n            canvasRef2.current.loadSaveData(CsubmitbookObj.text);\r\n            \r\n            \r\n          }, 5);\r\n        }\r\n    const onSubmit = (event)=> {\r\n        event.preventDefault();\r\n        const data = canvasRef2.current.getSaveData();\r\n        const dataUrl=canvasRef2.current.getDataURL();\r\n        dbService.doc(`Csubmitbook/${CsubmitbookObj.id}`).update({\r\n            text:data,\r\n            dataUrl:dataUrl\r\n        });\r\n        setEditing(false);\r\n\r\n    }\r\n    const onChange = (event)=> {\r\n        const {target:{value},\r\n        }=event;\r\n        setnewCsubmitbook(value);\r\n    }\r\n    //const toggleheart=()=> setYourHeart(prev => !prev);\r\n    const onHeartClick= async() =>{\r\n        setOnOff(prev => !prev);\r\n        await dbService.doc(`Csubmitbook/${CsubmitbookObj.id}`).update({\r\n           heart:(1+(CsubmitbookObj.heart)),\r\n        })\r\n        console.log(CsubmitbookObj.heart)\r\n        const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n        pinDocRef.update({\r\n            heart:firebase.firestore.FieldValue.arrayUnion(CsubmitbookObj.refPinUrl)\r\n        });\r\n    }\r\n\r\n\r\n    \r\n     \r\n    return(\r\n        <div   style={{float:'left', border: '10px solid rgb(0 97 255 / 7%)',width:\"420px\"\r\n        }}>\r\n            \r\n        {\r\n            editing ? (\r\n            <>\r\n            <button onClick={onSubmit}>Edit</button>\r\n            {/* <form onSubmit={onSubmit}><input value={newCsubmitbook} required onChange={onChange}/>\r\n            <input type={\"submit\"} value=\"edit\"/>\r\n            </form> */}\r\n            \r\n            <div><CanvasDraw \r\n            // style={{ touchAction: 'disabled'  ? 'auto' : 'none' }}\r\n            ref={canvasRef2}\r\n            //  disabled\r\n            // hideInterface\r\n            brushRadius={0.6}\r\n              lazyRadius={0.5}\r\n              \r\n              brushColor={\"#df6161\"}\r\n              allowOnlyPointerType={\"pen\"}\r\n             loadTimeOffset={5}\r\n             /></div>\r\n             \r\n             <button onClick={toggleReview}>Rewind</button>\r\n             <button onClick={offReview}>Cancel</button>\r\n             \r\n            </>\r\n            ):(\r\n            <>\r\n            \r\n            <div style={{margin: '0 auto'}}>\r\n            <LazyLoadImage\r\n            \r\n      \r\n      width={400}\r\n      src={CsubmitbookObj.dataUrl} // use normal <img> attributes as props\r\n       />\r\n      {/* <img src={CsubmitbookObj.dataUrl} height=\"400px\" ></img> */}\r\n      </div>\r\n            \r\n            \r\n        {isOwner ? (\r\n            <>\r\n\r\n            {/* <button disabled>❤ {CsubmitbookObj.heart}</button> */}\r\n            {/* <button onClick={onHeartClick} style={{padding: \"0px 0px\"}}>❤{CsubmitbookObj.heart}</button> */}\r\n            <button onClick={onHeartClick} style={{padding: \"0px 0px\"}}>{CsubmitbookObj.heart==0 ? (<>❤</>):(<>+{CsubmitbookObj.heart}</>)}</button>\r\n            <button onClick={onDeleteClick}>Delete</button>\r\n            <button onClick={onReview}>Review</button>\r\n            \r\n            \r\n            </>\r\n        ):(\r\n            <>\r\n            <button onClick={onHeartClick}>❤ {CsubmitbookObj.heart}</button>\r\n            \r\n            </>\r\n        )}\r\n\r\n            \r\n            \r\n                \r\n            \r\n            \r\n            \r\n            \r\n        </>\r\n            \r\n            \r\n            \r\n            \r\n\r\n            )}\r\n            <button onClick={()=>{setViewRefpin(pre=>!pre);setRefUrl(CsubmitbookObj.refPinUrl)}}>Ref Pin</button>\r\n            {\"   \"}  {uploadDay.toLocaleString(navigator.language || navigator.userLanguage)}\r\n            {viewRefPin ? (<>\r\n                <div>\r\n                    <div><button onClick={e=>{\r\n                        const ok = window.confirm(\"wanna redraw this?\")\r\n                        if(ok){\r\n                            if((typeof(CsubmitbookObj.refPinUrl)==\"string\")&&(CsubmitbookObj.refPinUrl.includes(\"firebasestorage.googleapis.com\"))){\r\n                        localStorage.setItem(\"redraw\", CsubmitbookObj.refPinUrl)\r\n\r\n                    }else{\r\n                        localStorage.setItem(\"redraw\", \"https://assets.pinterest.com/ext/embed.html?id=\"+CsubmitbookObj.refPinUrl)\r\n                    }\r\n                        }}}>redraw</button></div>\r\n\r\n                    {(CsubmitbookObj.refPinUrl.startsWith(\"pot.com/o/\"))?(<>\r\n                        <img  src={CsubmitbookObj.refPinUrl.replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")}  width={415} frameBorder={0} scrolling=\"no\"></img>\r\n                    </>):(<>\r\n                    \r\n                     \r\n                    {(typeof(CsubmitbookObj.refPinUrl)==\"string\")&&(CsubmitbookObj.refPinUrl.includes(\"firebasestorage.googleapis.com\"))?(  \r\n                    // (console.log(typeof(CsubmitbookObj.refPinUrl))\r\n                    <>\r\n                    \r\n                        <img  src={CsubmitbookObj.refPinUrl}  width={415} frameBorder={0} scrolling=\"no\"></img>\r\n                    </>\r\n                    ):(<>\r\n                        <iframe  src={\"https://assets.pinterest.com/ext/embed.html?id=\"+CsubmitbookObj.refPinUrl} height=\"600\" width=\"300\" frameBorder={0} scrolling=\"no\" ></iframe>\r\n                    </>)}\r\n                    </>)}  \r\n                </div></>):(<></>)}\r\n    </div>\r\n)\r\n};\r\n    \r\n\r\nexport default CCsubmitbook;","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.3.3\nvar LZString = {\n  \n  \n  // private property\n  _keyStr : \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n  _f : String.fromCharCode,\n  \n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\";\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    var i = 0;\n    \n    input = LZString.compress(input);\n    \n    while (i < input.length*2) {\n      \n      if (i%2==0) {\n        chr1 = input.charCodeAt(i/2) >> 8;\n        chr2 = input.charCodeAt(i/2) & 255;\n        if (i/2+1 < input.length) \n          chr3 = input.charCodeAt(i/2+1) >> 8;\n        else \n          chr3 = NaN;\n      } else {\n        chr1 = input.charCodeAt((i-1)/2) & 255;\n        if ((i+1)/2 < input.length) {\n          chr2 = input.charCodeAt((i+1)/2) >> 8;\n          chr3 = input.charCodeAt((i+1)/2) & 255;\n        } else \n          chr2=chr3=NaN;\n      }\n      i+=3;\n      \n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n      \n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n      \n      output = output +\n        LZString._keyStr.charAt(enc1) + LZString._keyStr.charAt(enc2) +\n          LZString._keyStr.charAt(enc3) + LZString._keyStr.charAt(enc4);\n      \n    }\n    \n    return output;\n  },\n  \n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\",\n        ol = 0, \n        output_,\n        chr1, chr2, chr3,\n        enc1, enc2, enc3, enc4,\n        i = 0, f=LZString._f;\n    \n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n    \n    while (i < input.length) {\n      \n      enc1 = LZString._keyStr.indexOf(input.charAt(i++));\n      enc2 = LZString._keyStr.indexOf(input.charAt(i++));\n      enc3 = LZString._keyStr.indexOf(input.charAt(i++));\n      enc4 = LZString._keyStr.indexOf(input.charAt(i++));\n      \n      chr1 = (enc1 << 2) | (enc2 >> 4);\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n      chr3 = ((enc3 & 3) << 6) | enc4;\n      \n      if (ol%2==0) {\n        output_ = chr1 << 8;\n        \n        if (enc3 != 64) {\n          output += f(output_ | chr2);\n        }\n        if (enc4 != 64) {\n          output_ = chr3 << 8;\n        }\n      } else {\n        output = output + f(output_ | chr1);\n        \n        if (enc3 != 64) {\n          output_ = chr2 << 8;\n        }\n        if (enc4 != 64) {\n          output += f(output_ | chr3);\n        }\n      }\n      ol+=3;\n    }\n    \n    return LZString.decompress(output);\n    \n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\",\n        i,c,\n        current,\n        status = 0,\n        f = LZString._f;\n    \n    input = LZString.compress(input);\n    \n    for (i=0 ; i<input.length ; i++) {\n      c = input.charCodeAt(i);\n      switch (status++) {\n        case 0:\n          output += f((c >> 1)+32);\n          current = (c & 1) << 14;\n          break;\n        case 1:\n          output += f((current + (c >> 2))+32);\n          current = (c & 3) << 13;\n          break;\n        case 2:\n          output += f((current + (c >> 3))+32);\n          current = (c & 7) << 12;\n          break;\n        case 3:\n          output += f((current + (c >> 4))+32);\n          current = (c & 15) << 11;\n          break;\n        case 4:\n          output += f((current + (c >> 5))+32);\n          current = (c & 31) << 10;\n          break;\n        case 5:\n          output += f((current + (c >> 6))+32);\n          current = (c & 63) << 9;\n          break;\n        case 6:\n          output += f((current + (c >> 7))+32);\n          current = (c & 127) << 8;\n          break;\n        case 7:\n          output += f((current + (c >> 8))+32);\n          current = (c & 255) << 7;\n          break;\n        case 8:\n          output += f((current + (c >> 9))+32);\n          current = (c & 511) << 6;\n          break;\n        case 9:\n          output += f((current + (c >> 10))+32);\n          current = (c & 1023) << 5;\n          break;\n        case 10:\n          output += f((current + (c >> 11))+32);\n          current = (c & 2047) << 4;\n          break;\n        case 11:\n          output += f((current + (c >> 12))+32);\n          current = (c & 4095) << 3;\n          break;\n        case 12:\n          output += f((current + (c >> 13))+32);\n          current = (c & 8191) << 2;\n          break;\n        case 13:\n          output += f((current + (c >> 14))+32);\n          current = (c & 16383) << 1;\n          break;\n        case 14:\n          output += f((current + (c >> 15))+32, (c & 32767)+32);\n          status = 0;\n          break;\n      }\n    }\n    \n    return output + f(current + 32);\n  },\n  \n\n  decompressFromUTF16 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\",\n        current,c,\n        status=0,\n        i = 0,\n        f = LZString._f;\n    \n    while (i < input.length) {\n      c = input.charCodeAt(i) - 32;\n      \n      switch (status++) {\n        case 0:\n          current = c << 1;\n          break;\n        case 1:\n          output += f(current | (c >> 14));\n          current = (c&16383) << 2;\n          break;\n        case 2:\n          output += f(current | (c >> 13));\n          current = (c&8191) << 3;\n          break;\n        case 3:\n          output += f(current | (c >> 12));\n          current = (c&4095) << 4;\n          break;\n        case 4:\n          output += f(current | (c >> 11));\n          current = (c&2047) << 5;\n          break;\n        case 5:\n          output += f(current | (c >> 10));\n          current = (c&1023) << 6;\n          break;\n        case 6:\n          output += f(current | (c >> 9));\n          current = (c&511) << 7;\n          break;\n        case 7:\n          output += f(current | (c >> 8));\n          current = (c&255) << 8;\n          break;\n        case 8:\n          output += f(current | (c >> 7));\n          current = (c&127) << 9;\n          break;\n        case 9:\n          output += f(current | (c >> 6));\n          current = (c&63) << 10;\n          break;\n        case 10:\n          output += f(current | (c >> 5));\n          current = (c&31) << 11;\n          break;\n        case 11:\n          output += f(current | (c >> 4));\n          current = (c&15) << 12;\n          break;\n        case 12:\n          output += f(current | (c >> 3));\n          current = (c&7) << 13;\n          break;\n        case 13:\n          output += f(current | (c >> 2));\n          current = (c&3) << 14;\n          break;\n        case 14:\n          output += f(current | (c >> 1));\n          current = (c&1) << 15;\n          break;\n        case 15:\n          output += f(current | c);\n          status=0;\n          break;\n      }\n      \n      \n      i++;\n    }\n    \n    return LZString.decompress(output);\n    //return output;\n    \n  },\n\n\n  \n  compress: function (uncompressed) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data_string=\"\", \n        context_data_val=0, \n        context_data_position=0,\n        ii,\n        f=LZString._f;\n    \n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n      \n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n          \n          \n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n    \n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == 15) {\n            context_data_position = 0;\n            context_data_string += f(context_data_val);\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n        \n        \n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n    \n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == 15) {\n        context_data_position = 0;\n        context_data_string += f(context_data_val);\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n    \n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == 15) {\n        context_data_string += f(context_data_val);\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data_string;\n  },\n  \n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = \"\",\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        f = LZString._f,\n        data = {string:compressed, val:compressed.charCodeAt(0), position:32768, index:1};\n    \n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n    \n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = 32768;\n        data.val = data.string.charCodeAt(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n    \n    switch (next = bits) {\n      case 0: \n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1: \n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2: \n        return \"\";\n    }\n    dictionary[3] = c;\n    w = result = c;\n    while (true) {\n      if (data.index > data.string.length) {\n        return \"\";\n      }\n      \n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = 32768;\n          data.val = data.string.charCodeAt(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0: \n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1: \n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2: \n          return result;\n      }\n      \n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n      \n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result += entry;\n      \n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n      \n      w = entry;\n      \n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n      \n    }\n  }\n};\n\n// if( typeof module !== 'undefined' && module != null ) {\n//   module.exports = LZString\n// }\nexport default LZString;","import CCsubmit from \"components/Csubmit\";\r\nimport CCsubmitbook from \"components/Csubmitbook\";\r\nimport { authService } from \"fbase\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { dbService } from \"fbase\";\r\nimport _ from 'lodash';\r\nimport Calendar from 'react-calendar';\r\nimport 'react-calendar/dist/Calendar.css';\r\nimport LZString from \"lz-string-1.3.3\";\r\n\r\nexport default ({userObj}) => {\r\n    const onLogOutClick = () => {\r\n      const ok = window.confirm(\"wanna logout?\")\r\n        if(ok){\r\n          authService.signOut();}\r\n        }\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [Csubmitbooks,setCsubmitbooks]= useState([]);\r\n    const [viewToggle,setViewToggle]=useState(false);\r\n    const [viewDeleyToggle,setViewDeleyToggle]=useState(false);\r\n    const [Cdate, setCdate] = useState(new Date());\r\n    // const getMyCroquis = async()=>{\r\n    //     const croquisPost = await dbService.collection(\"Csubmit\")\r\n    //     .where(\"creatorId\",\"==\",userObj.uid)\r\n    //     .orderBy(\"createdAt\",\"desc\")\r\n    //     .get();\r\n    //     console.log(croquisPost.docs.map((doc)=>doc.data()));\r\n    //     setCsubmits(croquisPost.docs.map((doc)=>doc.data()));\r\n    // }\r\n\r\n    // useEffect(()=>{\r\n    //     getMyCroquis();\r\n    // },[]);\r\n\r\n    const [bookListOn,setBookListOn]=useState(false)\r\n    const [bookListOnFirst,setBookListOnFisrt]=useState(false)\r\n    const [startDate,setStartDate]=useState(2658674800000)\r\n    const [bookListEnd,setBookListEnd]=useState(100)\r\n    const [listEnd,setListEnd]=useState(100)\r\n    const [isCalendar,setIsCalender]=useState(false)\r\n    const [isMemo,setIsMemo]=useState(false)\r\n    const [isMemoEdit,setIsMemoEdit]=useState(false)\r\n    const [memo,setMemo]=useState(\"test\")\r\n    // const [lastScrollTop, setLastScrollTop] = useState(0);\r\n    // const [bodyOffset, setBodyOffset] = useState(\r\n    //   document.body.getBoundingClientRect()\r\n    // );\r\n    // const [scrollY, setScrollY] = useState(bodyOffset.top);\r\n    // const [isLoading,setIsLoading] = useState(true)\r\n      \r\n    // const listener = e => {\r\n    //   // setBodyOffset(document.body.getBoundingClientRect());\r\n    //   // setScrollY(-bodyOffset.top);\r\n    //   // if(window.innerHeight + document.documentElement.scrollTop>document.documentElement.offsetHeight-10){\r\n    //   //   console.log(window.innerHeight)\r\n    //   //   console.log(document.documentElement.scrollTop)\r\n    //   //   console.log(document.documentElement.offsetHeight)\r\n    //   //   setListEnd(pre=>pre+10)\r\n    //   //   return;\r\n    //   // }\r\n    //   if((window.innerHeight + document.documentElement.scrollTop>document.documentElement.offsetHeight-100)&&isLoading){\r\n    //     setListEnd(pre=>pre+10)\r\n    //     setIsLoading(false)\r\n    //     console.log(\"scrolling down\");\r\n    //     return;\r\n    //   }\r\n    //   else {\r\n    //     setIsLoading(true)\r\n        \r\n    //   }\r\n    // };\r\n  \r\n    // useEffect(() => {\r\n    //   window.addEventListener(\"scroll\", _.throttle(listener, 100));\r\n    //   // console.log(scrollY)\r\n    //   // console.log(bodyOffset)\r\n    //   // console.log(\"d\")\r\n    //   return () => {\r\n    //     window.removeEventListener(\"scroll\", _.throttle(listener, 100));\r\n        \r\n    //   };\r\n    // });\r\n    // useEffect(() => {\r\n    //   const throttledCount = _.throttle(listener, 100);\r\n    //   window.addEventListener('scroll', throttledCount);\r\n    //   return () => window.removeEventListener('scroll', throttledCount);\r\n    // }, []);\r\n    useEffect(() => {\r\n      dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n        if (doc.exists) {\r\n            setMemo(doc.data().Cmemo)\r\n                           \r\n           \r\n      \r\n            \r\n        } else {\r\n            // doc.data() will be undefined in this case\r\n            console.log(\"No such setting document!\");\r\n        }\r\n    }).catch((error) => {\r\n        console.log(\"Error getting document:\", error);\r\n         \r\n    });\r\n    }, []);\r\n    const onClickEditMemo = (event)=>{\r\n      event.preventDefault();\r\n      dbService.collection(\"usersetting\").doc(userObj.uid).update({\r\n        Cmemo:memo\r\n        \r\n    });\r\n    setIsMemoEdit(false)\r\n    }\r\n    const onChangeMemo = (event)=> {\r\n      const {\r\n          target:{value},\r\n      }=event;\r\n      setMemo(value);\r\n  }\r\n  \r\n\r\n    useEffect(()=> {  \r\n    dbService.collection(\"Csubmit\")\r\n        .where(\"creatorId\",\"==\",userObj.uid)\r\n        .orderBy(\"createdAt\",\"desc\")\r\n        // .endAt(Date.now()-listEnd)\r\n        .where(\"createdAt\", \"<\", startDate+86400000)\r\n        .limit(listEnd)\r\n        // .get((snapshot) =>{\r\n        .onSnapshot((snapshot) =>{\r\n        const CsubmitArray = snapshot.docs.map((doc)=>({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        }));\r\n        \r\n        setCsubmits(CsubmitArray);\r\n    \r\n        //console.log(Csubmits);\r\n    });\r\n\r\n\r\n    },[startDate]);\r\n\r\n    // useEffect(()=>{\r\n    //   const Csubmitss = localStorage.getItem(\"Csubmits\")\r\n    //   if(Csubmitss == undefined){\r\n    //     //localStorage.setItem(\"Csubmits\",\"\")\r\n    //   }else if(Csubmitss !== undefined){\r\n    //     setCsubmits(JSON.parse(Csubmitss))\r\n    //   }\r\n\r\n    // },[])\r\nconst loadAll=()=>{\r\n  dbService.collection(\"Csubmit\")\r\n        // .where(\"creatorId\",\"==\",userObj.uid)\r\n        .orderBy(\"createdAt\", \"desc\")\r\n        .where(\"createdAt\", \"<\", startDate+86400000)\r\n        .limit(listEnd)\r\n        .get()\r\n        .then((querySnapshot) =>{\r\n            const CsubmitArray = querySnapshot.docs.map((doc)=>({\r\n                id: doc.id,\r\n                ...doc.data(),\r\n            }));\r\n            \r\n            setCsubmits(CsubmitArray);\r\n            const myArray = CsubmitArray\r\n            for (let i = 0; i < myArray.length; i++) {\r\n              myArray[i].text = \"\";\r\n            }\r\n            myArray.splice(10);\r\n            localStorage.setItem(\"Csubmits\",JSON.stringify(myArray))\r\n            //console.log(\"get\",CsubmitArray);\r\n        });\r\n}\r\n// const excuteDel=()=>{\r\n//   const ok = window.confirm(\"wanna delete this?\")\r\n//         if(ok){\r\n//   Csubmits.forEach((Csubmit) => {\r\n//     dbService.doc(`Csubmit/${Csubmit.id}`).delete()\r\n//       .then(() => {\r\n//         console.log(`Document with ID ${Csubmit.id} has been deleted`);\r\n//       })\r\n//       .catch((error) => {\r\n//         console.error(`Error deleting document with ID ${Csubmit.id}:`, error);\r\n//       });\r\n//   });}\r\n// }\r\n    useEffect(()=> {  \r\n      dbService.collection(\"Csubmitbook\")\r\n          .where(\"creatorId\",\"==\",userObj.uid)\r\n          .orderBy(\"createdAt\",\"desc\")\r\n          // .endAt(Date.now()-listEnd)\r\n          .where(\"createdAt\", \"<\", startDate+86400000)\r\n          .limit(bookListEnd)\r\n          // .get((snapshot) =>{\r\n          .onSnapshot((snapshot) =>{\r\n          const CsubmitbookArray = snapshot.docs.map((doc)=>({\r\n              id: doc.id,\r\n              ...doc.data(),\r\n          }));\r\n          \r\n          setCsubmitbooks(CsubmitbookArray);\r\n          \r\n          console.log(\"bookmark loaded!\");\r\n      });\r\n      },[bookListOnFirst]);\r\n\r\n    // },[]);\r\n    const onChangeTime = (event)=> {\r\n      const {\r\n          target:{value},\r\n      }=event;\r\n      setListEnd(value);\r\n     \r\n      console.log(\"ddd\")\r\n\r\n      \r\n  }\r\n  const nextPage = ()=>{\r\n    setListEnd(pre=>pre+100);\r\n  }\r\n  const nextBookPage = ()=>{\r\n    setBookListEnd(pre=>pre+100);\r\n  }\r\n  const clickCroquisDate=(value)=>{\r\n    setStartDate(value.getTime())\r\n    console.log(value.getTime());\r\n  }\r\n\r\n\r\n  \r\n    return (\r\n    <>\r\n        \r\n        \r\n        <span>Profile</span>\r\n      \r\n      \r\n        {/* <button onClick={loadAll}>LOAD</button> */}\r\n        {/* <button onClick={excuteDel}>excuteDel</button> */}\r\n        <button onClick={onLogOutClick}>Log Out</button>\r\n        <button onClick={()=>{setIsCalender(pre=>!pre)}}>Calender</button>\r\n      {  isCalendar?(<>\r\n        <Calendar \r\n        // onClickDay={setCdate} \r\n        value={Cdate} onClickDay={clickCroquisDate} calendarType={\"US\"} />\r\n      </>):(<></>)}\r\n        \r\n        <input value={listEnd} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n        \r\n        \r\n        <button onClick={()=>{setIsMemo(pre=>!pre)}}>Memo</button>\r\n        <button onClick={()=>{setBookListOn(pre=>!pre);\r\n        if(!bookListOnFirst){\r\n          setBookListOnFisrt(true)\r\n        }}}>Bookmark</button>\r\n\r\n        {  isMemo?(<>\r\n          {  isMemoEdit?(<>\r\n            <form>\r\n      <p><textarea onChange={onChangeMemo} cols=\"50\" rows=\"10\">{memo}</textarea></p>\r\n      <p><input type=\"submit\" value=\"Submit\" onClick={onClickEditMemo}></input></p>\r\n    </form>\r\n          \r\n          \r\n          </>):(<><div style={{whiteSpace:\"pre-line\",border: \"10px solid rgba(0, 0, 0, 0.05)\",padding: \"10px\"}}>{memo}</div></>)}\r\n        \r\n        \r\n        \r\n        <button onClick={()=>{setIsMemoEdit(pre=>!pre)}}>edit</button>\r\n        \r\n        \r\n        </>):(<>\r\n          <div style={{whiteSpace:\"pre-line\",border: \"10px solid rgba(0, 0, 0, 0.05)\",padding: \"10px\"}}>{memo.substring(0,70)}</div>\r\n        </>)}\r\n\r\n        { bookListOn?(<>\r\n          <div>\r\n          {Csubmitbooks.map((Csubmitbook)=>(\r\n              \r\n              <CCsubmitbook \r\n            //   key={Csubmit.id} \r\n              CsubmitbookObj={Csubmitbook} isOwner={Csubmitbook.creatorId=== userObj.uid} viewsToggle={viewDeleyToggle}  />\r\n              \r\n          ))}\r\n      \r\n      </div>\r\n      <div>\r\n      <button style={{\r\n           float: 'right',\r\n           \r\n           margin: '10px',\r\n           marginRight: '500px',\r\n          padding:'15px 30px'}} onClick={nextBookPage}>Next Page</button>\r\n      </div>\r\n      </>):(<></>)}\r\n        <div>\r\n          {Csubmits.map((Csubmit)=>(\r\n              \r\n              <CCsubmit \r\n            //   key={Csubmit.id} \r\n              CsubmitObj={Csubmit} isOwner={Csubmit.creatorId=== userObj.uid} viewsToggle={viewDeleyToggle}  />\r\n              \r\n          ))}\r\n      \r\n      </div>\r\n      <div>\r\n      <button style={{\r\n           float: 'right',\r\n           \r\n           margin: '10px',\r\n           marginRight: '500px',\r\n          padding:'15px 30px'}} onClick={nextPage}>Next Page</button>\r\n      </div>\r\n      \r\n      \r\n      \r\n        {/* {viewToggle ?(<>\r\n            <button onClick={(e)=>{setViewToggle(false)}}>\r\n          Close Drawings</button>\r\n          \r\n      </>):(<>\r\n        <button onClick={(e)=>{setViewToggle(true)}}>\r\n        \r\n          Show Drawings</button>\r\n      \r\n        </>)} */}\r\n        \r\n       \r\n            {/* <button onClick={(e)=>{setViewToggle(true)}}>\r\n          Close Drawings</button>\r\n          <div>\r\n          {Csubmits.map((Csubmit)=>(\r\n              \r\n              <CCsubmit \r\n            //   key={Csubmit.id} \r\n              CsubmitObj={Csubmit} isOwner={Csubmit.creatorId=== userObj.uid} viewsToggle={viewToggle}  />\r\n              \r\n          ))}\r\n      </div> */}\r\n         \r\n        \r\n    </>\r\n    \r\n    )\r\n};","import { authService } from \"fbase\";\r\nimport React, { useState } from \"react\";\r\n\r\nconst Auth = () => {\r\n    const [email, setEmail]= useState(\"\");\r\n    const [password, setPassword]= useState(\"\");\r\n    const [newAccount, setNewAccount]= useState(false);\r\n    const [error, setError] = useState(\"\");\r\n    const onChange = (event)=>{\r\n        \r\n        const {target: {name,value}}= event;\r\n        if(name === \"email\"){\r\n            setEmail(value);\r\n        }else if(name ===\"password\"){\r\n            setPassword(value);\r\n        }\r\n    };\r\n    const onSubmit = async(event)=>{\r\n            event.preventDefault();\r\n            try{\r\n                let data;\r\n            if(newAccount){\r\n                // data = await authService.createUserWithEmailAndPassword(email,password);\r\n            }else{\r\n                data = await authService.signInWithEmailAndPassword(email,password);\r\n            }\r\n            console.log(data)\r\n        } catch (error){\r\n            setError(error.message);\r\n        }\r\n    };\r\n    const toggleAccount = ()=> setNewAccount(prev => !prev)\r\n    return(\r\n\r\n    <div>\r\n        <form onSubmit={onSubmit}>\r\n            <input \r\n                name=\"email\" \r\n                type={\"email\"} \r\n                placeholder=\"Email\" \r\n                required \r\n                value={email} \r\n                onChange={onChange}/>\r\n            <input name=\"password\" type={\"password\"} placeholder=\"Password\" required value={password} onChange={onChange}/>\r\n            <input type={\"submit\"} value={newAccount ? \"Create Account\" : \"Log In\"}/>\r\n            {error}\r\n        </form>\r\n        {/* <span onClick={toggleAccount}> \r\n        {newAccount ? \"Sign In\" : \"Create Account\" }</span> */}\r\n        {/* <div>\r\n            <button>Continue with Google</button>\r\n            <button>Continue with Github</button>\r\n        </div> */}\r\n    </div>\r\n    )};\r\n    \r\nexport default Auth;","//import CCsubmit from \"../components/Csubmit\";\r\n//import { v4 as uuidv4 } from 'uuid';\r\nimport { dbService ,storageService} from \"fbase\";\r\nimport React, { useEffect, useRef, useState,useCallback } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\n\r\n\r\n const Home=({userObj,isAndroid,penType}) => {\r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [Line,setLine]= useState([]);\r\n    const canvasRef = useRef();\r\n    const [pinNum,setPinNum]=useState(\"\");\r\n    const [randomPinNum,setRandomPinNum]=useState([]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const [pinID,setPinID]=useState(0);\r\n    const [drawNum,setDrawNum]=useState(0);\r\n    const [croquisTime,setCroquisTime]=useState(60);\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    //allowpointertype으로 터치허용유무설정가능 일단 펜만 가능하게함. 나중에하는걸로\r\n        const [min,setMin]=useState(0);\r\n        const [sec,setSec]=useState(0);\r\n        const time=useRef(croquisTime);\r\n        const timeId=useRef(null);\r\n        const [drawSetting,setDrawSetting]=useState({\r\n            croquisTimeDB:60,\r\n            brushRadius:1,\r\n            lazyRadius:1,\r\n            eraseRadius:10,\r\n            \r\n\r\n\r\n        })\r\n    const [timeSetBottonToggle,setTimeSetBottonToggle]=useState(false);\r\n\r\n\r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n    const [repeat,setRepeat]=useState(false)\r\n    const [hideDraw,setHideDraw]=useState(false)\r\n    const [hideDrawsec,setHideDrawSec]=useState(10)\r\n    const [repeatDraw,setRepeatDraw]=useState(0)\r\n    const [blank,setblank]=useState(false)\r\n    const [repeatNum,setRepeatNum]=useState(1)\r\n\r\n\r\nconst onNextClick= (event) => {\r\n      event.preventDefault();\r\n  \r\n      setPinreload(pinReload+1);\r\n            \r\n      setPinID(pinID+1);\r\n      setRepeatDraw(0)\r\n      time.current=croquisTime;\r\n  };\r\n       const onSetRandom = (event) => {\r\n      const random=shuffleArray(randomPinNum)\r\n      setRandomPinNum(random);\r\n    }\r\n\r\n    const getMyCroquisSettings = ()=>{\r\n              dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n            if (doc.exists) {\r\n                setDrawSetting({\r\n                    brushRadius:doc.data().brushRadius,\r\n                    lazyRadius:doc.data().lazyRadius,\r\n                    eraseRadius:doc.data().eraseRadius,\r\n                    croquisTimeDB:doc.data().croquisTimeDB,\r\n                    })\r\n                    setCroquisTime(doc.data().croquisTimeDB)\r\n                console.log(doc.data())\r\n                console.log(croquisTime)\r\n                time.current+=doc.data().croquisTimeDB-60;\r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"No such setting document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"Error getting document:\", error);\r\n             \r\n        });\r\n    }\r\n    const updateSetting =(event)=>{\r\n      // console.log(drawSetting.croquisTimeDB,typeof(drawSetting.croquisTimeDB))\r\n      // console.log(drawSetting.brushRadius,typeof(drawSetting.brushRadius))\r\n      // console.log(drawSetting.lazyRadius,typeof(drawSetting.lazyRadius))\r\n      // console.log(drawSetting.eraseRadius,typeof(drawSetting.eraseRadius))\r\n        dbService.collection(\"usersetting\").doc(userObj.uid).update({\r\n            brushRadius:drawSetting.brushRadius,\r\n            lazyRadius:drawSetting.lazyRadius,\r\n            croquisTimeDB:drawSetting.croquisTimeDB,\r\n            eraseRadius:drawSetting.eraseRadius,\r\n            \r\n        });\r\n    }\r\n    const refreshAndSubmit =()=>{\r\n        setPinreload(pinReload+1);\r\n        \r\n        let _drawNum=0;\r\n        if(localStorage.getItem(\"drawNum\")==undefined){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n        }else{\r\n          _drawNum=localStorage.getItem(\"drawNum\")\r\n        }\r\n        localStorage.setItem(\"drawNum\", parseInt(_drawNum)+1)\r\n        setDrawNum(parseInt(_drawNum)+1)\r\n        localStorage.setItem(\"lastdrawtime\",parseInt(Date.now()))\r\n\r\n            setPinID(pinID+1);\r\n            //console.log(\"timeout\",randomPinNum[pinID])\r\n            \r\n            time.current=croquisTime;\r\n            \r\n            const data = canvasRef.current.getSaveData();\r\n            const dataUrl=canvasRef.current.getDataURL();\r\n            canvasRef.current.clear();\r\n            localStorage.setItem(\"redraw\", \"\")\r\n            \r\n            dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:croquisTime-min*60-sec,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:randomPinNum[pinID]\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            // setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n    const noRefreshAndSubmit =()=>{\r\n        \r\n            //console.log(\"timeout\",randomPinNum[pinID])\r\n            let _drawNum=0;\r\n        if(localStorage.getItem(\"drawNum\")==undefined){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n        }else{\r\n          _drawNum=localStorage.getItem(\"drawNum\")\r\n        }\r\n        localStorage.setItem(\"drawNum\", parseInt(_drawNum)+1)\r\n        setDrawNum(parseInt(_drawNum)+1)\r\n        localStorage.setItem(\"lastdrawtime\",parseInt(Date.now()))\r\n            time.current=croquisTime;\r\n            \r\n            const data = canvasRef.current.getSaveData();\r\n            const dataUrl=canvasRef.current.getDataURL();\r\n            canvasRef.current.clear();\r\n        \r\n            \r\n            dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:croquisTime-min*60-sec,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:randomPinNum[pinID]\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            // setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n    useEffect(()=> {\r\n      if(localStorage.getItem(\"drawNum\")==undefined){\r\n        localStorage.setItem(\"drawNum\", parseInt(0))\r\n        setDrawNum(parseInt(0))\r\n      }else{\r\n        setDrawNum(parseInt(localStorage.getItem(\"drawNum\")))\r\n      }\r\n\r\n      if(localStorage.getItem(\"drawrepeat\")==undefined){\r\n        localStorage.setItem(\"drawrepeat\", false)\r\n        \r\n      }else{\r\n        setRepeat(JSON.parse(localStorage.getItem(\"drawrepeat\")))\r\n        \r\n      }\r\n      if(localStorage.getItem(\"hidedraw\")==undefined){\r\n        localStorage.setItem(\"hidedraw\", false)\r\n        \r\n      }else{\r\n        setHideDraw(JSON.parse(localStorage.getItem(\"hidedraw\")))\r\n        \r\n      }\r\n      if(localStorage.getItem(\"hidedrawsec\")==undefined){\r\n        localStorage.setItem(\"hidedrawsec\", 10)\r\n        \r\n      }else{\r\n        setHideDrawSec(JSON.parse(localStorage.getItem(\"hidedrawsec\")))\r\n        \r\n      }\r\n\r\n\r\n\r\n      if(!(localStorage.getItem(\"lastdrawtime\")==undefined)){\r\n        if(parseInt(Date.now())-parseInt(localStorage.getItem(\"lastdrawtime\"))>21600000){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n          setDrawNum(parseInt(0))\r\n        }\r\n      }\r\n       \r\n      getMyCroquisSettings();\r\n      setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n     \r\n        timeId.current= setInterval(()=>{\r\n            setMin(parseInt(time.current/60));\r\n            setSec(time.current % 60);\r\n            time.current -= 1;\r\n        },1000);\r\n        return()=> clearInterval(timeId.current);\r\n    },[]);\r\n\r\n    useEffect(()=> {\r\n        if(time.current<=-1){\r\n            refreshAndSubmit();\r\n            \r\n            \r\n        }\r\n        \r\n        if(time.current==300-hideDrawsec&&hideDraw==true){\r\n          setblank(true)\r\n            \r\n            \r\n        }\r\n\r\n    },[sec]);\r\n    function shuffleArray(array) {\r\n      for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [array[i], array[j]] = [array[j], array[i]];\r\n      }\r\n      return array;\r\n    }\r\n    useEffect(()=> {\r\n      \r\n             \r\n     \r\n       \r\n             dbService.doc(`RefDB/refStrings`).get().then((doc) => {\r\n            if (doc.exists) {\r\n                //console.log(\"Document data:\", doc.data().refUrl);\r\n                //setRandomPinNum(doc.data().refUrl);\r\n                //console.log(\"doc\",doc.data().refUrl)\r\n                //const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n                const random=shuffleArray(doc.data().refUrl)\r\n                const redrawUrl = localStorage.getItem(\"redraw\")\r\n                \r\n                if(redrawUrl.length !=0){\r\n                  if(redrawUrl.includes(\"https://assets.pinterest.com/ext/embed.html?id=\")){\r\n                    random.unshift(redrawUrl.substring(47))\r\n                  }else if(redrawUrl.includes(\"https://firebasestorage.googleapis.com\")){\r\n                    random.unshift(redrawUrl)\r\n                  }\r\n                }\r\n                setRandomPinNum(random);\r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"No such document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"Error getting document:\", error);\r\n             \r\n        });\r\n\r\n\r\n       \r\n        // dbService.collection(\"Csubmit\").onSnapshot((snapshot) =>{\r\n        //     const CsubmitArray = snapshot.docs.map((doc)=>({\r\n        //         id: doc.id,\r\n        //         ...doc.data(),\r\n        //     }));\r\n            \r\n        //     setCsubmits(CsubmitArray);\r\n        //     //console.log(Csubmits);\r\n        // });\r\n\r\n        \r\n        \r\n\r\n    },[]);\r\n     const onSubmitOnlyCanvas= (event) => {\r\n         event.preventDefault();\r\n        //  const data = canvasRef.current.getSaveData();\r\n        //  canvasRef.current.clear();\r\n     \r\n         \r\n        //  await dbService.collection(\"Csubmit\").add({\r\n        //      text:data,\r\n        //      createdAt: Date.now(),\r\n        //      creatorId: userObj.uid,\r\n        //      heart:(0),\r\n        //     //  refPhoto:{refPhoto},\r\n        //      //pinNumber:randomPinNum,\r\n        //  });\r\n        //  setCsubmit(\"\"); \r\n        noRefreshAndSubmit();\r\n     };\r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n        //  const data = canvasRef.current.getSaveData();\r\n        //  canvasRef.current.clear();\r\n     \r\n         \r\n        //  await dbService.collection(\"Csubmit\").add({\r\n        //      text:data,\r\n        //      createdAt: Date.now(),\r\n        //      creatorId: userObj.uid,\r\n        //      heart:(0),\r\n        //     //  refPhoto:{refPhoto},\r\n        //      //pinNumber:randomPinNum,\r\n        //  });\r\n        //  setCsubmit(\"\"); \r\n        if(repeatDraw==0&&repeat==true){\r\n          noRefreshAndSubmit();\r\n          setRepeatDraw(pre=>pre+1)\r\n          setblank(true)\r\n        }else if(repeatDraw==repeatNum&&repeat==true){\r\n          refreshAndSubmit();\r\n          setRepeatDraw(0)\r\n          setblank(false)\r\n        }else{\r\n          refreshAndSubmit();\r\n          setblank(false)\r\n        }\r\n       \r\n       \r\n     };\r\n     const onSubmitPinNum= (event) => {\r\n        event.preventDefault();\r\n        \r\n        if(pinNum.match(\",\")){\r\n            \r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n         \r\n            pinNum.split(\",\").forEach(e => {\r\n                console.log(e)\r\n                pinDocRef.update({\r\n                    refUrl:firebase.firestore.FieldValue.arrayUnion(e)\r\n            }); \r\n            \r\n        });\r\n        }else if(pinNum.length>1){\r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n            pinDocRef.update({\r\n            refUrl:firebase.firestore.FieldValue.arrayUnion(pinNum)\r\n        });\r\n        }\r\n\r\n        \r\n           \r\n        setPinNum(\"\")\r\n\r\n     }\r\n     const onChange = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setPinNum(value);\r\n     }\r\n     const onChangeTime = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setCroquisTime(value);\r\n         setDrawSetting(prevState=>({...prevState, croquisTimeDB: event.target.value }))\r\n         \r\n     }\r\n\r\n     const onSubmitTime= (event) => {\r\n        event.preventDefault();\r\n        setTimeSetBottonToggle(false)\r\n        \r\n        //setCroquisTime(0)\r\n     }\r\n\r\n     const clickRepeat= (event) => {\r\n        event.preventDefault();\r\n        \r\n        if(repeat==false){\r\n          localStorage.setItem(\"drawrepeat\", true)\r\n        }else{\r\n          localStorage.setItem(\"drawrepeat\", false)\r\n        }\r\n        setRepeat(pre=>!pre)\r\n        //setCroquisTime(0)\r\n     }\r\n\r\n     const clickHideDraw= (event) => {\r\n        event.preventDefault();\r\n        \r\n        if(hideDraw==false){\r\n          localStorage.setItem(\"hidedraw\", true)\r\n        }else{\r\n          localStorage.setItem(\"hidedraw\", false)\r\n        }\r\n        setHideDraw(pre=>!pre)\r\n        //setCroquisTime(0)\r\n     }\r\n\r\n     const onDeletePinClick= () => {\r\n      \r\n      const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n      pinDocRef.update({\r\n        refUrl:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])\r\n  });\r\n  setPinreload(pinReload+1);\r\n            \r\n            setPinID(pinID+1);\r\n    };\r\n\r\n\r\n\r\n     const onClearClick= () => {\r\n      const ok = window.confirm(\"wanna clear this?\")\r\n        if(ok){\r\n          canvasRef.current.clear();\r\n            \r\n        }\r\n        \r\n    };\r\n     const onUndoClick= () => {\r\n        canvasRef.current.undo();\r\n    };\r\n     const onEraseClick= () => {\r\n        setBrushColor(\"erase\")\r\n        \r\n    };\r\n     const onShadowClick= () => {\r\n        setBrushColor(\"shadow\")\r\n        \r\n    };\r\n     const onBrushClick= () => {\r\n        setBrushColor(\"#444\")\r\n        \r\n    };\r\n\r\n    function ordinal_suffix_of(i) {\r\n        var j = i % 10,\r\n            k = i % 100;\r\n        if (j == 1 && k != 11) {\r\n            return i + \"st\";\r\n        }\r\n        if (j == 2 && k != 12) {\r\n            return i + \"nd\";\r\n        }\r\n        if (j == 3 && k != 13) {\r\n            return i + \"rd\";\r\n        }\r\n        return i + \"th\";\r\n    }\r\n    function sexagesimal(i) {\r\n        if(i <= 9){\r\n            return \"0\"+i;\r\n        }else{\r\n            return i;\r\n        }\r\n    }\r\n    //  const onChange = (event)=> {\r\n    //      const {\r\n    //          target:{value},\r\n    //      }=event;\r\n    //      setCsubmit(value);\r\n    //  }\r\n\r\n    //  const onSubmitImage= async(event) => {\r\n    //     event.preventDefault();\r\n    //     const fileRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`);\r\n    //     const response = await fileRef.putString(imageString,\"data_url\");\r\n    //     const imageUrl =await response.ref.getDownloadURL();\r\n    //     setImageString(\"\");\r\n    //  }\r\n    //  const onFileChange= (event)=>{\r\n    //     const {\r\n    //         target:{files}\r\n    //     }= event;\r\n    //     const theFile = files[0];\r\n    //     const reader= new FileReader();\r\n    //     reader.onloadend = (finishedEvent)=>{\r\n    //         const {\r\n    //             currentTarget:{result},\r\n    //         }=finishedEvent;\r\n            \r\n    //         setImageString(result);\r\n    //     }\r\n    //     reader.readAsDataURL(theFile);\r\n    //  }\r\n\r\n  return(\r\n    <>\r\n    <Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        if (keyName == \"ctrl+z\") { onUndoClick(); }\r\n        if (keyName == \"c\") {\r\n          if (brushColor != \"erase\") { onEraseClick(); }\r\n          else if (brushColor == \"erase\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      } }\r\n    ></Hotkeys>\r\n    <div>\r\n        {/* <PieChart style={{ height: '35px' }}\r\n    data={[{ value: 1, key: 1, color: '#E38627' }]}\r\n    startAngle={-90}\r\n    reveal={-100*(min*60+sec)/croquisTime}\r\n    lineWidth={100}\r\n    // background=\"#f3f3f3\"\r\n    lengthAngle={360}\r\n    /> */}\r\n\r\n\r\n  \r\n    \r\n\r\n\r\n{isAndroid?(<>\r\n  <div style={{ float: 'right' }}>\r\n    \r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            <button onClick={onSetRandom}>random!</button>\r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n\r\n          </>) : (<>\r\n            {ordinal_suffix_of(drawNum + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          <button onClick={updateSetting}>Update Setting</button>\r\n          </div>\r\n          </>):(<><div style={{width: \"1000px\"}}>\r\n          <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n              \r\n            </form>\r\n            <button onClick={onSetRandom}>random!</button>\r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(drawNum + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          <button onClick={updateSetting}>Update Setting</button>\r\n          </div>\r\n          </div></>)}\r\n\r\n\r\n          {/* <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinHeight: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasHeight: e.target.value }))\r\n          }\r\n        /> \r\n        \r\n         {isAndroid? (<><iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} width={300} frameBorder={0}  ></iframe>\r\n          </>):(<>\r\n        \r\n        */}\r\n\r\n\r\n\r\n\r\n        \r\n\r\n\r\n\r\n{/* 시작------------------------------ */}\r\n\r\n\r\n\r\n        {isAndroid?(<>\r\n          <div style={{ float: 'left' , opacity: blank ? '0' : '1'}}>\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?(\r\n                    // (console.log(typeof(CsubmitObj.refPinUrl))\r\n                    <>\r\n                    \r\n                        <img  src={randomPinNum[pinID]}  width={300} frameBorder={0} scrolling=\"no\"></img>\r\n                    </>\r\n                    ):(<>\r\n          <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} width={300} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)}\r\n\r\n          {/* <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} width={300} frameBorder={0}  ></iframe> */}\r\n          </div>\r\n          <div style={{ float: 'left' }}>\r\n            <button onClick={clickRepeat}>🔂{(repeat==true)&&(<>❤</>)}</button>\r\n            <button onClick={clickHideDraw}>⏫{(repeat==true)&&(<>❤</>)}</button>\r\n          <button onClick={e=>{setblank(pre=>!pre)}}>👁️</button>\r\n          </div>\r\n        \r\n        </>):(<>\r\n\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n        </div>\r\n        <div style={{ float: 'right' }}>\r\n        <button onClick={onSubmitOnlyCanvas}>Upload&Redraw</button>\r\n              {/* <form onSubmit={onSubmitOnlyCanvas}>\r\n\r\n              \r\n                <input type={\"submit\"} value=\"Upload&Redraw\" />\r\n\r\n              </form> */}\r\n            </div>\r\n\r\n            <div style={{ float: 'right' }}>\r\n            <button onClick={onSubmit}>Upload</button>\r\n             <div style={{ float: 'left' }}>\r\n              <button onClick={onNextClick}>Next</button></div>\r\n              {/* <form onSubmit={onSubmit}>\r\n\r\n              \r\n                <input type={\"submit\"} value=\"Upload\" />\r\n\r\n              </form> */}\r\n              \r\n            </div>\r\n           \r\n        \r\n        <div style={{\r\n          position: 'absolute',\r\n          left: '30%',\r\n          transform: 'translateX(-50%)',\r\n          width: '70px',\r\n          textAlign: 'center',\r\n\r\n          background: 'linear-gradient(to left,#FFC365 ' + (min * 60 + sec) * 100 / croquisTime + '%,#E8E8E8 ' + (min * 60 + sec) * 100 / croquisTime + '%)'\r\n        }}>\r\n          {min}: {sexagesimal(sec)}\r\n        </div>\r\n\r\n        <div style={{ position: 'absolute',\r\n          left: '19%'}}>\r\n            <button onClick={clickRepeat}>🔂{(repeat==true)&&(<>❤</>)}</button>\r\n            <button onClick={clickHideDraw}>⏫{(hideDraw==true)&&(<>❤</>)}</button>\r\n          <button onClick={e=>{setblank(pre=>!pre)}}>👁️</button>\r\n          </div>\r\n          \r\n       \r\n\r\n        <div > \r\n          <form onSubmit={onSubmitPinNum}>\r\n            <input value={pinNum} onChange={onChange} type={\"text\"} placeholder=\"You Can Upload Pinterst Pin By Url Number\" />\r\n            <input type={\"submit\"} value=\"Upload Pin\" />\r\n\r\n          </form>\r\n        \r\n\r\n\r\n        </div>\r\n        \r\n       \r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left', opacity: blank ? '0' : '1' }}>\r\n        {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?(\r\n                    // (console.log(typeof(CsubmitObj.refPinUrl))\r\n                    <>\r\n                    \r\n                        <img  src={randomPinNum[pinID]}  width={400} frameBorder={0} scrolling=\"no\"></img>\r\n                    </>\r\n                    ):(<>\r\n          <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={770} width={400} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)}\r\n        </div>\r\n\r\n\r\n        </>)}\r\n\r\n\r\n{/* 끝--------------------------------- */}\r\n\r\n        <div style={{ float: 'left' }}>\r\n          <div>\r\n\r\n            \r\n          {isAndroid?(<><div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear</button>\r\n        </div>\r\n        <div style={{ float: 'right' }}>\r\n              <form onSubmit={onSubmitOnlyCanvas}>\r\n\r\n             \r\n                <input type={\"submit\"} value=\"Up&Re\" />\r\n\r\n              </form>\r\n            </div>\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <form onSubmit={onSubmit}>\r\n\r\n            \r\n                <input type={\"submit\"} value=\"Up\" />\r\n\r\n              </form>\r\n            </div>\r\n            <div style={{ float: 'right' }}><button onClick={onNextClick}>↦</button></div>\r\n          <div style={{ float: 'right' }}>\r\n          {min}: {sexagesimal(sec)}\r\n          </div>\r\n            </>):(<></>)}\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {brushColor==\"erase\" ? (<>\r\n                <label>Erase Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Brush Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n              \r\n\r\n\r\n            </div>\r\n            \r\n            <div style={{ float: 'left' }}>\r\n            {isAndroid?(<><button style={{padding:\"15px\"}} onClick={onUndoClick}>◀</button></>):(<><button onClick={onUndoClick}>◀</button></>)}\r\n              \r\n            </div>\r\n\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n\r\n\r\n            </div>\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>\r\n          \r\n\r\n\r\n            \r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor}\r\n              // enablePanAndZoom={true}  \r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]} />\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n        {/* <form onSubmit={onSubmitImage}>\r\n          <input type={\"file\"} accept=\"image/*\" onChange={onFileChange}/>\r\n          <input type={\"submit\"} value=\"Upload Croquis Images\"/>\r\n    </form> */}\r\n\r\n\r\n\r\n\r\n\r\n        {/* <div>\r\n        {Csubmits.map((Csubmit)=>(\r\n            <CCsubmit key={Csubmit.id} CsubmitObj={Csubmit} isOwner={Csubmit.creatorId=== userObj.uid} />\r\n        ))}\r\n    </div> */}\r\n      </div></>\r\n  )\r\n };\r\n export default Home;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nconst Navigation =({isAndroid}) => (\r\n   \r\n   \r\n<nav> \r\n    <ul>\r\n    {isAndroid ?(\r\n                    <>\r\n                    \r\n                    <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/\">Home</Link>\r\n        </li>\r\n        \r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/profile\">Draw</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/doProko\">Proko</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/doSoty\">Soty</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/doManga\">Manga</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/doSakugaBooru\">Sakuga</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/special\">Sp1</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/special2\">Sp2</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/specialcopy\">SC</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/adorka\">A</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/lineofaction\">L</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/twitter\">Twit</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/chadesign\">De</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/chadesigndraw\">DDraw</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/360\">360</Link>\r\n        </li>\r\n                    \r\n                    \r\n                    </>\r\n                ) : (\r\n                    <>\r\n                    \r\n                    <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/\">Home</Link>\r\n        </li>\r\n        \r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/profile\">My Drawings</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/doProko\">Proko</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/doSoty\">Soty</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/doManga\">Manga</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/doSakugaBooru\">Sakuga</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/special\">Sp1</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/special2\">Sp2</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/specialcopy\">SC</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/adorka\">Adorka</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/lineofaction\">LineOfAction</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/twitter\">Twitter</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/chadesign\">Design</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/chadesigndraw\">DesignDraw</Link>\r\n        </li>\r\n        <li style={{display:'inline', borderLeft:'1px solid #999',padding:'0 10px'}}>\r\n            <Link to =\"/360\">360</Link>\r\n        </li>\r\n                    \r\n                    </>\r\n                )}\r\n        \r\n\r\n        </ul>\r\n</nav>\r\n);\r\nexport default Navigation;","import { dbService } from \"fbase\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\nexport default ({userObj,isAndroid,penType}) => {\r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const canvasRef = useRef();\r\n    const [drawSetting,setDrawSetting]=useState({\r\n       \r\n        brushRadius:0.8,\r\n        lazyRadius:0,\r\n       \r\n        \r\n\r\n\r\n    })\r\n    const [youtubeUrlIndex,setYoutubeUrlIndex]=useState(0);\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    const [youtubeUrls,setYoutubeUrls]=useState([\r\n        \"PLtG4P3lq8RHGuMuprDarMz_Y9Fbw_d2ws\",\"PLTY4AtphBe8NS7WFIMIhHIBJVk3xQvi-q\",\"PLTY4AtphBe8PSqfXT4qfxwdbLgSK0XZ9v\",\"PLTY4AtphBe8P3zIOlyr7gEt176af-pp5R\",\"PLtG4P3lq8RHFBeVaruf2JjyQmZJH4__Zv\",\"PLHYRqaApAQGGCUm1mPME4HVOzay3OcTgH\",\r\n        \"PLVK1154-DZLrCyXFSobZ2SVisLGmmNapd\",\"PLCjbbuVu6JIXNHzSp1G4a0rXd_r2wZTba\",\"PLq1DbqqC6xIufAQUeYrC3ycbLcHIAxkWJ\",\r\n        \"PLCjbbuVu6JIVddbH_99oQFSQde_bpxWjc\"\r\n    ])\r\n    const [playListName,setPlayListName]=useState([\r\n        \"Proko\",\"Hide 1\",\r\n        \"Hide 2\",\"Hide 3\",\r\n        \"Proko anatomy\",\"GES DRAW Party\",\r\n        \"Draw This\",\"Saito naoki\",\r\n        \"Saito Croquis\",\"Char Design\"\r\n      ])\r\n      \r\n            \r\n    const [playLists,setPlayLists]=useState([\r\n      {\"name\":\"Proko\",\"url\":\"PLtG4P3lq8RHGuMuprDarMz_Y9Fbw_d2ws\"},\r\n      {\"name\":\"Hide 1\",\"url\":\"PLTY4AtphBe8NS7WFIMIhHIBJVk3xQvi\"},\r\n      {\"name\":\"Hide 2\",\"url\":\"PLTY4AtphBe8PSqfXT4qfxwdbLgSK0XZ9v\"},\r\n      {\"name\":\"Hide 3\",\"url\":\"PLTY4AtphBe8P3zIOlyr7gEt176af\"},\r\n      {\"name\":\"Proko anatomy\",\"url\":\"PLtG4P3lq8RHFBeVaruf2JjyQmZJH4__Zv\"},\r\n      {\"name\":\"GES DRAW Party\",\"url\":\"PLHYRqaApAQGGCUm1mPME4HVOzay3OcTgH\"},\r\n      {\"name\":\"Draw This\",\"url\":\"DZLrCyXFSobZ2SVisLGmmNapd\"},\r\n      {\"name\":\"Saito naoki\",\"url\":\"PLCjbbuVu6JIXNHzSp1G4a0rXd_r2wZTba\"},\r\n      {\"name\":\"Saito Croquis\",\"url\":\"PLq1DbqqC6xIufAQUeYrC3ycbLcHIAxkWJ\"},\r\n      {\"name\":\"Char Design\",\"url\":\"PLCjbbuVu6JIVddbH_99oQFSQde_bpxWjc\"}\r\n      \r\n    ])\r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n\r\n   \r\n    useEffect(()=> {\r\n      dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n          if (doc.exists) {\r\n              setDrawSetting({\r\n                  brushRadius:doc.data().brushRadius,\r\n                  lazyRadius:doc.data().lazyRadius,\r\n                  })\r\n                  \r\n              //console.log(doc.data())\r\n              \r\n              \r\n             \r\n              \r\n              \r\n          } else {\r\n              // doc.data() will be undefined in this case\r\n              console.log(\"No such setting document!\");\r\n          }\r\n      }).catch((error) => {\r\n          console.log(\"Error getting document:\", error);\r\n           \r\n      });\r\n\r\n      setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n\r\n    \r\n  },[]);\r\n    \r\n    const refreshAndSubmit =()=>{\r\n        \r\n            \r\n           \r\n            \r\n            const data = canvasRef.current.getSaveData();\r\n            const dataUrl=canvasRef.current.getDataURL();\r\n            canvasRef.current.clear();\r\n        \r\n            \r\n            dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:0,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:\"\"\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n   \r\n\r\n   \r\n\r\n\r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n     \r\n        refreshAndSubmit();\r\n     };\r\n     \r\n     \r\n\r\n\r\n     const onClearClick= () => {\r\n      const ok = window.confirm(\"wanna clear this?\")\r\n      if(ok){\r\n        canvasRef.current.clear();\r\n          \r\n      }\r\n    };\r\n    const onUndoClick= () => {\r\n      canvasRef.current.undo();\r\n  };\r\n   const onEraseClick= () => {\r\n      setBrushColor(\"erase\")\r\n      \r\n  };\r\n   const onBrushClick= () => {\r\n      setBrushColor(\"#444\")\r\n      \r\n  };\r\n   const onShadowClick= () => {\r\n      setBrushColor(\"shadow\")\r\n      \r\n  };\r\n  \r\n    \r\n  \r\n  return(\r\n    \r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        \r\n        if(keyName == \"ctrl+z\"){onUndoClick();}\r\n        if(keyName == \"c\"){\r\n        if(brushColor != \"erase\"){onEraseClick()}\r\n        else if(brushColor == \"erase\"){onBrushClick()}\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      } }\r\n      // onKeyUp={(keyName, e, handle) => {\r\n      //   console.log(\"test:onKeyUp\", e, handle);\r\n      //   setOutput(`onKeyUp ${keyName}`);\r\n      // } }\r\n    ></Hotkeys>\r\n    \r\n    \r\n    <div>\r\n\r\n        <div style={{ float: 'right' }}>\r\n\r\n\r\n\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        <div>\r\n\r\n\r\n          <label>videos:</label>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            max={youtubeUrls.length - 1}\r\n            style={{ width: \"30px\" }}\r\n            value={youtubeUrlIndex}\r\n            onChange={e => {\r\n              setPinreload(pinReload + 1);\r\n              setYoutubeUrlIndex(e.target.value);\r\n              \r\n              \r\n              \r\n\r\n            } } />\r\n            <button onClick={e => {\r\n              setYoutubeUrlIndex(pre => \r\n              pre-1\r\n              ); \r\n            } }>{\"<\"}</button>\r\n            <button onClick={e => {\r\n              setYoutubeUrlIndex(pre => pre+1); \r\n            } }>{\">\"}</button>\r\n            <button onClick={e => {\r\n              setPinreload(pinReload + 1);\r\n            } }>{\"refresh\"}</button>\r\n            {playListName[youtubeUrlIndex]}\r\n            <select  defaultValue={0} onChange={e=>{setYoutubeUrlIndex(e.target.value);setPinreload(pinReload + 1);}} >\r\n    {playLists.map((e, key) => {\r\n        return <option key={e.name} value={key}>{e.name}</option>;\r\n    })}\r\n</select>\r\n\r\n        </div>\r\n\r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left' }}>\r\n        {isAndroid? (<><iframe key={pinReload} src={\"https://www.youtube.com/embed/videoseries?list=\" + youtubeUrls[youtubeUrlIndex] + \"&cc_load_policy=1&cc_lang_pref=ko\"} height={450} width={600} frameBorder={0} scrolling=\"no\"></iframe>\r\n        </>):(<>\r\n        <iframe key={pinReload} src={\"https://www.youtube.com/embed/videoseries?list=\" + youtubeUrls[youtubeUrlIndex] + \"&cc_load_policy=1&cc_lang_pref=ko\"} height={450} width={450} frameBorder={0} scrolling=\"no\"></iframe></>)}\r\n          \r\n        </div>\r\n\r\n        <div style={{ float: 'left' }}>\r\n          <div>\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n            {brushColor==\"erase\" ? (<>\r\n                <label>Erase Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Brush Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {isAndroid?(<><button style={{padding:\"15px\"}} onClick={onUndoClick}>◀</button></>):(<><button onClick={onUndoClick}>◀</button></>)}\r\n            </div>\r\n\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n              {brushColor}\r\n\r\n            </div>\r\n                \r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmit}>Upload Drawing</button>\r\n              \r\n            </div>\r\n                \r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              \r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor}\r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]} />\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n\r\n      </div></>\r\n  )\r\n };","import React from 'react';\nimport PropTypes from 'prop-types';\n\n\n\nimport './styles.css';\n\nconst containerStyle = { \n    position: 'absolute', \n    zIndex: 1000 \n};\n\nconst ZoomOutButton = ({ disabled, onClick }) => (\n    <button className='iconButton' style={{ margin: '10px' }} onClick={onClick} disabled={disabled}>\n        -\n    </button>\n);\n\nconst ZoomInButton = ({ disabled, onClick }) => (\n    <button className='iconButton' style={{ margin: '10px', marginLeft: '0px' }} onClick={onClick} disabled={disabled}>\n       +\n    </button>\n);\n\nconst ZoomButtons = ({scale, minScale, maxScale, onZoomInClick, onZoomOutClick}) => (\n    <div style={containerStyle}>\n        {/* <ZoomOutButton onClick={onZoomOutClick} disabled={scale <= minScale} />\n        <ZoomInButton onClick={onZoomInClick} disabled={scale >= maxScale} /> */}\n    </div>\n);\n\nZoomButtons.propTypes = {\n    scale: PropTypes.number.isRequired,\n    minScale: PropTypes.number.isRequired,\n    maxScale: PropTypes.number.isRequired,\n    onZoomInClick: PropTypes.func.isRequired,\n    onZoomOutClick: PropTypes.func.isRequired,\n};\n\nexport default ZoomButtons;","import React from 'react';\n\nconst style = {\n    position: 'absolute',\n    marginTop: '40px',\n    marginLeft: '5px',\n    backgroundColor: 'rgba(0,0,0,0)',\n    zIndex: '1000',\n    color: 'white',\n}\nexport default ({ top, left, scale, overflow }) => {\n    const overflowDisplay = [\n        overflow.top > 0 ? 'top' : '',\n        overflow.right > 0 ? 'right': '',\n        overflow.bottom > 0 ? 'bottom' : '',\n        overflow.left > 0 ? 'left' : '',\n    ]\n        .filter(o => o.length)\n        .join(', ') || \n        'none';\n    return (\n        <div style={style}>\n            <div>{`top: ${top}`}</div>\n            <div>{`left: ${left}`}</div>\n            <div>{`scale: ${scale}`}</div>\n            <div>{`overflow: ${overflowDisplay}`}</div>\n        </div>\n    );\n}\n","import { createSelector } from 'reselect';\n\nexport const snapToTarget = (value, target, tolerance) => {\n    const withinRange = Math.abs(target - value) < tolerance;\n    return withinRange ? target : value;\n};\n\nexport const constrain = (lowerBound, upperBound, value) => Math.min(upperBound, Math.max(lowerBound, value));\n\nexport const negate = (value) => value * -1;\n\nexport const getRelativePosition = ({ clientX, clientY }, relativeToElement) => {\n    const rect = relativeToElement.getBoundingClientRect();\n    return {\n        x: clientX - rect.left,\n        y: clientY - rect.top,\n    };\n};\n\nexport const getPinchMidpoint = ([touch1, touch2]) => ({\n    x: (touch1.clientX + touch2.clientX) / 2,\n    y: (touch1.clientY + touch2.clientY) / 2,\n});\n\nexport const getPinchLength = ([touch1, touch2]) => (\n    Math.sqrt(Math.pow(touch1.clientY - touch2.clientY, 2) + Math.pow(touch1.clientX - touch2.clientX, 2))\n);\n\nexport function setRef(ref, value) {\n    if (typeof ref === 'function') {\n      ref(value);\n    } else if (ref) {\n      ref.current = value;\n    }\n};\n\nexport const isEqualDimensions = (dimensions1, dimensions2) => {\n    if (dimensions1 === dimensions2 === undefined) {\n        return true;\n    }\n    if (dimensions1 === undefined || dimensions2 === undefined) {\n        return false;\n    }\n    return dimensions1.width === dimensions2.width &&\n        dimensions1.height === dimensions2.height;\n}\n\nexport const getDimensions = object => {\n    if (object === undefined) {\n        return undefined;\n    }\n    return {\n        width: object.offsetWidth || object.width,\n        height: object.offsetHeight || object.height,\n    };\n}\n\nexport const getContainerDimensions = image => {\n    return {\n        width: image.parentNode.offsetWidth,\n        height: image.parentNode.offsetHeight,\n    };\n}\n\nexport const isEqualTransform = (transform1, transform2) => {\n    if (transform1 === transform2 === undefined) {\n        return true;\n    }\n    if (transform1 === undefined || transform2 === undefined) {\n        return false;\n    }\n    return round(transform1.top, 5) === round(transform2.top, 5) && \n        round(transform1.left, 5) === round(transform2.left, 5) && \n        round(transform1.scale, 5) === round(transform2.scale, 5);\n}\n\nexport const getAutofitScale = (containerDimensions, imageDimensions) => {\n    const { width: imageWidth, height: imageHeight } = imageDimensions || {};\n    if (! (imageWidth > 0 && imageHeight > 0) ) {\n        return 1;\n    }\n    return Math.min(\n        containerDimensions.width / imageWidth,\n        containerDimensions.height / imageHeight,\n        1\n    );\n}\n\nexport const getMinScale = createSelector(\n    state => state.containerDimensions,\n    state => state.imageDimensions,\n    (state, props) => props.minScale,\n    (containerDimensions, imageDimensions, minScaleProp) => \n        String(minScaleProp).toLowerCase() === 'auto'\n            ? getAutofitScale(containerDimensions, imageDimensions)\n            : minScaleProp || 1\n)\n\nfunction round(number, precision) {\n    if (precision && number !== null && number !== undefined) {\n      // Shift with exponential notation to avoid floating-point issues.\n      // See [MDN](https://mdn.io/round#Examples) for more details.\n      var pair = (String(number) + 'e').split('e'),\n          value = Math.round(pair[0] + 'e' + (+pair[1] + precision));\n\n      pair = (String(value) + 'e').split('e');\n      return +(pair[0] + 'e' + (+pair[1] - precision));\n    }\n    return Math.round(number);\n};\n\nexport const tryCancelEvent = event => {\n    if (event.cancelable === false) {\n        return false;\n    }\n\n    event.preventDefault();\n    return true;\n}\n\nfunction calculateOverflowLeft(left, scale, imageDimensions, containerDimensions) {\n    const overflow = negate(left);\n    return overflow > 0\n        ? overflow\n        : 0;\n}\n\nfunction calculateOverflowTop(top, scale, imageDimensions, containerDimensions) {\n    const overflow = negate(top);\n    return overflow > 0\n        ? overflow\n        : 0;\n}\n\nfunction calculateOverflowRight(left, scale, imageDimensions, containerDimensions) {\n    const overflow = Math.max(0, (scale * imageDimensions.width) - containerDimensions.width);\n    return overflow > 0\n        ? overflow - negate(left)\n        : 0;\n}\n\nfunction calculateOverflowBottom(top, scale, imageDimensions, containerDimensions) {\n    const overflow = Math.max(0, (scale * imageDimensions.height) - containerDimensions.height);\n    return overflow > 0\n        ? overflow - negate(top)\n        : 0;\n}\n\nexport const getImageOverflow = (top, left, scale, imageDimensions, containerDimensions) => {\n    return {\n        top: calculateOverflowTop(top, scale, imageDimensions, containerDimensions),\n        right: calculateOverflowRight(left, scale, imageDimensions, containerDimensions),\n        bottom: calculateOverflowBottom(top, scale, imageDimensions, containerDimensions),\n        left: calculateOverflowLeft(left, scale, imageDimensions, containerDimensions),\n    }\n}\n\nexport const getRequiredImagePosition = (position, scale, imageDimensions, containerDimensions) => {\n    const overflow = getImageOverflow()\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createSelector } from 'reselect';\nimport warning from 'warning';\n\nimport ZoomButtons from './ZoomButtons'\nimport DebugView from './StateDebugView';\n\nimport { snapToTarget, negate, constrain, getPinchLength, getPinchMidpoint, getRelativePosition, setRef, isEqualDimensions, getDimensions, getContainerDimensions, isEqualTransform, getAutofitScale, getMinScale, tryCancelEvent, getImageOverflow } from './Utils';\n\nconst OVERZOOM_TOLERANCE = 0.05;\nconst DOUBLE_TAP_THRESHOLD = 250;\nconst ANIMATION_SPEED = 0.1;\n\nconst isInitialized = (top, left, scale) => scale !== undefined && left !== undefined && top !== undefined;\n\nconst imageStyle = createSelector(\n    state => state.top,\n    state => state.left,\n    state => state.scale,\n    (top, left, scale) => {\n        const style = {\n            cursor: 'pointer',\n        };\n        return isInitialized(top, left, scale)\n            ? {\n                ...style,\n                transform: `translate3d(${left}px, ${top}px, 0) scale(${scale})`,\n                transformOrigin: '0 0',\n            } : style;\n    }\n);\n\nconst imageOverflow = createSelector(\n    state => state.top,\n    state => state.left,\n    state => state.scale,\n    state => state.imageDimensions,\n    state => state.containerDimensions,\n    (top, left, scale, imageDimensions, containerDimensions) => { \n        if (!isInitialized(top, left, scale)) {\n            return '';\n        } \n        return getImageOverflow(top, left, scale, imageDimensions, containerDimensions);\n    }\n);\n\nconst browserPanActions = createSelector(\n    imageOverflow,\n    (imageOverflow) => { \n        //Determine the panning directions where there is no image overflow and let\n        //the browser handle those directions (e.g., scroll viewport if possible).\n        //Need to replace 'pan-left pan-right' with 'pan-x', etc. otherwise \n        //it is rejected (o_O), therefore explicitly handle each combination.\n        const browserPanX = \n            !imageOverflow.left && !imageOverflow.right ? 'pan-x' //we can't pan the image horizontally, let the browser take it\n            : !imageOverflow.left ? 'pan-left'\n            : !imageOverflow.right ? 'pan-right'\n            : '';\n        const browserPanY = \n            !imageOverflow.top && !imageOverflow.bottom ? 'pan-y'\n            : !imageOverflow.top ? 'pan-up'\n            : !imageOverflow.bottom ? 'pan-down'\n            : '';\n        return [browserPanX, browserPanY].join(' ').trim();\n    }\n);\n\n//Ensure the image is not over-panned, and not over- or under-scaled.\n//These constraints must be checked when image changes, and when container is resized.\nexport default class PinchZoomPan extends React.Component {\n    state = {};\n\n    lastPointerUpTimeStamp; //enables detecting double-tap\n    lastPanPointerPosition; //helps determine how far to pan the image\n    lastPinchLength; //helps determine if we are pinching in or out\n    animation; //current animation handle\n    imageRef; //image element\n    isImageLoaded; //permits initial transform\n    originalOverscrollBehaviorY; //saves the original overscroll-behavior-y value while temporarily preventing pull down refresh\n\n    //event handlers\n    handleTouchStart = event => {\n        this.cancelAnimation();\n\n        const touches = event.touches;\n        if (touches.length === 2) {\n            this.lastPinchLength = getPinchLength(touches);\n            this.lastPanPointerPosition = null;\n        }\n        else if (touches.length === 1) {\n            this.lastPinchLength = null;\n            this.pointerDown(touches[0]);\n            tryCancelEvent(event); //suppress mouse events\n        }\n    }\n\n    handleTouchMove = event => {\n        const touches = event.touches;\n        if (touches.length === 2) {\n            this.pinchChange(touches);\n\n            //suppress viewport scaling on iOS\n            tryCancelEvent(event);\n        }\n        else if (touches.length === 1) {\n            const requestedPan = this.pan(touches[0]);\n\n            if (!this.controlOverscrollViaCss) {\n                //let the browser handling panning if we are at the edge of the image in \n                //both pan directions, or if we are primarily panning in one direction\n                //and are at the edge in that directino\n                const overflow = imageOverflow(this.state);\n                const hasOverflowX = (requestedPan.left && overflow.left > 0) || (requestedPan.right && overflow.right > 0);\n                const hasOverflowY = (requestedPan.up && overflow.top > 0) ||  (requestedPan.down && overflow.bottom > 0);\n\n                if (!hasOverflowX && !hasOverflowY) {\n                    //no overflow in both directions\n                    return;\n                }\n\n                const panX = requestedPan.left || requestedPan.right;\n                const panY = requestedPan.up || requestedPan.down;\n                if (panY > 2 * panX && !hasOverflowY) {\n                    //primarily panning up or down and no overflow in the Y direction\n                    return;\n                }\n\n                if (panX > 2 * panY && !hasOverflowX) {\n                    //primarily panning left or right and no overflow in the X direction\n                    return;\n                }\n\n                tryCancelEvent(event);\n            }\n        }\n    }\n\n    handleTouchEnd = event => {\n        this.cancelAnimation();\n        if (event.touches.length === 0 && event.changedTouches.length === 1) {\n            if (this.lastPointerUpTimeStamp && this.lastPointerUpTimeStamp + DOUBLE_TAP_THRESHOLD > event.timeStamp) {\n                const pointerPosition = getRelativePosition(event.changedTouches[0], this.imageRef.parentNode);\n                this.doubleClick(pointerPosition);\n            }\n            this.lastPointerUpTimeStamp = event.timeStamp;\n            tryCancelEvent(event); //suppress mouse events\n        }\n\n        //We allow transient +/-5% over-pinching.\n        //Animate the bounce back to constraints if applicable.\n        this.maybeAdjustCurrentTransform(ANIMATION_SPEED);\n        return;\n    }\n\n    handleMouseDown = event => {\n        this.cancelAnimation();\n        this.pointerDown(event);\n    }\n\n    handleMouseMove = event => {\n        if (!event.buttons) return null;\n        this.pan(event)\n    }\n\n    handleMouseDoubleClick = event => {\n        this.cancelAnimation();\n        var pointerPosition = getRelativePosition(event, this.imageRef.parentNode);\n        this.doubleClick(pointerPosition);\n    }\n\n    handleMouseWheel = event => {\n        this.cancelAnimation();\n        const point = getRelativePosition(event, this.imageRef.parentNode);\n        if (event.deltaY > 0) {\n            if (this.state.scale > getMinScale(this.state, this.props)) {\n                this.zoomOut(point);\n                tryCancelEvent(event);\n            }\n        } else if (event.deltaY < 0) {\n            if (this.state.scale < this.props.maxScale) {\n                this.zoomIn(point);\n                tryCancelEvent(event);\n            }\n        }\n    }\n\n    handleImageLoad = event => {\n        this.debug('handleImageLoad'); \n        this.isImageLoaded = true;\n        this.maybeHandleDimensionsChanged();\n\n        const { onLoad } = React.Children.only(this.props.children).props;\n        if (typeof onLoad === 'function') {\n            onLoad(event);\n        }\n    }\n\n    handleZoomInClick = () => {\n        this.cancelAnimation();\n        this.zoomIn();\n    }\n\n    handleZoomOutClick = () => {\n        this.cancelAnimation();\n        this.zoomOut();\n    }\n\n    handleWindowResize = () => this.maybeHandleDimensionsChanged();\n    \n    handleRefImage = ref => {\n        if (this.imageRef) {\n            this.cancelAnimation();\n            this.imageRef.removeEventListener('touchmove', this.handleTouchMove);\n        }\n\n        this.imageRef = ref;\n        if (ref) {\n            this.imageRef.addEventListener('touchmove', this.handleTouchMove, { passive: false });\n        }\n\n        const { ref: imageRefProp } = React.Children.only(this.props.children);\n        setRef(imageRefProp, ref);\n    };\n\n    //actions\n    pointerDown(clientPosition) {\n        this.lastPanPointerPosition = getRelativePosition(clientPosition, this.imageRef.parentNode);\n    }\n\n    pan(pointerClientPosition) {\n        if (!this.isTransformInitialized) {\n            return;\n        }\n\n        if (!this.lastPanPointerPosition) {\n            //if we were pinching and lifted a finger\n            this.pointerDown(pointerClientPosition);\n            return 0;\n        }\n\n        const pointerPosition = getRelativePosition(pointerClientPosition, this.imageRef.parentNode);\n        const translateX = pointerPosition.x - this.lastPanPointerPosition.x;\n        const translateY = pointerPosition.y - this.lastPanPointerPosition.y;\n        this.lastPanPointerPosition = pointerPosition;\n\n        const top = this.state.top + translateY;\n        const left = this.state.left + translateX;\n        this.constrainAndApplyTransform(top, left, this.state.scale, 0, 0);\n\n        return {\n            up: translateY > 0 ? translateY : 0,\n            down: translateY < 0 ? negate(translateY) : 0,\n            right: translateX < 0 ? negate(translateX) : 0,\n            left: translateX > 0 ? translateX : 0,\n        };\n    }\n\n    doubleClick(pointerPosition) {\n        if (String(this.props.doubleTapBehavior).toLowerCase() === 'zoom' && this.state.scale * (1 + OVERZOOM_TOLERANCE) < this.props.maxScale) {\n            this.zoomIn(pointerPosition, ANIMATION_SPEED, 0.3);\n        } else {\n            //reset\n            this.applyInitialTransform(ANIMATION_SPEED);\n        }\n    }\n\n    pinchChange(touches) {\n        const length = getPinchLength(touches);\n        const midpoint = getPinchMidpoint(touches);\n        const scale = this.lastPinchLength\n            ? this.state.scale * length / this.lastPinchLength //sometimes we get a touchchange before a touchstart when pinching\n            : this.state.scale;\n\n        this.zoom(scale, midpoint, OVERZOOM_TOLERANCE);\n\n        this.lastPinchLength = length;\n    }\n\n    zoomIn(midpoint, speed = 0, factor = 0.1) {\n        midpoint = midpoint || {\n            x: this.state.containerDimensions.width / 2,\n            y: this.state.containerDimensions.height / 2\n        };\n        this.zoom(this.state.scale * (1 + factor), midpoint, 0, speed);\n    }\n\n    zoomOut(midpoint) {\n        midpoint = midpoint || {\n            x: this.state.containerDimensions.width / 2,\n            y: this.state.containerDimensions.height / 2\n        };\n        this.zoom(this.state.scale * 0.9, midpoint, 0);\n    }\n\n    zoom(requestedScale, containerRelativePoint, tolerance, speed = 0) {\n        if (!this.isTransformInitialized) {\n            return;\n        }\n\n        const { scale, top, left } = this.state;\n        const imageRelativePoint = {\n            top: containerRelativePoint.y - top,\n            left: containerRelativePoint.x - left,\n        };\n\n        const nextScale = this.getConstrainedScale(requestedScale, tolerance);\n        const incrementalScalePercentage = (nextScale - scale) / scale;\n        const translateY = imageRelativePoint.top * incrementalScalePercentage;\n        const translateX = imageRelativePoint.left * incrementalScalePercentage;\n\n        const nextTop = top - translateY;\n        const nextLeft = left - translateX;\n\n        this.constrainAndApplyTransform(nextTop, nextLeft, nextScale, tolerance, speed);\n    }\n\n    //compare stored dimensions to actual dimensions; capture actual dimensions if different\n    maybeHandleDimensionsChanged() {\n        if (this.isImageReady) {\n            const containerDimensions = getContainerDimensions(this.imageRef);\n            const imageDimensions = getDimensions(this.imageRef);\n\n            if (!isEqualDimensions(containerDimensions, getDimensions(this.state.containerDimensions)) || \n                !isEqualDimensions(imageDimensions, getDimensions(this.state.imageDimensions))) {\n                this.cancelAnimation();\n\n                //capture new dimensions\n                this.setState({\n                        containerDimensions,\n                        imageDimensions\n                    }, \n                    () => {\n                        //When image loads and image dimensions are first established, apply initial transform.\n                        //If dimensions change, constraints change; current transform may need to be adjusted.\n                        //Transforms depend on state, so wait until state is updated.\n                        if (!this.isTransformInitialized) {\n                            this.applyInitialTransform();\n                        } else {\n                            this.maybeAdjustCurrentTransform();\n                        }\n                    }\n                );\n                this.debug(`Dimensions changed: Container: ${containerDimensions.width}, ${containerDimensions.height}, Image: ${imageDimensions.width}, ${imageDimensions.height}`);\n            }\n        }\n        else {\n            this.debug('Image not loaded');\n        }\n    }\n\n    //transformation methods\n\n    //Zooming and panning cause transform to be requested.\n    constrainAndApplyTransform(requestedTop, requestedLeft, requestedScale, tolerance, speed = 0) {\n        const requestedTransform = {\n            top: requestedTop,\n            left: requestedLeft,\n            scale: requestedScale\n        };\n        this.debug(`Requesting transform: left ${requestedLeft}, top ${requestedTop}, scale ${requestedScale}`);\n\n        //Correct the transform if needed to prevent overpanning and overzooming\n        const transform = this.getCorrectedTransform(requestedTransform, tolerance) || requestedTransform;\n        this.debug(`Applying transform: left ${transform.left}, top ${transform.top}, scale ${transform.scale}`);\n\n        if (isEqualTransform(transform, this.state)) {\n            return false;\n        }\n\n        this.applyTransform(transform, speed);\n        return true;\n    }\n\n    applyTransform({ top, left, scale }, speed) {\n        if (speed > 0) {\n            const frame = () => {\n                const translateY = top - this.state.top;\n                const translateX = left - this.state.left;\n                const translateScale = scale - this.state.scale;\n\n                const nextTransform = {\n                    top: snapToTarget(this.state.top + (speed * translateY), top, 1),\n                    left: snapToTarget(this.state.left + (speed * translateX), left, 1),\n                    scale: snapToTarget(this.state.scale + (speed * translateScale), scale, 0.001),\n                };\n\n                //animation runs until we reach the target\n                if (!isEqualTransform(nextTransform, this.state)) {\n                    this.setState(nextTransform, () => this.animation = requestAnimationFrame(frame));\n                }\n            };\n            this.animation = requestAnimationFrame(frame);\n        } else {\n            this.setState({\n                top,\n                left,\n                scale,\n            });\n        }\n    }\n\n    //Returns constrained scale when requested scale is outside min/max with tolerance, otherwise returns requested scale\n    getConstrainedScale(requestedScale, tolerance) {\n        const lowerBoundFactor = 1.0 - tolerance;\n        const upperBoundFactor = 1.0 + tolerance;\n\n        return constrain(\n            getMinScale(this.state, this.props) * lowerBoundFactor,\n            this.props.maxScale * upperBoundFactor,\n            requestedScale\n        );\n    }\n\n    //Returns constrained transform when requested transform is outside constraints with tolerance, otherwise returns null\n    getCorrectedTransform(requestedTransform, tolerance) {\n        const scale = this.getConstrainedScale(requestedTransform.scale, tolerance);\n        \n        //get dimensions by which scaled image overflows container\n        const negativeSpace = this.calculateNegativeSpace(scale);\n        const overflow = {\n            width: Math.max(0, negate(negativeSpace.width)),\n            height: Math.max(0, negate(negativeSpace.height)),\n        };\n\n        //if image overflows container, prevent moving by more than the overflow\n        //example: overflow.height = 100, tolerance = 0.05 => top is constrained between -105 and +5\n        const { position, initialTop, initialLeft } = this.props;\n        const { imageDimensions, containerDimensions } = this.state;\n        const upperBoundFactor = 1.0 + tolerance;\n        const top = \n            overflow.height ? constrain(negate(overflow.height) * upperBoundFactor, overflow.height * upperBoundFactor - overflow.height, requestedTransform.top)\n            : position === 'center' ? (containerDimensions.height - (imageDimensions.height * scale)) / 2\n            : initialTop || 0;\n\n        const left = \n            overflow.width ? constrain(negate(overflow.width) * upperBoundFactor, overflow.width * upperBoundFactor - overflow.width, requestedTransform.left)\n            : position === 'center' ? (containerDimensions.width - (imageDimensions.width * scale)) / 2\n            : initialLeft || 0;\n\n        const constrainedTransform = {\n            top,\n            left,\n            scale\n        };\n\n        return isEqualTransform(constrainedTransform, requestedTransform)\n            ? null\n            : constrainedTransform;\n    }\n\n    //Ensure current transform is within constraints\n    maybeAdjustCurrentTransform(speed = 0) {\n        let correctedTransform;\n        if (correctedTransform = this.getCorrectedTransform(this.state, 0)) {\n            this.applyTransform(correctedTransform, speed);\n        }\n    }\n\n    applyInitialTransform(speed = 0) {\n        const { imageDimensions, containerDimensions } = this.state;\n        const { position, initialScale, maxScale, initialTop, initialLeft } = this.props;\n\n        const scale = String(initialScale).toLowerCase() === 'auto'\n            ? getAutofitScale(containerDimensions, imageDimensions)\n            : initialScale;\n            const minScale = getMinScale(this.state, this.props);\n\n        if (minScale > maxScale) {\n            warning(false, 'minScale cannot exceed maxScale.');\n            return;\n        }\n        if (scale < minScale || scale > maxScale) {\n            warning(false, 'initialScale must be between minScale and maxScale.');\n            return;\n        }\n\n        let initialPosition;\n        if (position === 'center') {\n            warning(initialTop === undefined, 'initialTop prop should not be supplied with position=center. It was ignored.');\n            warning(initialLeft === undefined, 'initialLeft prop should not be supplied with position=center. It was ignored.');\n            initialPosition = {\n                top: (containerDimensions.width - (imageDimensions.width * scale)) / 2,\n                left: (containerDimensions.height - (imageDimensions.height * scale)) / 2,\n            };\n        } else {\n            initialPosition = {\n                top: initialTop || 0,\n                left: initialLeft || 0,\n            };\n        }\n\n        this.constrainAndApplyTransform(initialPosition.top, initialPosition.left, scale, 0, speed);\n    }\n\n    //lifecycle methods\n    render() {\n        const childElement = React.Children.only(this.props.children);\n        const { zoomButtons, maxScale, debug } = this.props;\n        const { scale } = this.state;\n\n        const touchAction = this.controlOverscrollViaCss\n            ? browserPanActions(this.state) || 'none'\n            : undefined;\n\n        const containerStyle = {\n            width: '100%', \n            height: '100%',\n            overflow: 'hidden',\n            touchAction: touchAction,\n        };\n\n        return (\n            <div style={containerStyle}>\n                {zoomButtons && this.isImageReady && this.isTransformInitialized && <ZoomButtons \n                    scale={scale} \n                    minScale={getMinScale(this.state, this.props)} \n                    maxScale={maxScale} \n                    onZoomOutClick={this.handleZoomOutClick} \n                    onZoomInClick={this.handleZoomInClick} \n                />}\n                {debug && <DebugView {...this.state} overflow={imageOverflow(this.state)} />}\n                {React.cloneElement(childElement, {\n                    onTouchStart: this.handleTouchStart,\n                    onTouchEnd: this.handleTouchEnd,\n                    onMouseDown: this.handleMouseDown,\n                    onMouseMove: this.handleMouseMove,\n                    onDoubleClick: this.handleMouseDoubleClick,\n                    onWheel: this.handleMouseWheel,\n                    onDragStart: tryCancelEvent,\n                    onLoad: this.handleImageLoad,\n                    onContextMenu: tryCancelEvent,\n                    ref: this.handleRefImage,\n                    style: imageStyle(this.state)\n                })}\n            </div>\n        );\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState) {\n        if (nextProps.initialTop !== prevState.initialTop ||\n            nextProps.initialLeft !== prevState.initialLeft ||\n            nextProps.initialScale !== prevState.initialScale || \n            nextProps.position !== prevState.position) {\n            return {\n                position: nextProps.position,\n                initialScale: nextProps.initialScale,\n                initialTop: nextProps.initialTop,\n                initialLeft: nextProps.initialLeft,\n            };\n        } else {\n            return null;\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener(\"resize\", this.handleWindowResize);\n        this.maybeHandleDimensionsChanged();\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        this.maybeHandleDimensionsChanged();\n    }\n\n    componentWillUnmount() {\n        this.cancelAnimation();\n        this.imageRef.removeEventListener('touchmove', this.handleTouchMove);\n        window.removeEventListener('resize', this.handleWindowResize);\n    }\n\n    get isImageReady() {\n        return this.isImageLoaded || (this.imageRef && this.imageRef.tagName !== 'IMG');\n    }\n\n    get isTransformInitialized() {\n        return isInitialized(this.state.top, this.state.left, this.state.scale);\n    }\n\n    get controlOverscrollViaCss() {\n        return window.CSS && window.CSS.supports('touch-action', 'pan-up');\n    }\n\n    calculateNegativeSpace(scale) {\n        //get difference in dimension between container and scaled image\n        const { containerDimensions, imageDimensions } = this.state;\n        const width = containerDimensions.width - (scale * imageDimensions.width);\n        const height = containerDimensions.height - (scale * imageDimensions.height);\n        return {\n            width,\n            height\n        };\n    }\n\n    cancelAnimation() {\n        if (this.animation) {\n            cancelAnimationFrame(this.animation);\n        }\n    }\n\n    debug(message) {\n        if (this.props.debug) {    \n            console.log(message);\n        }\n    }\n}\n\nPinchZoomPan.defaultProps = {\n    initialScale: 'auto',\n    minScale: 'auto',\n    maxScale: 1,\n    position: 'topLeft',\n    zoomButtons: true,\n    doubleTapBehavior: 'reset'\n};\n\nPinchZoomPan.propTypes = {\n    children: PropTypes.element.isRequired,\n    initialScale: PropTypes.oneOfType([\n        PropTypes.number,\n        PropTypes.string\n    ]),\n    minScale: PropTypes.oneOfType([\n        PropTypes.number,\n        PropTypes.string\n    ]),\n    maxScale: PropTypes.number,\n    position: PropTypes.oneOf(['topLeft', 'center']),\n    zoomButtons: PropTypes.bool,\n    doubleTapBehavior: PropTypes.oneOf(['reset', 'zoom']),\n    initialTop: PropTypes.number,\n    initialLeft: PropTypes.number,\n};\n","import { dbService, storageService } from \"fbase\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport PinchZoomPan from \"PinchZoomPan\";\r\nimport Hotkeys from \"react-hot-keys\";\r\nimport { set } from \"lodash\";\r\n\r\n\r\nexport default ({userObj,isAndroid,penType}) => {\r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    // const [Csubmits,setCsubmits]= useState([]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const canvasRef3 = useRef();\r\n    const [drawSetting,setDrawSetting]=useState({\r\n       \r\n        brushRadius:1,\r\n        lazyRadius:0,\r\n       \r\n        \r\n\r\n\r\n    })\r\n    const [listst,setListst]= useState([])\r\n    const [listst2,setListst2]= useState([])\r\n    const [who,setWho]=useState(0)\r\n    const [sotyIndex,setSotyIndex]=useState(0);\r\n    const [yoshinariIndex,setYoshinariIndex]=useState(0);\r\n    const [sotyUrlarr,setSotyUrlarr]=useState([]);\r\n    const [tempUrlarr,setTempUrlarr]=useState([]);\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n    const [randomOn,setRandomOn]=useState(false)\r\n    const [extendOn,setExtendOn]=useState(false)\r\n    const [drawingOn,setDrawingOn]=useState(false)\r\n    const [offOn,setOffOn]=useState(false)\r\n    const [min,setMin]=useState(0);\r\n    const [sec,setSec]=useState(0);\r\n    const [croquisTime,setCroquisTime]=useState(300);\r\n    const time=useRef(croquisTime);\r\n    const timeId=useRef(null);\r\n    const [customUrl,setCustomUrl]=useState(\"\");\r\n\r\n   // Inside the React component of the Croquis Tool page\r\nuseEffect(() => {\r\n  function handleMessage(event) {\r\n    if (event.data && event.data.action === 'updateCustomUrl') {\r\n      console.log(\"됨?>\")\r\n      setCustomUrl(event.data.customUrl);\r\n    }\r\n  }\r\n\r\n  // Add event listener to handle postMessage messages\r\n  window.addEventListener('message', handleMessage);\r\n\r\n  // Clean up the event listener when component unmounts\r\n  return () => {\r\n    window.removeEventListener('message', handleMessage);\r\n  };\r\n}, []);\r\n\r\n    function extractNumberFromURL(url) {\r\n      // if (url === \"\") {\r\n      //   return url;\r\n      // }\r\n      if (!url.includes(\"pinterest\")) {\r\n        return \"\";\r\n      }\r\n      const parts = url.split(\"/\");\r\n      const numberPart = parts[parts.length - 2];\r\n    \r\n      return numberPart;\r\n    }\r\n    \r\n    function sexagesimal(i) {\r\n      if(i <= 9){\r\n          return \"0\"+i;\r\n      }else{\r\n          return i;\r\n      }\r\n  }\r\n    useEffect(()=> {\r\n      if(localStorage.getItem(2) != null){\r\n        setCroquisTime(JSON.parse(localStorage.getItem(2)))\r\n      }\r\n      \r\n      setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n        timeId.current= setInterval(()=>{\r\n          \r\n            setMin(parseInt(time.current/60));\r\n            setSec(time.current % 60);\r\n            time.current -= 1;\r\n        },1000);\r\n        return()=> clearInterval(timeId.current);\r\n    },[]);\r\n\r\n    useEffect(()=> {\r\n        if(time.current<=-1){\r\n          if(randomOn){\r\n            refreshAndSubmit();\r\n            randomIndex()\r\n          }\r\n\r\n            \r\n            \r\n        }\r\n    },[sec]);\r\n\r\n    const randomIndex= () => {\r\n      setSotyIndex(Math.floor(Math.random()* sotyUrlarr.length) + 1)\r\n  };\r\n\r\n    useEffect(()=> {\r\n      if(localStorage.getItem(\"sotyset\")==undefined){\r\n        localStorage.setItem(\"sotyset\", false)\r\n      }else{\r\n        setDrawingOn(JSON.parse(localStorage.getItem(\"sotyset\")))\r\n      }\r\n      let whois = 0\r\n      if(localStorage.getItem(\"sotywhoset\")==undefined){\r\n        localStorage.setItem(\"sotywhoset\", 0)\r\n      }else{\r\n        setWho(JSON.parse(localStorage.getItem(\"sotywhoset\")))\r\n        whois=JSON.parse(localStorage.getItem(\"sotywhoset\"))\r\n      }\r\n\r\n        dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n            if (doc.exists) {\r\n                setDrawSetting({\r\n                    brushRadius:doc.data().brushRadius,\r\n                    lazyRadius:doc.data().lazyRadius,\r\n                    sotyIndex:doc.data().sotyIndex,\r\n                    yoshinariIndex:doc.data().yoshinariIndex,\r\n                  })\r\n\r\n                    setSotyIndex(doc.data().sotyIndex)\r\n                    setYoshinariIndex(doc.data().yoshinariIndex)\r\n                console.log(doc.data())\r\n                \r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"No such setting document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"Error getting document:\", error);\r\n             \r\n        });\r\n\r\n\r\n        dbService.doc(`RefDB/soty`).get().then((doc) => {\r\n       if (doc.exists) {\r\n           //console.log(\"Document data:\", doc.data().refUrl);\r\n           //setRandomPinNum(doc.data().refUrl);\r\n           //console.log(\"doc\",doc.data().refUrl)\r\n           const urlarr=doc.data().refUrl;\r\n           \r\n           if(whois==0){\r\n            setSotyUrlarr(urlarr);\r\n           }else{\r\n            setTempUrlarr(urlarr);\r\n            console.log(\"soty is temp\")\r\n           }\r\n           \r\n           \r\n           \r\n       } else {\r\n           // doc.data() will be undefined in this case\r\n           console.log(\"No such document!\");\r\n       }\r\n   }).catch((error) => {\r\n       console.log(\"Error getting document:\", error);\r\n        \r\n   });\r\n\r\n\r\n   \r\n        dbService.doc(`RefDB/refStrings2`).get().then((doc) => {\r\n       if (doc.exists) {\r\n           //console.log(\"Document data:\", doc.data().refUrl);\r\n           //setRandomPinNum(doc.data().refUrl);\r\n          //  console.log(\"doc\",doc.data().refUrl)\r\n           const urlarr=doc.data().yoshinari;\r\n          //  console.log(\"doc\",urlarr)\r\n           \r\n           if(whois==1){\r\n            setSotyUrlarr(urlarr);\r\n           }else{\r\n            setTempUrlarr(urlarr);\r\n            console.log(\"you is temp\")\r\n           }\r\n          \r\n           \r\n           \r\n       } else {\r\n           // doc.data() will be undefined in this case\r\n           console.log(\"No such document!\");\r\n       }\r\n   }).catch((error) => {\r\n       console.log(\"Error getting document:\", error);\r\n        \r\n   });\r\n\r\n\r\n\r\n    },[]);\r\n            \r\nconst onclickSetwho=()=>{ \r\n  if(who==0){\r\n    localStorage.setItem(\"sotywhoset\", 1)\r\n    \r\n  }else{\r\n    localStorage.setItem(\"sotywhoset\", 0)\r\n    \r\n  }\r\n  setWho(who==0?1:0)\r\n  \r\n  const temp = sotyUrlarr\r\n  setSotyUrlarr(tempUrlarr)\r\n  setTempUrlarr(temp)\r\n}\r\n const ongetUrl= async(event) => {\r\n        \r\n        \r\n        // const listRef = ref(storageService, \"soty/\");\r\n\r\n        // Find all the prefixes and items.\r\n        storageService.ref().child(\"soty/\").listAll()\r\n        .then((res) => {\r\n            res.prefixes.forEach((folderRef) => {\r\n            // All the prefixes under listRef.\r\n            // You may call listAll() recursively on them.\r\n            });\r\n            res.items.forEach(async(itemRef) => {\r\n            // All the items under listRef.\r\n            let urls= await itemRef.getDownloadURL().then(function(url) {\r\n                return url;\r\n              }).catch(function(error) {\r\n                console.log(error)\r\n                // Handle any errors here\r\n              });\r\n              \r\n              setListst(prevState=>[...prevState,urls])\r\n              \r\n            \r\n            \r\n            });\r\n        }).catch((error) => {\r\n            console.log(error)\r\n            // Uh-oh, an error occurred!\r\n        });\r\n\r\n\r\n        // const res = await storageService.ref().child(\"soty/\").listAll()\r\n        \r\n        \r\n        //        res.items.forEach(async(itemref)=>{\r\n        //         list.push(await itemref.getDownloadURL())\r\n                \r\n        //     })\r\n        var set = new Set(listst);\r\n         console.log(set)\r\n         const arr = [...set]\r\n         console.log(arr) \r\n         setListst2(arr);\r\n         \r\n\r\n    }\r\n    const submitsoty =()=>{ \r\n        \r\n            console.log(listst2)\r\n            const pinDocRef= dbService.doc(`RefDB/soty`);\r\n            pinDocRef.update({\r\n            \r\n                refUrl:listst2})\r\n         \r\n    }\r\n    \r\n    const refreshAndSubmit =()=>{\r\n      if(randomOn){\r\n        time.current=croquisTime;}\r\n\r\n           \r\n        dbService.collection(\"usersetting\").doc(userObj.uid).update(\r\n            {\r\n            \"sotyIndex\":sotyIndex,\r\n            }\r\n        );\r\n            \r\n            const data = canvasRef3.current.getSaveData();\r\n            const dataUrl=canvasRef3.current.getDataURL();\r\n            canvasRef3.current.clear();\r\n        \r\n            if(customUrl!=\"\"){\r\n              \r\n              dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:0,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:extractNumberFromURL(customUrl),\r\n                sotyIndex:sotyIndex,\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n            pinDocRef.update({\r\n            refUrl2:firebase.firestore.FieldValue.arrayUnion(extractNumberFromURL(customUrl))\r\n        });\r\n            }else{\r\n              dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:0,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:sotyUrlarr[sotyIndex],\r\n                sotyIndex:sotyIndex,\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            }\r\n          \r\n            setCustomUrl(\"\")\r\n            setCsubmit(\"\"); \r\n            if(randomOn){\r\n              \r\n              randomIndex()\r\n            }\r\n            //clearInterval(timeId.current);\r\n    }\r\n   \r\n\r\n   \r\n\r\n\r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n     \r\n        refreshAndSubmit();\r\n     };\r\n     \r\n     \r\n\r\n\r\n     const onClearClick= () => {\r\n      const ok = window.confirm(\"wanna clear this?\")\r\n      if(ok){\r\n        canvasRef3.current.clear();\r\n          \r\n      }\r\n    };\r\n    const onUndoClick= () => {\r\n      canvasRef3.current.undo();\r\n  };\r\n   const onEraseClick= () => {\r\n      setBrushColor(\"erase\")\r\n      \r\n  };\r\n   const onBrushClick= () => {\r\n      setBrushColor(\"#444\")\r\n      \r\n  };\r\n  const onShadowClick= () => {\r\n    setBrushColor(\"shadow\")\r\n    \r\n};\r\n  const onPrePageClick= (event) => {\r\n    event.preventDefault();\r\n      if(sotyIndex>0){\r\n      setSotyIndex(pre=>pre-1);\r\n      }\r\n  };\r\n   const onForPageClick= (event) => {\r\n    event.preventDefault();\r\n    if(sotyIndex<sotyUrlarr.length-1){\r\n    setSotyIndex(pre=>pre+1);\r\n    }\r\n    \r\n  };\r\n  const onChangeTime = (event)=> {\r\n    const {\r\n        target:{value},\r\n    }=event;\r\n    setCroquisTime(value);\r\n    localStorage.setItem(2, value)\r\n  }\r\n\r\n  return(\r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x,a,s\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        if (keyName == \"ctrl+z\") { onUndoClick(); }\r\n        if (keyName == \"c\") {\r\n          if (brushColor != \"erase\") { onEraseClick(); }\r\n          else if (brushColor == \"erase\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"a\") {\r\n          if(sotyIndex>0){\r\n            setSotyIndex(pre=>pre-1);\r\n            }\r\n        }\r\n        if (keyName == \"s\") {\r\n          if(sotyIndex<sotyUrlarr.length-1){\r\n            setSotyIndex(pre=>pre+1);\r\n            }\r\n        }\r\n      } }\r\n    ></Hotkeys>\r\n    <div>\r\n      {randomOn ?(<><div style={{\r\n          position: 'absolute',\r\n          left: '50%',\r\n          transform: 'translateX(-50%)',\r\n          width: '70px',\r\n          textAlign: 'center',\r\n\r\n          background: 'linear-gradient(to left,#FFC365 ' + (min * 60 + sec) * 100 / croquisTime + '%,#E8E8E8 ' + (min * 60 + sec) * 100 / croquisTime + '%)'\r\n        }}>\r\n          {min}: {sexagesimal(sec)}\r\n        </div></>):(<></>)}\r\n      \r\n\r\n        <div style={{ float: 'right' }}>\r\n\r\n          {/* <button onClick={ongetUrl}>geturls</button>\r\n    <button onClick={submitsoty}>submitsoty</button>\r\n     */}\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        <div>\r\n\r\n\r\n          <label>pages:</label>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            max={sotyUrlarr ? sotyUrlarr.length - 1 : 0}\r\n            style={{ width: \"40px\" }}\r\n            value={sotyIndex}\r\n            onChange={e => {\r\n              setSotyIndex(e.target.value);\r\n              setPinreload(pinReload + 1);\r\n            } } />\r\n            <button onClick={onPrePageClick}>{\"<\"}</button>\r\n            <button onClick={onForPageClick}>{\">\"}</button>\r\n            <button onClick={e=>{setRandomOn(pre=>!pre);time.current=croquisTime}}>random {randomOn?(<>on</>):(<>off</>)}</button>\r\n            <button onClick={e=>{setExtendOn(pre=>!pre)}}>Extend</button>\r\n            <button onClick={e=>{setDrawingOn(pre=>!pre);console.log(\"온\",drawingOn);setCustomUrl(\"\");localStorage.setItem(\"sotyset\", !drawingOn)}}>Drawing Only</button>\r\n            <button onClick={e=>{setOffOn(pre=>!pre)}}>Ex draw</button>\r\n            <button onClick={onclickSetwho}>{(who==0)?(<>soty</>):(<>you</>)}</button>\r\n            <div style={{ float: 'right' }}>\r\n            {randomOn?(<>\r\n              \r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Time\" />\r\n              Set Time\r\n\r\n            </>):(<></>)}</div>\r\n       \r\n\r\n        </div>\r\n        \r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left' }}>\r\n          {/* <iframe key={pinReload} src={\"https://www.youtube.com/embed/videoseries?list=\"+youtubeUrls[youtubeUrlIndex]+\"&cc_load_policy=1&cc_lang_pref=ko\"} height={450} width={450} frameBorder={0} scrolling=\"no\" ></iframe> */}\r\n            {isAndroid?(<>\r\n              <div style={{ width: '600px', height: '450px' }}>\r\n            <PinchZoomPan>\r\n              <img alt='Test Image' src={(typeof(sotyUrlarr[sotyIndex])==\"string\")&&(sotyUrlarr[sotyIndex].startsWith(\"pot.com/o/\")) ? \"https://firebasestorage.googleapis.com/v0/b/croquistool.apps\" + sotyUrlarr[sotyIndex] : sotyUrlarr[sotyIndex]} />\r\n            </PinchZoomPan>\r\n          </div>\r\n            </>):(<>\r\n              {drawingOn?(<><div style={{ width: '1px', height: '770px' }}><PinchZoomPan>\r\n              <img alt='Test Image' src={(typeof(sotyUrlarr[sotyIndex])==\"string\")&&(sotyUrlarr[sotyIndex].startsWith(\"pot.com/o/\")) ? \"https://firebasestorage.googleapis.com/v0/b/croquistool.apps\" + sotyUrlarr[sotyIndex] : sotyUrlarr[sotyIndex]} />\r\n            </PinchZoomPan></div></>):(<>\r\n            {extendOn?(<>\r\n            <div style={{ width: '850px', height: '770px' }}><PinchZoomPan>\r\n              <img alt='Test Image' src={(typeof(sotyUrlarr[sotyIndex])==\"string\")&&(sotyUrlarr[sotyIndex].startsWith(\"pot.com/o/\")) ? \"https://firebasestorage.googleapis.com/v0/b/croquistool.apps\" + sotyUrlarr[sotyIndex] : sotyUrlarr[sotyIndex]} />\r\n            </PinchZoomPan></div>\r\n              </>):(<><div style={{ width: '450px', height: '770px' }}><PinchZoomPan>\r\n              <img alt='Test Image' src={(typeof(sotyUrlarr[sotyIndex])==\"string\")&&(sotyUrlarr[sotyIndex].startsWith(\"pot.com/o/\")) ? \"https://firebasestorage.googleapis.com/v0/b/croquistool.apps\" + sotyUrlarr[sotyIndex] : sotyUrlarr[sotyIndex]} />\r\n            </PinchZoomPan></div>\r\n                </>)}\r\n                </>)}\r\n            \r\n          \r\n          </>)}\r\n       \r\n        \r\n        </div>\r\n\r\n        <div style={{ float: 'left' }}>\r\n          <div>\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n            {brushColor==\"erase\" ? (<>\r\n                <label>Erase Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Brush Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {isAndroid?(<><button style={{padding:\"15px\"}} onClick={onUndoClick}>◀</button></>):(<><button onClick={onUndoClick}>◀</button></>)}\r\n            </div>\r\n\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>  \r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n\r\n              <button onClick={onSubmit}>Upload Drawing</button>\r\n            </div>\r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              \r\n              enablePanAndZoom= {true}\r\n              canvasWidth={(offOn?(1000):(600))}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef3}\r\n              brushColor={brushColor} \r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]}/>\r\n          </div>\r\n          \r\n        </div>\r\n        {drawingOn&&<> <input\r\n            \r\n            style={{ width: \"240px\" }}\r\n            value={customUrl}\r\n            onChange={e => {\r\n              setCustomUrl(e.target.value);\r\n              \r\n            } } /></>}\r\n       \r\n\r\n\r\n      </div></>\r\n  )\r\n };","// videojs-framebyframe-plugin\nimport videojs from \"video.js\";\nvar VjsButton = videojs.getComponent('Button');\nvar FBFButton = videojs.extend(VjsButton, {\n    constructor: function(player, options) {\n        VjsButton.call(this, player, options);\n        this.player = player;\n        this.frameTime = 1/options.fps;\n        this.step_size = options.value;\n        this.on('click', this.onClick);\n    },\n\n    onClick: function() {\n        // Start by pausing the player\n        this.player.pause();\n        // Calculate movement distance\n        var dist = this.frameTime * this.step_size;\n        this.player.currentTime(this.player.currentTime() + dist);\n    },\n});\n\nfunction framebyframe(options) {\n    var player = this,\n        frameTime = 1 / 30; // assume 30 fps\n\n    player.ready(function() {\n        //console.log('player', player);\n        //console.log('player.controlBar.el()', player.controlBar.el());\n        //let fsc = document.getElementsByClassName('vjs-fullscreen-control');\n        //console.log('fsc', fsc);\n        options.steps.forEach(function(opt) {\n            var b = player.controlBar.addChild(\n                new FBFButton(player, {\n                    el: videojs.dom.createEl(\n                        'button',\n                        {\n                            className: 'vjs-res-button vjs-control',\n                            //innerHTML: '<div class=\"vjs-control-content\" style=\"font-size: 11px; line-height: 28px;\"><span class=\"vjs-fbf\">' + opt.text + '</span></div>'\n                            innerHTML: '<div class=\"vjs-control-content\"><span class=\"vjs-fbf\">' + opt.text + '</span></div>'\n                        },\n                        {\n                            role: 'button'\n                        }\n                    ),\n                    value: opt.step,\n                    fps: options.fps,\n                }),\n            {}, opt.index);\n            //console.log('b', b);\n            //player.controlBar.el().insertBefore(b.el(), fsc.el_);\n            //player.controlBar.el().insertBefore(b.el(), player.controlBar.fullscreenToggle.el());\n            //console.log('children', player.controlBar);\n            // player.controlBar.el().insertBefore(b.el(), player.controlBar.seekBack.el());\n        });\n    });\n}\n\n// Cross-compatibility for Video.js 5 and 6.\n\n\n\nexport default framebyframe","// taken from https://github.com/videojs/video.js/blob/master/docs/guides/react.md\r\nimport React from \"react\";\r\nimport videojs from \"video.js\";\r\nimport \"video.js/dist/video-js.css\"\r\n//import '@douglassllc/videojs-framebyframe/videojs.framebyframe.css'\r\n//import 'video.js/dist/video-js.css'\r\n// videojs-framebyframe-plugin\r\n//import \"@douglassllc/videojs-framebyframe\"\r\n// videojs-framebyframe-plugin\r\n import \"./videojs-skin.css\"\r\n import framebyframe from './videojs-framebyframe/videojs.framebyframe.js'\r\n// import './videojs-framebyframe/videojs.framebyframe.css'\r\n\r\n\r\n \r\n\r\n \r\nexport default class VideoPlayer extends React.Component {\r\n  componentDidMount() {\r\n    // instantiate video.js\r\n    var registerPlugin = videojs.registerPlugin || videojs.plugin;\r\n    registerPlugin('framebyframe', framebyframe);\r\n    this.player = videojs(this.videoNode, this.props, function onPlayerReady() {\r\n      console.log(\"onPlayerReady\", this);\r\n    });\r\n    this.player.addClass('vjs-matrix');\r\n    \r\n\r\n    // if (this.videoNode) {\r\n    //   this.videoNode.setAttribute(\"webkit-playsinline\", true);\r\n    //   this.videoNode.setAttribute(\"playsinline\", true);\r\n    // }\r\n  }; \r\n\r\n  // destroy player on unmount\r\n  componentWillUnmount() {\r\n    if (this.player) {\r\n      this.player.dispose();\r\n    }\r\n  };\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.videoUrl !== this.props.videoUrl) {\r\n      this.player.dispose();\r\n      const videoJsOptions = {\r\n        autoplay: true,\r\n        controls: true,\r\n        sources: [\r\n          {\r\n            src: this.props.videoUrl,\r\n            type: \"video/mp4\",\r\n          },\r\n        ],\r\n      };\r\n      this.player = videojs(\r\n        this.videoNode,\r\n        videoJsOptions,\r\n        this.props,\r\n        function onPlayerReady() {\r\n          console.log(\"onPlayerReady\", this);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // wrap the player in a div with a `data-vjs-player` attribute\r\n  // so videojs won't create additional wrapper in the DOM\r\n  // see https://github.com/videojs/video.js/pull/3856\r\n  render() {\r\n    return (\r\n      <div data-vjs-player>\r\n        <video ref={node => (this.videoNode = node)} className=\"video-js\" />\r\n      </div>\r\n    );\r\n  };\r\n};","import { dbService,storageService } from \"fbase\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\nimport Videojs from \"./video.js\";\r\n// import tagss from \"./tags.json\";\r\nimport testPost from \"./testpost.json\";\r\nimport \"videojs-hotkeys\";\r\n\r\n// https://www.sakugabooru.com/tag.json?limit=0\r\n\r\nconst people = [\r\n  { id: 14391, name: \"ag\", count: 0, type: 0, ambiguous: false },\r\n  { id: 21666, name: \"ab\", count: 0, type: 0, ambiguous: false },\r\n];\r\n\r\nexport default ({ userObj, isAndroid,penType }) => {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [videoUrl, setVideoUrl] = useState(\"\");\r\n  const [videoPage, setVideoPage] = useState(1);\r\n  const [searchHeight, setSearchHeight] = useState(0);\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [jsons, setJsons] = useState([]);\r\n  const [booruResults, setBooruResults] = useState([]);\r\n  const [booruTag, setBooruTag] = useState([]);\r\n  const [booruUrl, setBooruUrl] = useState(\"\");\r\n  const [videoInfo, setVideoInfo] = useState([]);\r\n  const [bookmarkLists, setBookmarkLists] = useState([]);\r\n  const [randomLists, setRandomLists] = useState([]);\r\n  const [videowidth, setVideowidth] = useState(450);\r\n  const [bookmarkListRefresh, setBookmarkListRefresh] = useState(true);\r\n  const [bookmarkListOn, setBookmarkListOn] = useState(false);\r\n  const [herokuOn, setHerokuOn] = useState(true);\r\n  const [consolog, setConsolog] = useState(\"\");\r\n  const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n  const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n  const handleChange = (e) => {\r\n    setSearchTerm(e.target.value);\r\n    setSearchHeight(200);\r\n  };\r\n  useEffect(() => {\r\n    const str = searchTerm.replace(\" \", \"_\");\r\n    \r\n    const results = jsons.filter((tagg) =>\r\n  tagg[\"name\"].toLowerCase().includes(str.toLowerCase())\r\n);\r\nsetConsolog(\"load tag!\")\r\n    // const results = jsons.filter((tagg) =>\r\n    //     tagg[\"name\"].toLowerCase().includes(str)\r\n    //  );\r\n\r\n//     e.filter((tagg) =>\r\n//     tagg[\"name\"].toLowerCase().includes(str)\r\n//  );\r\n  //  });\r\n    // const results = tagss.filter((tagg) =>\r\n    //   tagg[\"name\"].toLowerCase().includes(str)\r\n    // );\r\n    // console.log(typeof(searchTerm))\r\n    // console.log(results)\r\n    if (searchTerm != \"\") {\r\n      setSearchResults(results);\r\n    }\r\n  }, [searchTerm]);\r\n\r\n  const [Csubmit, setCsubmit] = useState(\"\");\r\n  const [Csubmits, setCsubmits] = useState([]);\r\n  const [pinReload, setPinreload] = useState(0);\r\n  const [pinNum, setPinNum] = useState(0);\r\n  const canvasRef = useRef();\r\n  const [drawSetting, setDrawSetting] = useState({\r\n    brushRadius: 0.8,\r\n    lazyRadius: 0,\r\n  });\r\n  const [youtubeUrlIndex, setYoutubeUrlIndex] = useState(0);\r\n  const [youtubeUrls, setYoutubeUrls] = useState([\r\n    \"PLtG4P3lq8RHGuMuprDarMz_Y9Fbw_d2ws\",\r\n    \"PLTY4AtphBe8NS7WFIMIhHIBJVk3xQvi-q\",\r\n    \"PLTY4AtphBe8PSqfXT4qfxwdbLgSK0XZ9v\",\r\n    \"PLTY4AtphBe8P3zIOlyr7gEt176af-pp5R\",\r\n    \"PLtG4P3lq8RHFBeVaruf2JjyQmZJH4__Zv\",\r\n    \"PLHYRqaApAQGGCUm1mPME4HVOzay3OcTgH\",\r\n  ]);\r\n\r\n  const [brushColor, setBrushColor] = useState(\"#444\");\r\n  const searchRef = useRef();\r\n  const loadingRandomlist=()=>{\r\n    if(searchTerm!=\"\"){\r\n      fetch(`https://jolly-hall-d8e3.ddcmyk.workers.dev/?https://www.sakugabooru.com/post.json?limit=100&tags=${searchTerm}`)\r\n      .then((response) => response.json())\r\n      .then((jsonData) => {\r\n        const fileUrls = jsonData.map(item => item.file_url);\r\n        // const baseUrlToRemove = \"https://www.sakugabooru.com/\";\r\n\r\n        // const newUrls = fileUrls.map(url => url.replace(baseUrlToRemove, ''));\r\n        const jsonDatas = JSON.stringify(fileUrls);\r\n        // randomLists\r\n        const storageRef = storageService.ref();\r\n         const jsonRef = storageRef.child('randomtag.json');\r\n         jsonRef.putString(jsonDatas).then((snapshot) => {\r\n           console.log('JSON file uploaded successfully.');\r\n           setConsolog(\"upload randomtag\")\r\n         })\r\n         .catch((error) => {\r\n           console.error('Error uploading JSON file:', error);\r\n           setConsolog(\"fail upload randomtag\")\r\n         });\r\n       })\r\n      \r\n     \r\n    }else{\r\n      setConsolog(\"no tag\")\r\n    }\r\n   \r\n    \r\n  }\r\n  const getSakuga=()=>{\r\n    \r\n    fetch(\"https://jolly-hall-d8e3.ddcmyk.workers.dev/?https://www.sakugabooru.com/tag.json?limit=0\")\r\n    .then((response) => response.json())\r\n    .then((jsonData) => {\r\n      //console.log(jsonData)\r\n     // const Data = JSON.parse(jsonData);\r\n     \r\n     const jsonDatas = JSON.stringify(jsonData);\r\n     const storageRef = storageService.ref();\r\n      const jsonRef = storageRef.child('tag.json');\r\n      jsonRef.putString(jsonDatas).then((snapshot) => {\r\n        console.log('JSON file uploaded successfully.');\r\n        setConsolog(\"get tag\")\r\n      }).catch((error) => {\r\n        console.error('Error uploading JSON file:', error);\r\n        setConsolog(\"fail get tag\")\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error fetching JSON data:', error);\r\n    });\r\n  }\r\n  useEffect(() => {\r\n    \r\n    // import(\"./tags.json\").then(math => {\r\n    //   setJsons(math.default)\r\n    // });\r\n\r\n    setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n    if (isAndroid) {\r\n      setVideowidth(600);\r\n    }\r\n    // let sakugaurl =\"\"\r\n    dbService\r\n      .doc(\"usersetting/\" + userObj.uid)\r\n      .get()\r\n      .then((doc) => {\r\n        if (doc.exists) {\r\n          setDrawSetting({\r\n            brushRadius: doc.data().brushRadius,\r\n            lazyRadius: doc.data().lazyRadius,\r\n          });\r\n          // sakugaurl=doc.data().sakuga\r\n          //console.log(doc.data())\r\n          // let url =\"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/tag.json?alt=media&token=8e5731b3-a119-47c2-bbc9-fdd7d1ad55e7\"\r\n          fetch(doc.data().sakuga)\r\n        .then((response) => response.json())\r\n        .then((jsonData) => {\r\n          //console.log(jsonData[0])\r\n         // const Data = JSON.parse(jsonData);\r\n          setJsons(jsonData);\r\n          setConsolog(\"load tag..\")\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error fetching JSON data:', error);\r\n          setConsolog(\"error load tag\")\r\n        });\r\n\r\n        fetch(\"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/randomtag.json?alt=media&token=ca3aa7d5-0428-4727-b470-8539f90087cc\")\r\n        .then((response) => response.json())\r\n        .then((jsonData) => {\r\n          //console.log(jsonData[0])\r\n         // const Data = JSON.parse(jsonData);\r\n         const random=shuffleArray(jsonData)\r\n          setRandomLists(random);\r\n          // setConsolog(\"load tag..\")\r\n          console.log(\"get randomlist\")\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error fetching random JSON data:', error);\r\n          setConsolog(\"error load tag\")\r\n        });\r\n        \r\n\r\n        } else {\r\n          // doc.data() will be undefined in this case\r\n          console.log(\"No such setting document!\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error getting document:\", error);\r\n      });\r\n\r\n    setHerokuOn(JSON.parse(localStorage.getItem(1)));\r\n  }, []);\r\n  function shuffleArray(array) {\r\n    for (let i = array.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [array[i], array[j]] = [array[j], array[i]];\r\n    }\r\n    return array;\r\n  }\r\n  const refreshAndSubmit = () => {\r\n    const data = canvasRef.current.getSaveData();\r\n    const dataUrl = canvasRef.current.getDataURL();\r\n    canvasRef.current.clear();\r\n\r\n    dbService.collection(\"Csubmit\").add({\r\n      text: data,\r\n      createdAt: Date.now(),\r\n      creatorId: userObj.uid,\r\n      drawingTime: 0,\r\n      heart: 0,\r\n      dataUrl: dataUrl,\r\n      refPinUrl: \"\",\r\n      //  refPhoto:{refPhoto},\r\n      //pinNumber:randomPinNum,\r\n    });\r\n\r\n    setCsubmit(\"\");\r\n\r\n    //clearInterval(timeId.current);\r\n  };\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    refreshAndSubmit();\r\n  };\r\n  const onSubmitSearch = (event) => {\r\n    event.preventDefault();\r\n    setBookmarkListOn(false);\r\n    refreshSearch();\r\n  };\r\n\r\n  const refreshSearch = () => {\r\n    //   fetch(`https://croquistoolcors.herokuapp.com/https://www.sakugabooru.com/post.json?page=${videoPage}&tags=${searchTerm}`)\r\n    //   .then((response)=>response.json())\r\n    //  .then((data)=>{\r\n    //    setBooruResults(data);\r\n\r\n    //  })\r\n    if (herokuOn) {\r\n      fetch(\r\n        `https://jolly-hall-d8e3.ddcmyk.workers.dev/?https://www.sakugabooru.com/post.json?page=${videoPage}&tags=${searchTerm}`\r\n      )\r\n        .then((response) => {\r\n          if (response.ok) {\r\n            return response.json();\r\n            // setBooruResults(response.json());\r\n          }\r\n        })\r\n        .then((data) => {\r\n          console.log(\"성공:\", data);\r\n\r\n          console.log(typeof data);\r\n\r\n          if (typeof data == \"object\") {\r\n            setBooruResults(data);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    } else {\r\n      fetch(\r\n        `https://www.sakugabooru.com/post.json?page=${videoPage}&tags=${searchTerm}`\r\n      )\r\n        .then((response) => {\r\n          if (response.ok) {\r\n            return response.json();\r\n            // setBooruResults(response.json());\r\n          }\r\n        })\r\n        .then((data) => {\r\n          console.log(\"성공:\", data);\r\n\r\n          console.log(typeof data);\r\n          if (typeof data == \"object\") {\r\n            setBooruResults(data);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n\r\n    // 테스트\r\n    // setBooruResults(testPost);\r\n  };\r\n\r\n  const onNextClick = (event) => {\r\n    event.preventDefault();\r\n    setVideoUrl(randomLists[pinNum])\r\n    setPinNum(pinNum+1)\r\n    setPinreload(pinReload + 1);\r\n\r\n\r\n    \r\n    refreshSearch();\r\n  };\r\n  const onPrePageClick = (event) => {\r\n    event.preventDefault();\r\n    setVideoPage((pre) => pre - 1);\r\n    refreshSearch();\r\n  };\r\n  const onForPageClick = (event) => {\r\n    event.preventDefault();\r\n    setVideoPage((pre) => pre + 1);\r\n    refreshSearch();\r\n  };\r\n  const onDeleteClick = () => {\r\n    const ok = window.confirm(\"wanna delete this?\");\r\n    if (ok) {\r\n      dbService.doc(`sakugaBookmark/0`).delete();\r\n    }\r\n  };\r\n  const onBookmarkListClick = (event) => {\r\n    event.preventDefault();\r\n    setBookmarkListOn(!bookmarkListOn);\r\n    if (bookmarkListRefresh) {\r\n      dbService\r\n        .collection(\"sakugaBookmark\")\r\n        .where(\"creatorId\", \"==\", userObj.uid)\r\n        .orderBy(\"createdAt\", \"desc\")\r\n        // .endAt(Date.now()-listEnd)\r\n\r\n        .limit(50)\r\n        // .get((snapshot) =>{\r\n        .onSnapshot((snapshot) => {\r\n          const CsubmitArray = snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n          }));\r\n\r\n          setBookmarkLists(CsubmitArray);\r\n          console.log(Csubmits);\r\n          setBookmarkListRefresh(false);\r\n        });\r\n    }\r\n  };\r\n  const setBookMark = (event) => {\r\n    event.preventDefault();\r\n    const ok = window.confirm(\"wanna bookmark this?\");\r\n    if (ok) {\r\n      dbService.collection(\"sakugaBookmark\").add({\r\n        DimgUrl: videoInfo[0],\r\n        DvideoUrl: videoInfo[1],\r\n        Dtag: videoInfo[2],\r\n        creatorId: userObj.uid,\r\n        createdAt: Date.now(),\r\n        Did: videoInfo[3],\r\n      });\r\n    }\r\n  };\r\n  const onClearClick = () => {\r\n    const ok = window.confirm(\"wanna clear this?\");\r\n    if (ok) {\r\n      canvasRef.current.clear();\r\n    }\r\n  };\r\n  const onUndoClick = () => {\r\n    canvasRef.current.undo();\r\n  };\r\n  const onEraseClick = () => {\r\n    setBrushColor(\"erase\");\r\n  };\r\n  const onBrushClick = () => {\r\n    setBrushColor(\"#444\");\r\n  };\r\n  const onShadowClick = () => {\r\n    setBrushColor(\"shadow\");\r\n  };\r\n\r\n  const videoJsOptions = {\r\n    autoplay: false,\r\n    playbackRates: [0.2, 0.4, 0.6, 0.8, 1],\r\n    width: videowidth,\r\n    //height: 300,\r\n    controls: true,\r\n    controlBar: {\r\n      pictureInPictureToggle: false,\r\n      fullscreenToggle: false,\r\n    },\r\n    plugins: {\r\n      framebyframe: {\r\n        fps: 23.976024,\r\n        steps: [\r\n          { text: \"< 1f\", step: -1 },\r\n          { text: \"1f >\", step: 1 },\r\n        ],\r\n      },\r\n      hotkeys: {\r\n        seekStep: 1 / 23.976024,\r\n        enableModifiersForNumbers: false,\r\n        customKeys: {\r\n          DforwardKey: {\r\n            key: function (event) {\r\n              // Toggle something with CTRL + D Key\r\n              return event.which === 68;\r\n            },\r\n            handler: function (player, options, event) {\r\n              // Using mute as an example\r\n              player.pause();\r\n              player.currentTime(player.currentTime() + 1 / 23.976024);\r\n            },\r\n          },\r\n\r\n          SrewindKey: {\r\n            key: function (event) {\r\n              // Toggle something with CTRL + D Key\r\n              return event.which === 83;\r\n            },\r\n            handler: function (player, options, event) {\r\n              // Using mute as an example\r\n              player.pause();\r\n              player.currentTime(player.currentTime() - 1 / 23.976024);\r\n            },\r\n          },\r\n          E1forwardKey: {\r\n            key: function (event) {\r\n              // Toggle something with CTRL + D Key\r\n              return event.which === 69;\r\n            },\r\n            handler: function (player, options, event) {\r\n              // Using mute as an example\r\n              player.pause();\r\n              player.currentTime(player.currentTime() + 1);\r\n            },\r\n          },\r\n\r\n          W1rewindKey: {\r\n            key: function (event) {\r\n              // Toggle something with CTRL + D Key\r\n              return event.which === 87;\r\n            },\r\n            handler: function (player, options, event) {\r\n              // Using mute as an example\r\n              player.pause();\r\n              player.currentTime(player.currentTime() - 1);\r\n            },\r\n          },\r\n          R5forwardKey: {\r\n            key: function (event) {\r\n              // Toggle something with CTRL + D Key\r\n              return event.which === 82;\r\n            },\r\n            handler: function (player, options, event) {\r\n              // Using mute as an example\r\n              player.pause();\r\n              player.currentTime(player.currentTime() + 5);\r\n            },\r\n          },\r\n\r\n          Q5rewindKey: {\r\n            key: function (event) {\r\n              // Toggle something with CTRL + D Key\r\n              return event.which === 81;\r\n            },\r\n            handler: function (player, options, event) {\r\n              // Using mute as an example\r\n              player.pause();\r\n              player.currentTime(player.currentTime() - 5);\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n\r\n    sources: [\r\n      {\r\n        // src: \"https://www.sakugabooru.com/data/ecf85b36125117bb806562628494f682.mp4\",\r\n        src: videoUrl,\r\n        //type: 'video/mp4',\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Hotkeys\r\n        keyName=\"ctrl+z,c,x\"\r\n        onKeyDown={(keyName, e, handle) => {\r\n          //console.log(\"test:onKeyDown\", keyName);\r\n\r\n          if (keyName == \"ctrl+z\") {\r\n            onUndoClick();\r\n          }\r\n          if (keyName == \"c\") {\r\n            if (brushColor != \"erase\") {\r\n              onEraseClick();\r\n            } else if (brushColor == \"erase\") {\r\n              onBrushClick();\r\n            }\r\n          }\r\n          if (keyName == \"x\") {\r\n            if (brushColor != \"shadow\") {\r\n              onShadowClick();\r\n            } else if (brushColor == \"shadow\") {\r\n              onBrushClick();\r\n            }\r\n          }\r\n        }}\r\n        // onKeyUp={(keyName, e, handle) => {\r\n        //   console.log(\"test:onKeyUp\", e, handle);\r\n        //   setOutput(`onKeyUp ${keyName}`);\r\n        // } }\r\n      ></Hotkeys>\r\n\r\n      <div>\r\n        <div style={{ float: \"right\" }}></div>\r\n\r\n        <div>\r\n          <label>videos:</label>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            max={youtubeUrls.length - 1}\r\n            style={{ width: \"30px\" }}\r\n            value={youtubeUrlIndex}\r\n            onChange={(e) => {\r\n              setYoutubeUrlIndex(e.target.value);\r\n              setPinreload(pinReload + 1);\r\n            }}\r\n          />{consolog}\r\n          <button  style={{ float: 'right',left:'-50%',position:\"relative\" }} onClick={onNextClick}>Next</button>\r\n          <button  style={{ float: 'right' }} onClick={getSakuga}>load tag</button>\r\n          <button  style={{ float: 'right' }} onClick={loadingRandomlist}>upld rantag</button>\r\n        </div>\r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        {/* 안드로이드조건 */}\r\n        {isAndroid ? (\r\n          <>\r\n            {/* <div style={{ float: 'left' }}>\r\n        \r\n\r\n        <form onSubmit={onSubmitSearch}>\r\n        <input\r\n        type=\"text\"\r\n        placeholder=\"Search\"\r\n        value={searchTerm}\r\n        onChange={handleChange}\r\n      />\r\n       <input type={\"submit\"} value=\"search\" />\r\n       <button onClick={onPrePageClick}>{\"<\"}</button>\r\n       {videoPage}\r\n        <button onClick={onForPageClick}> {\">\"} </button>\r\n        </form>\r\n        \r\n        \r\n      \r\n      \r\n      <ul style={{width: '450px', height: searchHeight, overflow: 'auto'}}>\r\n        {searchResults.map(item => (\r\n        <li onClick={e=>{console.log(item['-name']); setSearchTerm(item['-name']);setSearchHeight(0); }}>{item['-name']}</li>\r\n        ))}\r\n      </ul>\r\n      <ul style={{width: '450px', height:'400px', overflow: 'auto'}}>\r\n      {booruResults.map(item => (\r\n        <img src={item.preview_url} \r\n        style={{width: '215px'}} \r\n        onClick={e=>{setVideoUrl(item.file_url); console.log(item.file_url); setPinreload(pinReload + 1);}}></img>\r\n        \r\n        \r\n        ))}\r\n      </ul>\r\n      \r\n      <div key={pinReload}><Videojs  {...videoJsOptions} /></div>\r\n        </div> */}\r\n\r\n            <div style={{ float: \"left\" }}>\r\n              <form onSubmit={onSubmitSearch}>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search\"\r\n                  value={searchTerm}\r\n                  onChange={handleChange}\r\n                />\r\n                <input type={\"submit\"} value=\"search\" />\r\n                <button onClick={onPrePageClick}>{\"<\"}</button>\r\n                {videoPage}\r\n                <button onClick={onForPageClick}> {\">\"} </button>\r\n                <button onClick={onBookmarkListClick}> {\"❤list\"} </button>\r\n                {bookmarkListOn ? (\r\n                  <></>\r\n                ) : (\r\n                  <>\r\n                    <button onClick={setBookMark}> {\"❤\"} </button>\r\n                  </>\r\n                )}\r\n              </form>\r\n\r\n              {/* {searchTerm=null ?(<></>):(<></>)} */}\r\n\r\n              <ul\r\n                style={{\r\n                  width: \"450px\",\r\n                  height: searchHeight,\r\n                  overflow: \"auto\",\r\n                }}\r\n              >\r\n                {searchResults.map((item) => (\r\n                  <li key={item.id}\r\n                    onClick={(e) => {\r\n                      console.log(item[\"name\"]);\r\n                      setSearchTerm(item[\"name\"]);\r\n                      setSearchHeight(0);\r\n                    }}\r\n                  >\r\n                    {item[\"name\"]}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n              <ul style={{ width: \"450px\", height: \"400px\", overflow: \"auto\" }}>\r\n                {bookmarkListOn ? (\r\n                  <>\r\n                    {bookmarkLists.map((item) => (\r\n                      <>\r\n                        <div style={{ width: \"215px\", float: \"left\" }}>\r\n                          <img\r\n                            src={item.DimgUrl}\r\n                            style={{ width: \"215px\" }}\r\n                            onClick={(e) => {\r\n                              setVideoUrl(item.DvideoUrl);\r\n                              console.log(item.DvideoUrl);\r\n                              setPinreload(pinReload + 1);\r\n                            }}\r\n                          ></img>\r\n\r\n                          <div\r\n                            style={{\r\n                              width: \"215px\",\r\n                              height: \"0px\",\r\n                              transform: \"translate( 0px, -25px )\",\r\n                            }}\r\n                          >\r\n                            <button\r\n                              style={{\r\n                                backgroundColor: \"transparent\",\r\n                                border: \"1px solid #3498db\",\r\n                                appearance: \"none\",\r\n                                borderRadius: \"0\",\r\n                              }}\r\n                              onClick={(e) => {\r\n                                setBooruTag(item.Dtag.split(/\\s+/));\r\n                                setBooruUrl(item.Did);\r\n                              }}\r\n                            >\r\n                              {\" \"}\r\n                              {\"tag\"}{\" \"}\r\n                            </button>\r\n                            <button\r\n                              style={{\r\n                                backgroundColor: \"transparent\",\r\n                                border: \"1px solid #3498db\",\r\n                                appearance: \"none\",\r\n                                borderRadius: \"0\",\r\n                              }}\r\n                              onClick={(e) => {\r\n                                const ok = window.confirm(\"wanna delete this?\");\r\n                                if (ok) {\r\n                                  dbService\r\n                                    .doc(`sakugaBookmark/${item.id}`)\r\n                                    .delete();\r\n                                }\r\n                              }}\r\n                            >\r\n                              {\" \"}\r\n                              {\"del\"}{\" \"}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    ))}\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    {booruResults.map((item) => (\r\n                      <>\r\n                        <div style={{ width: \"215px\", float: \"left\" }}>\r\n                          <img\r\n                            src={item.preview_url}\r\n                            style={{ width: \"215px\" }}\r\n                            onClick={(e) => {\r\n                              setVideoUrl(item.file_url);\r\n                              console.log(item.file_url);\r\n                              setPinreload(pinReload + 1);\r\n                              setVideoInfo([\r\n                                item.preview_url,\r\n                                item.file_url,\r\n                                item.tags,\r\n                                item.id,\r\n                              ]);\r\n                            }}\r\n                          ></img>\r\n\r\n                          <div\r\n                            style={{\r\n                              width: \"215px\",\r\n                              height: \"0px\",\r\n                              transform: \"translate( 0px, -25px )\",\r\n                            }}\r\n                          >\r\n                            <button\r\n                              style={{\r\n                                backgroundColor: \"transparent\",\r\n                                border: \"1px solid #3498db\",\r\n                                appearance: \"none\",\r\n                                borderRadius: \"0\",\r\n                              }}\r\n                              onClick={(e) => {\r\n                                setBooruTag(item.tags.split(/\\s+/));\r\n                                setBooruUrl(item.id);\r\n                              }}\r\n                            >\r\n                              {\" \"}\r\n                              {\"tag\"}{\" \"}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    ))}\r\n                  </>\r\n                )}\r\n              </ul>\r\n              <div style={{ width: \"450px\" }}>\r\n                {booruTag.map((tagItem) => (\r\n                  <>\r\n                    <button\r\n                      onClick={(e) => {\r\n                        setSearchTerm(tagItem);\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      {tagItem}{\" \"}\r\n                    </button>\r\n                  </>\r\n                ))}\r\n              </div>\r\n              <div key={pinReload}>\r\n                <Videojs {...videoJsOptions} />\r\n              </div>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <>\r\n            {/* 웹기준 */}\r\n            <div style={{ float: \"left\" }}>\r\n              <div key={pinReload}>\r\n                <Videojs {...videoJsOptions} />\r\n              </div>\r\n\r\n              <form onSubmit={onSubmitSearch}>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search\"\r\n                  value={searchTerm}\r\n                  onChange={handleChange}\r\n                />\r\n                <input type={\"submit\"} value=\"search\" />\r\n                <button onClick={onPrePageClick}>{\"<\"}</button>\r\n                {videoPage}\r\n                <button onClick={onForPageClick}> {\">\"} </button>\r\n                <button onClick={onBookmarkListClick}> {\"❤list\"} </button>\r\n                {bookmarkListOn ? (\r\n                  <></>\r\n                ) : (\r\n                  <>\r\n                    <button onClick={setBookMark}> {\"❤\"} </button>\r\n                  </>\r\n                )}\r\n              </form>\r\n\r\n              {/* {searchTerm=null ?(<></>):(<></>)} */}\r\n\r\n              <ul\r\n                style={{\r\n                  width: \"450px\",\r\n                  height: searchHeight,\r\n                  overflow: \"auto\",\r\n                }}\r\n              >\r\n                {searchResults.map((item) => (\r\n                  <li key={item.id}\r\n                    onClick={(e) => {\r\n                      console.log(item[\"name\"]);\r\n                      setSearchTerm(item[\"name\"]);\r\n                      setSearchHeight(0);\r\n                    }}\r\n                  >\r\n                    {item[\"name\"]}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n              <ul style={{ width: \"450px\", height: \"400px\", overflow: \"auto\" }}>\r\n                {bookmarkListOn ? (\r\n                  <>\r\n                    {bookmarkLists.map((item) => (\r\n                      <>\r\n                        <div style={{ width: \"215px\", float: \"left\" }}>\r\n                          <img\r\n                            src={item.DimgUrl}\r\n                            style={{ width: \"215px\" }}\r\n                            onClick={(e) => {\r\n                              setVideoUrl(item.DvideoUrl);\r\n                              console.log(item.DvideoUrl);\r\n                              setPinreload(pinReload + 1);\r\n                            }}\r\n                          ></img>\r\n\r\n                          <div\r\n                            style={{\r\n                              width: \"215px\",\r\n                              height: \"0px\",\r\n                              transform: \"translate( 0px, -25px )\",\r\n                            }}\r\n                          >\r\n                            <button\r\n                              style={{\r\n                                backgroundColor: \"transparent\",\r\n                                border: \"1px solid #3498db\",\r\n                                appearance: \"none\",\r\n                                borderRadius: \"0\",\r\n                              }}\r\n                              onClick={(e) => {\r\n                                setBooruTag(item.Dtag.split(/\\s+/));\r\n                                setBooruUrl(item.Did);\r\n                              }}\r\n                            >\r\n                              {\" \"}\r\n                              {\"tag\"}{\" \"}\r\n                            </button>\r\n                            <button\r\n                              style={{\r\n                                backgroundColor: \"transparent\",\r\n                                border: \"1px solid #3498db\",\r\n                                appearance: \"none\",\r\n                                borderRadius: \"0\",\r\n                              }}\r\n                              onClick={(e) => {\r\n                                const ok = window.confirm(\"wanna delete this?\");\r\n                                if (ok) {\r\n                                  dbService\r\n                                    .doc(`sakugaBookmark/${item.id}`)\r\n                                    .delete();\r\n                                }\r\n                              }}\r\n                            >\r\n                              {\" \"}\r\n                              {\"del\"}{\" \"}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    ))}\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    {booruResults.map((item) => (\r\n                      <>\r\n                        <div style={{ width: \"215px\", float: \"left\" }}>\r\n                          <img\r\n                            src={item.preview_url}\r\n                            style={{ width: \"215px\" }}\r\n                            onClick={(e) => {\r\n                              setVideoUrl(item.file_url);\r\n                              console.log(item.file_url);\r\n                              setPinreload(pinReload + 1);\r\n                              setVideoInfo([\r\n                                item.preview_url,\r\n                                item.file_url,\r\n                                item.tags,\r\n                                item.id,\r\n                              ]);\r\n                            }}\r\n                          ></img>\r\n\r\n                          <div\r\n                            style={{\r\n                              width: \"215px\",\r\n                              height: \"0px\",\r\n                              transform: \"translate( 0px, -25px )\",\r\n                            }}\r\n                          >\r\n                            <button\r\n                              style={{\r\n                                backgroundColor: \"transparent\",\r\n                                border: \"1px solid #3498db\",\r\n                                appearance: \"none\",\r\n                                borderRadius: \"0\",\r\n                              }}\r\n                              onClick={(e) => {\r\n                                setBooruTag(item.tags.split(/\\s+/));\r\n                                setBooruUrl(item.id);\r\n                              }}\r\n                            >\r\n                              {\" \"}\r\n                              {\"tag\"}{\" \"}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    ))}\r\n                  </>\r\n                )}\r\n              </ul>\r\n              <div style={{ width: \"450px\" }}>\r\n                {booruTag.map((tagItem) => (\r\n                  <>\r\n                    <button\r\n                      onClick={(e) => {\r\n                        setSearchTerm(tagItem);\r\n                      }}\r\n                    >\r\n                      {\" \"}\r\n                      {tagItem}{\" \"}\r\n                    </button>\r\n                  </>\r\n                ))}\r\n                <a\r\n                  target={\"_blank\"}\r\n                  href={\"https://www.sakugabooru.com/post/show/\" + booruUrl}\r\n                >\r\n                  link\r\n                </a>\r\n                <button\r\n                  onClick={(e) => {\r\n                    localStorage.setItem(1, !herokuOn);\r\n                    setHerokuOn((pre) => !pre);\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  {herokuOn ? <>on</> : <>off</>}\r\n                </button>\r\n                s,d:프레임이동 qwer:초이동\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n        {/* 끝 */}\r\n\r\n        <div style={{ float: \"left\" }}>\r\n          <div>\r\n            <div style={{ float: \"right\" }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={(e) =>\r\n                  setDrawSetting((prevState) => ({\r\n                    ...prevState,\r\n                    lazyRadius: e.target.value,\r\n                  }))\r\n                }\r\n              />\r\n            </div>\r\n            <div style={{ float: \"right\" }}>\r\n              {brushColor == \"erase\" ? (\r\n                <>\r\n                  <label>Erase Size:</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"100\"\r\n                    style={{ width: \"30px\" }}\r\n                    value={drawSetting.eraseRadius}\r\n                    onChange={(e) =>\r\n                      setDrawSetting((prevState) => ({\r\n                        ...prevState,\r\n                        eraseRadius: e.target.value,\r\n                      }))\r\n                    }\r\n                  />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <label>Brush Size:</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"100\"\r\n                    style={{ width: \"30px\" }}\r\n                    value={drawSetting.brushRadius}\r\n                    onChange={(e) =>\r\n                      setDrawSetting((prevState) => ({\r\n                        ...prevState,\r\n                        brushRadius: e.target.value,\r\n                      }))\r\n                    }\r\n                  />\r\n                </>\r\n              )}\r\n            </div>\r\n            <div style={{ float: \"right\" }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: \"right\" }}>\r\n              {isAndroid ? (\r\n                <>\r\n                  <button style={{ padding: \"15px\" }} onClick={onUndoClick}>\r\n                    ◀\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <button onClick={onUndoClick}>◀</button>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            <div style={{ float: \"right\" }}>\r\n              {brushColor == \"erase\" ? (\r\n                <>\r\n                  <button onClick={onBrushClick}>brush</button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <button onClick={onEraseClick}>erase</button>\r\n                </>\r\n              )}\r\n              <div style={{ float: \"right\" }}>\r\n                {brushColor == \"shadow\" ? (\r\n                  <>\r\n                    <button onClick={onBrushClick}>brush</button>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <button onClick={onShadowClick}>shadow</button>\r\n                  </>\r\n                )}\r\n\r\n                {brushColor}\r\n              </div>\r\n            </div>\r\n            <div style={{ float: \"right\" }}>\r\n              <button onClick={onSubmit}>Upload Drawing</button>\r\n            </div>\r\n          </div>\r\n          <div style={{ float: \"right\" }}>\r\n            <CanvasDraw\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={\r\n                brushColor == \"erase\"\r\n                  ? drawSetting.eraseRadius\r\n                  : drawSetting.brushRadius\r\n              }\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor}\r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]}\r\n            />\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","//import CCsubmit from \"../components/Csubmit\";\r\n//import { v4 as uuidv4 } from 'uuid';\r\nimport { dbService ,storageService} from \"fbase\";\r\nimport React, { useEffect, useRef, useState,useCallback } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\n\r\nexport default ({userObj,isAndroid,penType}) =>  {\r\n \r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [Line,setLine]= useState([]);\r\n    const [croquisList,setCroquisList]= useState([]);\r\n    const [randomCroquisList,setRandomCroquisList]= useState([]);\r\n    const [savedRandomPinNum,setSavedRandomPinNum]=useState([\"\"]);\r\n    const [allstarRandom,setAllstarRandom]=useState(false);\r\n    const [submitField,setSubmitField]= useState(\"\");\r\n    const canvasRef = useRef();\r\n    const [pinNum,setPinNum]=useState(\"\");\r\n    const [randomPinNum,setRandomPinNum]=useState([\"\"]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const [pinID,setPinID]=useState(0);\r\n    const [drawNum,setDrawNum]=useState(0);\r\n    const [canvasLocation,setCanvasLocation]=useState(true);\r\n    const [imgs,setImgs]=useState(\"\")\r\n    const [croquisTime,setCroquisTime]=useState(60);\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    //allowpointertype으로 터치허용유무설정가능 일단 펜만 가능하게함. 나중에하는걸로\r\n        const [min,setMin]=useState(0);\r\n        const [sec,setSec]=useState(0);\r\n        const time=useRef(croquisTime);\r\n        const timeId=useRef(null);\r\n        const [drawSetting,setDrawSetting]=useState({\r\n            croquisTimeDB:60,\r\n            brushRadius:1,\r\n            lazyRadius:1,\r\n            eraseRadius:10,\r\n            \r\n\r\n\r\n        })\r\n    const [timeSetBottonToggle,setTimeSetBottonToggle]=useState(false);\r\n\r\n\r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n    const [upFile,setUpFile]=useState([]);\r\n    const [refWidth,setRefWidth]=useState(400);\r\n\r\n\r\n    \r\n    function lowerImageTransparency(base64Image, callback) {\r\n      var img = new Image();\r\n      img.onload = function () {\r\n        var canvas = document.createElement(\"canvas\");\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n    \r\n        var ctx = canvas.getContext(\"2d\");\r\n        ctx.drawImage(img, 0, 0);\r\n    \r\n        var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        var data = imageData.data;\r\n    \r\n        for (var i = 0; i < data.length; i += 4) {\r\n          // Reduce the alpha (transparency) value by 50%\r\n          data[i + 3] = Math.floor(data[i + 3] * 0.2);\r\n        }\r\n    \r\n        ctx.putImageData(imageData, 0, 0);\r\n    \r\n        // Convert the modified image to base64 format\r\n        var modifiedBase64Image = canvas.toDataURL(\"image/png\");\r\n    \r\n        callback(modifiedBase64Image);\r\n      };\r\n      img.src = base64Image;\r\n    }\r\n\r\n    \r\n    const getMyCroquisSettings = ()=>{\r\n              dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n            if (doc.exists) {\r\n                setDrawSetting({\r\n                    brushRadius:doc.data().brushRadius,\r\n                    lazyRadius:doc.data().lazyRadius,\r\n                    eraseRadius:doc.data().eraseRadius,\r\n                    croquisTimeDB:doc.data().croquisTimeDB,\r\n                    })\r\n                    setCroquisTime(doc.data().croquisTimeDB)\r\n                console.log(doc.data())\r\n               // console.log(croquisTime)\r\n                time.current+=doc.data().croquisTimeDB-60;\r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"No such setting document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"Error getting document:\", error);\r\n             \r\n        });\r\n    }\r\n    const updateSetting =(event)=>{\r\n      // console.log(drawSetting.croquisTimeDB,typeof(drawSetting.croquisTimeDB))\r\n      // console.log(drawSetting.brushRadius,typeof(drawSetting.brushRadius))\r\n      // console.log(drawSetting.lazyRadius,typeof(drawSetting.lazyRadius))\r\n      // console.log(drawSetting.eraseRadius,typeof(drawSetting.eraseRadius))\r\n        dbService.collection(\"usersetting\").doc(userObj.uid).update({\r\n            brushRadius:drawSetting.brushRadius,\r\n            lazyRadius:drawSetting.lazyRadius,\r\n            croquisTimeDB:drawSetting.croquisTimeDB,\r\n            eraseRadius:drawSetting.eraseRadius,\r\n            \r\n        });\r\n    }\r\n    const refreshAndSubmit =()=>{\r\n        setPinreload(pinReload+1);\r\n        let _drawNum=0;\r\n        if(localStorage.getItem(\"drawNum\")==undefined){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n        }else{\r\n          _drawNum=localStorage.getItem(\"drawNum\")\r\n        }\r\n        localStorage.setItem(\"drawNum\", parseInt(_drawNum)+1)\r\n        setDrawNum(parseInt(_drawNum)+1)\r\n        localStorage.setItem(\"lastdrawtime\",parseInt(Date.now()))\r\n            setPinID(pinID+1);\r\n            //console.log(\"timeout\",randomPinNum[pinID])\r\n            \r\n            time.current=croquisTime;\r\n            \r\n            const data = canvasRef.current.getSaveData();\r\n            const dataUrl=canvasRef.current.getDataURL();\r\n\r\n\r\n            \r\n            canvasRef.current.clear();\r\n        \r\n            if(submitField==\"concept-2\"){\r\n              const storeDir= \"conceptRef\"\r\n              const newname= randomPinNum[pinID]\r\n              fetch(dataUrl)\r\n                  .then(response => response.blob())\r\n                  \r\n                  .then(blob => {\r\n                      // Create a new Blob object with the renamed file\r\n                      const renamedBlob = new Blob([blob], { type: blob.type, name: newname });\r\n                      console.log('File renamed',newname);\r\n                      \r\n                      // Get a reference to the new location in Firebase Storage\r\n                      const newFileRef = storageService.ref(storeDir+\"/\"+newname);\r\n          \r\n                      // Upload the renamed file\r\n                      newFileRef.put(renamedBlob)\r\n                      .then(() => {\r\n                          console.log('File reuploaded !',storeDir,\"/\",newname);\r\n                          \r\n                      })\r\n                      \r\n                      .then(()=>{\r\n                        const pinDocRef= dbService.doc(`concept/ref`);\r\n         \r\n          \r\n                        //console.log(e)\r\n                      \r\n\r\n                          \r\n                          newFileRef.getDownloadURL().then(url => {\r\n                            const startIndex = url.indexOf(\"pot.com/o/\") ; //start index of the desired string\r\n                            // const startIndex = url.indexOf(\"test%2F\") + 6; //start index of the desired string\r\n                            const endIndex = url.indexOf(\"?alt=\");\r\n                          //  //https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.\r\n                          //  com/o/conceptRef%2F744642119658841551?alt\r\n                          //  =media\r\n                              const shorturl = url.substring(startIndex, endIndex+4);\r\n\r\n                              pinDocRef.update({\r\n                                [submitField]:firebase.firestore.FieldValue.arrayUnion(newname+shorturl)\r\n                        }); \r\n                            //   for (var j =1; j< words.length-1;j++){\r\n                                      \r\n                            //   pinDocRef.update({\r\n                            //       [words[j]]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])});\r\n                            //       console.log(\"field deleted and updated in \",words[j],\", \")\r\n                                 \r\n                            //   pinDocRef.update({\r\n                            //     [words[j]]:firebase.firestore.FieldValue.arrayUnion(shorturl) });\r\n                            // }\r\n                          })  \r\n                        \r\n                      });\r\n                  })\r\n                \r\n\r\n\r\n\r\n\r\n              \r\n              \r\n             \r\n            }\r\n\r\n\r\n            dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:croquisTime-min*60-sec,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:randomPinNum[pinID]\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n    useEffect(()=> {\r\n      if(localStorage.getItem(\"drawNum\")==undefined){\r\n        localStorage.setItem(\"drawNum\", parseInt(0))\r\n        setDrawNum(parseInt(0))\r\n      }else{\r\n        setDrawNum(parseInt(localStorage.getItem(\"drawNum\")))\r\n      }\r\n      if(!(localStorage.getItem(\"lastdrawtime\")==undefined)){\r\n        if(parseInt(Date.now())-parseInt(localStorage.getItem(\"lastdrawtime\"))>21600000){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n          setDrawNum(parseInt(0))\r\n        }\r\n      }\r\n     \r\n      getMyCroquisSettings();\r\n      setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n     \r\n        timeId.current= setInterval(()=>{\r\n            setMin(parseInt(time.current/60));\r\n            setSec(time.current % 60);\r\n            time.current -= 1;\r\n        },1000);\r\n        return()=> clearInterval(timeId.current);\r\n    },[]);\r\n\r\n    useEffect(()=> {\r\n        if(time.current<=-1){\r\n            refreshAndSubmit();\r\n            \r\n            \r\n        }\r\n    },[sec]);\r\n\r\n    useEffect(()=> {\r\n      \r\n      let array = []         \r\n     \r\n       ///ref1불러오기\r\n             dbService.doc(`RefDB/refStrings`).get().then((doc) => {\r\n            if (doc.exists) {\r\n                //console.log(\"Document data:\", doc.data().refUrl);\r\n                //setRandomPinNum(doc.data().refUrl);\r\n                //console.log(\"doc\",doc.data().refUrl)\r\n                // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n                // console.log(typeof(doc.data().refUrl))\r\n                // setRandomPinNum(random);\r\n                \r\n                let data = doc.data();\r\n                Object.keys(data).forEach((name) => {\r\n                  console.log(name);\r\n                  array.push({\"list\":name,\"url\":data[name]});\r\n                });\r\n                \r\n              \r\n                //console.log(array)\r\n                \r\n              \r\n                \r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"ref1 No such document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"ref1 Error getting document:\", error);\r\n             \r\n        }).then(e=>{\r\n///ref2불러오기          \r\ndbService.doc(`RefDB/refStrings2`).get().then((doc) => {\r\n  if (doc.exists) {\r\n      //console.log(\"Document data:\", doc.data().refUrl);\r\n      //setRandomPinNum(doc.data().refUrl);\r\n      //console.log(\"doc\",doc.data().refUrl)\r\n      // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n      // console.log(typeof(doc.data().refUrl))\r\n      // setRandomPinNum(random);\r\n      \r\n      let data2 = doc.data();\r\n      Object.keys(data2).forEach((name) => {\r\n        console.log(name);\r\n        array.push({\"list\":name+\"-2\",\"url\":data2[name]});\r\n      });\r\n      \r\n    \r\n      //console.log(array)\r\n      \r\n      \r\n      array.sort(function(a,b) {\r\n        return a.list.localeCompare(b.list);\r\n    });\r\n    \r\n   \r\n      \r\n    \r\n      setCroquisList(array)\r\n      const new_array = shuffleArray(array.flatMap(obj => obj.url));\r\n      //const new_array = shuffleArray(array.map(obj => obj.url));\r\n    setRandomCroquisList(new_array)\r\n      // console.log(\"하하\",new_array)\r\n      if(localStorage.getItem(\"specdraw\")==undefined){\r\n        //const random=Object.values(array[0].url).sort(() => Math.random() - 0.5);\r\n        const random=shuffleArray(Object.values(array[0].url))\r\n        console.log(\"값은바로\",array[0].list)\r\n      setSubmitField(array[0].list)\r\n      setRandomPinNum(random);\r\n      setSavedRandomPinNum(random)  \r\n      }else{\r\n      // const random=Object.values(array[parseInt(localStorage.getItem(\"specdraw\"))].url).sort(() => Math.random() - 0.5);\r\n      const random=shuffleArray(Object.values(array[parseInt(localStorage.getItem(\"specdraw\"))].url))\r\n      console.log(\"값은바로\",array[parseInt(localStorage.getItem(\"specdraw\"))].list)\r\n      setSubmitField(array[parseInt(localStorage.getItem(\"specdraw\"))].list)\r\n      setRandomPinNum(random);\r\n      setSavedRandomPinNum(random)   \r\n      }\r\n      \r\n  } else {\r\n      // doc.data() will be undefined in this case\r\n      console.log(\"ref2 No such document!\");\r\n  }\r\n}).catch((error) => {\r\n  console.log(\"ref2  Error getting document:\", error);\r\n   \r\n});\r\n\r\n        });\r\n//정리\r\n            \r\n\r\n\r\n       \r\n        // dbService.collection(\"Csubmit\").onSnapshot((snapshot) =>{\r\n        //     const CsubmitArray = snapshot.docs.map((doc)=>({\r\n        //         id: doc.id,\r\n        //         ...doc.data(),\r\n        //     }));\r\n            \r\n        //     setCsubmits(CsubmitArray);\r\n        //     //console.log(Csubmits);\r\n        // });\r\n\r\n        \r\n        \r\n\r\n    },[]);\r\n    function shuffleArray(array) {\r\n      for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [array[i], array[j]] = [array[j], array[i]];\r\n      }\r\n      return array;\r\n    }\r\n\r\n    \r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n        //  const data = canvasRef.current.getSaveData();\r\n        //  canvasRef.current.clear();\r\n     \r\n         \r\n        //  await dbService.collection(\"Csubmit\").add({\r\n        //      text:data,\r\n        //      createdAt: Date.now(),\r\n        //      creatorId: userObj.uid,\r\n        //      heart:(0),\r\n        //     //  refPhoto:{refPhoto},\r\n        //      //pinNumber:randomPinNum,\r\n        //  });\r\n        //  setCsubmit(\"\"); \r\n        refreshAndSubmit();\r\n        setImgs(\"\")\r\n     };\r\n     const onSubmitPinNum= (event) => {\r\n        event.preventDefault();\r\n        if(submitField.includes(\"-2\")){\r\n          if(pinNum.match(\",\")){\r\n            \r\n            const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n         \r\n            pinNum.split(\",\").forEach(e => {\r\n                //console.log(e)\r\n                pinDocRef.update({\r\n                    [submitField.slice(0,-2)]:firebase.firestore.FieldValue.arrayUnion(e)\r\n            }); \r\n            \r\n        });\r\n        }else if(pinNum.length>1){\r\n            const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n            pinDocRef.update({\r\n                [submitField.slice(0,-2)]:firebase.firestore.FieldValue.arrayUnion(pinNum)\r\n        });\r\n        }\r\n\r\n\r\n        }\r\n        else{\r\n        if(pinNum.match(\",\")){\r\n            \r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n         \r\n            pinNum.split(\",\").forEach(e => {\r\n                //console.log(e)\r\n                pinDocRef.update({\r\n                    [submitField]:firebase.firestore.FieldValue.arrayUnion(e)\r\n            }); \r\n            \r\n        });\r\n        }else if(pinNum.length>1){\r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n            pinDocRef.update({\r\n                [submitField]:firebase.firestore.FieldValue.arrayUnion(pinNum)\r\n        });\r\n        }\r\n      }\r\n\r\n        \r\n           \r\n        setPinNum(\"\")\r\n\r\n     }\r\n     const onChange = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setPinNum(value);\r\n     }\r\n     const onChangeTime = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setCroquisTime(value);\r\n         setDrawSetting(prevState=>({...prevState, croquisTimeDB: event.target.value }))\r\n         \r\n     }\r\n \r\n     const onSubmitTime= (event) => {\r\n        event.preventDefault();\r\n        setTimeSetBottonToggle(false)\r\n        console.log(\"현재값은\",submitField)\r\n        \r\n        //setCroquisTime(0)\r\n     }\r\n     const noRefreshAndSubmit =()=>{\r\n        \r\n      //console.log(\"timeout\",randomPinNum[pinID])\r\n      let _drawNum=0;\r\n        if(localStorage.getItem(\"drawNum\")==undefined){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n        }else{\r\n          _drawNum=localStorage.getItem(\"drawNum\")\r\n        }\r\n        localStorage.setItem(\"drawNum\", parseInt(_drawNum)+1)\r\n        setDrawNum(parseInt(_drawNum)+1)\r\n        localStorage.setItem(\"lastdrawtime\",parseInt(Date.now()))\r\n      time.current=croquisTime;\r\n      \r\n      const data = canvasRef.current.getSaveData();\r\n      const dataUrl=canvasRef.current.getDataURL();\r\n      canvasRef.current.clear();\r\n  \r\n      \r\n      dbService.collection(\"Csubmit\").add({\r\n          text:data,\r\n          createdAt: Date.now(),\r\n          creatorId: userObj.uid,\r\n          drawingTime:croquisTime-min*60-sec,\r\n          heart:(0),\r\n          dataUrl:dataUrl,\r\n          refPinUrl:randomPinNum[pinID]\r\n         //  refPhoto:{refPhoto},\r\n          //pinNumber:randomPinNum,\r\n      });\r\n      \r\n      setCsubmit(\"\"); \r\n\r\n      //clearInterval(timeId.current);\r\n}\r\n     const onSubmitOnlyCanvas= (event) => {\r\n      event.preventDefault();\r\n  \r\n     noRefreshAndSubmit();\r\n     setImgs(\"\")\r\n  };\r\n     const onSubmitOnlyCanvasAndRedraw= (event) => {\r\n      event.preventDefault();\r\n      const dataUrls=canvasRef.current.getDataURL();\r\n      lowerImageTransparency(dataUrls, function (modifiedBase64Image) {\r\n        setImgs(modifiedBase64Image)\r\n      });\r\n     \r\n      \r\n     noRefreshAndSubmit();\r\n     canvasRef.current.clear();\r\n  };\r\n     const onNextClick= (event) => {\r\n      event.preventDefault();\r\n  \r\n      setPinreload(pinReload+1);\r\n            \r\n      setPinID(pinID+1);\r\n      \r\n      time.current=croquisTime;\r\n  };\r\n\r\n     const onDeletePinClick= () => {\r\n      if(submitField.includes(\"-2\")){\r\n        const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n        pinDocRef.update({\r\n            [submitField.slice(0,-2)]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])\r\n    });\r\n      }else{\r\n      const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n      pinDocRef.update({\r\n          [submitField]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])\r\n  });\r\n}\r\n  setPinreload(pinReload+1);\r\n            \r\n            setPinID(pinID+1);\r\n    };\r\n \r\n     const onClearClick= () => {\r\n      const ok = window.confirm(\"wanna clear this?\")\r\n      if(ok){\r\n        canvasRef.current.clear();\r\n          setImgs(\"\")\r\n      }\r\n    };\r\n     const onUndoClick= () => {\r\n        canvasRef.current.undo();\r\n    };\r\n     const onEraseClick= () => {\r\n        setBrushColor(\"erase\")\r\n        \r\n    };\r\n     const onBrushClick= () => {\r\n        setBrushColor(\"#444\")\r\n       \r\n    };\r\n    const onShadowClick= () => {\r\n      setBrushColor(\"shadow\")\r\n      \r\n  };\r\n\r\n    function ordinal_suffix_of(i) {\r\n        var j = i % 10,\r\n            k = i % 100;\r\n        if (j == 1 && k != 11) {\r\n            return i + \"st\";\r\n        }\r\n        if (j == 2 && k != 12) {\r\n            return i + \"nd\";\r\n        }\r\n        if (j == 3 && k != 13) {\r\n            return i + \"rd\";\r\n        }\r\n        return i + \"th\";\r\n    }\r\n    function sexagesimal(i) {\r\n        if(i <= 9){\r\n            return \"0\"+i;\r\n        }else{\r\n            return i;\r\n        }\r\n    }\r\n\r\n    const selectChange = (e) => {\r\n\t\t// event handler\r\n\t\t// console.log(e.target.value);\r\n\t\t// console.log(croquisList[e.target.value].list);\r\n\t\tsetSubmitField(croquisList[e.target.value].list)\r\n    \r\n    localStorage.setItem(\"specdraw\", parseInt(e.target.value))\r\n\t\t// console.log(typeof(Object.values(croquisList[e.target.value].url)));\r\n     \r\n        //const random=Object.values(croquisList[e.target.value].url).sort(() => Math.random() - 0.5);\r\n        const random=shuffleArray(Object.values(croquisList[e.target.value].url))\r\n                setRandomPinNum(random);\r\n                setSavedRandomPinNum(random)\r\n\t};\r\n    //  const onChange = (event)=> {\r\n    //      const {\r\n    //          target:{value},\r\n    //      }=event;\r\n    //      setCsubmit(value);\r\n    //  }\r\n    const onAllStarRandom = (event) => {\r\n      if(allstarRandom==false){\r\n        setRandomPinNum(randomCroquisList)\r\n        console.log(\"rand on\",randomCroquisList.length)\r\n        setAllstarRandom(true)\r\n      }else{\r\n        setRandomPinNum(savedRandomPinNum)\r\n        console.log(\"rand off\",savedRandomPinNum.length)\r\n        setAllstarRandom(false)\r\n      }\r\n    }\r\n    const onSetRandom = (event) => {\r\n      const random=shuffleArray(randomPinNum)\r\n      setRandomPinNum(random);\r\n    }\r\n\r\n     const onSubmitImage= async(event) => {\r\n        event.preventDefault();\r\n        handleFilesUploadOnFirebaseStorage(submitField,upFile);\r\n    //     const fileRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`);\r\n    //     const response = await fileRef.putString(imageString,\"data_url\");\r\n    //     const imageUrl =await response.ref.getDownloadURL();\r\n    //     setImageString(\"\");\r\n        setUpFile([])\r\n     }\r\n     const onFileChange= (event)=>{\r\n        const {\r\n            target:{files}\r\n        }= event;\r\n        const theFile = files[0];\r\n        setUpFile(files)\r\n        console.log(files)\r\n        // const reader= new FileReader();\r\n        // reader.onloadend = (finishedEvent)=>{\r\n        //     const {\r\n        //         currentTarget:{result},\r\n        //     }=finishedEvent;\r\n            \r\n        //     setImageString(result);\r\n        // }\r\n        // reader.readAsDataURL(theFile);\r\n     }\r\n    const handleFileUploadOnFirebaseStorage = async (bucketName, file) => {\r\n      // 1. If no file, return\r\n      if (file === \"\") return \"\";\r\n\r\n      // 2. Put the file into bucketName\r\n      try {\r\n      const uploadTask = await storageService.ref(`/${bucketName}/${file.name}`).put(file);\r\n   \r\n      \r\n      // 3. Get download URL and return it as \r\n      return uploadTask.ref.getDownloadURL().then((fileURL) => fileURL);\r\n    } catch (e) {\r\n      console.log(e) // 에러출력 or 에러의 경우 처리할 로직작성하자\r\n    }\r\n   };\r\n\r\n   const handleFilesUploadOnFirebaseStorage = async (bucketName, files) => {\r\n    // 1. If no file, return\r\n    if (files.length === 0) return [];\r\n\r\n    // 2. Create an array to store all download URLs\r\n    // let fileUrls = [];\r\n    \r\n    // 3. Loop over all the files.\r\n    // submitField.slice(0,-2)\r\n   \r\n    if(bucketName.includes(\"-2\")){ \r\n      const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n      \r\n      for (var i = 0; i < files.length; i++) {\r\n        // 3A. Get a file to upload\r\n        const file = files[i];\r\n\r\n        // 3B. handleFileUploadOnFirebaseStorage function is in above section\r\n        const downloadFileResponse = await handleFileUploadOnFirebaseStorage(bucketName, file);\r\n        \r\n        const url = downloadFileResponse;\r\n        const startIndex = url.indexOf(\"pot.com/o/\");\r\n        const endIndex = url.indexOf(\"&token=\");\r\n        const shortresult = url.slice(startIndex, endIndex);\r\n        pinDocRef.update({\r\n            [bucketName.slice(0,-2)]:firebase.firestore.FieldValue.arrayUnion(shortresult)\r\n    });\r\n    console.log(\"complete : \",i+1,\"/\",files.length,\" \",downloadFileResponse)\r\n        \r\n        // 3C. Push the download url to URLs array\r\n        // fileUrls.push(downloadFileResponse);\r\n    }\r\n    \r\n    }\r\n      else{\r\n        const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n        \r\n    for (var i = 0; i < files.length; i++) {\r\n      // 3A. Get a file to upload\r\n      const file = files[i];\r\n\r\n      // 3B. handleFileUploadOnFirebaseStorage function is in above section\r\n      const downloadFileResponse = await handleFileUploadOnFirebaseStorage(bucketName, file);\r\n      const url = downloadFileResponse;\r\nconst startIndex = url.indexOf(\"pot.com/o/\");\r\nconst endIndex = url.indexOf(\"&token=\");\r\nconst shortresult = url.slice(startIndex, endIndex);\r\n // output: \"pot.com/o/crou-2%2Ffc2blog_20200409061322266.jpg?alt=media\"\r\n\r\n      \r\n      pinDocRef.update({\r\n          [bucketName]:firebase.firestore.FieldValue.arrayUnion(shortresult)\r\n  });\r\n  console.log(\"complete : \",i+1,\"/\",files.length,\" \",downloadFileResponse)\r\n      \r\n      // 3C. Push the download url to URLs array\r\n      // fileUrls.push(downloadFileResponse);\r\n  }\r\n      \r\n      \r\n      }\r\n  \r\n\r\n    // return fileUrls;\r\n};\r\n\r\n  return(\r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        if (keyName == \"ctrl+z\") { onUndoClick(); }\r\n        if (keyName == \"c\") {\r\n          if (brushColor != \"erase\") { onEraseClick(); }\r\n          else if (brushColor == \"erase\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      } }\r\n    ></Hotkeys>\r\n    <div>\r\n        {/* <PieChart style={{ height: '35px' }}\r\n    data={[{ value: 1, key: 1, color: '#E38627' }]}\r\n    startAngle={-90}\r\n    reveal={-100*(min*60+sec)/croquisTime}\r\n    lineWidth={100}\r\n    // background=\"#f3f3f3\"\r\n    lengthAngle={360}\r\n    /> */}\r\n        {/* <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(pinID + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Croquis Time</button>\r\n\r\n          </>)}\r\n          <button onClick={updateSetting}>Update Setting</button> */}\r\n          {isAndroid?(<>\r\n            <div style={{ float: 'right' }}>\r\n            <button onClick={onAllStarRandom}>{allstarRandom?\"off\":\"ran\"}</button>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            \r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(drawNum + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          {timeSetBottonToggle&&(<><button onClick={updateSetting}>Setting</button></>)}\r\n          </div>\r\n          </>):(<><div style={{width: \"1000px\"}}>\r\n          <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(drawNum + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          {timeSetBottonToggle&&(<><button onClick={updateSetting}>Setting</button></>)}\r\n          \r\n          </div>\r\n          </div></>)}\r\n          \r\n          \r\n          \r\n          {/* <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinHeight: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasHeight: e.target.value }))\r\n          }\r\n        /> */}\r\n\r\n\r\n       \r\n\r\n\r\n        {isAndroid?(<><div>\r\n          <select  defaultValue={-1} onChange={selectChange} >\r\n          \r\n    {/* {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}>{e.list}</option>;\r\n    })} */}\r\n    {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}  selected={localStorage.getItem(\"specdraw\") ? key === parseInt(localStorage.getItem(\"specdraw\")) : key === 0}>{e.list}</option>;\r\n    })}\r\n</select>\r\n</div>\r\n          <div style={{ float: 'left' }}>\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].startsWith(\"pot.com/o/\"))?(<>\r\n            <img key={pinReload} src={randomPinNum[pinID].replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")}   height={450} frameBorder={0} scrolling=\"no\"></img>\r\n            \r\n            </>):(<>\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?\r\n          (<>\r\n          <img key={pinReload} src={randomPinNum[pinID]}   height={450} frameBorder={0} scrolling=\"no\"></img>\r\n          </>):(<>\r\n            <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)}</>)}\r\n          {/* <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} width={300} frameBorder={0}  ></iframe> */}\r\n          </div>\r\n        \r\n        \r\n        </>):(<>\r\n\r\n\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvas}>Up&Re</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvasAndRedraw}>Review</button>\r\n            </div>\r\n\r\n        <div style={{ float: 'right' }}>\r\n        <button onClick={onSubmit}>Upload</button>\r\n              \r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onNextClick}>Next</button>\r\n            </div>\r\n            <div style={{ float: 'left' }}>\r\n          <button  onClick={e=>{if(refWidth==400){setRefWidth(600)}else if(refWidth==600){setRefWidth(400)}}}>ex</button>\r\n          <button onClick={onAllStarRandom}>{allstarRandom?\"off\":\"ran\"}</button>\r\n          </div>\r\n        <div style={{\r\n          position: 'absolute',\r\n          left: '30%',\r\n          transform: 'translateX(-50%)',\r\n          width: '70px',\r\n          textAlign: 'center',\r\n\r\n          background: 'linear-gradient(to left,#FFC365 ' + (min * 60 + sec) * 100 / croquisTime + '%,#E8E8E8 ' + (min * 60 + sec) * 100 / croquisTime + '%)'\r\n        }}>\r\n          {min}: {sexagesimal(sec)}\r\n        </div>\r\n\r\n\r\n\r\n\r\n        <div>\r\n          <form  onSubmit={onSubmitPinNum}>\r\n          <select  defaultValue={2}  onChange={selectChange} >\r\n          \r\n    {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}  selected={localStorage.getItem(\"specdraw\") ? key === parseInt(localStorage.getItem(\"specdraw\")) : key === 0}>{e.list}</option>;\r\n    })}\r\n</select>\r\n            <input value={pinNum} onChange={onChange} type={\"text\"} placeholder=\"You Can Upload Pinterst Pin By Url Number\" />\r\n            <input type={\"submit\"} value=\"Upload Pin\" />\r\n            \r\n          </form>\r\n          \r\n          {/* <button onClick={onDeletePinClick}>Delete Pin</button> */}\r\n          \r\n         \r\n\r\n        </div>\r\n        \r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left' }}>\r\n        {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].startsWith(\"pot.com/o/\"))?(<>\r\n            <img key={pinReload} src={randomPinNum[pinID].replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")}   width={refWidth} frameBorder={0} scrolling=\"no\"></img>\r\n            \r\n            </>):(<>\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?\r\n          (<>\r\n          <img key={pinReload} src={randomPinNum[pinID]}  width={refWidth} frameBorder={0} scrolling=\"no\"></img>\r\n          </>):(<>\r\n            <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={refWidth+370} width={refWidth} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)}</>)}\r\n        \r\n          \r\n        </div>\r\n\r\n</>)}\r\n\r\n\r\n\r\n\r\n\r\n        <div style={{float: 'left' }}>\r\n          <div>\r\n\r\n\r\n\r\n          {isAndroid?(<><div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear</button>\r\n        </div>\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvas}>UpRe</button>\r\n              <button onClick={onSubmitOnlyCanvasAndRedraw}>Rev</button>\r\n            </div>\r\n            {/* <div style={{ float: 'right' }}>\r\n              \r\n            </div> */}\r\n\r\n            <div style={{ float: 'right' }}>\r\n        <button onClick={onSubmit}>Up</button>\r\n              \r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onNextClick}>Next</button>\r\n            </div>\r\n\r\n            \r\n\r\n          <div style={{ float: 'right' }}>\r\n          {min}: {sexagesimal(sec)}\r\n          </div>\r\n            </>):(<></>)}\r\n\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {brushColor==\"erase\" ? (<>\r\n                <label>Er:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Br:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n              \r\n\r\n\r\n            </div>\r\n            \r\n            <div style={{ float: 'left' }}>\r\n              {isAndroid?(<><button style={{paddingLeft:\"15px\"}} onClick={onUndoClick}>◀</button></>):(<><button onClick={onUndoClick}>◀</button></>)}\r\n            </div>\r\n\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n\r\n\r\n            </div>\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>\r\n\r\n            \r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor}\r\n              imgSrc={imgs}\r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]} />\r\n          </div>\r\n        </div>\r\n        \r\n          {timeSetBottonToggle&&(<><button onClick={onSetRandom}>random!</button></>)}\r\n                {timeSetBottonToggle&&(<> <form onSubmit={onSubmitImage}>\r\n          <input type={\"file\"} accept=\"image/*\" onChange={onFileChange} multiple/>\r\n          <input type={\"submit\"} value=\"Upload Croquis Images\"/>\r\n    </form></>)}\r\n       \r\n\r\n   \r\n\r\n\r\n\r\n        {/* <div>\r\n        {Csubmits.map((Csubmit)=>(\r\n            <CCsubmit key={Csubmit.id} CsubmitObj={Csubmit} isOwner={Csubmit.creatorId=== userObj.uid} />\r\n        ))}\r\n    </div> */}\r\n      </div></>\r\n  )\r\n \r\n };\r\n ","//import CCsubmit from \"../components/Csubmit\";\r\n//import { v4 as uuidv4 } from 'uuid';\r\nimport { dbService ,storageService} from \"fbase\";\r\nimport React, { useEffect, useRef, useState,useCallback } from \"react\";\r\nimport CanvasDraw from \"../canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\n\r\nexport default ({userObj,isAndroid,penType}) =>  {\r\n \r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [Line,setLine]= useState([]);\r\n    const [croquisList,setCroquisList]= useState([]);\r\n    const [randomCroquisList,setRandomCroquisList]= useState([]);\r\n    const [savedRandomPinNum,setSavedRandomPinNum]=useState([\"\"]);\r\n    const [allstarRandom,setAllstarRandom]=useState(false);\r\n    const [submitField,setSubmitField]= useState(\"\");\r\n    const canvasRef = useRef();\r\n    const [pinNum,setPinNum]=useState(\"\");\r\n    const [randomPinNum,setRandomPinNum]=useState([\"\"]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const [pinID,setPinID]=useState(0);\r\n    const [drawNum,setDrawNum]=useState(0);\r\n    const [canvasLocation,setCanvasLocation]=useState(true);\r\n    const [imgs,setImgs]=useState(\"\")\r\n    const [croquisTime,setCroquisTime]=useState(60);\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    //allowpointertype으로 터치허용유무설정가능 일단 펜만 가능하게함. 나중에하는걸로\r\n        const [min,setMin]=useState(0);\r\n        const [sec,setSec]=useState(0);\r\n        const time=useRef(croquisTime);\r\n        const timeId=useRef(null);\r\n        const [drawSetting,setDrawSetting]=useState({\r\n            croquisTimeDB:60,\r\n            brushRadius:1,\r\n            lazyRadius:1,\r\n            eraseRadius:10,\r\n            \r\n\r\n\r\n        })\r\n    const [timeSetBottonToggle,setTimeSetBottonToggle]=useState(false);\r\n\r\n\r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n    const [upFile,setUpFile]=useState([]);\r\n    const [refWidth,setRefWidth]=useState(400);\r\n\r\n    \r\n \r\n\r\n    function lowerImageTransparency(base64Image, callback) {\r\n      var img = new Image();\r\n      img.onload = function () {\r\n        var canvas = document.createElement(\"canvas\");\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n    \r\n        var ctx = canvas.getContext(\"2d\");\r\n        ctx.drawImage(img, 0, 0);\r\n    \r\n        var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        var data = imageData.data;\r\n    \r\n        for (var i = 0; i < data.length; i += 4) {\r\n          // Reduce the alpha (transparency) value by 50%\r\n          data[i + 3] = Math.floor(data[i + 3] * 0.2);\r\n        }\r\n    \r\n        ctx.putImageData(imageData, 0, 0);\r\n    \r\n        // Convert the modified image to base64 format\r\n        var modifiedBase64Image = canvas.toDataURL(\"image/png\");\r\n    \r\n        callback(modifiedBase64Image);\r\n      };\r\n      img.src = base64Image;\r\n    }\r\n\r\n    \r\n    const getMyCroquisSettings = ()=>{\r\n              dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n            if (doc.exists) {\r\n                setDrawSetting({\r\n                    brushRadius:doc.data().brushRadius,\r\n                    lazyRadius:doc.data().lazyRadius,\r\n                    eraseRadius:doc.data().eraseRadius,\r\n                    croquisTimeDB:doc.data().croquisTimeDB,\r\n                    })\r\n                    setCroquisTime(doc.data().croquisTimeDB)\r\n                console.log(doc.data())\r\n               // console.log(croquisTime)\r\n                time.current+=doc.data().croquisTimeDB-60;\r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"No such setting document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"Error getting document:\", error);\r\n             \r\n        });\r\n    }\r\n    const updateSetting =(event)=>{\r\n      // console.log(drawSetting.croquisTimeDB,typeof(drawSetting.croquisTimeDB))\r\n      // console.log(drawSetting.brushRadius,typeof(drawSetting.brushRadius))\r\n      // console.log(drawSetting.lazyRadius,typeof(drawSetting.lazyRadius))\r\n      // console.log(drawSetting.eraseRadius,typeof(drawSetting.eraseRadius))\r\n        dbService.collection(\"usersetting\").doc(userObj.uid).update({\r\n            brushRadius:drawSetting.brushRadius,\r\n            lazyRadius:drawSetting.lazyRadius,\r\n            croquisTimeDB:drawSetting.croquisTimeDB,\r\n            eraseRadius:drawSetting.eraseRadius,\r\n            \r\n        });\r\n    }\r\n    const refreshAndSubmit =()=>{\r\n        setPinreload(pinReload+1);\r\n        let _drawNum=0;\r\n        if(localStorage.getItem(\"drawNum\")==undefined){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n        }else{\r\n          _drawNum=localStorage.getItem(\"drawNum\")\r\n        }\r\n        localStorage.setItem(\"drawNum\", parseInt(_drawNum)+1)\r\n        setDrawNum(parseInt(_drawNum)+1)\r\n        localStorage.setItem(\"lastdrawtime\",parseInt(Date.now()))\r\n            setPinID(pinID+1);\r\n            //console.log(\"timeout\",randomPinNum[pinID])\r\n            \r\n            time.current=croquisTime;\r\n            \r\n            const data = canvasRef.current.getSaveData();\r\n            // const dataUrl=canvasRef.current.getDataURL();\r\n            // with img\r\n      const width = canvasRef.current.props.canvasWidth;\r\n      const height = canvasRef.current.props.canvasHeight;\r\n      const background = canvasRef.current.canvasContainer.children[0]; \r\n      const drawing = canvasRef.current.canvasContainer.children[1]; \r\n      const canvas = document.createElement('canvas');\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n  \r\n      // composite now\r\n      canvas.getContext('2d').drawImage(background, 0, 0);\r\n      // canvas.getContext('2d').globalAlpha = 1.0; \r\n      canvas.getContext('2d').drawImage(drawing, 0, 0);\r\n  \r\n      const dataUrl = canvas.toDataURL('image/png');\r\n            canvasRef.current.clear();\r\n            let redrawText = randomPinNum[pinID+1].substring(randomPinNum[pinID+1].indexOf(\"pot.com/o/\"), randomPinNum[pinID+1].length).replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")\r\n            console.log('이미지로딩!',redrawText);\r\n                 if(redrawText.length !=0){\r\n                  setImgs(redrawText+\"=media\")}    \r\n            // if(submitField==\"concept-2sss\"){\r\n            //   const storeDir= \"conceptRef\"\r\n            //   const newname= randomPinNum[pinID]\r\n            //   fetch(dataUrl)\r\n            //       .then(response => response.blob())\r\n                  \r\n            //       .then(blob => {\r\n            //           // Create a new Blob object with the renamed file\r\n            //           const renamedBlob = new Blob([blob], { type: blob.type, name: newname });\r\n            //           console.log('File renamed',newname);\r\n                      \r\n            //           // Get a reference to the new location in Firebase Storage\r\n            //           const newFileRef = storageService.ref(storeDir+\"/\"+newname);\r\n          \r\n            //           // Upload the renamed file\r\n            //           newFileRef.put(renamedBlob)\r\n            //           .then(() => {\r\n            //               console.log('File reuploaded !',storeDir,\"/\",newname);\r\n                          \r\n            //           })\r\n                      \r\n            //           .then(()=>{\r\n            //             const pinDocRef= dbService.doc(`concept/ref`);\r\n         \r\n          \r\n            //             //console.log(e)\r\n                      \r\n\r\n                          \r\n            //               newFileRef.getDownloadURL().then(url => {\r\n            //                 const startIndex = url.indexOf(\".com/o/\") ; //start index of the desired string\r\n            //                 // const startIndex = url.indexOf(\"test%2F\") + 6; //start index of the desired string\r\n            //                 const endIndex = url.indexOf(\"?alt=\");\r\n            //               //  //https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\r\n            //               //  conceptRef%2F744642119658841551?alt\r\n            //               //  =media\r\n            //                   const shorturl = url.substring(startIndex+7, endIndex+4);\r\n\r\n            //                   pinDocRef.update({\r\n            //                     [submitField]:firebase.firestore.FieldValue.arrayUnion(newname+shorturl)\r\n            //             }); \r\n            //                 //   for (var j =1; j< words.length-1;j++){\r\n                                      \r\n            //                 //   pinDocRef.update({\r\n            //                 //       [words[j]]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])});\r\n            //                 //       console.log(\"field deleted and updated in \",words[j],\", \")\r\n                                 \r\n            //                 //   pinDocRef.update({\r\n            //                 //     [words[j]]:firebase.firestore.FieldValue.arrayUnion(shorturl) });\r\n            //                 // }\r\n            //               })  \r\n                         \r\n                                \r\n            //           });\r\n            //       })\r\n                \r\n\r\n\r\n\r\n\r\n              \r\n              \r\n             \r\n            // }\r\n\r\n\r\n            dbService.collection(\"Csubmit\").add({\r\n                text:\"\",\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:croquisTime-min*60-sec,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:randomPinNum[pinID].substring(0,randomPinNum[pinID].indexOf(\"pot.com/o/\"))\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n    useEffect(()=> {\r\n      if(localStorage.getItem(\"drawNum\")==undefined){\r\n        localStorage.setItem(\"drawNum\", parseInt(0))\r\n        setDrawNum(parseInt(0))\r\n      }else{\r\n        setDrawNum(parseInt(localStorage.getItem(\"drawNum\")))\r\n      }\r\n      if(!(localStorage.getItem(\"lastdrawtime\")==undefined)){\r\n        if(parseInt(Date.now())-parseInt(localStorage.getItem(\"lastdrawtime\"))>21600000){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n          setDrawNum(parseInt(0))\r\n        }\r\n      }\r\n     \r\n      getMyCroquisSettings();\r\n      setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n     \r\n        // timeId.current= setInterval(()=>{\r\n        //     setMin(parseInt(time.current/60));\r\n        //     setSec(time.current % 60);\r\n        //     time.current -= 1;\r\n        // },1000);\r\n        // return()=> clearInterval(timeId.current);\r\n    },[]);\r\n\r\n    // useEffect(()=> {\r\n    //     if(time.current<=-1){\r\n    //         refreshAndSubmit();\r\n            \r\n            \r\n    //     }\r\n    // },[sec]);\r\n\r\n    useEffect(()=> {\r\n      \r\n      let array = []         \r\n     \r\n       ///ref1불러오기\r\n             dbService.doc(`concept/ref`).get().then((doc) => {\r\n            if (doc.exists) {\r\n                //console.log(\"Document data:\", doc.data().refUrl);\r\n                //setRandomPinNum(doc.data().refUrl);\r\n                //console.log(\"doc\",doc.data().refUrl)\r\n                // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n                // console.log(typeof(doc.data().refUrl))\r\n                // setRandomPinNum(random);\r\n                \r\n                let data = doc.data();\r\n                Object.keys(data).forEach((name) => {\r\n                  console.log(name);\r\n                  array.push({\"list\":name,\"url\":data[name]});\r\n                });\r\n                \r\n                array.sort(function(a,b) {\r\n                          return a.list.localeCompare(b.list);})\r\n                //console.log(array)\r\n                \r\n                setCroquisList(array)\r\n                      const new_array = shuffleArray(array.flatMap(obj => obj.url));\r\n                      //const new_array = shuffleArray(array.map(obj => obj.url));\r\n                    setRandomCroquisList(new_array)\r\n                      // console.log(\"하하\",new_array)\r\n                      if(localStorage.getItem(\"speccopydraw\")==undefined){\r\n                        //const random=Object.values(array[0].url).sort(() => Math.random() - 0.5);\r\n                        const random=shuffleArray(Object.values(array[0].url))\r\n                        console.log(\"값은바로\",array[0].list)\r\n                      setSubmitField(array[0].list)\r\n                      setRandomPinNum(random);\r\n                      let redrawText = random[0].substring(random[0].indexOf(\"pot.com/o/\"), random[0].length).replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")\r\n                      console.log('이미지로딩!',redrawText);\r\n                           if(redrawText.length !=0){\r\n                            setImgs(redrawText+\"=media\")\r\n                            console.log(\"로딩완\")}\r\n\r\n                      setSavedRandomPinNum(random)  \r\n                      }else{\r\n                      // const random=Object.values(array[parseInt(localStorage.getItem(\"speccopydraw\"))].url).sort(() => Math.random() - 0.5);\r\n                      const random=shuffleArray(Object.values(array[parseInt(localStorage.getItem(\"speccopydraw\"))].url))\r\n                      console.log(\"값은바로\",array[parseInt(localStorage.getItem(\"speccopydraw\"))].list)\r\n                      setSubmitField(array[parseInt(localStorage.getItem(\"speccopydraw\"))].list)\r\n                      setRandomPinNum(random);\r\n                      let redrawText = random[0].substring(random[0].indexOf(\"pot.com/o/\"), random[0].length).replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")\r\n                      console.log('이미지로딩!',redrawText);\r\n                           if(redrawText.length !=0){\r\n                            setImgs(redrawText+\"=media\")\r\n                            console.log(\"로딩완\")}\r\n                            \r\n                      setSavedRandomPinNum(random)   \r\n                      }\r\n                \r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"ref1 No such document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"ref1 Error getting document:\", error);\r\n             \r\n        }).then(e=>{\r\n// ///ref2불러오기          \r\n// dbService.doc(`RefDB/refStrings2`).get().then((doc) => {\r\n//   if (doc.exists) {\r\n//       //console.log(\"Document data:\", doc.data().refUrl);\r\n//       //setRandomPinNum(doc.data().refUrl);\r\n//       //console.log(\"doc\",doc.data().refUrl)\r\n//       // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n//       // console.log(typeof(doc.data().refUrl))\r\n//       // setRandomPinNum(random);\r\n      \r\n//       let data2 = doc.data();\r\n//       Object.keys(data2).forEach((name) => {\r\n//         console.log(name);\r\n//         array.push({\"list\":name+\"-2\",\"url\":data2[name]});\r\n//       });\r\n      \r\n    \r\n//       //console.log(array)\r\n      \r\n      \r\n//       array.sort(function(a,b) {\r\n//         return a.list.localeCompare(b.list);\r\n//     });\r\n    \r\n   \r\n      \r\n    \r\n//       setCroquisList(array)\r\n//       const new_array = shuffleArray(array.flatMap(obj => obj.url));\r\n//       //const new_array = shuffleArray(array.map(obj => obj.url));\r\n//     setRandomCroquisList(new_array)\r\n//       // console.log(\"하하\",new_array)\r\n//       if(localStorage.getItem(\"speccopydraw\")==undefined){\r\n//         //const random=Object.values(array[0].url).sort(() => Math.random() - 0.5);\r\n//         const random=shuffleArray(Object.values(array[0].url))\r\n//         console.log(\"값은바로\",array[0].list)\r\n//       setSubmitField(array[0].list)\r\n//       setRandomPinNum(random);\r\n//       setSavedRandomPinNum(random)  \r\n//       }else{\r\n//       // const random=Object.values(array[parseInt(localStorage.getItem(\"speccopydraw\"))].url).sort(() => Math.random() - 0.5);\r\n//       const random=shuffleArray(Object.values(array[parseInt(localStorage.getItem(\"speccopydraw\"))].url))\r\n//       console.log(\"값은바로\",array[parseInt(localStorage.getItem(\"speccopydraw\"))].list)\r\n//       setSubmitField(array[parseInt(localStorage.getItem(\"speccopydraw\"))].list)\r\n//       setRandomPinNum(random);\r\n//       setSavedRandomPinNum(random)   \r\n//       }\r\n      \r\n//   } else {\r\n//       // doc.data() will be undefined in this case\r\n//       console.log(\"ref2 No such document!\");\r\n//   }\r\n// }).catch((error) => {\r\n//   console.log(\"ref2  Error getting document:\", error);\r\n   \r\n// });\r\n\r\n        });\r\n//정리\r\n            \r\n\r\n\r\n       \r\n        // dbService.collection(\"Csubmit\").onSnapshot((snapshot) =>{\r\n        //     const CsubmitArray = snapshot.docs.map((doc)=>({\r\n        //         id: doc.id,\r\n        //         ...doc.data(),\r\n        //     }));\r\n            \r\n        //     setCsubmits(CsubmitArray);\r\n        //     //console.log(Csubmits);\r\n        // });\r\n\r\n        \r\n        \r\n\r\n    },[]);\r\n    function shuffleArray(array) {\r\n      for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [array[i], array[j]] = [array[j], array[i]];\r\n      }\r\n      return array;\r\n    }\r\n\r\n    \r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n        //  const data = canvasRef.current.getSaveData();\r\n        //  canvasRef.current.clear();\r\n     \r\n         \r\n        //  await dbService.collection(\"Csubmit\").add({\r\n        //      text:data,\r\n        //      createdAt: Date.now(),\r\n        //      creatorId: userObj.uid,\r\n        //      heart:(0),\r\n        //     //  refPhoto:{refPhoto},\r\n        //      //pinNumber:randomPinNum,\r\n        //  });\r\n        //  setCsubmit(\"\"); \r\n        refreshAndSubmit();\r\n        // setImgs(\"\")\r\n     };\r\n     const onSubmitPinNum= (event) => {\r\n        event.preventDefault();\r\n        if(submitField.includes(\"-2\")){\r\n          if(pinNum.match(\",\")){\r\n            \r\n            const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n         \r\n            pinNum.split(\",\").forEach(e => {\r\n                //console.log(e)\r\n                pinDocRef.update({\r\n                    [submitField.slice(0,-2)]:firebase.firestore.FieldValue.arrayUnion(e)\r\n            }); \r\n            \r\n        });\r\n        }else if(pinNum.length>1){\r\n            const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n            pinDocRef.update({\r\n                [submitField.slice(0,-2)]:firebase.firestore.FieldValue.arrayUnion(pinNum)\r\n        });\r\n        }\r\n\r\n\r\n        }\r\n        else{\r\n        if(pinNum.match(\",\")){\r\n            \r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n         \r\n            pinNum.split(\",\").forEach(e => {\r\n                //console.log(e)\r\n                pinDocRef.update({\r\n                    [submitField]:firebase.firestore.FieldValue.arrayUnion(e)\r\n            }); \r\n            \r\n        });\r\n        }else if(pinNum.length>1){\r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n            pinDocRef.update({\r\n                [submitField]:firebase.firestore.FieldValue.arrayUnion(pinNum)\r\n        });\r\n        }\r\n      }\r\n\r\n        \r\n           \r\n        setPinNum(\"\")\r\n\r\n     }\r\n     const onChange = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setPinNum(value);\r\n     }\r\n     const onChangeTime = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setCroquisTime(value);\r\n         setDrawSetting(prevState=>({...prevState, croquisTimeDB: event.target.value }))\r\n         \r\n     }\r\n \r\n     const onSubmitTime= (event) => {\r\n        event.preventDefault();\r\n        setTimeSetBottonToggle(false)\r\n        console.log(\"현재값은\",submitField)\r\n        let redrawText = randomPinNum[pinID].substring(randomPinNum[pinID].indexOf(\"pot.com/o/\"), randomPinNum[pinID].length).replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")\r\n        console.log('이미지로딩!',redrawText);\r\n             if(redrawText.length !=0){\r\n              setImgs(redrawText+\"=media\")}\r\n        //setCroquisTime(0)\r\n     }\r\n     const noRefreshAndSubmit =()=>{\r\n        \r\n      //console.log(\"timeout\",randomPinNum[pinID])\r\n      let _drawNum=0;\r\n        if(localStorage.getItem(\"drawNum\")==undefined){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n        }else{\r\n          _drawNum=localStorage.getItem(\"drawNum\")\r\n        }\r\n        localStorage.setItem(\"drawNum\", parseInt(_drawNum)+1)\r\n        setDrawNum(parseInt(_drawNum)+1)\r\n        localStorage.setItem(\"lastdrawtime\",parseInt(Date.now()))\r\n      time.current=croquisTime;\r\n      \r\n      const data = canvasRef.current.getSaveData();\r\n      // const dataUrl=canvasRef.current.getDataURL();\r\n      // with img\r\n      const width = canvasRef.current.props.canvasWidth;\r\n    const height = canvasRef.current.props.canvasHeight;\r\n    const background = canvasRef.current.canvasContainer.children[0]; \r\n    const drawing = canvasRef.current.canvasContainer.children[1]; \r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    // composite now\r\n    canvas.getContext('2d').drawImage(background, 0, 0);\r\n    // canvas.getContext('2d').globalAlpha = 1.0; \r\n    canvas.getContext('2d').drawImage(drawing, 0, 0);\r\n\r\n    const dataUrl = canvas.toDataURL('image/png');\r\n      canvasRef.current.clear();\r\n  \r\n      let redrawText = randomPinNum[pinID+1].substring(randomPinNum[pinID+1].indexOf(\"pot.com/o/\"), randomPinNum[pinID+1].length).replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")\r\n        console.log('이미지로딩!',redrawText);\r\n             if(redrawText.length !=0){\r\n              setImgs(redrawText+\"=media\")}    \r\n      dbService.collection(\"Csubmit\").add({\r\n          text:\"\",\r\n          createdAt: Date.now(),\r\n          creatorId: userObj.uid,\r\n          drawingTime:croquisTime-min*60-sec,\r\n          heart:(0),\r\n          dataUrl:dataUrl,\r\n          refPinUrl:randomPinNum[pinID].substring(0,randomPinNum[pinID].indexOf(\"pot.com/o/\"))\r\n         //  refPhoto:{refPhoto},\r\n          //pinNumber:randomPinNum,\r\n      });\r\n      \r\n      setCsubmit(\"\"); \r\n\r\n      //clearInterval(timeId.current);\r\n}\r\n     const onSubmitOnlyCanvas= (event) => {\r\n      event.preventDefault();\r\n  \r\n     noRefreshAndSubmit();\r\n     setImgs(\"\")\r\n  };\r\n     const onSubmitOnlyCanvasAndRedraw= (event) => {\r\n      event.preventDefault();\r\n      const dataUrls=canvasRef.current.getDataURL();\r\n      lowerImageTransparency(dataUrls, function (modifiedBase64Image) {\r\n        setImgs(modifiedBase64Image)\r\n      });\r\n     \r\n      \r\n     noRefreshAndSubmit();\r\n     canvasRef.current.clear();\r\n  };\r\n     const onNextClick= (event) => {\r\n      event.preventDefault();\r\n  \r\n      setPinreload(pinReload+1);\r\n      //canvasRef.current.clear();\r\n      let redrawText = randomPinNum[pinID+1].substring(randomPinNum[pinID+1].indexOf(\"pot.com/o/\"), randomPinNum[pinID+1].length).replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")\r\n        console.log('이미지로딩!',redrawText);\r\n             if(redrawText.length !=0){\r\n              setImgs(redrawText+\"=media\")}      \r\n      setPinID(pinID+1);\r\n      \r\n      time.current=croquisTime;\r\n  };\r\n\r\n     const onDeletePinClick= () => {\r\n      if(submitField.includes(\"-aaaaad2\")){\r\n        const pinDocRef= dbService.doc(`concept/ref`);\r\n        pinDocRef.update({\r\n            [submitField.slice(0,-2)]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])\r\n    });\r\n      }else{\r\n      const pinDocRef= dbService.doc(`concept/ref`);\r\n      pinDocRef.update({\r\n          [submitField]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])\r\n  });\r\n}\r\n  setPinreload(pinReload+1);\r\n            \r\n            setPinID(pinID+1);\r\n    };\r\n \r\n     const onClearClick= () => {\r\n      const ok = window.confirm(\"wanna clear this?\")\r\n      if(ok){\r\n        canvasRef.current.clear();\r\n          setImgs(\"\")\r\n      }\r\n    };\r\n     const onUndoClick= () => {\r\n        canvasRef.current.undo();\r\n    };\r\n     const onEraseClick= () => {\r\n        setBrushColor(\"erase\")\r\n        \r\n    };\r\n     const onBrushClick= () => {\r\n        setBrushColor(\"#444\")\r\n       \r\n    };\r\n    const onShadowClick= () => {\r\n      setBrushColor(\"shadow\")\r\n      \r\n  };\r\n\r\n    function ordinal_suffix_of(i) {\r\n        var j = i % 10,\r\n            k = i % 100;\r\n        if (j == 1 && k != 11) {\r\n            return i + \"st\";\r\n        }\r\n        if (j == 2 && k != 12) {\r\n            return i + \"nd\";\r\n        }\r\n        if (j == 3 && k != 13) {\r\n            return i + \"rd\";\r\n        }\r\n        return i + \"th\";\r\n    }\r\n    function sexagesimal(i) {\r\n        if(i <= 9){\r\n            return \"0\"+i;\r\n        }else{\r\n            return i;\r\n        }\r\n    }\r\n\r\n    const selectChange = (e) => {\r\n\t\t// event handler\r\n\t\t// console.log(e.target.value);\r\n\t\t// console.log(croquisList[e.target.value].list);\r\n\t\tsetSubmitField(croquisList[e.target.value].list)\r\n    \r\n    localStorage.setItem(\"speccopydraw\", parseInt(e.target.value))\r\n\t\t// console.log(typeof(Object.values(croquisList[e.target.value].url)));\r\n     \r\n        //const random=Object.values(croquisList[e.target.value].url).sort(() => Math.random() - 0.5);\r\n        const random=shuffleArray(Object.values(croquisList[e.target.value].url))\r\n                setRandomPinNum(random);\r\n                setSavedRandomPinNum(random)\r\n\t};\r\n    //  const onChange = (event)=> {\r\n    //      const {\r\n    //          target:{value},\r\n    //      }=event;\r\n    //      setCsubmit(value);\r\n    //  }\r\n    const onAllStarRandom = (event) => {\r\n      if(allstarRandom==false){\r\n        setRandomPinNum(randomCroquisList)\r\n        console.log(\"rand on\",randomCroquisList.length)\r\n        setAllstarRandom(true)\r\n      }else{\r\n        setRandomPinNum(savedRandomPinNum)\r\n        console.log(\"rand off\",savedRandomPinNum.length)\r\n        setAllstarRandom(false)\r\n      }\r\n    }\r\n    const onSetRandom = (event) => {\r\n      const random=shuffleArray(randomPinNum)\r\n      setRandomPinNum(random);\r\n      canvasRef.current.clear();\r\n      let redrawText = randomPinNum[pinID].substring(randomPinNum[pinID].indexOf(\"pot.com/o/\"), randomPinNum[pinID].length).replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")\r\n        console.log('이미지로딩!',redrawText);\r\n             if(redrawText.length !=0){\r\n              setImgs(redrawText+\"=media\")}    \r\n    }\r\n\r\n     const onSubmitImage= async(event) => {\r\n        event.preventDefault();\r\n        handleFilesUploadOnFirebaseStorage(submitField,upFile);\r\n    //     const fileRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`);\r\n    //     const response = await fileRef.putString(imageString,\"data_url\");\r\n    //     const imageUrl =await response.ref.getDownloadURL();\r\n    //     setImageString(\"\");\r\n        setUpFile([])\r\n     }\r\n     const onFileChange= (event)=>{\r\n        const {\r\n            target:{files}\r\n        }= event;\r\n        const theFile = files[0];\r\n        setUpFile(files)\r\n        console.log(files)\r\n        // const reader= new FileReader();\r\n        // reader.onloadend = (finishedEvent)=>{\r\n        //     const {\r\n        //         currentTarget:{result},\r\n        //     }=finishedEvent;\r\n            \r\n        //     setImageString(result);\r\n        // }\r\n        // reader.readAsDataURL(theFile);\r\n     }\r\n    const handleFileUploadOnFirebaseStorage = async (bucketName, file) => {\r\n      // 1. If no file, return\r\n      if (file === \"\") return \"\";\r\n\r\n      // 2. Put the file into bucketName\r\n      try {\r\n      const uploadTask = await storageService.ref(`/${bucketName}/${file.name}`).put(file);\r\n   \r\n      \r\n      // 3. Get download URL and return it as \r\n      return uploadTask.ref.getDownloadURL().then((fileURL) => fileURL);\r\n    } catch (e) {\r\n      console.log(e) // 에러출력 or 에러의 경우 처리할 로직작성하자\r\n    }\r\n   };\r\n\r\n   const handleFilesUploadOnFirebaseStorage = async (bucketName, files) => {\r\n    // 1. If no file, return\r\n    if (files.length === 0) return [];\r\n\r\n    // 2. Create an array to store all download URLs\r\n    // let fileUrls = [];\r\n    \r\n    // 3. Loop over all the files.\r\n    // submitField.slice(0,-2)\r\n   \r\n    if(bucketName.includes(\"-2\")){ \r\n      const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n      \r\n      for (var i = 0; i < files.length; i++) {\r\n        // 3A. Get a file to upload\r\n        const file = files[i];\r\n\r\n        // 3B. handleFileUploadOnFirebaseStorage function is in above section\r\n        const downloadFileResponse = await handleFileUploadOnFirebaseStorage(bucketName, file);\r\n        \r\n        const url = downloadFileResponse;\r\n        const startIndex = url.indexOf(\"pot.com/o/\");\r\n        const endIndex = url.indexOf(\"&token=\");\r\n        const shortresult = url.slice(startIndex, endIndex);\r\n        pinDocRef.update({\r\n            [bucketName.slice(0,-2)]:firebase.firestore.FieldValue.arrayUnion(shortresult)\r\n    });\r\n    console.log(\"complete : \",i+1,\"/\",files.length,\" \",downloadFileResponse)\r\n        \r\n        // 3C. Push the download url to URLs array\r\n        // fileUrls.push(downloadFileResponse);\r\n    }\r\n    \r\n    }\r\n      else{\r\n        const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n        \r\n    for (var i = 0; i < files.length; i++) {\r\n      // 3A. Get a file to upload\r\n      const file = files[i];\r\n\r\n      // 3B. handleFileUploadOnFirebaseStorage function is in above section\r\n      const downloadFileResponse = await handleFileUploadOnFirebaseStorage(bucketName, file);\r\n      const url = downloadFileResponse;\r\nconst startIndex = url.indexOf(\"pot.com/o/\");\r\nconst endIndex = url.indexOf(\"&token=\");\r\nconst shortresult = url.slice(startIndex, endIndex);\r\n // output: \"pot.com/o/crou-2%2Ffc2blog_20200409061322266.jpg?alt=media\"\r\n\r\n      \r\n      pinDocRef.update({\r\n          [bucketName]:firebase.firestore.FieldValue.arrayUnion(shortresult)\r\n  });\r\n  console.log(\"complete : \",i+1,\"/\",files.length,\" \",downloadFileResponse)\r\n      \r\n      // 3C. Push the download url to URLs array\r\n      // fileUrls.push(downloadFileResponse);\r\n  }\r\n      \r\n      \r\n      }\r\n  \r\n\r\n    // return fileUrls;\r\n};\r\n\r\n\r\n\r\n  return(\r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        if (keyName == \"ctrl+z\") { onUndoClick(); }\r\n        if (keyName == \"c\") {\r\n          if (brushColor != \"erase\") { onEraseClick(); }\r\n          else if (brushColor == \"erase\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      } }\r\n    ></Hotkeys>\r\n    <div>\r\n        {/* <PieChart style={{ height: '35px' }}\r\n    data={[{ value: 1, key: 1, color: '#E38627' }]}\r\n    startAngle={-90}\r\n    reveal={-100*(min*60+sec)/croquisTime}\r\n    lineWidth={100}\r\n    // background=\"#f3f3f3\"\r\n    lengthAngle={360}\r\n    /> */}\r\n        {/* <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(pinID + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Croquis Time</button>\r\n\r\n          </>)}\r\n          <button onClick={updateSetting}>Update Setting</button> */}\r\n          {isAndroid?(<>\r\n            <div style={{ float: 'right' }}>\r\n            <button onClick={onAllStarRandom}>{allstarRandom?\"off\":\"ran\"}</button>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            \r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(drawNum + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          {timeSetBottonToggle&&(<><button onClick={updateSetting}>Setting</button></>)}\r\n          </div>\r\n          </>):(<><div style={{width: \"1000px\"}}>\r\n          <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(drawNum + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          {timeSetBottonToggle&&(<><button onClick={updateSetting}>Setting</button></>)}\r\n          \r\n          </div>\r\n          </div></>)}\r\n          \r\n          \r\n          \r\n          {/* <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinHeight: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasHeight: e.target.value }))\r\n          }\r\n        /> */}\r\n\r\n\r\n       \r\n\r\n\r\n        {isAndroid?(<><div>\r\n          <select  defaultValue={-1} onChange={selectChange} >\r\n          \r\n    {/* {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}>{e.list}</option>;\r\n    })} */}\r\n    {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}  selected={localStorage.getItem(\"speccopydraw\") ? key === parseInt(localStorage.getItem(\"speccopydraw\")) : key === 0}>{e.list}</option>;\r\n    })}\r\n</select>\r\n</div>\r\n          <div style={{ float: 'left' }}>\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].startsWith(\"pot.com/o/\"))?(<>\r\n            <img key={pinReload} src={randomPinNum[pinID].substring(randomPinNum[pinID].indexOf(\"pot.com/o/\"), randomPinNum[pinID].length).replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")}   height={450} frameBorder={0} scrolling=\"no\"></img>\r\n            \r\n            </>):(<>\r\n            error,{randomPinNum[pinID]}\r\n          {/* {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?\r\n          (<>\r\n          <img key={pinReload} src={randomPinNum[pinID]}   height={450} frameBorder={0} scrolling=\"no\"></img>\r\n          </>):(<>\r\n            <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)} */}\r\n          </>)}\r\n          {/* <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} width={300} frameBorder={0}  ></iframe> */}\r\n          </div>\r\n        \r\n        \r\n        </>):(<>\r\n\r\n\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvas}>Up&Re</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvasAndRedraw}>Review</button>\r\n            </div>\r\n\r\n        <div style={{ float: 'right' }}>\r\n        <button onClick={onSubmit}>Upload</button>\r\n              \r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onNextClick}>Next</button>\r\n            </div>\r\n            <div style={{ float: 'left' }}>\r\n          <button  onClick={e=>{if(refWidth==400){setRefWidth(600)}else if(refWidth==600){setRefWidth(400)}}}>ex</button>\r\n          <button onClick={onAllStarRandom}>{allstarRandom?\"off\":\"ran\"}</button>\r\n          </div>\r\n        <div style={{\r\n          position: 'absolute',\r\n          left: '30%',\r\n          transform: 'translateX(-50%)',\r\n          width: '70px',\r\n          textAlign: 'center',\r\n\r\n          background: 'linear-gradient(to left,#FFC365 ' + (min * 60 + sec) * 100 / croquisTime + '%,#E8E8E8 ' + (min * 60 + sec) * 100 / croquisTime + '%)'\r\n        }}>\r\n          {min}: {sexagesimal(sec)}\r\n        </div>\r\n\r\n\r\n\r\n\r\n        <div>\r\n          <form  onSubmit={onSubmitPinNum}>\r\n          <select  defaultValue={2}  onChange={selectChange} >\r\n          \r\n    {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}  selected={localStorage.getItem(\"speccopydraw\") ? key === parseInt(localStorage.getItem(\"speccopydraw\")) : key === 0}>{e.list}</option>;\r\n    })}\r\n</select>\r\n            <input value={pinNum} onChange={onChange} type={\"text\"} placeholder=\"You Can Upload Pinterst Pin By Url Number\" />\r\n            <input type={\"submit\"} value=\"Upload Pin\" />\r\n            \r\n          </form>\r\n          \r\n          {/* <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button> */}\r\n          \r\n         \r\n\r\n        </div>\r\n        \r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left' }}>\r\n          \r\n        {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"pot.com/o/\"))?(<>\r\n            <img key={pinReload} src={randomPinNum[pinID].substring(randomPinNum[pinID].indexOf(\"pot.com/o/\"), randomPinNum[pinID].length).replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")+\"=media\"}   width={refWidth} frameBorder={0} scrolling=\"no\"></img>\r\n            \r\n            \r\n            </>):(<>\r\n            error,{randomPinNum[pinID]}\r\n{/*             \r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?\r\n          (<>\r\n          <img key={pinReload} src={randomPinNum[pinID]}  width={refWidth} frameBorder={0} scrolling=\"no\"></img>\r\n          </>):(<>\r\n            <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={refWidth+370} width={refWidth} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)} */}\r\n          </>)}\r\n        \r\n          \r\n        </div>\r\n\r\n</>)}\r\n\r\n\r\n\r\n\r\n\r\n        <div style={{float: 'left' }}>\r\n          <div>\r\n\r\n\r\n\r\n          {isAndroid?(<><div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear</button>\r\n        </div>\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvas}>UpRe</button>\r\n              <button onClick={onSubmitOnlyCanvasAndRedraw}>Rev</button>\r\n            </div>\r\n            {/* <div style={{ float: 'right' }}>\r\n              \r\n            </div> */}\r\n\r\n            <div style={{ float: 'right' }}>\r\n        <button onClick={onSubmit}>Up</button>\r\n              \r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onNextClick}>Next</button>\r\n            </div>\r\n\r\n            \r\n\r\n          <div style={{ float: 'right' }}>\r\n          {min}: {sexagesimal(sec)}\r\n          </div>\r\n            </>):(<></>)}\r\n\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {brushColor==\"erase\" ? (<>\r\n                <label>Er:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Br:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n              \r\n\r\n\r\n            </div>\r\n            \r\n            <div style={{ float: 'left' }}>\r\n              {isAndroid?(<><button style={{paddingLeft:\"15px\"}} onClick={onUndoClick}>◀</button></>):(<><button onClick={onUndoClick}>◀</button></>)}\r\n            </div>\r\n\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n\r\n\r\n            </div>\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>\r\n\r\n            \r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor}\r\n              imgSrc={imgs}\r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]} />\r\n          </div>\r\n        </div>\r\n        \r\n          {timeSetBottonToggle&&(<><button onClick={onSetRandom}>random!</button></>)}\r\n                {timeSetBottonToggle&&(<> <form onSubmit={onSubmitImage}>\r\n          <input type={\"file\"} accept=\"image/*\" onChange={onFileChange} multiple/>\r\n          <input type={\"submit\"} value=\"Upload Croquis Images\"/>\r\n    </form></>)}\r\n       \r\n\r\n   \r\n\r\n\r\n\r\n        {/* <div>\r\n        {Csubmits.map((Csubmit)=>(\r\n            <CCsubmit key={Csubmit.id} CsubmitObj={Csubmit} isOwner={Csubmit.creatorId=== userObj.uid} />\r\n        ))}\r\n    </div> */}\r\n      </div></>\r\n  )\r\n \r\n };\r\n ","import { dbService } from \"fbase\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\n\r\nexport default ({userObj}) => {\r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const canvasRef = useRef();\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    const [drawSetting,setDrawSetting]=useState({\r\n       \r\n        brushRadius:0.8,\r\n        lazyRadius:0,\r\n       \r\n        \r\n\r\n\r\n    })\r\n    const [youtubeUrlIndex,setYoutubeUrlIndex]=useState(0);\r\n    const [youtubeUrls,setYoutubeUrls]=useState([\r\n        \"https://www.adorkastock.com/sketch/\",\r\n        \"https://line-of-action.com/\"\r\n    ])\r\n\r\n    \r\n            \r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n\r\n   \r\n    useEffect(()=> {\r\n      dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n          if (doc.exists) {\r\n              setDrawSetting({\r\n                  brushRadius:doc.data().brushRadius,\r\n                  lazyRadius:doc.data().lazyRadius,\r\n                  })\r\n                  \r\n              //console.log(doc.data())\r\n              \r\n              \r\n             \r\n              \r\n              \r\n          } else {\r\n              // doc.data() will be undefined in this case\r\n              console.log(\"No such setting document!\");\r\n          }\r\n      }).catch((error) => {\r\n          console.log(\"Error getting document:\", error);\r\n           \r\n      });\r\n\r\n\r\n\r\n    \r\n  },[]);\r\n    \r\n    const refreshAndSubmit =()=>{\r\n        \r\n            \r\n           \r\n            \r\n            const data = canvasRef.current.getSaveData();\r\n            const dataUrl=canvasRef.current.getDataURL();\r\n            canvasRef.current.clear();\r\n        \r\n            \r\n            dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:0,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:\"\"\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n   \r\n\r\n   \r\n\r\n\r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n     \r\n        refreshAndSubmit();\r\n     };\r\n     \r\n     \r\n\r\n\r\n     const onClearClick= () => {\r\n        canvasRef.current.clear();\r\n    };\r\n    const onUndoClick= () => {\r\n      canvasRef.current.undo();\r\n  };\r\n   const onEraseClick= () => {\r\n      setBrushColor(\"erase\")\r\n      \r\n  };\r\n   const onBrushClick= () => {\r\n      setBrushColor(\"#444\")\r\n      \r\n  };\r\n  const onShadowClick= () => {\r\n    setBrushColor(\"shadow\")\r\n    \r\n};\r\n    \r\n    \r\n\r\n  return(\r\n    \r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        \r\n        if(keyName == \"ctrl+z\"){onUndoClick();}\r\n        if(keyName == \"c\"){\r\n        if(brushColor != \"erase\"){onEraseClick()}\r\n        else if(brushColor == \"erase\"){onBrushClick()}\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      } }\r\n      // onKeyUp={(keyName, e, handle) => {\r\n      //   console.log(\"test:onKeyUp\", e, handle);\r\n      //   setOutput(`onKeyUp ${keyName}`);\r\n      // } }\r\n    ></Hotkeys>\r\n    \r\n    \r\n    <div>\r\n\r\n        <div style={{ float: 'right' }}>\r\n\r\n\r\n\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        <div>\r\n\r\n\r\n          <label>videos:</label>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            max={youtubeUrls.length - 1}\r\n            style={{ width: \"30px\" }}\r\n            value={youtubeUrlIndex}\r\n            onChange={e => {\r\n              setYoutubeUrlIndex(e.target.value);\r\n              setPinreload(pinReload + 1);\r\n            } } />\r\n\r\n\r\n        </div>\r\n\r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        {/* <div style={{ float: 'left' }}>\r\n          <iframe key={pinReload} src={youtubeUrls[youtubeUrlIndex]} height={600} width={450} frameBorder={0} ></iframe>\r\n        </div> */}\r\n        <div style={{ float: 'left' }}>\r\n          <iframe is=\"x-frame-bypass\" key={pinReload} src={youtubeUrls[youtubeUrlIndex]} height={600} width={450} frameBorder={0} ></iframe>\r\n        </div>\r\n\r\n        <div style={{ float: 'left' }}>\r\n          <div>\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n            {brushColor==\"erase\" ? (<>\r\n                <label>Erase Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Brush Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onUndoClick}>◀</button>\r\n            </div>\r\n\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n              <div style={{ float: 'right' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>\r\n\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmit}>Upload Drawing</button>\r\n            </div>\r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor} />\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n\r\n      </div></>\r\n  )\r\n };","customElements.define('x-frame-bypass', class extends HTMLIFrameElement {\n\tstatic get observedAttributes() {\n\t\treturn ['src']\n\t}\n\tconstructor () {\n\t\tsuper()\n\t}\n\tattributeChangedCallback () {\n\t\tthis.load(this.src)\n\t}\n\tconnectedCallback () {\n\t\tthis.sandbox = '' + this.sandbox || 'allow-forms allow-modals allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts allow-top-navigation-by-user-activation' // all except allow-top-navigation\n\t}\n\tload (url, options) {\n\t\tif (!url || !url.startsWith('http'))\n\t\t\tthrow new Error(`X-Frame-Bypass src ${url} does not start with http(s)://`)\n\t\tconsole.log('X-Frame-Bypass loading:', url)\n\t\tthis.srcdoc = `<html>\n<head>\n\t<style>\n\t.loader {\n\t\tposition: absolute;\n\t\ttop: calc(50% - 25px);\n\t\tleft: calc(50% - 25px);\n\t\twidth: 50px;\n\t\theight: 50px;\n\t\tbackground-color: #333;\n\t\tborder-radius: 50%;  \n\t\tanimation: loader 1s infinite ease-in-out;\n\t}\n\t@keyframes loader {\n\t\t0% {\n\t\ttransform: scale(0);\n\t\t}\n\t\t100% {\n\t\ttransform: scale(1);\n\t\topacity: 0;\n\t\t}\n\t}\n\t</style>\n</head>\n<body>\n\t<div class=\"loader\"></div>\n</body>\n</html>`\n\t\tthis.fetchProxy(url, options, 0).then(res => res.text()).then(data => {\n\t\t\tif (data)\n\t\t\t\tthis.srcdoc = data.replace(/<head([^>]*)>/i, `<head$1>\n\t<base href=\"${url}\">\n\t<script>\n\t// X-Frame-Bypass navigation event handlers\n\tdocument.addEventListener('click', e => {\n\t\tif (frameElement && document.activeElement && document.activeElement.href) {\n\t\t\te.preventDefault()\n\t\t\tframeElement.load(document.activeElement.href)\n\t\t}\n\t})\n\tdocument.addEventListener('submit', e => {\n\t\tif (frameElement && document.activeElement && document.activeElement.form && document.activeElement.form.action) {\n\t\t\te.preventDefault()\n\t\t\tif (document.activeElement.form.method === 'post')\n\t\t\t\tframeElement.load(document.activeElement.form.action, {method: 'post', body: new FormData(document.activeElement.form)})\n\t\t\telse\n\t\t\t\tframeElement.load(document.activeElement.form.action + '?' + new URLSearchParams(new FormData(document.activeElement.form)))\n\t\t}\n\t})\n\t</script>`)\n\t\t}).catch(e => console.error('Cannot load X-Frame-Bypass:', e))\n\t}\n\tfetchProxy (url, options, i) {\n\t\tconst proxies = (options || {}).proxies || [\n\t\t\t'https://croquistoolcors.herokuapp.com/',\n\t\t\t'https://cors-anywhere.herokuapp.com/',\n\t\t\t'https://yacdn.org/proxy/',\n\t\t\t'https://api.codetabs.com/v1/proxy/?quest='\n\t\t]\n\t\treturn fetch(proxies[i] + url, options).then(res => {\n\t\t\tif (!res.ok)\n\t\t\t\tthrow new Error(`${res.status} ${res.statusText}`);\n\t\t\treturn res\n\t\t}).catch(error => {\n\t\t\tif (i === proxies.length - 1)\n\t\t\t\tthrow error\n\t\t\treturn this.fetchProxy(url, options, i + 1)\n\t\t})\n\t}\n}, {extends: 'iframe'})\n","import { dbService } from \"fbase\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\nimport bypass from \"./x-frame-bypass\"\r\nexport default ({userObj}) => {\r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const canvasRef = useRef();\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    const [drawSetting,setDrawSetting]=useState({\r\n       \r\n        brushRadius:0.8,\r\n        lazyRadius:0,\r\n       \r\n        \r\n\r\n\r\n    })\r\n    const [youtubeUrlIndex,setYoutubeUrlIndex]=useState(0);\r\n    const [youtubeUrls,setYoutubeUrls]=useState([\r\n        \r\n        \"https://line-of-action.com/\"\r\n    ])\r\n\r\n    \r\n            \r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n\r\n   \r\n    useEffect(()=> {\r\n      dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n          if (doc.exists) {\r\n              setDrawSetting({\r\n                  brushRadius:doc.data().brushRadius,\r\n                  lazyRadius:doc.data().lazyRadius,\r\n                  })\r\n                  \r\n              //console.log(doc.data())\r\n              \r\n              \r\n             \r\n              \r\n              \r\n          } else {\r\n              // doc.data() will be undefined in this case\r\n              console.log(\"No such setting document!\");\r\n          }\r\n      }).catch((error) => {\r\n          console.log(\"Error getting document:\", error);\r\n           \r\n      });\r\n\r\n\r\n\r\n    \r\n  },[]);\r\n    \r\n    const refreshAndSubmit =()=>{\r\n        \r\n            \r\n           \r\n            \r\n            const data = canvasRef.current.getSaveData();\r\n            const dataUrl=canvasRef.current.getDataURL();\r\n            canvasRef.current.clear();\r\n        \r\n            \r\n            dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:0,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:\"\"\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n   \r\n\r\n   \r\n\r\n\r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n     \r\n        refreshAndSubmit();\r\n     };\r\n     \r\n     \r\n\r\n\r\n     const onClearClick= () => {\r\n        canvasRef.current.clear();\r\n    };\r\n    const onUndoClick= () => {\r\n      canvasRef.current.undo();\r\n  };\r\n   const onEraseClick= () => {\r\n      setBrushColor(\"erase\")\r\n      \r\n  };\r\n   const onBrushClick= () => {\r\n      setBrushColor(\"#444\")\r\n      \r\n  };\r\n  const onShadowClick= () => {\r\n    setBrushColor(\"shadow\")\r\n    \r\n};\r\n    \r\n    \r\n\r\n  return(\r\n    \r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        \r\n        if(keyName == \"ctrl+z\"){onUndoClick();}\r\n        if(keyName == \"c\"){\r\n        if(brushColor != \"erase\"){onEraseClick()}\r\n        else if(brushColor == \"erase\"){onBrushClick()}\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      } }\r\n      // onKeyUp={(keyName, e, handle) => {\r\n      //   console.log(\"test:onKeyUp\", e, handle);\r\n      //   setOutput(`onKeyUp ${keyName}`);\r\n      // } }\r\n    ></Hotkeys>\r\n    \r\n    \r\n    <div>\r\n\r\n        <div style={{ float: 'right' }}>\r\n\r\n\r\n\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        <div>\r\n\r\n\r\n          <label>videos:</label>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            max={youtubeUrls.length - 1}\r\n            style={{ width: \"30px\" }}\r\n            value={youtubeUrlIndex}\r\n            onChange={e => {\r\n              setYoutubeUrlIndex(e.target.value);\r\n              setPinreload(pinReload + 1);\r\n            } } />\r\n\r\n\r\n        </div>\r\n\r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left' }}>\r\n          <iframe is=\"x-frame-bypass\" key={pinReload} src={youtubeUrls[youtubeUrlIndex]} height={600} width={450} frameBorder={0} ></iframe>\r\n        </div>\r\n\r\n        <div style={{ float: 'left' }}>\r\n          <div>\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n            {brushColor==\"erase\" ? (<>\r\n                <label>Erase Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Brush Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onUndoClick}>◀</button>\r\n            </div>\r\n\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>\r\n\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmit}>Upload Drawing</button>\r\n            </div>\r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor} />\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n\r\n      </div></>\r\n  )\r\n };","import { dbService, storageService } from \"fbase\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport firebase from \"firebase/compat/app\";\r\nimport PinchZoomPan from \"PinchZoomPan\";\r\nimport Hotkeys from \"react-hot-keys\";\r\n\r\n\r\n\r\n\r\nexport default ({ userObj }) => {\r\n  const [Csubmit, setCsubmit] = useState(\"\");\r\n  // const [Csubmits,setCsubmits]= useState([]);\r\n  const [pinReload, setPinreload] = useState(0);\r\n  const canvasRef3 = useRef();\r\n  const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n  const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n  const [drawSetting, setDrawSetting] = useState({\r\n\r\n    brushRadius: 1,\r\n    lazyRadius: 0,\r\n\r\n\r\n\r\n\r\n  })\r\n\r\n\r\n  const [twitterUrl, setTwitterUrl] = useState(\"HourlyLizards\");\r\n\r\n\r\n  const [brushColor, setBrushColor] = useState(\"#444\")\r\n  const [isBookmarked, setIsBookmarked] = useState(true)\r\n  const [isListOn, setIsListOn] = useState(false)\r\n  const [isListDelOn, setIsListDelOn] = useState(false)\r\n  const [bookmarkList, setBookmarkList] = useState([])\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    dbService.doc(\"usersetting/\" + userObj.uid).get().then((doc) => {\r\n      if (doc.exists) {\r\n        setDrawSetting({\r\n          brushRadius: doc.data().brushRadius,\r\n          lazyRadius: doc.data().lazyRadius,\r\n        })\r\n\r\n        console.log(doc.data())\r\n        // 북마크 로드\r\n        setBookmarkList(doc.data().twitterBookmark)\r\n\r\n        console.log(doc.data().twitterBookmark)\r\n        console.log(bookmarkList)\r\n\r\n\r\n\r\n\r\n      } else {\r\n        // doc.data() will be undefined in this case\r\n        console.log(\"No such setting document!\");\r\n      }\r\n    }).catch((error) => {\r\n      console.log(\"Error getting document:\", error);\r\n\r\n    });\r\n\r\n\r\n    setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n\r\n  }, []);\r\n\r\n\r\n\r\n\r\n\r\n  const refreshAndSubmit = () => {\r\n\r\n\r\n\r\n\r\n    const data = canvasRef3.current.getSaveData();\r\n    const dataUrl = canvasRef3.current.getDataURL();\r\n    canvasRef3.current.clear();\r\n\r\n\r\n    dbService.collection(\"Csubmit\").add({\r\n      text: data,\r\n      createdAt: Date.now(),\r\n      creatorId: userObj.uid,\r\n      drawingTime: 0,\r\n      heart: (0),\r\n      dataUrl: dataUrl,\r\n      refPinUrl: \"\",\r\n\r\n      //  refPhoto:{refPhoto},\r\n      //pinNumber:randomPinNum,\r\n    });\r\n\r\n    setCsubmit(\"\");\r\n\r\n    //clearInterval(timeId.current);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    refreshAndSubmit();\r\n  };\r\n\r\n\r\n\r\n\r\n  const onClearClick = () => {\r\n    const ok = window.confirm(\"wanna clear this?\")\r\n    if (ok) {\r\n      canvasRef3.current.clear();\r\n\r\n    }\r\n  };\r\n  const onUndoClick = () => {\r\n    canvasRef3.current.undo();\r\n  };\r\n  const onEraseClick = () => {\r\n    setBrushColor(\"erase\")\r\n\r\n  };\r\n  const onBrushClick = () => {\r\n    setBrushColor(\"#444\")\r\n\r\n  };\r\n  const onShadowClick = () => {\r\n    setBrushColor(\"shadow\")\r\n\r\n  };\r\n  const onSubmitTwitter = (event) => {\r\n    event.preventDefault();\r\n    setPinreload(pinReload + 1);\r\n    if (!bookmarkList.includes(twitterUrl)) { setIsBookmarked(false) } else { setIsBookmarked(true) }\r\n\r\n  };\r\n  const onTwitterListClick = (event) => {\r\n    event.preventDefault();\r\n    console.log(bookmarkList)\r\n    setIsListOn(!isListOn)\r\n\r\n  };\r\n  const onTwtterBookmark = () => {\r\n    \r\n    // 주소값이 어레이에 없으면 파이어베이스 필드에 저장\r\n    if (!bookmarkList.includes(twitterUrl)) {\r\n\r\n      const pinDocRef = dbService.collection(\"usersetting\").doc(userObj.uid);\r\n      pinDocRef.update({\r\n        twitterBookmark: firebase.firestore.FieldValue.arrayUnion(twitterUrl)\r\n      });\r\n      // let add = bookmarkList.push(twitterUrl)\r\n      // console.log(add)\r\n      setBookmarkList([twitterUrl, ...bookmarkList])\r\n    } else {\r\n      setIsBookmarked(true)\r\n    }\r\n\r\n\r\n  };\r\n\r\n  useEffect(() => {\r\n    const script = document.createElement(\"script\");\r\n    script.setAttribute(\"src\", \"https://platform.twitter.com/widgets.js\");\r\n    document.getElementsByClassName(\"twitter-timeline\")[0].appendChild(script);\r\n  }, [pinReload]);\r\n\r\n  return (\r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        if (keyName == \"ctrl+z\") { onUndoClick(); }\r\n        if (keyName == \"c\") {\r\n          if (brushColor != \"erase\") { onEraseClick(); }\r\n          else if (brushColor == \"erase\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      }}\r\n    ></Hotkeys>\r\n      <div>\r\n\r\n        <div style={{ float: 'right' }}>\r\n\r\n          {/* <button onClick={ongetUrl}>geturls</button>\r\n    <button onClick={submitsoty}>submitsoty</button>\r\n     */}\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        <div>\r\n\r\n\r\n\r\n\r\n\r\n          <form style={{ float: 'left' }} onSubmit={onSubmitTwitter}>\r\n            <input value={twitterUrl} onChange={e => {\r\n              setTwitterUrl(e.target.value);\r\n\r\n            }} type={\"text\"} placeholder=\"@name\" />\r\n            <input type={\"submit\"} value=\"Go\" />\r\n\r\n          </form>\r\n          <button onClick={onTwitterListClick}>❤list</button>\r\n          {isBookmarked ? (<></>) : (<><button onClick={e => {\r\n            e.preventDefault()\r\n            onTwtterBookmark()\r\n            setIsBookmarked(true)\r\n\r\n          }}>❤</button></>)}\r\n\r\n\r\n          {isListOn ? (<>\r\n            <button onClick={e => { e.preventDefault(); setIsListDelOn(!isListDelOn) }}>🗑</button>\r\n            {isListDelOn ? (<>\r\n\r\n              {bookmarkList.map(item => (<>\r\n                <button onClick={e => {\r\n                  e.preventDefault();\r\n\r\n                  const pinDocRef = dbService.collection(\"usersetting\").doc(userObj.uid);\r\n                  pinDocRef.update({\r\n                    twitterBookmark: firebase.firestore.FieldValue.arrayRemove(item)\r\n                  });\r\n                  let filtered \r\n                  = bookmarkList.filter((element) => element !== item);\r\n                  setBookmarkList(filtered)\r\n                }}>🗑{item}</button>\r\n              </>))}\r\n\r\n            </>) : (<>\r\n            \r\n              {bookmarkList.map(item => (<>\r\n              <button onClick={e => {\r\n                e.preventDefault();\r\n                setTwitterUrl(item)\r\n              }}>{item}</button>\r\n\r\n\r\n            </>))}\r\n            \r\n            </>)}\r\n\r\n            \r\n            \r\n          </>) : (<>\r\n\r\n          </>)}\r\n\r\n        </div>\r\n\r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left' , width: '450px', height: '770px',position: \"absolute\"}}>\r\n          {/* <iframe key={pinReload} src={\"https://www.youtube.com/embed/videoseries?list=\"+youtubeUrls[youtubeUrlIndex]+\"&cc_load_policy=1&cc_lang_pref=ko\"} height={450} width={450} frameBorder={0} scrolling=\"no\" ></iframe> */}\r\n\r\n          <div key={pinReload} style={{float: 'left', width: '450px', height: '770px',position: \"absolute\" }}>\r\n\r\n\r\n            <a class={\"twitter-timeline\"} data-width={\"450\"} data-height={\"770\"} href={\"https://twitter.com/\" + twitterUrl + \"?ref_src=twsrc%5Etfw\"}></a>\r\n\r\n\r\n            {/* <script async src={\"https://platform.twitter.com/widgets.js\"} charset=\"utf-8\"></script> */}\r\n          </div>\r\n\r\n\r\n        </div>\r\n\r\n        <div style={{ float: 'left',position: \"absolute\",left:\"460px\" }}>\r\n          <div>\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {brushColor == \"erase\" ? (<>\r\n                <label>Erase Size:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  max=\"100\"\r\n                  style={{ width: \"30px\" }}\r\n                  value={drawSetting.eraseRadius}\r\n                  onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>) : (<>\r\n                <label>Brush Size:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  max=\"100\"\r\n                  style={{ width: \"30px\" }}\r\n                  value={drawSetting.brushRadius}\r\n                  onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n\r\n              </>)}\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onUndoClick}>◀</button>\r\n            </div>\r\n\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n\r\n\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n              {brushColor}\r\n\r\n            </div>\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n\r\n              <button onClick={onSubmit}>Upload Drawing</button>\r\n            </div>\r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor == \"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef3}\r\n              brushColor={brushColor} \r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]}/>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n\r\n      </div></>\r\n  )\r\n};","//import CCsubmit from \"../components/Csubmit\";\r\n//import { v4 as uuidv4 } from 'uuid';\r\nimport { dbService ,storageService} from \"fbase\";\r\nimport React, { useEffect, useRef, useState,useCallback } from \"react\";\r\nimport CanvasDraw from \"../canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\nimport Soche from \"./soche.png\";\r\nimport Soche2 from \"./soche2.png\";\r\n// import Soche3 from \"./soche3.png\";\r\nimport { combineDrawing } from \"combinedrawing\";\r\nimport mycsv from '../../src/myfile.csv'\r\nimport Papa from 'papaparse';\r\n\r\nexport default ({userObj,isAndroid,penType}) =>  {\r\n  const [randomCroquisList,setRandomCroquisList]= useState([]);\r\n  const [savedRandomPinNum,setSavedRandomPinNum]=useState([\"\"]);\r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [Line,setLine]= useState([]);\r\n    const [croquisList,setCroquisList]= useState([]);\r\n    const [submitField,setSubmitField]= useState(\"\");\r\n    const canvasRef = useRef();\r\n    const [pinNum,setPinNum]=useState(\"\");\r\n    const [randomPinNum,setRandomPinNum]=useState([]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const [pinID,setPinID]=useState(0);\r\n    const [croquisTime,setCroquisTime]=useState(60);\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    //allowpointertype으로 터치허용유무설정가능 일단 펜만 가능하게함. 나중에하는걸로\r\n        const [min,setMin]=useState(0);\r\n        const [sec,setSec]=useState(0);\r\n        const time=useRef(croquisTime);\r\n        const timeId=useRef(null);\r\n        const [drawSetting,setDrawSetting]=useState({\r\n            croquisTimeDB:60,\r\n            brushRadius:0.6,\r\n            lazyRadius:1,\r\n            eraseRadius:10,\r\n            \r\n\r\n\r\n        })\r\n    const [timeSetBottonToggle,setTimeSetBottonToggle]=useState(false);\r\n\r\n\r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n    const [socheNum,setSocheNum]=useState(1);\r\n    const [isSelect,setIsSelect]=useState(false);\r\n\r\n\r\n    const [charOn,setCharOn]=useState(false);\r\n    const [charList,setCharList]=useState([]);\r\n    const [charNum,setCharNum]=useState(0);\r\n\r\n    const getMyCroquisSettings = ()=>{\r\n              dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n            if (doc.exists) {\r\n                setDrawSetting({\r\n                    brushRadius:doc.data().brushRadius,\r\n                    lazyRadius:doc.data().lazyRadius,\r\n                    eraseRadius:doc.data().eraseRadius,\r\n                    croquisTimeDB:doc.data().croquisTimeDB,\r\n                    })\r\n                    setCroquisTime(doc.data().croquisTimeDB)\r\n                console.log(doc.data())\r\n               // console.log(croquisTime)\r\n                time.current+=doc.data().croquisTimeDB-60;\r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"No such setting document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"Error getting document:\", error);\r\n             \r\n        });\r\n    }\r\n    const updateSetting =(event)=>{\r\n      // console.log(drawSetting.croquisTimeDB,typeof(drawSetting.croquisTimeDB))\r\n      // console.log(drawSetting.brushRadius,typeof(drawSetting.brushRadius))\r\n      // console.log(drawSetting.lazyRadius,typeof(drawSetting.lazyRadius))\r\n      // console.log(drawSetting.eraseRadius,typeof(drawSetting.eraseRadius))\r\n        dbService.collection(\"usersetting\").doc(userObj.uid).update({\r\n            brushRadius:drawSetting.brushRadius,\r\n            lazyRadius:drawSetting.lazyRadius,\r\n            \r\n            eraseRadius:drawSetting.eraseRadius,\r\n            \r\n        });\r\n    }\r\n    const refreshAndSubmit =()=>{\r\n        setPinreload(pinReload+1);\r\n            \r\n            setPinID(pinID+1);\r\n            //console.log(\"timeout\",randomPinNum[pinID])\r\n            \r\n            // time.current=croquisTime;\r\n            \r\n\r\n\r\n\r\n            // const data = canvasRef.current.getSaveData();\r\n            // const dataUrl=canvasRef.current.getDataURL();\r\n            // canvasRef.current.clear();\r\n        \r\n            \r\n            // dbService.collection(\"Csubmit\").add({\r\n            //     text:data,\r\n            //     createdAt: Date.now(),\r\n            //     creatorId: userObj.uid,\r\n            //     drawingTime:croquisTime-min*60-sec,\r\n            //     heart:(0),\r\n            //     dataUrl:dataUrl,\r\n            //     refPinUrl:randomPinNum[pinID]\r\n\r\n\r\n\r\n            //    //  refPhoto:{refPhoto},\r\n            //     //pinNumber:randomPinNum,\r\n\r\n\r\n            // });\r\n            \r\n            // setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n    // useEffect(()=> {\r\n      \r\n    //   getMyCroquisSettings();\r\n      \r\n     \r\n    // //     timeId.current= setInterval(()=>{\r\n    // //         setMin(parseInt(time.current/60));\r\n    // //         setSec(time.current % 60);\r\n    // //         time.current -= 1;\r\n    // //     },1000);\r\n    // //     return()=> clearInterval(timeId.current);\r\n    // },[]);\r\n\r\n    // useEffect(()=> {\r\n    //     if(time.current<=-1){\r\n    //         refreshAndSubmit();\r\n            \r\n            \r\n    //     }\r\n    // },[sec]);\r\n    useEffect(() => {\r\n      const timer = setTimeout(() => {\r\n        // Code to execute after 1 second\r\n        console.log('One second has passed!');\r\n        let redrawText = localStorage.getItem(\"redrawDesign\")\r\n             if(redrawText.length !=0){\r\n              console.log(\"redraw!\")\r\n              canvasRef.current.loadSaveData(redrawText)\r\n             }\r\n             \r\n      }, 1000);\r\n      \r\n      return () => clearTimeout(timer); // Clear the timeout when the component unmounts\r\n    }, []);\r\n\r\n    // useEffect(()=> {\r\n            \r\n     \r\n\r\n    //          dbService.doc(`RefDB/refStrings`).get().then((doc) => {\r\n    //         if (doc.exists) {\r\n    //             //console.log(\"Document data:\", doc.data().refUrl);\r\n    //             //setRandomPinNum(doc.data().refUrl);\r\n    //             //console.log(\"doc\",doc.data().refUrl)\r\n    //             // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n    //             // console.log(typeof(doc.data().refUrl))\r\n    //             // setRandomPinNum(random);\r\n    //             let array = []\r\n    //             let data = doc.data();\r\n    //             Object.keys(data).forEach((name) => {\r\n    //               console.log(name);\r\n    //               array.push({\"list\":name,\"url\":data[name]})\r\n    //             });\r\n    //             //console.log(array)\r\n    //             array.sort(function(a,b) {\r\n    //               return a.list.localeCompare(b.list);\r\n    //           });\r\n    //             setCroquisList(array)\r\n    //             if(localStorage.getItem(\"chadraw\")==undefined){\r\n    //               //const random=Object.values(array[17].url).sort(() => Math.random() - 0.5);\r\n    //               const random=shuffleArray(Object.values(array[17].url))\r\n    //             setRandomPinNum(random);  \r\n    //             }else{\r\n    //               console.log(\"cha\")\r\n    //             //const random=Object.values(array[parseInt(localStorage.getItem(\"chadraw\"))].url).sort(() => Math.random() - 0.5);\r\n    //             const random=shuffleArray(Object.values(array[parseInt(localStorage.getItem(\"chadraw\"))].url))\r\n    //             setRandomPinNum(random);   \r\n    //             }\r\n    //             // const random=Object.values(array[0].url).sort(() => Math.random() - 0.5);\r\n    //             // setRandomPinNum(random);\r\n                \r\n                \r\n               \r\n                \r\n                \r\n    //         } else {\r\n    //             // doc.data() will be undefined in this case\r\n    //             console.log(\"No such document!\");\r\n    //         }\r\n    //     }).catch((error) => {\r\n    //         console.log(\"Error getting document:\", error);\r\n             \r\n    //     });\r\n\r\n\r\n       \r\n    //     // dbService.collection(\"Csubmit\").onSnapshot((snapshot) =>{\r\n    //     //     const CsubmitArray = snapshot.docs.map((doc)=>({\r\n    //     //         id: doc.id,\r\n    //     //         ...doc.data(),\r\n    //     //     }));\r\n            \r\n    //     //     setCsubmits(CsubmitArray);\r\n    //     //     //console.log(Csubmits);\r\n    //     // });\r\n\r\n        \r\n        \r\n\r\n    // },[]);\r\nuseEffect(()=> {\r\n  setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n      // Process the CSV data (assuming it's a comma-separated CSV)\r\n   \r\n    Papa.parse(mycsv, {\r\n      download: true,\r\n      complete: function (input) {\r\n           const records =  input.data.sort((a, b) => b[1] - a[1]);;\r\n          \r\n           setCharList(records)\r\n           console.log(\"값:\",Object.values(records))\r\n           console.log(\"값:\",typeof(Object.values(records)[0]))\r\n      }\r\n  });\r\n      let array = []         \r\n     \r\n       ///ref1불러오기\r\n             dbService.doc(`RefDB/refStrings`).get().then((doc) => {\r\n            if (doc.exists) {\r\n                //console.log(\"Document data:\", doc.data().refUrl);\r\n                //setRandomPinNum(doc.data().refUrl);\r\n                //console.log(\"doc\",doc.data().refUrl)\r\n                // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n                // console.log(typeof(doc.data().refUrl))\r\n                // setRandomPinNum(random);\r\n                \r\n                let data = doc.data();\r\n                Object.keys(data).forEach((name) => {\r\n                  console.log(name);\r\n                  array.push({\"list\":name,\"url\":data[name]});\r\n                });\r\n                \r\n              \r\n                //console.log(array)\r\n                \r\n              \r\n                \r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"ref1 No such document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"ref1 Error getting document:\", error);\r\n             \r\n        }).then(e=>{\r\n///ref2불러오기          \r\ndbService.doc(`RefDB/refStrings2`).get().then((doc) => {\r\n  if (doc.exists) {\r\n      //console.log(\"Document data:\", doc.data().refUrl);\r\n      //setRandomPinNum(doc.data().refUrl);\r\n      //console.log(\"doc\",doc.data().refUrl)\r\n      // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n      // console.log(typeof(doc.data().refUrl))\r\n      // setRandomPinNum(random);\r\n      \r\n      let data2 = doc.data();\r\n      Object.keys(data2).forEach((name) => {\r\n        console.log(name);\r\n        array.push({\"list\":name+\"-2\",\"url\":data2[name]});\r\n      });\r\n      \r\n    \r\n      //console.log(array)\r\n      \r\n      \r\n      array.sort(function(a,b) {\r\n        return a.list.localeCompare(b.list);\r\n    });\r\n    \r\n   \r\n      \r\n    \r\n      setCroquisList(array)\r\n      const new_array = shuffleArray(array.flatMap(obj => obj.url));\r\n      //const new_array = shuffleArray(array.map(obj => obj.url));\r\n    setRandomCroquisList(new_array)\r\n      // console.log(\"하하\",new_array)\r\n      if(localStorage.getItem(\"chadraw\")==undefined){\r\n        //const random=Object.values(array[0].url).sort(() => Math.random() - 0.5);\r\n        const random=shuffleArray(Object.values(array[0].url))\r\n      setRandomPinNum(random);\r\n      setSavedRandomPinNum(random)  \r\n      }else{\r\n      // const random=Object.values(array[parseInt(localStorage.getItem(\"specdraw\"))].url).sort(() => Math.random() - 0.5);\r\n      const random=shuffleArray(Object.values(array[parseInt(localStorage.getItem(\"chadraw\"))].url))\r\n      setRandomPinNum(random);\r\n      setSavedRandomPinNum(random)   \r\n      }\r\n      \r\n  } else {\r\n      // doc.data() will be undefined in this case\r\n      console.log(\"ref2 No such document!\");\r\n  }\r\n}).catch((error) => {\r\n  console.log(\"ref2  Error getting document:\", error);\r\n   \r\n});\r\n\r\n        });\r\n        },[]);\r\n\r\n    function shuffleArray(array) {\r\n      for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [array[i], array[j]] = [array[j], array[i]];\r\n      }\r\n      return array;\r\n    }\r\n\r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n        //  const data = canvasRef.current.getSaveData();\r\n        //  canvasRef.current.clear();\r\n     \r\n         \r\n        //  await dbService.collection(\"Csubmit\").add({\r\n        //      text:data,\r\n        //      createdAt: Date.now(),\r\n        //      creatorId: userObj.uid,\r\n        //      heart:(0),\r\n        //     //  refPhoto:{refPhoto},\r\n        //      //pinNumber:randomPinNum,\r\n        //  });\r\n        //  setCsubmit(\"\"); \r\n        refreshAndSubmit();\r\n     };\r\n     const onSubmitPinNum= (event) => {\r\n        event.preventDefault();\r\n        \r\n        if(pinNum.match(\",\")){\r\n            \r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n         \r\n            pinNum.split(\",\").forEach(e => {\r\n                //console.log(e)\r\n                pinDocRef.update({\r\n                    [submitField]:firebase.firestore.FieldValue.arrayUnion(e)\r\n            }); \r\n            \r\n        });\r\n        }else{\r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n            pinDocRef.update({\r\n                [submitField]:firebase.firestore.FieldValue.arrayUnion(pinNum)\r\n        });\r\n        }\r\n\r\n        \r\n           \r\n        setPinNum(\"\")\r\n\r\n     }\r\n     const onChange = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setPinNum(value);\r\n     }\r\n     const onChangeTime = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setCroquisTime(value);\r\n         setDrawSetting(prevState=>({...prevState, croquisTimeDB: event.target.value }))\r\n         \r\n     }\r\n\r\n     const onSubmitTime= (event) => {\r\n        event.preventDefault();\r\n        setTimeSetBottonToggle(false)\r\n        \r\n        //setCroquisTime(0)\r\n     }\r\n     const noRefreshAndSubmit =()=>{\r\n        \r\n      //console.log(\"timeout\",randomPinNum[pinID])\r\n      \r\n      time.current=croquisTime;\r\n      \r\n      const data = canvasRef.current.getSaveData();\r\n      const dataUrl=canvasRef.current.getDataURL();\r\n      \r\n\r\n// with img\r\n    //   const width = canvasRef.current.props.canvasWidth;\r\n    // const height = canvasRef.current.props.canvasHeight;\r\n    // const background = canvasRef.current.canvasContainer.children[0]; \r\n    // const drawing = canvasRef.current.canvasContainer.children[1]; \r\n    // const canvas = document.createElement('canvas');\r\n    // canvas.width = width;\r\n    // canvas.height = height;\r\n\r\n    // // composite now\r\n    // canvas.getContext('2d').drawImage(background, 0, 0);\r\n    // // canvas.getContext('2d').globalAlpha = 1.0; \r\n    // canvas.getContext('2d').drawImage(drawing, 0, 0);\r\n\r\n    // const dataUrl = canvas.toDataURL('image/png');\r\n\r\n\r\n      \r\n\r\n\r\n      // canvasRef.current.clear();\r\n      // noclearcanvas\r\n  \r\n      \r\n      dbService.collection(\"Dsubmit\").add({\r\n          text:data,\r\n          createdAt: Date.now(),\r\n          creatorId: userObj.uid,\r\n          drawingTime:croquisTime-min*60-sec,\r\n          heart:(0),\r\n          dataUrl:dataUrl,\r\n          refPinUrl:randomPinNum[pinID]\r\n         //  refPhoto:{refPhoto},\r\n          //pinNumber:randomPinNum,\r\n      });\r\n      \r\n      setCsubmit(\"\"); \r\n      localStorage.setItem(\"redrawDesign\", \"\")\r\n      //clearInterval(timeId.current);\r\n}\r\n     const onSubmitOnlyCanvas= (event) => {\r\n      event.preventDefault();\r\n      const ok = window.confirm(\"wanna upload this?\")\r\n      if(ok){\r\n        noRefreshAndSubmit();\r\n          \r\n      }\r\n      // setIsSelect(true)\r\n     \r\n    //  const timer =setTimeout(() =>setIsSelect(false),500)\r\n    //  clearTimeout(timer);\r\n  };\r\n     const noRefreshAndSubmitWithImg =()=>{\r\n        \r\n      //console.log(\"timeout\",randomPinNum[pinID])\r\n      \r\n      time.current=croquisTime;\r\n      \r\n      const data = canvasRef.current.getSaveData();\r\n      // const dataUrl=canvasRef.current.getDataURL();\r\n      \r\n\r\n// with img\r\n      const width = canvasRef.current.props.canvasWidth;\r\n    const height = canvasRef.current.props.canvasHeight;\r\n    const background = canvasRef.current.canvasContainer.children[0]; \r\n    const drawing = canvasRef.current.canvasContainer.children[1]; \r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    // composite now\r\n    canvas.getContext('2d').drawImage(background, 0, 0);\r\n    // canvas.getContext('2d').globalAlpha = 1.0; \r\n    canvas.getContext('2d').drawImage(drawing, 0, 0);\r\n\r\n    const dataUrl = canvas.toDataURL('image/png');\r\n\r\n\r\n      \r\n\r\n\r\n      // canvasRef.current.clear();\r\n      // noclearcanvas\r\n  \r\n      \r\n      dbService.collection(\"Dsubmit\").add({\r\n          text:data,\r\n          createdAt: Date.now(),\r\n          creatorId: userObj.uid,\r\n          drawingTime:croquisTime-min*60-sec,\r\n          heart:(0),\r\n          dataUrl:dataUrl,\r\n          refPinUrl:randomPinNum[pinID]\r\n         //  refPhoto:{refPhoto},\r\n          //pinNumber:randomPinNum,\r\n      });\r\n      \r\n      setCsubmit(\"\"); \r\n      localStorage.setItem(\"redrawDesign\", \"\")\r\n      //clearInterval(timeId.current);\r\n}\r\n     const onSubmitOnlyCanvasWithImg= (event) => {\r\n      event.preventDefault();\r\n      const ok = window.confirm(\"wanna upload this?\")\r\n      if(ok){\r\n        noRefreshAndSubmitWithImg();\r\n          \r\n      }\r\n      // setIsSelect(true)\r\n     \r\n    //  const timer =setTimeout(() =>setIsSelect(false),500)\r\n    //  clearTimeout(timer);\r\n  };\r\n\r\n     const onDeletePinClick= () => {\r\n      \r\n      const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n      pinDocRef.update({\r\n          [submitField]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])\r\n  });\r\n  setPinreload(pinReload+1);\r\n            \r\n            setPinID(pinID+1);\r\n    };\r\n \r\n     const onClearClick= () => {\r\n      const ok = window.confirm(\"wanna clear this?\")\r\n      if(ok){\r\n        canvasRef.current.clear();\r\n          \r\n      }\r\n    };\r\n     const onUndoClick= () => {\r\n        canvasRef.current.undo();\r\n    };\r\n     const onEraseClick= () => {\r\n        setBrushColor(\"erase\")\r\n        \r\n    };\r\n     const onBrushClick= () => {\r\n        setBrushColor(\"#444\")\r\n       \r\n    };\r\n    const onShadowClick= () => {\r\n      setBrushColor(\"shadow\")\r\n      \r\n  };\r\n\r\n    function ordinal_suffix_of(i) {\r\n        var j = i % 10,\r\n            k = i % 100;\r\n        if (j == 1 && k != 11) {\r\n            return i + \"st\";\r\n        }\r\n        if (j == 2 && k != 12) {\r\n            return i + \"nd\";\r\n        }\r\n        if (j == 3 && k != 13) {\r\n            return i + \"rd\";\r\n        }\r\n        return i + \"th\";\r\n    }\r\n    function sexagesimal(i) {\r\n        if(i <= 9){\r\n            return \"0\"+i;\r\n        }else{\r\n            return i;\r\n        }\r\n    }\r\n\r\n    const selectChange = (e) => {\r\n\t\t// event handler\r\n\t\t// console.log(e.target.value);\r\n\t\t// console.log(croquisList[e.target.value].list);\r\n\t\tsetSubmitField(croquisList[e.target.value].list)\r\n    localStorage.setItem(\"chadraw\", parseInt(e.target.value))\r\n\t\t// console.log(typeof(Object.values(croquisList[e.target.value].url)));\r\n     \r\n        //const random=Object.values(croquisList[e.target.value].url).sort(() => Math.random() - 0.5);\r\n        const random=shuffleArray(Object.values(croquisList[e.target.value].url))\r\n                setRandomPinNum(random);\r\n\t};\r\n    //  const onChange = (event)=> {\r\n    //      const {\r\n    //          target:{value},\r\n    //      }=event;\r\n    //      setCsubmit(value);\r\n    //  }\r\n\r\n    //  const onSubmitImage= async(event) => {\r\n    //     event.preventDefault();\r\n    //     const fileRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`);\r\n    //     const response = await fileRef.putString(imageString,\"data_url\");\r\n    //     const imageUrl =await response.ref.getDownloadURL();\r\n    //     setImageString(\"\");\r\n    //  }\r\n    //  const onFileChange= (event)=>{\r\n    //     const {\r\n    //         target:{files}\r\n    //     }= event;\r\n    //     const theFile = files[0];\r\n    //     const reader= new FileReader();\r\n    //     reader.onloadend = (finishedEvent)=>{\r\n    //         const {\r\n    //             currentTarget:{result},\r\n    //         }=finishedEvent;\r\n            \r\n    //         setImageString(result);\r\n    //     }\r\n    //     reader.readAsDataURL(theFile);\r\n    //  }\r\n\r\n    \r\n\r\n  return(\r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        if (keyName == \"ctrl+z\") { onUndoClick(); }\r\n        if (keyName == \"c\") {\r\n          if (brushColor != \"erase\") { onEraseClick(); }\r\n          else if (brushColor == \"erase\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      } }\r\n    ></Hotkeys>\r\n    <div>\r\n        {/* <PieChart style={{ height: '35px' }}\r\n    data={[{ value: 1, key: 1, color: '#E38627' }]}\r\n    startAngle={-90}\r\n    reveal={-100*(min*60+sec)/croquisTime}\r\n    lineWidth={100}\r\n    // background=\"#f3f3f3\"\r\n    lengthAngle={360}\r\n    /> */}\r\n        {/* <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(pinID + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Croquis Time</button>\r\n\r\n          </>)}\r\n          <button onClick={updateSetting}>Update Setting</button> */}\r\n          {isAndroid?(<>\r\n            <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){setPointerTypeIndex(3);}else if(pointerTypeIndex==3){setPointerTypeIndex(0);}}}>{allowPointerType[pointerTypeIndex]}</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(pinID + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          <button onClick={updateSetting}>Update Setting</button>\r\n          </div>\r\n          \r\n          </>):(<>\r\n          <div style={{width: \"1000px\"}}>\r\n          <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(pinID + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          <button onClick={updateSetting}>Update Setting</button>\r\n          </div>\r\n          \r\n          </div>\r\n          </>)}\r\n          \r\n          \r\n          {/* <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinHeight: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasHeight: e.target.value }))\r\n          }\r\n        /> */}\r\n        \r\n\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n            <button  onClick={onSubmitOnlyCanvas} >Upload</button>\r\n            <button  onClick={onSubmitOnlyCanvasWithImg}>With Img</button>\r\n              {/* <form onSubmit={onSubmitOnlyCanvas}>\r\n\r\n                 <input value={Csubmit} onChange= {onChange} type={\"text\"} placeholder=\"what'on your mind?\" maxLength={120} /> \r\n                <input type={\"submit\"} value=\"Upload\" style={{background: '#E8E8E8'}} />\r\n\r\n              </form> */}\r\n            </div>\r\n\r\n        <div style={{ float: 'right' }}>\r\n          <button onClick={onSubmit}>Next</button>\r\n              {/* <form onSubmit={onSubmit}>\r\n\r\n               \r\n                <input type={\"submit\"} value=\"Next\" />\r\n\r\n              </form> */}\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n            \r\n            <button onClick={e => {\r\n              setSocheNum(pre => 2); \r\n              \r\n            } }>{\"+2\"}</button>\r\n            </div>\r\n        <div style={{\r\n          position: 'absolute',\r\n          left: '30%',\r\n          transform: 'translateX(-50%)',\r\n          width: '70px',\r\n          textAlign: 'center',\r\n\r\n          background: 'linear-gradient(to left,#FFC365 ' + (min * 60 + sec) * 100 / croquisTime + '%,#E8E8E8 ' + (min * 60 + sec) * 100 / croquisTime + '%)'\r\n        }}>\r\n          {min}: {sexagesimal(sec)}\r\n        </div>\r\n\r\n\r\n\r\n\r\n        <div>\r\n          \r\n          <select  defaultValue={1} onChange={selectChange} >\r\n    {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key} selected={localStorage.getItem(\"chadraw\") ? key === parseInt(localStorage.getItem(\"chadraw\")) : key === 0}>{e.list}</option>;\r\n    })}\r\n</select>\r\n           \r\n          <button onClick={e=>{setCharOn(pre=>!pre)}}>char</button>\r\n          {(charOn==true)&&(<>\r\n            <button onClick={e => { setCharNum(Math.floor(Math.random() * 363)); }}>random</button>\r\n            <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            max=\"362\"\r\n            style={{ width: \"40px\" }}\r\n            value={charNum}\r\n            onChange={e => {\r\n              const inputValue = parseInt(e.target.value, 10); // Parse the input as an integer\r\n    if (!isNaN(inputValue) && inputValue >= 0 && inputValue <= 362) {\r\n      setCharNum(inputValue);}\r\n              \r\n              \r\n            } } />\r\n\r\n            <button onClick={e => { setCharNum(prev => prev > 0 ? prev - 1 : prev); }}>◀</button>\r\n\r\n            <button onClick={e => { setCharNum(prev => prev < 362 ? prev + 1 : prev); }}>▶</button>\r\n\r\n            </>)}\r\n         \r\n\r\n        </div>\r\n\r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left' }}>\r\n          {charOn==true?(<><div class=\"custom-div\">\r\n        {charList.length > 0 ? (<>\r\n  \r\n  <p><a href={charList[charNum][1]} target=\"_blank\">link</a></p>\r\n  {charList[charNum][1].split(\"/\").length>5?(<><p><a href={charList[charNum][1].split(\"/\").slice(0, 5).join(\"/\")} target=\"_blank\">original link</a></p></>):(<></>)}\r\n  <div style={{ whiteSpace: \"pre-line\" }}>\r\n  <p>{charList[charNum][2]}</p><br></br>\r\n  <p>{\r\n  charList[charNum][5].slice(charList[charNum][5].indexOf(\"종족: \"))}</p><br></br>\r\n  <p>{charList[charNum][3]}</p><br></br>\r\n  <p>{charList[charNum][4]}</p><br></br>\r\n  \r\n  <p>{charList[charNum][6]}</p><br></br>\r\n  <p>{charList[charNum][7]}</p><br></br>\r\n  <p>{charList[charNum][8]}</p></div>\r\n  </>) : (\r\n  <p>Loading data...</p>\r\n)}</div></>):(<>\r\n        \r\n          {/* <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={770} width={400} frameBorder={0} scrolling=\"no\"></iframe> */}\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].startsWith(\"pot.com/o/\"))?(<>\r\n            <img key={pinReload} src={randomPinNum[pinID].replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")}   width={400} frameBorder={0} scrolling=\"no\"></img>\r\n            \r\n            </>):(<>\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?\r\n          (<>\r\n          <img key={pinReload} src={randomPinNum[pinID]}  width={400} frameBorder={0} scrolling=\"no\"></img>\r\n          </>):(<>\r\n            <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={770} width={400} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)}</>)}\r\n          \r\n          </>)}\r\n        </div>\r\n\r\n        <div style={{ float: 'left' }}>\r\n          <div>\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {brushColor==\"erase\" ? (<>\r\n                <label>Erase Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Brush Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n              \r\n\r\n\r\n            </div>\r\n            \r\n            <div style={{ float: 'left' }}>\r\n              <button onClick={onUndoClick}>◀</button>\r\n            </div>\r\n\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n\r\n\r\n            </div>\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>\r\n\r\n            \r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              imgSrc={(socheNum==1) ? Soche:\r\n                 Soche2 \r\n                }\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor}\r\n              refreshBackgroundImage={true}\r\n              immediateLoading={true}\r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]} />\r\n          </div>\r\n          <div><button onClick={()=>{let redrawText = localStorage.getItem(\"redrawDesign\")\r\n             if(redrawText.length !=0){\r\n              console.log(\"redraw!\")\r\n              canvasRef.current.loadSaveData(redrawText)\r\n             }}}>load</button></div>\r\n        </div>\r\n       \r\n\r\n\r\n        {/* <form onSubmit={onSubmitImage}>\r\n          <input type={\"file\"} accept=\"image/*\" onChange={onFileChange}/>\r\n          <input type={\"submit\"} value=\"Upload Croquis Images\"/>\r\n    </form> */}\r\n\r\n\r\n\r\n\r\n\r\n\r\n{/* {charList&&Object.values(charList[0])} */}\r\n        {/* <div>\r\n        {Csubmits.map((Csubmit)=>(\r\n            <CCsubmit key={Csubmit.id} CsubmitObj={Csubmit} isOwner={Csubmit.creatorId=== userObj.uid} />\r\n        ))}\r\n    </div> */}\r\n      </div> <div>{randomPinNum[pinID]&&(randomPinNum[pinID].includes(\"pokemon\")) ? (\r\n  <a href={\"https://podic.kr/Gen4/mon/mon\"+randomPinNum[pinID].toString().split(\"/pokemon-2%2F\")[1].split(\".png?alt=media\")[0].slice(0, -2)+\".html\"} target='_blank'>\r\n    {randomPinNum[pinID].toString().split(\"/pokemon-2%2F\")[1].split(\".png?alt=media\")[0].slice(0, -2)}\r\n  </a>\r\n) : (\r\n  <span>Loading...</span>\r\n)}</div>\r\n</>\r\n  )\r\n };\r\n ","import { dbService } from \"fbase\";\r\nimport React, { useEffect, useRef,useState } from \"react\";\r\nimport CanvasDraw from \"../canvasDrawIndex\";\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport   firebase from \"firebase/compat/app\";\r\n\r\nconst CDsubmit =({DsubmitObj, isOwner,viewDeleyToggle})=>{\r\n    const [editing,setEditing]= useState(false);\r\n    const [newDsubmit,setnewDsubmit]=useState(DsubmitObj.text);\r\n    // const [givedHeart,setGivedHeart]=useState(false)\r\n    // const [yourheart,setYourHeart]=useState(DsubmitObj.heart);\r\n    const canvasRef2 = useRef();\r\n    const [onOff,setOnOff]=useState(true);\r\n    // const [onReview,setOnReview]= useState(false);\r\n    // const [offReview,setoffReview]= useState(false);\r\n    // // canvasRef2.current.loadSaveData(DsubmitObj.text);\r\n    let uploadDay= new Date(DsubmitObj.createdAt);\r\n    const [viewRefPin,setViewRefpin]=useState(false);\r\n    // useEffect(() => {\r\n    //    \r\n    //     //  if(viewsToggle && onOff){\r\n    //     //     canvasRef2.current.loadSaveData(DsubmitObj.text,true);\r\n    //     //     setOnOff(false)\r\n    //     //  }\r\n        \r\n    // },[editing]);\r\n    const onDeleteClick= () => {\r\n        const ok = window.confirm(\"wanna delete this?\")\r\n        if(ok){\r\n            dbService.doc(`Dsubmit/${DsubmitObj.id}`).delete();\r\n            \r\n        }\r\n    };\r\n    const onRedrawClick= () => {\r\n        const ok = window.confirm(\"wanna redraw this?\")\r\n        if(ok){\r\n            localStorage.setItem(\"redrawDesign\", DsubmitObj.text)\r\n                        \r\n        }\r\n    };\r\n    const toggleReview=()=> {\r\n        canvasRef2.current.clear();\r\n        // canvasRef2.current.loadSaveData(DsubmitObj.text);\r\n        canvasRef2.current.loadSaveData(DsubmitObj.text);\r\n        \r\n    };\r\n    const offReview=()=>{\r\n        setEditing(false);\r\n            // 강제 이미지추가\r\n            // console.log('none')\r\n            // const dataUrl=canvasRef2.current.getDataURL();\r\n        \r\n    \r\n        \r\n            // dbService.doc(`Dsubmit/${DsubmitObj.id}`).update({\r\n            \r\n            // dataUrl:dataUrl,\r\n           //  refPhoto:{refPhoto},\r\n            //pinNumber:randomPinNum,\r\n        // });\r\n        \r\n    }\r\n    const onReview=()=> {setEditing(true);\r\n        setTimeout(function() {\r\n            canvasRef2.current.loadSaveData(DsubmitObj.text);\r\n            \r\n            \r\n          }, 5);\r\n        }\r\n    const onSubmit = (event)=> {\r\n        event.preventDefault();\r\n        const data = canvasRef2.current.getSaveData();\r\n        const dataUrl=canvasRef2.current.getDataURL();\r\n        dbService.doc(`Dsubmit/${DsubmitObj.id}`).update({\r\n            text:data,\r\n            dataUrl:dataUrl\r\n        });\r\n        setEditing(false);\r\n\r\n    }\r\n    const onChange = (event)=> {\r\n        const {target:{value},\r\n        }=event;\r\n        setnewDsubmit(value);\r\n    }\r\n    //const toggleheart=()=> setYourHeart(prev => !prev);\r\n    const onHeartClick= async() =>{\r\n        setOnOff(prev => !prev);\r\n        await dbService.doc(`Dsubmit/${DsubmitObj.id}`).update({\r\n           heart:(1+(DsubmitObj.heart)),\r\n        })\r\n        console.log(DsubmitObj.heart)\r\n        const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n        pinDocRef.update({\r\n            heart:firebase.firestore.FieldValue.arrayUnion(DsubmitObj.refPinUrl)\r\n        });\r\n    }\r\n\r\n\r\n    \r\n     \r\n    return(\r\n        <div   style={{float:'left', border: '10px solid rgba(0, 0, 0, 0.05)',width:\"420px\"\r\n        }}>\r\n            \r\n        {\r\n            editing ? (\r\n            <>\r\n            <button onClick={onSubmit}>Edit</button>\r\n            {/* <form onSubmit={onSubmit}><input value={newDsubmit} required onChange={onChange}/>\r\n            <input type={\"submit\"} value=\"edit\"/>\r\n            </form> */}\r\n            \r\n            <div><CanvasDraw \r\n            // style={{ touchAction: 'disabled'  ? 'auto' : 'none' }}\r\n            ref={canvasRef2}\r\n            //  disabled\r\n            // hideInterface\r\n            brushRadius={0.6}\r\n              lazyRadius={0.5}\r\n              \r\n              brushColor={\"#df6161\"}\r\n              allowOnlyPointerType={\"pen\"}\r\n             loadTimeOffset={1}\r\n             /></div>\r\n             \r\n             <button onClick={toggleReview}>Rewind</button>\r\n             <button onClick={offReview}>Cancel</button>\r\n             \r\n            </>\r\n            ):(\r\n            <>\r\n            \r\n            <div style={{margin: '0 auto'}}>\r\n            <LazyLoadImage\r\n            \r\n      \r\n      height={400}\r\n      src={DsubmitObj.dataUrl} // use normal <img> attributes as props\r\n       />\r\n       \r\n      {/* <img src={DsubmitObj.dataUrl} height=\"400px\" ></img> */}\r\n      </div>\r\n            \r\n            \r\n        {isOwner ? (\r\n            <>\r\n\r\n            {/* <button disabled>❤ {DsubmitObj.heart}</button> */}\r\n            {/* <button onClick={onHeartClick} style={{padding: \"0px 0px\"}}>❤{DsubmitObj.heart}</button> */}\r\n            <button onClick={onHeartClick} style={{padding: \"0px 0px\"}}>{DsubmitObj.heart==0 ? (<>❤</>):(<>+{DsubmitObj.heart}</>)}</button>\r\n            <button onClick={onDeleteClick}>Delete</button>\r\n            <button onClick={onReview}>Review</button>\r\n            \r\n            \r\n            </>\r\n        ):(\r\n            <>\r\n            <button onClick={onHeartClick}>❤ {DsubmitObj.heart}</button>\r\n            \r\n            </>\r\n        )}\r\n\r\n            \r\n            \r\n                \r\n            \r\n            \r\n            \r\n            \r\n        </>\r\n            \r\n            \r\n            \r\n            \r\n\r\n            )}\r\n            <button onClick={()=>{setViewRefpin(pre=>!pre)}}>Ref Pin</button>\r\n            {\"   \"}  {uploadDay.toLocaleString(navigator.language || navigator.userLanguage)}\r\n            {viewRefPin ? (<><button onClick={onRedrawClick}>redraw</button>\r\n                <div>\r\n                    {/* <iframe  src={\"https://assets.pinterest.com/ext/embed.html?id=\"+DsubmitObj.refPinUrl} height=\"600\" width=\"300\" frameBorder={0} scrolling=\"no\" ></iframe> */}\r\n                    {(DsubmitObj.refPinUrl.startsWith(\"pot.com/o/\"))?(<>\r\n                        <img  src={DsubmitObj.refPinUrl.replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")}  width={415} frameBorder={0} scrolling=\"no\"></img>\r\n                    </>):(<>\r\n                    \r\n                     \r\n                    {(typeof(DsubmitObj.refPinUrl)==\"string\")&&(DsubmitObj.refPinUrl.includes(\"firebasestorage.googleapis.com\"))?(  \r\n                    // (console.log(typeof(CsubmitObj.refPinUrl))\r\n                    <>\r\n                    \r\n                        <img  src={DsubmitObj.refPinUrl}  width={415} frameBorder={0} scrolling=\"no\"></img>\r\n                    </>\r\n                    ):(<>\r\n                        <iframe  src={\"https://assets.pinterest.com/ext/embed.html?id=\"+DsubmitObj.refPinUrl} height=\"600\" width=\"300\" frameBorder={0} scrolling=\"no\" ></iframe>\r\n                    </>)}\r\n                    </>)} \r\n                </div></>):(<></>)}\r\n    </div>\r\n)\r\n};\r\n    \r\n\r\nexport default CDsubmit;","import CDsubmit from \"components/Dsubmit\";\r\nimport { authService } from \"fbase\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { dbService } from \"fbase\";\r\nimport _ from 'lodash';\r\nimport Calendar from 'react-calendar';\r\nimport 'react-calendar/dist/Calendar.css';\r\n\r\nexport default ({userObj}) => {\r\n    const onLogOutClick = () => {\r\n      const ok = window.confirm(\"wanna logout?\")\r\n        if(ok){\r\n          authService.signOut();}\r\n        }\r\n    const [Dsubmits,setDsubmits]= useState([]);\r\n    const [viewToggle,setViewToggle]=useState(false);\r\n    const [viewDeleyToggle,setViewDeleyToggle]=useState(false);\r\n    const [Cdate, setCdate] = useState(new Date());\r\n    // const getMyCroquis = async()=>{\r\n    //     const croquisPost = await dbService.collection(\"Dsubmit\")\r\n    //     .where(\"creatorId\",\"==\",userObj.uid)\r\n    //     .orderBy(\"createdAt\",\"desc\")\r\n    //     .get();\r\n    //     console.log(croquisPost.docs.map((doc)=>doc.data()));\r\n    //     setDsubmits(croquisPost.docs.map((doc)=>doc.data()));\r\n    // }\r\n\r\n    // useEffect(()=>{\r\n    //     getMyCroquis();\r\n    // },[]);\r\n    const [startDate,setStartDate]=useState(2658674800000)\r\n    const [listEnd,setListEnd]=useState(100)\r\n    const [isCalendar,setIsCalender]=useState(false)\r\n    const [isMemo,setIsMemo]=useState(false)\r\n    const [isMemoEdit,setIsMemoEdit]=useState(false)\r\n    const [memo,setMemo]=useState(\"test\")\r\n    // const [lastScrollTop, setLastScrollTop] = useState(0);\r\n    // const [bodyOffset, setBodyOffset] = useState(\r\n    //   document.body.getBoundingClientRect()\r\n    // );\r\n    // const [scrollY, setScrollY] = useState(bodyOffset.top);\r\n    // const [isLoading,setIsLoading] = useState(true)\r\n      \r\n    // const listener = e => {\r\n    //   // setBodyOffset(document.body.getBoundingClientRect());\r\n    //   // setScrollY(-bodyOffset.top);\r\n    //   // if(window.innerHeight + document.documentElement.scrollTop>document.documentElement.offsetHeight-10){\r\n    //   //   console.log(window.innerHeight)\r\n    //   //   console.log(document.documentElement.scrollTop)\r\n    //   //   console.log(document.documentElement.offsetHeight)\r\n    //   //   setListEnd(pre=>pre+10)\r\n    //   //   return;\r\n    //   // }\r\n    //   if((window.innerHeight + document.documentElement.scrollTop>document.documentElement.offsetHeight-100)&&isLoading){\r\n    //     setListEnd(pre=>pre+10)\r\n    //     setIsLoading(false)\r\n    //     console.log(\"scrolling down\");\r\n    //     return;\r\n    //   }\r\n    //   else {\r\n    //     setIsLoading(true)\r\n        \r\n    //   }\r\n    // };\r\n  \r\n    // useEffect(() => {\r\n    //   window.addEventListener(\"scroll\", _.throttle(listener, 100));\r\n    //   // console.log(scrollY)\r\n    //   // console.log(bodyOffset)\r\n    //   // console.log(\"d\")\r\n    //   return () => {\r\n    //     window.removeEventListener(\"scroll\", _.throttle(listener, 100));\r\n        \r\n    //   };\r\n    // });\r\n    // useEffect(() => {\r\n    //   const throttledCount = _.throttle(listener, 100);\r\n    //   window.addEventListener('scroll', throttledCount);\r\n    //   return () => window.removeEventListener('scroll', throttledCount);\r\n    // }, []);\r\n    useEffect(() => {\r\n      dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n        if (doc.exists) {\r\n            setMemo(doc.data().Dmemo)\r\n                           \r\n           \r\n      \r\n            \r\n        } else {\r\n            // doc.data() will be undefined in this case\r\n            console.log(\"No such setting document!\");\r\n        }\r\n    }).catch((error) => {\r\n        console.log(\"Error getting document:\", error);\r\n         \r\n    });\r\n    }, []);\r\n    const onClickEditMemo = (event)=>{\r\n      event.preventDefault();\r\n      dbService.collection(\"usersetting\").doc(userObj.uid).update({\r\n        Dmemo:memo\r\n        \r\n    });\r\n    setIsMemoEdit(false)\r\n    }\r\n    const onChangeMemo = (event)=> {\r\n      const {\r\n          target:{value},\r\n      }=event;\r\n      setMemo(value);\r\n  }\r\n  \r\n  \r\n\r\n    useEffect(()=> {  \r\n    dbService.collection(\"Dsubmit\")\r\n        .where(\"creatorId\",\"==\",userObj.uid)\r\n        .orderBy(\"createdAt\",\"desc\")\r\n        // .endAt(Date.now()-listEnd)\r\n        .where(\"createdAt\", \"<\", startDate+86400000)\r\n        .limit(listEnd)\r\n        // .get((snapshot) =>{\r\n        .onSnapshot((snapshot) =>{\r\n        const DsubmitArray = snapshot.docs.map((doc)=>({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n        }));\r\n        \r\n        setDsubmits(DsubmitArray);\r\n        //console.log(Dsubmits);\r\n    });\r\n\r\n\r\n    },[startDate]);\r\n    // },[]);\r\n    const onChangeTime = (event)=> {\r\n      const {\r\n          target:{value},\r\n      }=event;\r\n      setListEnd(value);\r\n     \r\n      console.log(\"ddd\")\r\n\r\n      \r\n  }\r\n  const nextPage = ()=>{\r\n    setListEnd(pre=>pre+100);\r\n  }\r\n  const clickCroquisDate=(value)=>{\r\n    setStartDate(value.getTime())\r\n    console.log(value.getTime());\r\n  }\r\n\r\n\r\n  \r\n    return (\r\n    <>\r\n        \r\n        \r\n        <span>Profile</span>\r\n      \r\n      \r\n        \r\n        <button onClick={onLogOutClick}>Log Out</button>\r\n        <button onClick={()=>{setIsCalender(pre=>!pre)}}>Calender</button>\r\n      {  isCalendar?(<>\r\n        <Calendar \r\n          // onClickDay={setCdate} \r\n          value={Cdate} onClickDay={clickCroquisDate} calendarType={\"US\"} />\r\n      </>):(<></>)}\r\n        \r\n        <input value={listEnd} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n\r\n        \r\n        <button onClick={()=>{setIsMemo(pre=>!pre)}}>Memo</button>\r\n        \r\n        {  isMemo?(<>\r\n          {  isMemoEdit?(<>\r\n            <form>\r\n      <p><textarea onChange={onChangeMemo} cols=\"50\" rows=\"10\">{memo}</textarea></p>\r\n      <p><input type=\"submit\" value=\"Submit\" onClick={onClickEditMemo}></input></p>\r\n    </form>\r\n          \r\n          \r\n          </>):(<><div style={{whiteSpace:\"pre-line\",border: \"10px solid rgba(0, 0, 0, 0.05)\",padding: \"10px\"}}>{memo}</div></>)}\r\n        \r\n        \r\n        \r\n        <button onClick={()=>{setIsMemoEdit(pre=>!pre)}}>edit</button>\r\n        \r\n        \r\n        </>):(<>\r\n          <div style={{whiteSpace:\"pre-line\",border: \"10px solid rgba(0, 0, 0, 0.05)\",padding: \"10px\"}}>{memo.substring(0,70)}</div>\r\n        </>)}\r\n\r\n        <div>\r\n          {Dsubmits.map((Dsubmit)=>(\r\n              \r\n              <CDsubmit \r\n            //   key={Dsubmit.id} \r\n              DsubmitObj={Dsubmit} isOwner={Dsubmit.creatorId=== userObj.uid} viewsToggle={viewDeleyToggle}  />\r\n              \r\n          ))}\r\n      \r\n      </div>\r\n      <div>\r\n      <button style={{\r\n           float: 'right',\r\n           \r\n           margin: '10px',\r\n           marginRight: '500px',\r\n          padding:'15px 30px'}} onClick={nextPage}>Next Page</button>\r\n      </div>\r\n      \r\n      \r\n      \r\n        {/* {viewToggle ?(<>\r\n            <button onClick={(e)=>{setViewToggle(false)}}>\r\n          Close Drawings</button>\r\n          \r\n      </>):(<>\r\n        <button onClick={(e)=>{setViewToggle(true)}}>\r\n        \r\n          Show Drawings</button>\r\n      \r\n        </>)} */}\r\n        \r\n       \r\n            {/* <button onClick={(e)=>{setViewToggle(true)}}>\r\n          Close Drawings</button>\r\n          <div>\r\n          {Dsubmits.map((Dsubmit)=>(\r\n              \r\n              <CDsubmit \r\n            //   key={Dsubmit.id} \r\n              DsubmitObj={Dsubmit} isOwner={Dsubmit.creatorId=== userObj.uid} viewsToggle={viewToggle}  />\r\n              \r\n          ))}\r\n      </div> */}\r\n         \r\n        \r\n    </>\r\n    \r\n    )\r\n};","import React, { useRef, useState, useEffect } from 'react';\r\n\r\nconst DragSprite = ({imagesrc,  imageWidth}) => {\r\n    \r\n  \r\n    const spriteImage = imagesrc; // URL of the sprite image\r\n \r\n    const [spriteRows, setSpriteRows] = useState(1);\r\n    const [spriteCols, setSpriteCols] = useState(1);\r\n    const [spriteNum, setSpriteNum] = useState(1);\r\n    const [currenIndex, setCurrenIndex] = useState(0);\r\n \r\n    const spriteRow = 0; // Initial x-coordinate of the sprite in the sprite image\r\n    const spriteCol = 0; // Initial y-coordinate of the sprite in the sprite image\r\n   \r\n    const [spriteWidth, setSpriteWidth] = useState(100);\r\n    const [spriteHeight, setSpriteHeight] = useState(100);\r\n    const [calScale, setCalScale] = useState(0.5);\r\n    const [modelName,setModelName]= useState(\"none\")\r\n    useEffect(() => {\r\n        \r\n        \r\n        const img = new Image();\r\n        img. src = \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\"+spriteImage+\"?alt=media\";\r\n        const str = spriteImage;\r\n        console.log(typeof(str))\r\n        let col =1;\r\n        let row =1;\r\n        \r\n        let num =1;\r\n        if(str != undefined){\r\n          //d360d%2Fcesar047_3_8_24_-crouching.jpg\r\n          const words = str.split(/[_]/);\r\n        console.log(words)\r\n        //https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/d360d%2Fcesar047_3_8_24_-crouching.jpg?alt=media&token=4b6a8c5b-3f08-4cb6-94a4-d63c4f7a5cd4\r\n        const inde= words[0].indexOf(\"%2F\");\r\n        const modelname =words[0].substring(inde + 3)\r\n            setModelName(modelname)\r\n         col =Number(words[1]);\r\n         row =Number(words[2]);\r\n        \r\n         num =Number(words[3])\r\n        }\r\n        \r\n        // setColNum([col,num])\r\n        setSpriteCols(col)\r\n        setSpriteRows(row);\r\n        setSpriteNum(num)\r\n        img.onload = () => {\r\n            \r\n            console.log(\"넘어온값\",imageWidth,\"처음값\",img.width,\"적용값\",)\r\n            \r\n            \r\n          setSpriteWidth(img.width / col);\r\n          setSpriteHeight(img. height / row);\r\n          console.log(col,num,spriteImage)\r\n          setCalScale(imageWidth/(img.width / col))\r\n        };\r\n      \r\n      }, [spriteImage]);\r\n    const spriteStyle = {\r\n        // width: spriteWidth,\r\n        // height: spriteHeight,\r\n       \r\n        width: spriteWidth ,   // reduce the width of the div element\r\n            height: spriteHeight , // reduce the height of the div element\r\n            //  backgroundSize: '400px',\r\n             \r\n        backgroundImage: `url(${\"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\"+spriteImage+\"?alt=media\"})`,\r\n        backgroundPosition: `-${spriteRow * spriteWidth}px -${spriteCol * spriteHeight}px`,\r\n      };\r\n    \r\n      const spriteRef = useRef(null);\r\n    \r\n      const [position, setPosition] = useState({ Row: spriteRow, Col: spriteCol });\r\n     \r\n     \r\n      // const handleMouseDown = (e) => {\r\n      //   const initialX = e.clientX;\r\n        \r\n      //   const inix = position.Row;\r\n      //   const iniy = position.Col;\r\n      //   const iniindex= 4*iniy+inix\r\n      //   console.log(\"처음값\",iniindex,spriteNum)\r\n      //   const onMouseMove = (e) => {\r\n      //     const deltaX = e.clientX - initialX;\r\n      //   //   currentX = e.clientX;\r\n      //       let indexx=parseInt(deltaX / 20)\r\n      //       let currentindex=iniindex+indexx\r\n      //       // console.log(currentindex)\r\n            \r\n      //       if(currentindex<0){\r\n      //           currentindex=spriteNum+(currentindex % (spriteCols*spriteRows))\r\n      //       }\r\n      //       if(currentindex>spriteNum-1){\r\n      //           currentindex=currentindex-spriteNum\r\n      //       }\r\n      //       // console.log(currentindex)\r\n      //       setCurrenIndex(currentindex)\r\n      //       let Row= (currentindex)%spriteCols\r\n      //       let Col= parseInt(currentindex/spriteCols)\r\n            \r\n      //       if(Row<0){Row=0}\r\n      //       else if(Row>spriteCols){Row=0}\r\n      //       if(Col<0){Col=0}\r\n      //       else if(Col>spriteRows){Col=0}\r\n      //     setPosition({Row,Col});\r\n          \r\n      //   };\r\n      //   window.addEventListener('mousemove', onMouseMove);\r\n      //   window.addEventListener('mouseup', () => {\r\n      //     window.removeEventListener('mousemove', onMouseMove);\r\n      //   });\r\n      // };\r\n      const handlePointerDown = (e) => {\r\n        const initialX = e.clientX;\r\n        \r\n        const inix = position.Row;\r\n        const iniy = position.Col;\r\n        const iniindex= 4*iniy+inix\r\n        console.log(\"처음값\",iniindex,spriteNum)\r\n        let inindex = currenIndex;\r\n        const onPointerMove = (e) => {\r\n          const deltaX = e.clientX - initialX;\r\n        //   currentX = e.clientX;\r\n            let indexx=parseInt(deltaX / 20)\r\n            let currentindex=inindex+indexx\r\n            // console.log(currentindex)\r\n            \r\n            if(currentindex<0){\r\n                currentindex=spriteNum+(currentindex % (spriteCols*spriteRows))\r\n            }\r\n            if(currentindex>spriteNum-1){\r\n                currentindex=currentindex-spriteNum\r\n            }\r\n            // console.log(currentindex)\r\n            setCurrenIndex(currentindex)\r\n            let Row= (currentindex)%spriteCols\r\n            let Col= parseInt(currentindex/spriteCols)\r\n            \r\n            if(Row<0){Row=0}\r\n            else if(Row>spriteCols){Row=0}\r\n            if(Col<0){Col=0}\r\n            else if(Col>spriteRows){Col=0}\r\n          setPosition({Row,Col});\r\n          \r\n        };\r\n        window.addEventListener('pointermove', onPointerMove);\r\n        window.addEventListener('pointerup', () => {\r\n\r\n          window.removeEventListener('pointermove', onPointerMove);\r\n        });\r\n      };\r\n    \r\n      \r\n    \r\n      return (<>\r\n       {currenIndex+1}/{spriteNum}   {modelName} <a href={\"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\"+spriteImage+\"?alt=media\"} target=\"_blank\">link</a>\r\n        <div \r\n        style={{ transform: 'scale('+calScale+')',\r\n        transformOrigin: \"top left\",\r\n        width: imageWidth+\"px\",\r\n        }}\r\n        \r\n        >\r\n\r\n        \r\n        <div\r\n          ref={spriteRef}\r\n          style={{\r\n            ...spriteStyle,\r\n            touchAction : \"none\",\r\n            backgroundPosition: `-${position.Row * spriteWidth}px -${position.Col * spriteHeight}px`,\r\n          }}\r\n          // onMouseDown={handleMouseDown}\r\n          onPointerDown={handlePointerDown}\r\n          \r\n        />\r\n        </div>\r\n        </> \r\n      );\r\n    };\r\n    \r\n    export default DragSprite;","//import CCsubmit from \"../components/Csubmit\";\r\n//import { v4 as uuidv4 } from 'uuid';\r\nimport { dbService ,storageService} from \"fbase\";\r\nimport React, { useEffect, useRef, useState,useCallback } from \"react\";\r\nimport CanvasDraw from \"../../src/canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\nimport Virtual360 from \"virtual360-react/dist/Virtual360\";\r\nimport DragSprite from \"./dragsprite\";\r\n\r\nexport default ({userObj,isAndroid,penType}) =>  {\r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [Line,setLine]= useState([]);\r\n    const [croquisList,setCroquisList]= useState([]);\r\n    const [submitField,setSubmitField]= useState(\"\");\r\n    const canvasRef = useRef();\r\n    const [pinNum,setPinNum]=useState(\"\");\r\n    const [randomPinNum,setRandomPinNum]=useState([\"\"]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const [pinID,setPinID]=useState(0);\r\n    const [croquisTime,setCroquisTime]=useState(60);\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    //allowpointertype으로 터치허용유무설정가능 일단 펜만 가능하게함. 나중에하는걸로\r\n        const [min,setMin]=useState(0);\r\n        const [sec,setSec]=useState(0);\r\n        const time=useRef(croquisTime);\r\n        const timeId=useRef(null);\r\n        const [drawSetting,setDrawSetting]=useState({\r\n            croquisTimeDB:60,\r\n            brushRadius:1,\r\n            lazyRadius:1,\r\n            eraseRadius:10,\r\n            \r\n\r\n\r\n        })\r\n    const [timeSetBottonToggle,setTimeSetBottonToggle]=useState(false);\r\n\r\n\r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n    const [upFile,setUpFile]=useState([]);\r\n    const [imgstr,setImgstr]=useState(\"https://www.posespace.com/img/contact/krystalmari219contacta.jpg\");\r\n    const [colNum,setColNum]=useState([1,1]);\r\n    const [newRow,setNewRow]=useState(1);\r\n    const [newCol,setNewCol]=useState(1);\r\n    const [processInfo,setprocessInfo]=useState(\"none\");\r\n\r\n\r\n    \r\n\r\n    const getMyCroquisSettings = ()=>{\r\n              dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n            if (doc.exists) {\r\n                setDrawSetting({\r\n                    brushRadius:doc.data().brushRadius,\r\n                    lazyRadius:doc.data().lazyRadius,\r\n                    eraseRadius:doc.data().eraseRadius,\r\n                    croquisTimeDB:doc.data().croquisTimeDB,\r\n                    })\r\n                    setCroquisTime(doc.data().croquisTimeDB)\r\n                console.log(doc.data())\r\n               // console.log(croquisTime)\r\n                time.current+=doc.data().croquisTimeDB-60;\r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"No such setting document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"Error getting document:\", error);\r\n             \r\n        });\r\n    }\r\n    const updateSetting =(event)=>{\r\n      // console.log(drawSetting.croquisTimeDB,typeof(drawSetting.croquisTimeDB))\r\n      // console.log(drawSetting.brushRadius,typeof(drawSetting.brushRadius))\r\n      // console.log(drawSetting.lazyRadius,typeof(drawSetting.lazyRadius))\r\n      // console.log(drawSetting.eraseRadius,typeof(drawSetting.eraseRadius))\r\n        dbService.collection(\"usersetting\").doc(userObj.uid).update({\r\n            brushRadius:drawSetting.brushRadius,\r\n            lazyRadius:drawSetting.lazyRadius,\r\n            croquisTimeDB:drawSetting.croquisTimeDB,\r\n            eraseRadius:drawSetting.eraseRadius,\r\n            \r\n        });\r\n    }\r\n    const refreshAndSubmit =()=>{\r\n        setPinreload(pinReload+1);\r\n            \r\n            setPinID(pinID+1);\r\n            //console.log(\"timeout\",randomPinNum[pinID])\r\n            // let str = randomPinNum[pinID];\r\n            // let words = str.split(/[_]/);\r\n            // let col =Number(words[1]);\r\n            // let num =Number(words[2].split(/[-]/)[0])\r\n            // setColNum([col,num])\r\n            time.current=croquisTime;\r\n            \r\n            const data = canvasRef.current.getSaveData();\r\n            const dataUrl=canvasRef.current.getDataURL();\r\n            canvasRef.current.clear();\r\n        \r\n            \r\n            dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:croquisTime-min*60-sec,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:\"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\"+randomPinNum[pinID]+\"?alt=media\"\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n    useEffect(()=> {\r\n      \r\n      getMyCroquisSettings();\r\n      setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));     \r\n        timeId.current= setInterval(()=>{\r\n            setMin(parseInt(time.current/60));\r\n            setSec(time.current % 60);\r\n            time.current -= 1;\r\n            time.current = 100;\r\n        },1000);\r\n        return()=> clearInterval(timeId.current);\r\n    },[]);\r\n\r\n    useEffect(()=> {\r\n        if(time.current<=-1){\r\n            refreshAndSubmit();\r\n            \r\n            \r\n        }\r\n    },[sec]);\r\n\r\n    useEffect(()=> {\r\n      \r\n             \r\n     \r\n       \r\n             dbService.doc(`RefDB/d360d`).get().then((doc) => {\r\n            if (doc.exists) {\r\n                //console.log(\"Document data:\", doc.data().refUrl);\r\n                //setRandomPinNum(doc.data().refUrl);\r\n                //console.log(\"doc\",doc.data().refUrl)\r\n                // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n                // console.log(typeof(doc.data().refUrl))\r\n                // setRandomPinNum(random);\r\n                let array = []\r\n                let data = doc.data();\r\n                Object.keys(data).forEach((name) => {\r\n                  console.log(name);\r\n                  array.push({\"list\":name,\"url\":data[name]})\r\n                });\r\n                \r\n              \r\n                //console.log(array)\r\n                \r\n                array.sort(function(a,b) {\r\n                  return a.list.localeCompare(b.list);\r\n              });\r\n                setCroquisList(array)\r\n                const random=Object.values(array[0].url).sort(() => Math.random() - 0.5);\r\n                setRandomPinNum(random);\r\n\r\n                //어레이 필터링\r\n                \r\n                // let clothingArray = array.filter(item => item.url.includes(\"chanelle\") || item.url.includes(\"crystal\") || item.url.includes(\"maryd\") || item.url.includes(\"zaza\"))\r\n\r\n                // let bigArray = array.filter(item => item.url.includes(\"carolyne\") || item.url.includes(\"jenc\") || item.url.includes(\"modelsarah\") || item.url.includes(\"monikas\") || item.url.includes(\"paris\") || item.url.includes(\"ylanas\"))\r\n                \r\n                // let goodArray = array.filter(item => item.url.includes(\"avam\") || item.url.includes(\"candle\") || item.url.includes(\"charliek\") || item.url.includes(\"daniella\") || item.url.includes(\"daphne\") || item.url.includes(\"elenas\") || item.url.includes(\"ginger\") || item.url.includes(\"innabg\") || item.url.includes(\"isabella\") || item.url.includes(\"ivylee\") || item.url.includes(\"jenh\") || item.url.includes(\"jennifers\") || item.url.includes(\"jenniferevie\") || item.url.includes(\"jessicar\") || item.url.includes(\"kerri\") || item.url.includes(\"krys\") || item.url.includes(\"krystal0\") || item.url.includes(\"krystalmari\") || item.url.includes(\"lisa\") || item.url.includes(\"luana\") || item.url.includes(\"mandy\") || item.url.includes(\"maxine\") || item.url.includes(\"melissa\") || item.url.includes(\"michaela\") || item.url.includes(\"nadiar\") || item.url.includes(\"peachk\") || item.url.includes(\"rebecca\") || item.url.includes(\"saraliz\") || item.url.includes(\"vaunt\") || item.url.includes(\"voxseren\") || item.url.includes(\"ximon\"))\r\n                \r\n                // let normalArray = array.filter(item => item.url.includes(\"adhira\") || item.url.includes(\"ameeka\") || item.url.includes(\"anastasia\") || item.url.includes(\"ansleigh\") || item.url.includes(\"becca\") || item.url.includes(\"bethr\") || item.url.includes(\"bronwyns\") || item.url.includes(\"cammie\") || item.url.includes(\"candace\") || item.url.includes(\"cath\") || item.url.includes(\"claire\") || item.url.includes(\"collibrina\") || item.url.includes(\"dawnmarie\") || item.url.includes(\"felicia\") || item.url.includes(\"jenni\") || item.url.includes(\"katarinak\") || item.url.includes(\"kathyb\") || item.url.includes(\"katja\") || item.url.includes(\"katlyn\") || item.url.includes(\"kylieb\") || item.url.includes(\"lexi\") || item.url.includes(\"mikam\") || item.url.includes(\"miriam\") || item.url.includes(\"nicolevaunt\") || item.url.includes(\"niecy\") || item.url.includes(\"oliviap\") || item.url.includes(\"ravens\") || item.url.includes(\"sam\") || item.url.includes(\"shandra\") || item.url.includes(\"star\") || item.url.includes(\"stephanier\") || item.url.includes(\"susan\") || item.url.includes(\"thea\"))\r\n                \r\n                // let slenderArray = array.filter(item => item.url.includes(\"adrina\") || item.url.includes(\"alyssad\") || item.url.includes(\"anaiv\") || item.url.includes(\"ayame\") || item.url.includes(\"averya\") || item.url.includes(\"avaette\") || item.url.includes(\"augustam\") || item.url.includes(\"chelle\") || item.url.includes(\"evae\") || item.url.includes(\"irinav\") || item.url.includes(\"jenb\") || item.url.includes(\"keirag\") || item.url.includes(\"lola\") || item.url.includes(\"lynetteb\") || item.url.includes(\"monikat\") || item.url.includes(\"nedah\") || item.url.includes(\"pepperk\") || item.url.includes(\"saju\") || item.url.includes(\"sarahann\") || item.url.includes(\"trisha\") || item.url.includes(\"valentine\") || item.url.includes(\"vnixie\"))\r\n\r\n                // let femaleMuscleArray = array.filter(item => item.url.includes(\"bailey\") || item.url.includes(\"shoney\"))\r\n                // let maleMuscleArray = array.filter(item => item.url.includes(\"jesse\") || item.url.includes(\"joe\")|| item.url.includes(\"johnv\")|| item.url.includes(\"markf\"))\r\n\r\n                // let doubleArray = array.filter(item => item.url.includes(\"adhiraleo\") || item.url.includes(\"anarebecca\") || item.url.includes(\"beccadaniel\") || item.url.includes(\"bronshawn\") || item.url.includes(\"cesarluana\") || item.url.includes(\"jennimisha\") || item.url.includes(\"jesseshandra\"))\r\n\r\n                // let maleArray = array.filter(item => item.url.includes(\"andrewt\") || item.url.includes(\"bennett\") || item.url.includes(\"benp\") || item.url.includes(\"cesar\") || item.url.includes(\"dan\") || item.url.includes(\"danm\") || item.url.includes(\"davec\") || item.url.includes(\"edison\") || item.url.includes(\"eliot\") || item.url.includes(\"jesse\") || item.url.includes(\"jim\") || item.url.includes(\"joe\") || item.url.includes(\"johnv\") || item.url.includes(\"johnyg\") || item.url.includes(\"leo\") || item.url.includes(\"markf\") || item.url.includes(\"mattb\") || item.url.includes(\"michael0\") || item.url.includes(\"neil\") || item.url.includes(\"shawnec\"))\r\n\r\n                // let maleBigArray = array.filter(item => item.url.includes(\"davidl\") || item.url.includes(\"neil\"))\r\n\r\n\r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"No such document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"Error getting document:\", error);\r\n             \r\n        });\r\n\r\n\r\n       \r\n        // dbService.collection(\"Csubmit\").onSnapshot((snapshot) =>{\r\n        //     const CsubmitArray = snapshot.docs.map((doc)=>({\r\n        //         id: doc.id,\r\n        //         ...doc.data(),\r\n        //     }));\r\n            \r\n        //     setCsubmits(CsubmitArray);\r\n        //     //console.log(Csubmits);\r\n        // });\r\n\r\n        \r\n        \r\n\r\n    },[]);\r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n        //  const data = canvasRef.current.getSaveData();\r\n        //  canvasRef.current.clear();\r\n     \r\n         \r\n        //  await dbService.collection(\"Csubmit\").add({\r\n        //      text:data,\r\n        //      createdAt: Date.now(),\r\n        //      creatorId: userObj.uid,\r\n        //      heart:(0),\r\n        //     //  refPhoto:{refPhoto},\r\n        //      //pinNumber:randomPinNum,\r\n        //  });\r\n        //  setCsubmit(\"\"); \r\n        refreshAndSubmit();\r\n     };\r\n    //  const onSubmitPinNum= (event) => {\r\n    //     event.preventDefault();\r\n        \r\n    //     if(pinNum.match(\",\")){\r\n            \r\n    //         const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n         \r\n    //         pinNum.split(\",\").forEach(e => {\r\n    //             //console.log(e)\r\n    //             pinDocRef.update({\r\n    //                 [submitField]:firebase.firestore.FieldValue.arrayUnion(e)\r\n    //         }); \r\n            \r\n    //     });\r\n    //     }else{\r\n    //         const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n    //         pinDocRef.update({\r\n    //             [submitField]:firebase.firestore.FieldValue.arrayUnion(pinNum)\r\n    //     });\r\n    //     }\r\n\r\n        \r\n           \r\n    //     setPinNum(\"\")\r\n\r\n    //  }\r\n     const onChange = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setPinNum(value);\r\n     }\r\n     const onChangeCol = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setNewCol(value);\r\n     }\r\n     const onChangeRow = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setNewRow(value);\r\n     }\r\n     const onChangeTime = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setCroquisTime(value);\r\n         setDrawSetting(prevState=>({...prevState, croquisTimeDB: event.target.value }))\r\n         \r\n     }\r\n\r\n     const onSubmitTime= (event) => {\r\n        event.preventDefault();\r\n        setTimeSetBottonToggle(false)\r\n        \r\n        //setCroquisTime(0)\r\n     }\r\n     const noRefreshAndSubmit =()=>{\r\n        \r\n      //console.log(\"timeout\",randomPinNum[pinID])\r\n      \r\n      time.current=croquisTime;\r\n      \r\n      const data = canvasRef.current.getSaveData();\r\n      const dataUrl=canvasRef.current.getDataURL();\r\n      canvasRef.current.clear();\r\n  \r\n      \r\n      dbService.collection(\"Csubmit\").add({\r\n          text:data,\r\n          createdAt: Date.now(),\r\n          creatorId: userObj.uid,\r\n          drawingTime:croquisTime-min*60-sec,\r\n          heart:(0),\r\n          dataUrl:dataUrl,\r\n          refPinUrl:\"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\"+randomPinNum[pinID]+\"?alt=media\"\r\n         //  refPhoto:{refPhoto},\r\n          //pinNumber:randomPinNum,\r\n      });\r\n      \r\n      setCsubmit(\"\"); \r\n\r\n      //clearInterval(timeId.current);\r\n}\r\n     const onSubmitOnlyCanvas= (event) => {\r\n      event.preventDefault();\r\n  \r\n     noRefreshAndSubmit();\r\n  };\r\n     const onNextClick= (event) => {\r\n      event.preventDefault();\r\n  \r\n      setPinreload(pinReload+1);\r\n            \r\n      setPinID(pinID+1);\r\n      // let str = randomPinNum[pinID];\r\n      // let words = str.split(/[_]/);\r\n      // let col =Number(words[1]);\r\n      //       let num =Number(words[2].split(/[-]/)[0])\r\n      //       setColNum([col,num])\r\n      time.current=croquisTime;\r\n  };\r\n  const onimgClick= (event) => {\r\n    event.preventDefault();\r\n\r\n    setImgstr(\"https://www.posespace.com/img/contact/krystalmari219contacta.jpg\")\r\n          \r\n   \r\n};\r\n// const downloadImage = async (url, fileName) => {\r\n//   try {\r\n//     const response = await fetch(url);\r\n//     const blob = await response.blob();\r\n//     const a = document.createElement(\"a\");\r\n//     a.href = URL.createObjectURL(blob);\r\n//     a.download = fileName;\r\n//     a.click();\r\n//   } catch (error) {\r\n//     console.error(error);\r\n//   }\r\n// };\r\n\r\n     const onDeletePinClick= () => {\r\n      // setPinreload(pinReload+1);\r\n            \r\n      //       setPinID(pinID+1);\r\n      // Get a reference to the storage service\r\n      //d360d%2Favam054_4_8_25_-crouching.jpg\r\n      const url = randomPinNum[pinID]\r\n      const startIndex = url.indexOf(\"%2F\"); //start index of the desired string\r\n      // const startIndex = url.indexOf(\"test%2F\") + 6; //start index of the desired string\r\n      // const endIndex = url.indexOf(\"jpg?\");\r\n      // const oldname = url.substring(startIndex+1, endIndex+3);\r\n      const oldname = url.substring(startIndex+3);\r\n      const filedir = url.substring(0,startIndex)\r\nconsole.log(oldname,filedir)\r\n      \r\n      //0 mandy616  \r\n      //1 _10\r\n      //2 _12\r\n      //3 _60\r\n      //4 _-crouching.jpg\r\n      const namepart = oldname.split(\"_\")\r\n      \r\n      const newname = namepart[0] +\"_\"+newCol +\"_\"+newRow +\"_\"+namepart[3] +\"_\"+namepart[4] \r\n      console.log(\"oldname\",oldname,\"  newname\",newname)\r\n      const storeDir = filedir\r\n      let words = namepart[4].split(/[-.]/);\r\n        console.log(words)\r\n// Get the file from Firebase Storage\r\nconst oldfileRef = storageService.ref(storeDir+\"/\"+oldname);\r\n// oldfileRef.getDownloadURL().then(url => {\r\n    // Fetch the file from the URL\r\n    let newfileurl= \"\"\r\n    // const downableurl= \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\"+url+\"?alt=media\"\r\n    // console.log(\"downloadurl\",downableurl)\r\n    oldfileRef.getDownloadURL().then(downurl => {\r\n      console.log(\"downloadurl\",downurl)\r\n    fetch(downurl)\r\n        .then(response => response.blob())\r\n        \r\n        .then(blob => {\r\n            // Create a new Blob object with the renamed file\r\n            const renamedBlob = new Blob([blob], { type: blob.type, name: newname });\r\n            console.log('File renamed',oldname,\"=>\",newname);\r\n            setprocessInfo(\"rename..\")\r\n            // Get a reference to the new location in Firebase Storage\r\n            const newFileRef = storageService.ref(storeDir+\"/\"+newname);\r\n\r\n            // Upload the renamed file\r\n            newFileRef.put(renamedBlob)\r\n            .then(() => {\r\n                console.log('File reuploaded !',newname);\r\n                setprocessInfo(\"reupload..\")\r\n            })\r\n            \r\n            .then(()=>{\r\n              oldfileRef.delete()\r\n              .then(() => {\r\n                console.log('old file removed!');\r\n              })\r\n              \r\n              .then(()=>{\r\n                const pinDocRef= dbService.doc(`RefDB/d360d`);\r\n                newFileRef.getDownloadURL().then(url => {\r\n                  const startIndex = url.indexOf(\".com/o/\") ; //start index of the desired string\r\n                  // const startIndex = url.indexOf(\"test%2F\") + 6; //start index of the desired string\r\n                  const endIndex = url.indexOf(\"jpg?\");\r\n                 \r\n                    const shorturl = url.substring(startIndex+7, endIndex+3);\r\n              \r\n                    for (var j =1; j< words.length-1;j++){\r\n                            \r\n                    pinDocRef.update({\r\n                        [words[j]]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])});\r\n                        console.log(\"field deleted and updated in \",words[j],\", \")\r\n                        setprocessInfo(\"Done!\")\r\n                    pinDocRef.update({\r\n                      [words[j]]:firebase.firestore.FieldValue.arrayUnion(shorturl) });\r\n                  }\r\n                })  \r\n              })\r\n            });\r\n        })\r\n      })\r\n        \r\n// });\r\n\r\n\r\n      ///////아래는 firestore 필드 정리코드\r\n            \r\n      \r\n      \r\n      // downloadImage(url, newName);\r\n\r\n      \r\n      \r\n      ////정리끝\r\n\r\n\r\n\r\n  //https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/d360d%2Fmandy616_10_12_60_-crouching.jpg?alt=media&token=ed12b687-5f13-4866-b02b-afe7f5144157\r\n//   const url = randomPinNum[pinID]\r\n// const startIndex = url.indexOf(\"d360d%2F\") + 7; //start index of the desired string\r\n// const endIndex = url.indexOf(\"jpg?\");\r\n// const desiredString = url.substring(startIndex+1, endIndex+3);\r\n// console.log(desiredString);\r\n// //0 mandy616  \r\n// //1 _10\r\n// //2 _12\r\n// //3 _60\r\n// //4 _-crouching.jpg\r\n// const namepart = desiredString.split(\"_\")\r\n\r\n// const newName = namepart[0] +\"_\"+newCol +\"_\"+newRow +\"_\"+namepart[3] +\"_\"+namepart[4] \r\n// console.log(newName);\r\n// let words = namepart[4].split(/[-.]/);\r\n//   console.log(words)\r\n\r\n// const oldFileRef = storageService.ref(`/${\"d360d\"}/${desiredString}`);\r\n\r\n// Create a new reference with the new file name\r\n// const newFileRef = storageService.ref(`/${\"d360d\"}/${newName}`);\r\n\r\n// Move the file to the new location\r\n// oldFileRef.move(`/${\"d360d\"}/${newName}`)\r\n//   .then(() => {\r\n//     console.log(\"File name changed successfully!\");\r\n    \r\n//     oldFileRef.getDownloadURL().then(downloadURL => {\r\n//   console.log(\"File available at\", downloadURL);\r\n\r\n//   const pinDocRef= dbService.doc(`RefDB/d360d`);\r\n//   for (var j =1; j< words.length-1;j++){\r\n//     pinDocRef.update({\r\n//       [words[j]]:firebase.firestore.FieldValue.arrayUnion(downloadURL)\r\n// });\r\n\r\n  \r\n\r\n  \r\n//   pinDocRef.update({\r\n//       [words[j]]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])});\r\n//       console.log(\"complete del in \",words[j],\", \",randomPinNum[pinID],\"---> \",downloadURL)\r\n// }\r\n\r\n// })\r\n    \r\n//   })\r\n//   .catch(error => {\r\n//     console.error(\"Error changing file name:\", error);\r\n//   });\r\n\r\n  \r\n            // let str = randomPinNum[pinID];\r\n            // let words = str.split(/[_]/);\r\n            // let col =Number(words[1]);\r\n            // let num =Number(words[2].split(/[-]/)[0])\r\n            // setColNum([col,num])\r\n    };\r\n \r\n     const onClearClick= () => {\r\n      const ok = window.confirm(\"wanna clear this?\")\r\n      if(ok){\r\n        canvasRef.current.clear();\r\n          \r\n      }\r\n    };\r\n     const onUndoClick= () => {\r\n        canvasRef.current.undo();\r\n    };\r\n     const onEraseClick= () => {\r\n        setBrushColor(\"erase\")\r\n        \r\n    };\r\n     const onBrushClick= () => {\r\n        setBrushColor(\"#444\")\r\n       \r\n    };\r\n    const onShadowClick= () => {\r\n      setBrushColor(\"shadow\")\r\n      \r\n  };\r\n\r\n    function ordinal_suffix_of(i) {\r\n        var j = i % 10,\r\n            k = i % 100;\r\n        if (j == 1 && k != 11) {\r\n            return i + \"st\";\r\n        }\r\n        if (j == 2 && k != 12) {\r\n            return i + \"nd\";\r\n        }\r\n        if (j == 3 && k != 13) {\r\n            return i + \"rd\";\r\n        }\r\n        return i + \"th\";\r\n    }\r\n    function sexagesimal(i) {\r\n        if(i <= 9){\r\n            return \"0\"+i;\r\n        }else{\r\n            return i;\r\n        }\r\n    }\r\n\r\n    const selectChange = (e) => {\r\n\t\t// event handler\r\n\t\t// console.log(e.target.value);\r\n\t\t// console.log(croquisList[e.target.value].list);\r\n\t\t\r\n\t\t// console.log(typeof(Object.values(croquisList[e.target.value].url)));\r\n\r\n//////////\r\n    setSubmitField(croquisList[e.target.value].list)\r\n    const random=Object.values(croquisList[e.target.value].url).sort(() => Math.random() - 0.5);\r\n    setRandomPinNum(random);\r\n///////\r\n\r\n\r\n    //필드이름바꾸기\r\n    // const pinDocRef= dbService.doc(`RefDB/d360d`);\r\n                \r\n    // let index =1    \r\n    // for (var j =0; j< croquisList[e.target.value].url.length;j++){\r\n    // const fullurl=croquisList[e.target.value].url[j]\r\n\r\n    // const startIndex = fullurl.indexOf(\"d360d%2F\") ; //start index of the desired string\r\n    //   // const startIndex = url.indexOf(\"test%2F\") + 6; //start index of the desired string\r\n    //   const endIndex = fullurl.indexOf(\"jpg?\");\r\n    //   if(startIndex != 0 &&endIndex != 0){\r\n    //     const shorturl = fullurl.substring(startIndex, endIndex+3);\r\n      \r\n    //   //d360d%2Fnicolevaunt032_4_6_30_-crouching-standing.jpg\r\n    //   //console.log(shorturl)\r\n              \r\n    // pinDocRef.update({\r\n    //     [croquisList[e.target.value].list]:firebase.firestore.FieldValue.arrayRemove(fullurl)})\r\n    //     .then(()=>{\r\n\r\n    //     pinDocRef.update({\r\n    //       [croquisList[e.target.value].list]:firebase.firestore.FieldValue.arrayUnion(shorturl) })\r\n    //       .then(()=>{\r\n    //         console.log(index,\"/\",croquisList[e.target.value].url.length,\"  field deleted and updated in \",croquisList[e.target.value].list,\", \",fullurl,\"====>\",shorturl);\r\n    //         index +=1;\r\n    //       }); \r\n    //     });\r\n\r\n    //     }\r\n    //     else{\r\n    //       console.log(\"already shorturl\")\r\n    //     }}\r\n    //필드이름바꾸기 \r\n\r\n\r\n       \r\n\r\n\r\n\r\n\r\n            //     let str = random[pinID];\r\n            //     console.log(random[pinID])\r\n            // let words = str.split(/[_]/);\r\n            // console.log(words)\r\n            // let col =Number(words[1]);\r\n            // const temp =words[2].split(/[-]/)\r\n            // let num =Number(temp[0])\r\n            // setColNum([col,num])\r\n\t};\r\n    //  const onChange = (event)=> {\r\n    //      const {\r\n    //          target:{value},\r\n    //      }=event;\r\n    //      setCsubmit(value);\r\n    //  }\r\n\r\n     const onSubmitImage= async(event) => {\r\n        event.preventDefault();\r\n        handleFilesUploadOnFirebaseStorage(submitField,upFile);\r\n    //     const fileRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`);\r\n    //     const response = await fileRef.putString(imageString,\"data_url\");\r\n    //     const imageUrl =await response.ref.getDownloadURL();\r\n    //     setImageString(\"\");\r\n        setUpFile([])\r\n     }\r\n     const onFileChange= (event)=>{\r\n        const {\r\n            target:{files}\r\n        }= event;\r\n        const theFile = files[0];\r\n        setUpFile(files)\r\n        console.log(files)\r\n        // const reader= new FileReader();\r\n        // reader.onloadend = (finishedEvent)=>{\r\n        //     const {\r\n        //         currentTarget:{result},\r\n        //     }=finishedEvent;\r\n            \r\n        //     setImageString(result);\r\n        // }\r\n        // reader.readAsDataURL(theFile);\r\n     }\r\n    const handleFileUploadOnFirebaseStorage = async (bucketName, file) => {\r\n      // 1. If no file, return\r\n      if (file === \"\") return \"\";\r\n\r\n      // 2. Put the file into bucketName\r\n      try {\r\n      const uploadTask = await storageService.ref(`/${bucketName}/${file.name}`).put(file);\r\n   \r\n      \r\n      // 3. Get download URL and return it as \r\n      return uploadTask.ref.getDownloadURL().then((fileURL) => fileURL);\r\n    } catch (e) {\r\n      console.log(e) // 에러출력 or 에러의 경우 처리할 로직작성하자\r\n    }\r\n   };\r\n\r\n   const handleFilesUploadOnFirebaseStorage = async (bucketName, files) => {\r\n    // 1. If no file, return\r\n    if (files.length === 0) return [];\r\n\r\n    // 2. Create an array to store all download URLs\r\n    // let fileUrls = [];\r\n    \r\n    // 3. Loop over all the files.\r\n    const pinDocRef= dbService.doc(`RefDB/d360d`);\r\n    for (var i = 0; i < files.length; i++) {\r\n        // 3A. Get a file to upload\r\n        const file = files[i];\r\n        \r\n        \r\n\r\n\r\n        // 3B. handleFileUploadOnFirebaseStorage function is in above section bucketName= d360d\r\n        const downloadFileResponse = await handleFileUploadOnFirebaseStorage(\"d360d\", file);\r\n//https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/d360d%2Firinav009_4_6_24_-standing.jpg?alt=media&token=abbe4908-c4b2-4975-9de0-451571cdd270\r\n        const fullurl=downloadFileResponse\r\n        console.log(\"fullurl\",fullurl)\r\n        const startIndex = fullurl.indexOf(\".com/o/\") ; //start index of the desired string\r\n        // const startIndex = url.indexOf(\"test%2F\") + 6; //start index of the desired string\r\n        const endIndex = fullurl.indexOf(\"jpg?\");\r\n       \r\n          const shorturl = fullurl.substring(startIndex+7, endIndex+3);\r\n\r\n\r\n        let str = file.name;\r\n        let words = str.split(/[-.]/);\r\n        console.log(words)\r\n        for (var j =1; j< words.length-1;j++){\r\n          pinDocRef.update({\r\n            [words[j]]:firebase.firestore.FieldValue.arrayUnion(shorturl)\r\n    });\r\n    console.log(\"complete : \",i+1,\"/\",files.length,\"in\",words[j],\" \",shorturl)\r\n        }\r\n        \r\n    \r\n        \r\n        // 3C. Push the download url to URLs array\r\n        // fileUrls.push(downloadFileResponse);\r\n    }\r\n\r\n    // return fileUrls;\r\n};\r\n\r\n  return(\r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        if (keyName == \"ctrl+z\") { onUndoClick(); }\r\n        if (keyName == \"c\") {\r\n          if (brushColor != \"erase\") { onEraseClick(); }\r\n          else if (brushColor == \"erase\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      } }\r\n    ></Hotkeys>\r\n    <div>\r\n        {/* <PieChart style={{ height: '35px' }}\r\n    data={[{ value: 1, key: 1, color: '#E38627' }]}\r\n    startAngle={-90}\r\n    reveal={-100*(min*60+sec)/croquisTime}\r\n    lineWidth={100}\r\n    // background=\"#f3f3f3\"\r\n    lengthAngle={360}\r\n    /> */}\r\n        {/* <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(pinID + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Croquis Time</button>\r\n\r\n          </>)}\r\n          <button onClick={updateSetting}>Update Setting</button> */}\r\n           {isAndroid?(<>\r\n            <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            {processInfo} : \r\n            <input value={newCol} onChange={onChangeCol} type={\"number\"} placeholder=\"Col\" inputmode={\"decimal\"}/>\r\n            <input value={newRow} onChange={onChangeRow} type={\"number\"} placeholder=\"row\" inputmode={\"decimal\"}/>\r\n            <button onClick={onDeletePinClick}>reset col row</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(pinID + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n              \r\n          </>)}\r\n          <button onClick={updateSetting}>Setting</button>\r\n          </div>\r\n          </>)\r\n           :(<> <div style={{width: \"1000px\"}}>\r\n            <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            {processInfo} : \r\n            <input value={newCol} onChange={onChangeCol} type={\"number\"} placeholder=\"Col\" inputmode={\"decimal\"}/>\r\n            <input value={newRow} onChange={onChangeRow} type={\"number\"} placeholder=\"row\" inputmode={\"decimal\"}/>\r\n            <button onClick={onDeletePinClick}>reset col row</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(pinID + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n              \r\n          </>)}\r\n          <button onClick={updateSetting}>Setting</button>\r\n          </div>\r\n          </div></>)}\r\n         \r\n        \r\n          \r\n          \r\n          {/* <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinHeight: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasHeight: e.target.value }))\r\n          }\r\n        /> */}\r\n\r\n\r\n        \r\n\r\n\r\n        {isAndroid?(<><div>\r\n          <select  defaultValue={-1} onChange={selectChange} >\r\n          \r\n    {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}>{e.list}</option>;\r\n    })}\r\n</select>\r\n</div>\r\n          <div style={{ float: 'left' }}>\r\n          {/* {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?\r\n          (<>\r\n          <img key={pinReload} src={randomPinNum[pinID]}   height={450} frameBorder={0} scrolling=\"no\"></img>\r\n          </>):(<>\r\n            <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} width={300} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)} */}\r\n           <div>\r\n        \r\n                            \r\n           <DragSprite\r\n          imagesrc={randomPinNum[pinID]}\r\n          \r\n          imageWidth={400}\r\n/>\r\n      {/* <Virtual360\r\n        sensitivity={1}\r\n        numOfImagesPerColumn={32}\r\n        defaultImagePosition={30}\r\n        imageSrc=\"./adhira001contact{col}.jpg\"\r\n        width={\"300px\"}\r\n        \r\n      ></Virtual360> */}\r\n    </div>\r\n          \r\n          </div>\r\n        \r\n        \r\n        </>):(<>\r\n\r\n\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvas}>Upload&Redraw</button>\r\n            </div>\r\n\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmit}>Upload</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onNextClick}>Next</button>\r\n            </div>\r\n\r\n        <div style={{\r\n          position: 'absolute',\r\n          left: '30%',\r\n          transform: 'translateX(-50%)',\r\n          width: '70px',\r\n          textAlign: 'center',\r\n\r\n          background: 'linear-gradient(to left,#FFC365 ' + (min * 60 + sec) * 100 / croquisTime + '%,#E8E8E8 ' + (min * 60 + sec) * 100 / croquisTime + '%nSubmitPinNum)'\r\n        }}>\r\n          {min}: {sexagesimal(sec)}\r\n        </div>\r\n\r\n\r\n\r\n\r\n        <div>\r\n          {/* <form  onSubmit={onSubmitPinNum}> */}\r\n          <form  >\r\n          <select  key={\"cos\"} onChange={selectChange} >\r\n          \r\n    {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}>{e.list}</option>;\r\n    })}\r\n</select>\r\n            {/* <input value={pinNum} onChange={onChange} type={\"text\"} placeholder=\"You Can Upload Pinterst Pin By Url Number\" />\r\n            <input type={\"submit\"} value=\"Upload Pin\" /> */}\r\n\r\n          </form>\r\n          {/* <button onClick={onDeletePinClick}>Delete Pin</button> */}\r\n\r\n          \r\n\r\n        </div>\r\n\r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        \r\n        <div style={{ float: 'left',width: \"400\" }}>\r\n          \r\n          {/* {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?\r\n          (<>\r\n          <img key={pinReload} src={randomPinNum[pinID]}  width={400} frameBorder={0} scrolling=\"no\"></img>\r\n          </>):(<>\r\n            <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={770} width={400} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)} */}\r\n          {/* 360d */}\r\n          {/* let str = randomPinNum[pinID];\r\n          let words = randomPinNum[pinID].split(/[_]/);\r\n          \r\n          console.log(randomPinNum[pinID].split(/[_]/)[1]);\r\n          console.log(randomPinNum[pinID].split(/[_]/)[2].split(/[-]/)[0]); */}\r\n          <DragSprite\r\n          imagesrc={randomPinNum[pinID]}\r\n          \r\n          imageWidth={400}\r\n/>\r\n          fd\r\n          \r\n        {/* <Virtual360\r\n        sensitivity={1}\r\n        numOfImagesPerColumn={22}\r\n        defaultImagePosition={1}\r\n        imageSrc='http://woosterwebdesign.com/experiments/images/car_slides/car_({col}).jpg'\r\n        width={\"400px\"}\r\n        \r\n      ></Virtual360> */}\r\n          \r\n        </div>\r\n\r\n</>)}\r\n\r\n\r\n\r\n\r\n\r\n        <div style={{ float: 'left' }}>\r\n          <div>\r\n\r\n\r\n\r\n          {isAndroid?(<><div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear</button>\r\n        </div>\r\n        <div style={{ float: 'right' }}>\r\n              <form onSubmit={onSubmitOnlyCanvas}>\r\n\r\n             \r\n                <input type={\"submit\"} value=\"Up&Re\" />\r\n\r\n              </form>\r\n            </div>\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <form onSubmit={onSubmit}>\r\n\r\n            \r\n                <input type={\"submit\"} value=\"Up\" />\r\n\r\n              </form>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onNextClick}>Next</button>\r\n            </div>\r\n          <div style={{ float: 'right' }}>\r\n          {min}: {sexagesimal(sec)}\r\n          </div>\r\n            </>):(<></>)}\r\n\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {brushColor==\"erase\" ? (<>\r\n                <label>Erase Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Brush Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n              \r\n\r\n\r\n            </div>\r\n            \r\n            <div style={{ float: 'left' }}>\r\n              {isAndroid?(<><button style={{padding:\"15px\"}} onClick={onUndoClick}>◀</button></>):(<><button onClick={onUndoClick}>◀</button></>)}\r\n            </div>\r\n\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n\r\n\r\n            </div>\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>\r\n\r\n            \r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor}\r\n\r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]} />\r\n          </div>\r\n        </div>\r\n\r\n\r\n                {timeSetBottonToggle&&(<> <form onSubmit={onSubmitImage}>\r\n          <input type={\"file\"} accept=\"image/*\" onChange={onFileChange} multiple/>\r\n          <input type={\"submit\"} value=\"Upload Croquis Images\"/>\r\n    </form></>)}\r\n       \r\n\r\n   \r\n\r\n\r\n\r\n        {/* <div>\r\n        {Csubmits.map((Csubmit)=>(\r\n            <CCsubmit key={Csubmit.id} CsubmitObj={Csubmit} isOwner={Csubmit.creatorId=== userObj.uid} />\r\n        ))}\r\n    </div> */}\r\n      </div></>\r\n  )\r\n };\r\n ","import { dbService, storageService } from \"fbase\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport CanvasDraw from \"../canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport PinchZoomPan from \"PinchZoomPan\";\r\nimport Hotkeys from \"react-hot-keys\";\r\nimport { set } from \"lodash\";\r\nimport Soche from \"./soche3.png\";\r\n\r\n\r\nexport default ({userObj,isAndroid,penType}) => {\r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    // const [Csubmits,setCsubmits]= useState([]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const canvasRef3 = useRef();\r\n    const [drawSetting,setDrawSetting]=useState({\r\n       \r\n        brushRadius:1,\r\n        lazyRadius:0,\r\n       \r\n        \r\n\r\n\r\n    })\r\n    const [listst,setListst]= useState([])\r\n    const [listst2,setListst2]= useState([])\r\n    const [socheNum,setSocheNum]=useState(false);\r\n    const [sotyIndex,setSotyIndex]=useState(0);\r\n    const [sotyUrlarr,setSotyUrlarr]=useState([]);\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n    const [randomOn,setRandomOn]=useState(false)\r\n    const [extendOn,setExtendOn]=useState(false)\r\n    const [drawingOn,setDrawingOn]=useState(false)\r\n    const [min,setMin]=useState(0);\r\n    const [sec,setSec]=useState(0);\r\n    const [croquisTime,setCroquisTime]=useState(300);\r\n    const time=useRef(croquisTime);\r\n    const timeId=useRef(null);\r\n    const [croquisList,setCroquisList]= useState([]);\r\n    const [croquisPage,setCroquisPage]= useState([]);\r\n    const [submitField,setSubmitField]= useState(\"dragonball1\");\r\n    const [pinNum,setPinNum]=useState(\"\");\r\n    const [randomPinNum,setRandomPinNum]=useState([\"\"]);\r\n    const [pinID,setPinID]=useState(0);\r\n    const [upFile,setUpFile]=useState([]);\r\n    const [timeSetBottonToggle,setTimeSetBottonToggle]=useState(false);\r\n    const [repeat,setRepeat]=useState(false)\r\n    const [repeatDraw,setRepeatDraw]=useState(0)\r\n    const [blank,setblank]=useState(false)\r\n    const [repeatNum,setRepeatNum]=useState(1)\r\n\r\n    function sexagesimal(i) {\r\n      if(i <= 9){\r\n          return \"0\"+i;\r\n      }else{\r\n          return i;\r\n      }\r\n  }\r\n    useEffect(()=> {\r\n      if(localStorage.getItem(2) != null){\r\n        setCroquisTime(JSON.parse(localStorage.getItem(2)))\r\n      }\r\n      \r\n      if(localStorage.getItem(\"mangarepeat\")==undefined){\r\n        localStorage.setItem(\"mangarepeat\", false)\r\n        \r\n      }else{\r\n        setRepeat(JSON.parse(localStorage.getItem(\"mangarepeat\")))\r\n        \r\n      }\r\n      if(localStorage.getItem(\"mangasoche\")==undefined){\r\n        localStorage.setItem(\"mangasoche\", false)\r\n        \r\n      }else{\r\n        setSocheNum(JSON.parse(localStorage.getItem(\"mangasoche\")))\r\n        \r\n      }\r\n      setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n        timeId.current= setInterval(()=>{\r\n          \r\n            setMin(parseInt(time.current/60));\r\n            setSec(time.current % 60);\r\n            time.current -= 1;\r\n        },1000);\r\n        return()=> clearInterval(timeId.current);\r\n    },[]);\r\n\r\n    useEffect(()=> {\r\n        if(time.current<=-1){\r\n          if(randomOn){\r\n            refreshAndSubmit();\r\n            randomIndex()\r\n          }\r\n\r\n            \r\n            \r\n        }\r\n    },[sec]);\r\n\r\n    const randomIndex= () => {\r\n      setSotyIndex(Math.floor(Math.random()*690) + 1)\r\n  };\r\n\r\n\r\n \r\n\r\nuseEffect(()=> {\r\n  \r\n  let array = []         \r\n  let pageArray=[]\r\n   ///ref1불러오기\r\n         dbService.doc(`RefDB/manga`).get().then((doc) => {\r\n        if (doc.exists) {\r\n            //console.log(\"Document data:\", doc.data().refUrl);\r\n            //setRandomPinNum(doc.data().refUrl);\r\n            //console.log(\"doc\",doc.data().refUrl)\r\n            // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n            // console.log(typeof(doc.data().refUrl))\r\n            // setRandomPinNum(random);\r\n            \r\n            let data = doc.data();\r\n            Object.keys(data).forEach((name) => {\r\n              console.log(name);\r\n              pageArray.push({\"list\":name,\"page\":0});\r\n              array.push({\"list\":name,\"url\":data[name]});\r\n            });\r\n            \r\n          \r\n            //console.log(array)\r\n            \r\n          \r\n            \r\n            \r\n           \r\n            \r\n            \r\n        } else {\r\n            // doc.data() will be undefined in this case\r\n            console.log(\"ref1 No such document!\");\r\n        }\r\n    }).catch((error) => {\r\n        console.log(\"ref1 Error getting document:\", error);\r\n         \r\n    }).then(e=>{\r\n      array.sort(function(a,b) {\r\n        return a.list.localeCompare(b.list);\r\n    });\r\n    \r\n    \r\n    \r\n      pageArray.push({\"list\":\"lastpage\",\"page\":\"\"});\r\n      \r\n      setCroquisPage(pageArray)\r\n      setCroquisList(array)\r\n      // console.log(\"이름\",array)\r\n      const random=Object.values(array[4].url)\r\n      // setSubmitField(croquisList[4].list)\r\n      \r\n      setRandomPinNum(random); \r\n     //핀넘버지정\r\n    //  const random=Object.values(croquisList[e.target.value].url).sort((a,b) => a.localeCompare(b));\r\n    //  setRandomPinNum(random);\r\n      //setRandomPinNum(random);  \r\n\r\n    }).then(e=>{\r\n\r\n      dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n        if (doc.exists) {\r\n            setDrawSetting({\r\n                brushRadius:doc.data().brushRadius,\r\n                lazyRadius:doc.data().lazyRadius,\r\n                sotyIndex:doc.data().sotyIndex,})\r\n                setSotyIndex(doc.data().sotyIndex)\r\n                if(doc.data().page.length>0){\r\n                  setCroquisPage(doc.data().page)\r\n                }\r\n                \r\n            console.log(\"PAGE\",doc.data().page)\r\n            console.log(doc.data())\r\n            let lastpagename=\"\"\r\n            doc.data().page.forEach((item) => {\r\n              if (item.list === \"lastpage\") {\r\n                //setPinID(item.page);\r\n                lastpagename=item.page\r\n              }\r\n            });\r\n            doc.data().page.forEach((item) => {\r\n              if (item.list === lastpagename) {\r\n                setPinID(parseInt(item.page));\r\n                \r\n              }\r\n            });\r\n            for(let i=0;i<array.length;i++){\r\n              if(array[i].list == lastpagename){\r\n                const random=Object.values(array[i].url)\r\n                // setSubmitField(croquisList[4].list)\r\n                //console.log(random[0],random)\r\n                setRandomPinNum(random); \r\n\r\n              }\r\n              \r\n            \r\n            }\r\n            setSubmitField(lastpagename)\r\n            \r\n           \r\n            \r\n            \r\n        } else {\r\n            // doc.data() will be undefined in this case\r\n            console.log(\"No such setting document!\");\r\n        }\r\n    }).catch((error) => {\r\n        console.log(\"Error getting document:\", error);\r\n         \r\n    });\r\n\r\n    })\r\n\r\n    \r\n\r\n},[]);\r\n\r\nconst selectChange = (e) => {\r\n setPinID(0)\r\n  setSubmitField(croquisList[e.target.value].list)\r\n  localStorage.setItem(\"mangdraw\", e.target.value)\r\n  croquisPage.forEach((item) => {\r\n    if (item.list === croquisList[e.target.value].list) {\r\n      console.log(item.list,\"페이지\",item.page);\r\n      setPinID( parseInt(item.page))\r\n    }\r\n  });\r\n\r\n  //핀넘버지정\r\n  //setRandomPinNum(random);\r\n  const random=Object.values(croquisList[e.target.value].url).sort((a,b) => a.localeCompare(b));\r\n                setRandomPinNum(random);\r\n\r\n};\r\n\r\n//     useEffect(()=> {\r\n//         dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n//             if (doc.exists) {\r\n//                 setDrawSetting({\r\n//                     brushRadius:doc.data().brushRadius,\r\n//                     lazyRadius:doc.data().lazyRadius,\r\n//                     sotyIndex:doc.data().sotyIndex,})\r\n//                     setSotyIndex(doc.data().sotyIndex)\r\n//                     // if(doc.data().submitField.length>0){\r\n//                     //   setPinID(doc.data().submitField)\r\n//                     // }\r\n                    \r\n//                 console.log(doc.data())\r\n                \r\n                \r\n               \r\n                \r\n                \r\n//             } else {\r\n//                 // doc.data() will be undefined in this case\r\n//                 console.log(\"No such setting document!\");\r\n//             }\r\n//         }).catch((error) => {\r\n//             console.log(\"Error getting document:\", error);\r\n             \r\n//         });\r\n\r\n\r\n// // 기존 소티불러오기\r\n//   //       dbService.doc(`RefDB/soty`).get().then((doc) => {\r\n//   //      if (doc.exists) {\r\n//   //          //console.log(\"Document data:\", doc.data().refUrl);\r\n//   //          //setRandomPinNum(doc.data().refUrl);\r\n//   //          //console.log(\"doc\",doc.data().refUrl)\r\n//   //          const urlarr=doc.data().refUrl;\r\n           \r\n           \r\n//   //          setSotyUrlarr(urlarr);\r\n          \r\n           \r\n           \r\n//   //      } else {\r\n//   //          // doc.data() will be undefined in this case\r\n//   //          console.log(\"No such document!\");\r\n//   //      }\r\n//   //  }).catch((error) => {\r\n//   //      console.log(\"Error getting document:\", error);\r\n        \r\n//   //  });\r\n//     },[]);\r\n            \r\n    \r\n const ongetUrl= async(event) => {\r\n        \r\n        \r\n        // const listRef = ref(storageService, \"soty/\");\r\n\r\n        // Find all the prefixes and items.\r\n        storageService.ref().child(\"soty/\").listAll()\r\n        .then((res) => {\r\n            res.prefixes.forEach((folderRef) => {\r\n            // All the prefixes under listRef.\r\n            // You may call listAll() recursively on them.\r\n            });\r\n            res.items.forEach(async(itemRef) => {\r\n            // All the items under listRef.\r\n            let urls= await itemRef.getDownloadURL().then(function(url) {\r\n                return url;\r\n              }).catch(function(error) {\r\n                console.log(error)\r\n                // Handle any errors here\r\n              });\r\n              \r\n              setListst(prevState=>[...prevState,urls])\r\n              \r\n            \r\n            \r\n            });\r\n        }).catch((error) => {\r\n            console.log(error)\r\n            // Uh-oh, an error occurred!\r\n        });\r\n\r\n\r\n        // const res = await storageService.ref().child(\"soty/\").listAll()\r\n        \r\n        \r\n        //        res.items.forEach(async(itemref)=>{\r\n        //         list.push(await itemref.getDownloadURL())\r\n                \r\n        //     })\r\n        var set = new Set(listst);\r\n         console.log(set)\r\n         const arr = [...set]\r\n         console.log(arr) \r\n         setListst2(arr);\r\n         \r\n\r\n    }\r\n    const submitsoty =()=>{ \r\n        \r\n            console.log(listst2)\r\n            const pinDocRef= dbService.doc(`RefDB/soty`);\r\n            pinDocRef.update({\r\n            \r\n                refUrl:listst2})\r\n         \r\n    }\r\n    \r\n    const refreshAndSubmit =()=>{\r\n      if(randomOn){\r\n        time.current=croquisTime;}\r\n        let newPage=croquisPage;    \r\n        newPage.forEach((item) => {\r\n          if (item.list === submitField) {\r\n            item.page = pinID;\r\n          }\r\n          if (item.list === \"lastpage\") {\r\n            item.page = submitField;\r\n          }\r\n        });\r\n        console.log(croquisPage)\r\n        dbService.collection(\"usersetting\").doc(userObj.uid).update(\r\n            {\r\n              page:newPage,\r\n            }\r\n        );\r\n            \r\n            const data = canvasRef3.current.getSaveData();\r\n            const dataUrl=canvasRef3.current.getDataURL();\r\n            canvasRef3.current.clear();\r\n        \r\n            \r\n            dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:0,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:randomPinNum[pinID],\r\n               \r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            setCsubmit(\"\"); \r\n            if(randomOn){\r\n              \r\n              randomIndex()\r\n            }\r\n            //clearInterval(timeId.current);\r\n    }\r\n   \r\n\r\n   \r\n\r\n\r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n      if(repeatDraw==0&&repeat==true){\r\n          refreshAndSubmit();\r\n          setRepeatDraw(pre=>pre+1)\r\n          setblank(true)\r\n        }else if(repeatDraw==repeatNum&&repeat==true){\r\n          refreshAndSubmit();\r\n          setRepeatDraw(0)\r\n          setblank(false)\r\n          setPinID(pre=>pre+1)\r\n        }else{\r\n          refreshAndSubmit();\r\n        }\r\n        // refreshAndSubmit();\r\n     };\r\n     \r\n     \r\n\r\n\r\n     const onClearClick= () => {\r\n      const ok = window.confirm(\"wanna clear this?\")\r\n      if(ok){\r\n        canvasRef3.current.clear();\r\n          \r\n      }\r\n    };\r\n    const onUndoClick= () => {\r\n      canvasRef3.current.undo();\r\n  };\r\n   const onEraseClick= () => {\r\n      setBrushColor(\"erase\")\r\n      \r\n  };\r\n   const onBrushClick= () => {\r\n      setBrushColor(\"#444\")\r\n      \r\n  };\r\n  const onShadowClick= () => {\r\n    setBrushColor(\"shadow\")\r\n    \r\n};\r\n  const onPrePageClick= (event) => {\r\n    event.preventDefault();\r\n    if(pinID>0){\r\n      setPinID(pre=>pre-1)\r\n    }\r\n      \r\n      //setSotyIndex(pre=>pre-1);\r\n    \r\n  };\r\n   const onForPageClick= (event) => {\r\n    event.preventDefault();\r\n    if(pinID<randomPinNum.length-1){\r\n    setPinID(pre=>pre+1)\r\n  }\r\n    //setSotyIndex(pre=>pre+1);\r\n    \r\n  };\r\n   const savePage= (event) => {\r\n    event.preventDefault();\r\n    let newPage=croquisPage;    \r\n        newPage.forEach((item) => {\r\n          if (item.list === submitField) {\r\n            item.page = pinID;\r\n          }\r\n          if (item.list === \"lastpage\") {\r\n            item.page = submitField;\r\n          }\r\n        });\r\n        console.log(croquisPage)\r\n        dbService.collection(\"usersetting\").doc(userObj.uid).update(\r\n            {\r\n              page:newPage,\r\n            }\r\n        );\r\n    //setSotyIndex(pre=>pre+1);\r\n    \r\n  };\r\n  const onChangeTime = (event)=> {\r\n    const {\r\n        target:{value},\r\n    }=event;\r\n    setCroquisTime(value);\r\n    localStorage.setItem(2, value)\r\n  }\r\n\r\n  const clickRepeat= (event) => {\r\n    event.preventDefault();\r\n    \r\n    if(repeat==false){\r\n      localStorage.setItem(\"mangarepeat\", true)\r\n    }else{\r\n      localStorage.setItem(\"mangarepeat\", false)\r\n    }\r\n    setRepeat(pre=>!pre)\r\n    //setCroquisTime(0)\r\n }\r\n\r\n\r\n const onSubmitImage= async(event) => {\r\n        event.preventDefault();\r\n        handleFilesUploadOnFirebaseStorage(submitField,upFile);\r\n    //     const fileRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`);\r\n    //     const response = await fileRef.putString(imageString,\"data_url\");\r\n    //     const imageUrl =await response.ref.getDownloadURL();\r\n    //     setImageString(\"\");\r\n        setUpFile([])\r\n     }\r\n     const onFileChange= (event)=>{\r\n        const {\r\n            target:{files}\r\n        }= event;\r\n        const theFile = files[0];\r\n        setUpFile(files)\r\n        console.log(files)\r\n        // const reader= new FileReader();\r\n        // reader.onloadend = (finishedEvent)=>{\r\n        //     const {\r\n        //         currentTarget:{result},\r\n        //     }=finishedEvent;\r\n            \r\n        //     setImageString(result);\r\n        // }\r\n        // reader.readAsDataURL(theFile);\r\n     }\r\n    const handleFileUploadOnFirebaseStorage = async (bucketName, file) => {\r\n      // 1. If no file, return\r\n      if (file === \"\") return \"\";\r\n\r\n      // 2. Put the file into bucketName\r\n      try {\r\n      const uploadTask = await storageService.ref(`/${bucketName}/${file.name}`).put(file);\r\n   \r\n      \r\n      // 3. Get download URL and return it as \r\n      return uploadTask.ref.getDownloadURL().then((fileURL) => fileURL);\r\n    } catch (e) {\r\n      console.log(e) // 에러출력 or 에러의 경우 처리할 로직작성하자\r\n    }\r\n   };\r\n\r\n   const handleFilesUploadOnFirebaseStorage = async (bucketName, files) => {\r\n    // 1. If no file, return\r\n    if (files.length === 0) return [];\r\n\r\n    // 2. Create an array to store all download URLs\r\n    // let fileUrls = [];\r\n    \r\n    // 3. Loop over all the files.\r\n    // submitField.slice(0,-2)\r\n   \r\n    \r\n      \r\n        const pinDocRef= dbService.doc(`RefDB/manga`);\r\n        \r\n    for (var i = 0; i < files.length; i++) {\r\n      // 3A. Get a file to upload\r\n      const file = files[i];\r\n\r\n      // 3B. handleFileUploadOnFirebaseStorage function is in above section\r\n      const downloadFileResponse = await handleFileUploadOnFirebaseStorage(bucketName, file);\r\n      const url = downloadFileResponse;\r\nconst startIndex = url.indexOf(\"pot.com/o/\");\r\nconst endIndex = url.indexOf(\"&token=\");\r\nconst shortresult = url.slice(startIndex, endIndex);\r\n // output: \"pot.com/o/crou-2%2Ffc2blog_20200409061322266.jpg?alt=media\"\r\n\r\n      \r\n      pinDocRef.update({\r\n          [bucketName]:firebase.firestore.FieldValue.arrayUnion(shortresult)\r\n  });\r\n  console.log(\"complete : \",i+1,\"/\",files.length,\" \",downloadFileResponse)\r\n      \r\n      // 3C. Push the download url to URLs array\r\n      // fileUrls.push(downloadFileResponse);\r\n  }\r\n      \r\n      \r\n      \r\n  \r\n\r\n    // return fileUrls;\r\n};\r\n\r\n  return(\r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x,a,s\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        if (keyName == \"ctrl+z\") { onUndoClick(); }\r\n        if (keyName == \"c\") {\r\n          if (brushColor != \"erase\") { onEraseClick(); }\r\n          else if (brushColor == \"erase\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"a\") {\r\n          if(pinID>0){\r\n            setPinID(pre=>pre-1)\r\n          }\r\n        }\r\n        if (keyName == \"s\") {\r\n          if(pinID<randomPinNum.length-1){\r\n            setPinID(pre=>pre+1)\r\n          }\r\n        }\r\n      } }\r\n    ></Hotkeys>\r\n    <div>\r\n      {randomOn ?(<><div style={{\r\n          position: 'absolute',\r\n          left: '50%',\r\n          transform: 'translateX(-50%)',\r\n          width: '70px',\r\n          textAlign: 'center',\r\n\r\n          background: 'linear-gradient(to left,#FFC365 ' + (min * 60 + sec) * 100 / croquisTime + '%,#E8E8E8 ' + (min * 60 + sec) * 100 / croquisTime + '%)'\r\n        }}>\r\n          {min}: {sexagesimal(sec)}\r\n        </div></>):(<></>)}\r\n      \r\n\r\n        <div style={{ float: 'right' }}>\r\n\r\n          {/* <button onClick={ongetUrl}>geturls</button>\r\n    <button onClick={submitsoty}>submitsoty</button>\r\n     */}\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        <div>\r\n\r\n        <select  defaultValue={-1} onChange={selectChange} >\r\n          \r\n          {croquisList.map((e, key) => {\r\n              return <option selected={localStorage.getItem(\"mangdraw\") ? key === parseInt(localStorage.getItem(\"mangdraw\")) : key === 0} key={e.list} value={key}>{e.list}</option>;\r\n          })}\r\n      </select>\r\n          <label>pages:</label>\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            max={randomPinNum.length - 1}\r\n            style={{ width: \"40px\" }}\r\n            value={pinID}\r\n            onChange={e => {\r\n              setPinID(parseInt(e.target.value))\r\n              //setSotyIndex(e.target.value);\r\n              setPinreload(pinReload + 1);\r\n            } } />\r\n            <button onClick={onPrePageClick}>{\"<\"}</button>\r\n            <button onClick={onForPageClick}>{\">\"}</button>\r\n            <button onClick={e=>{setRandomOn(pre=>!pre);time.current=croquisTime}}>random {randomOn?(<>on</>):(<>off</>)}</button>\r\n            <button onClick={e=>{setExtendOn(pre=>!pre)}}>Extend</button>\r\n            <button onClick={e=>{setDrawingOn(pre=>!pre)}}>Drawing Only</button>\r\n            <button onClick={savePage}>save page</button>\r\n           \r\n            <button onClick={clickRepeat}>🔂{(repeat==true)&&(<>❤</>)}</button>\r\n          <button onClick={e=>{setblank(pre=>!pre)}}>👁️</button>\r\n         \r\n          <button onClick={e => {\r\n              setSocheNum(pre => !pre); \r\n              if(socheNum==false){\r\n                localStorage.setItem(\"mangasoche\", true)\r\n              }else{\r\n                localStorage.setItem(\"mangasoche\", false)\r\n              }\r\n            } }>soche</button>\r\n            <div style={{ float: 'right' }}>\r\n            {randomOn?(<>\r\n              \r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Time\" />\r\n              Set Time\r\n\r\n            </>):(<></>)}</div>\r\n       \r\n\r\n        </div>\r\n        \r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left', opacity: blank ? '0' : '1' }}>\r\n          {/* <iframe key={pinReload} src={\"https://www.youtube.com/embed/videoseries?list=\"+youtubeUrls[youtubeUrlIndex]+\"&cc_load_policy=1&cc_lang_pref=ko\"} height={450} width={450} frameBorder={0} scrolling=\"no\" ></iframe> */}\r\n            {isAndroid?(<>\r\n              <div style={{ width: '600px', height: '450px' }}>\r\n            <PinchZoomPan>\r\n              <img alt='Test Image' src={(randomPinNum[pinID] && randomPinNum[pinID].includes(\"pot.com/o/\")) ? randomPinNum[pinID].replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\") : \"\"} />\r\n            </PinchZoomPan>\r\n          </div>\r\n            </>):(<>\r\n              {drawingOn?(<><div style={{ width: '1px', height: '770px' }}><PinchZoomPan>\r\n              <img alt='Test Image' src={(randomPinNum[pinID] && randomPinNum[pinID].includes(\"pot.com/o/\")) ? randomPinNum[pinID].replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\") : \"\"} />\r\n\r\n            </PinchZoomPan></div></>):(<>\r\n            {extendOn?(<>\r\n            <div style={{ width: '850px', height: '770px' }}><PinchZoomPan>\r\n            <img alt='Test Image' src={(randomPinNum[pinID] && randomPinNum[pinID].includes(\"pot.com/o/\")) ? randomPinNum[pinID].replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\") : \"\"} />\r\n\r\n            </PinchZoomPan></div>\r\n              </>):(<>\r\n              <div style={{ width: '450px', height: '770px' }}><PinchZoomPan>\r\n              <img alt='Test Image' src={(randomPinNum[pinID] && randomPinNum[pinID].includes(\"pot.com/o/\")) ? randomPinNum[pinID].replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\") : \"\"} />\r\n\r\n            </PinchZoomPan></div>\r\n                </>)}\r\n                </>)}\r\n            \r\n          \r\n          </>)}\r\n\r\n        </div>\r\n\r\n        <div style={{ float: 'left' }}>\r\n          <div>\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n            {brushColor==\"erase\" ? (<>\r\n                <label>Erase Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Brush Size:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {isAndroid?(<><button style={{padding:\"15px\"}} onClick={onUndoClick}>◀</button></>):(<><button onClick={onUndoClick}>◀</button></>)}\r\n            </div>\r\n\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n\r\n            <div style={{ float: 'right' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>  \r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n\r\n              <button onClick={onSubmit}>Upload Drawing</button>\r\n            </div>\r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              imgSrc={(socheNum==true) ? Soche:\r\n                \"\" \r\n               }\r\n              enablePanAndZoom= {true}\r\n              canvasWidth={(drawingOn?(1000):(600))}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef3}\r\n              brushColor={brushColor} \r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]}/>\r\n          </div>\r\n        </div>\r\n        <button onClick={(e) => { setTimeSetBottonToggle(pre=>!pre); } }>\r\n              Up</button>\r\n        {timeSetBottonToggle&&(<> <form onSubmit={onSubmitImage}>\r\n          <input type={\"file\"} accept=\"image/*\" onChange={onFileChange} multiple/>\r\n          <input type={\"submit\"} value=\"Upload Croquis Images\"/>\r\n    </form></>)}\r\n\r\n\r\n      </div></>\r\n  )\r\n };","//import CCsubmit from \"../components/Csubmit\";\r\n//import { v4 as uuidv4 } from 'uuid';\r\nimport { dbService ,storageService} from \"fbase\";\r\nimport React, { useEffect, useRef, useState,useCallback } from \"react\";\r\nimport CanvasDraw from \"../canvasDrawIndex\";\r\nimport   firebase from \"firebase/compat/app\";\r\nimport Hotkeys from \"react-hot-keys\";\r\n\r\nexport default ({userObj,isAndroid,penType}) =>  {\r\n \r\n    const [Csubmit,setCsubmit]= useState(\"\");\r\n    const [Csubmits,setCsubmits]= useState([]);\r\n    const [Line,setLine]= useState([]);\r\n    const [croquisList,setCroquisList]= useState([]);\r\n    const [randomCroquisList,setRandomCroquisList]= useState([]);\r\n    const [savedRandomPinNum,setSavedRandomPinNum]=useState([\"\"]);\r\n    const [allstarRandom,setAllstarRandom]=useState(false);\r\n    const [submitField,setSubmitField]= useState(\"\");\r\n    const canvasRef = useRef();\r\n    const [pinNum,setPinNum]=useState(\"\");\r\n    const [randomPinNum,setRandomPinNum]=useState([\"\"]);\r\n    const [pinReload,setPinreload]=useState(0);\r\n    const [pinID,setPinID]=useState(0);\r\n    const [drawNum,setDrawNum]=useState(0);\r\n    const [canvasLocation,setCanvasLocation]=useState(true);\r\n    const [imgs,setImgs]=useState(\"\")\r\n    const [croquisTime,setCroquisTime]=useState(60);\r\n    const allowPointerType=[\"all\",\"mouse\",\"touch\",\"pen\"]\r\n    const [pointerTypeIndex,setPointerTypeIndex]=useState(3)\r\n    //allowpointertype으로 터치허용유무설정가능 일단 펜만 가능하게함. 나중에하는걸로\r\n        const [min,setMin]=useState(0);\r\n        const [sec,setSec]=useState(0);\r\n        const time=useRef(croquisTime);\r\n        const timeId=useRef(null);\r\n        const [drawSetting,setDrawSetting]=useState({\r\n            croquisTimeDB:60,\r\n            brushRadius:1,\r\n            lazyRadius:1,\r\n            eraseRadius:10,\r\n            \r\n\r\n\r\n        })\r\n    const [timeSetBottonToggle,setTimeSetBottonToggle]=useState(false);\r\n\r\n\r\n    const [brushColor,setBrushColor]=useState(\"#444\")\r\n    const [upFile,setUpFile]=useState([]);\r\n    const [refWidth,setRefWidth]=useState(400);\r\n\r\n\r\n    \r\n    function lowerImageTransparency(base64Image, callback) {\r\n      var img = new Image();\r\n      img.onload = function () {\r\n        var canvas = document.createElement(\"canvas\");\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n    \r\n        var ctx = canvas.getContext(\"2d\");\r\n        ctx.drawImage(img, 0, 0);\r\n    \r\n        var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        var data = imageData.data;\r\n    \r\n        for (var i = 0; i < data.length; i += 4) {\r\n          // Reduce the alpha (transparency) value by 50%\r\n          data[i + 3] = Math.floor(data[i + 3] * 0.2);\r\n        }\r\n    \r\n        ctx.putImageData(imageData, 0, 0);\r\n    \r\n        // Convert the modified image to base64 format\r\n        var modifiedBase64Image = canvas.toDataURL(\"image/png\");\r\n    \r\n        callback(modifiedBase64Image);\r\n      };\r\n      img.src = base64Image;\r\n    }\r\n\r\n    \r\n    const getMyCroquisSettings = ()=>{\r\n              dbService.doc(\"usersetting/\"+userObj.uid).get().then((doc) => {\r\n            if (doc.exists) {\r\n                setDrawSetting({\r\n                    brushRadius:doc.data().brushRadius,\r\n                    lazyRadius:doc.data().lazyRadius,\r\n                    eraseRadius:doc.data().eraseRadius,\r\n                    croquisTimeDB:doc.data().croquisTimeDB,\r\n                    })\r\n                    setCroquisTime(doc.data().croquisTimeDB)\r\n                console.log(doc.data())\r\n               // console.log(croquisTime)\r\n                time.current+=doc.data().croquisTimeDB-60;\r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"No such setting document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"Error getting document:\", error);\r\n             \r\n        });\r\n    }\r\n    const updateSetting =(event)=>{\r\n      // console.log(drawSetting.croquisTimeDB,typeof(drawSetting.croquisTimeDB))\r\n      // console.log(drawSetting.brushRadius,typeof(drawSetting.brushRadius))\r\n      // console.log(drawSetting.lazyRadius,typeof(drawSetting.lazyRadius))\r\n      // console.log(drawSetting.eraseRadius,typeof(drawSetting.eraseRadius))\r\n        dbService.collection(\"usersetting\").doc(userObj.uid).update({\r\n            brushRadius:drawSetting.brushRadius,\r\n            lazyRadius:drawSetting.lazyRadius,\r\n            croquisTimeDB:drawSetting.croquisTimeDB,\r\n            eraseRadius:drawSetting.eraseRadius,\r\n            \r\n        });\r\n    }\r\n    const refreshAndSubmit =()=>{\r\n        setPinreload(pinReload+1);\r\n        let _drawNum=0;\r\n        if(localStorage.getItem(\"drawNum\")==undefined){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n        }else{\r\n          _drawNum=localStorage.getItem(\"drawNum\")\r\n        }\r\n        localStorage.setItem(\"drawNum\", parseInt(_drawNum)+1)\r\n        setDrawNum(parseInt(_drawNum)+1)\r\n        localStorage.setItem(\"lastdrawtime\",parseInt(Date.now()))\r\n            setPinID(pinID+1);\r\n            //console.log(\"timeout\",randomPinNum[pinID])\r\n            \r\n            time.current=croquisTime;\r\n            \r\n            const data = canvasRef.current.getSaveData();\r\n            const dataUrl=canvasRef.current.getDataURL();\r\n\r\n\r\n            \r\n            canvasRef.current.clear();\r\n        \r\n            if(submitField==\"concept-2\"){\r\n              const storeDir= \"conceptRef\"\r\n              const newname= randomPinNum[pinID]\r\n              fetch(dataUrl)\r\n                  .then(response => response.blob())\r\n                  \r\n                  .then(blob => {\r\n                      // Create a new Blob object with the renamed file\r\n                      const renamedBlob = new Blob([blob], { type: blob.type, name: newname });\r\n                      console.log('File renamed',newname);\r\n                      \r\n                      // Get a reference to the new location in Firebase Storage\r\n                      const newFileRef = storageService.ref(storeDir+\"/\"+newname);\r\n          \r\n                      // Upload the renamed file\r\n                      newFileRef.put(renamedBlob)\r\n                      .then(() => {\r\n                          console.log('File reuploaded !',storeDir,\"/\",newname);\r\n                          \r\n                      })\r\n                      \r\n                      .then(()=>{\r\n                        const pinDocRef= dbService.doc(`concept/ref`);\r\n         \r\n          \r\n                        //console.log(e)\r\n                      \r\n\r\n                          \r\n                          newFileRef.getDownloadURL().then(url => {\r\n                            const startIndex = url.indexOf(\"pot.com/o/\") ; //start index of the desired string\r\n                            // const startIndex = url.indexOf(\"test%2F\") + 6; //start index of the desired string\r\n                            const endIndex = url.indexOf(\"?alt=\");\r\n                          //  //https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.\r\n                          //  com/o/conceptRef%2F744642119658841551?alt\r\n                          //  =media\r\n                              const shorturl = url.substring(startIndex, endIndex+4);\r\n\r\n                              pinDocRef.update({\r\n                                [submitField]:firebase.firestore.FieldValue.arrayUnion(newname+shorturl)\r\n                        }); \r\n                            //   for (var j =1; j< words.length-1;j++){\r\n                                      \r\n                            //   pinDocRef.update({\r\n                            //       [words[j]]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])});\r\n                            //       console.log(\"field deleted and updated in \",words[j],\", \")\r\n                                 \r\n                            //   pinDocRef.update({\r\n                            //     [words[j]]:firebase.firestore.FieldValue.arrayUnion(shorturl) });\r\n                            // }\r\n                          })  \r\n                        \r\n                      });\r\n                  })\r\n                \r\n\r\n\r\n\r\n\r\n              \r\n              \r\n             \r\n            }\r\n\r\n\r\n            dbService.collection(\"Csubmit\").add({\r\n                text:data,\r\n                createdAt: Date.now(),\r\n                creatorId: userObj.uid,\r\n                drawingTime:croquisTime-min*60-sec,\r\n                heart:(0),\r\n                dataUrl:dataUrl,\r\n                refPinUrl:randomPinNum[pinID]\r\n               //  refPhoto:{refPhoto},\r\n                //pinNumber:randomPinNum,\r\n            });\r\n            \r\n            setCsubmit(\"\"); \r\n\r\n            //clearInterval(timeId.current);\r\n    }\r\n    useEffect(()=> {\r\n      if(localStorage.getItem(\"drawNum\")==undefined){\r\n        localStorage.setItem(\"drawNum\", parseInt(0))\r\n        setDrawNum(parseInt(0))\r\n      }else{\r\n        setDrawNum(parseInt(localStorage.getItem(\"drawNum\")))\r\n      }\r\n      if(!(localStorage.getItem(\"lastdrawtime\")==undefined)){\r\n        if(parseInt(Date.now())-parseInt(localStorage.getItem(\"lastdrawtime\"))>21600000){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n          setDrawNum(parseInt(0))\r\n        }\r\n      }\r\n     \r\n      getMyCroquisSettings();\r\n      setPointerTypeIndex(parseInt(localStorage.getItem(\"penType\")));\r\n     \r\n        timeId.current= setInterval(()=>{\r\n            setMin(parseInt(time.current/60));\r\n            setSec(time.current % 60);\r\n            time.current -= 1;\r\n        },1000);\r\n        return()=> clearInterval(timeId.current);\r\n    },[]);\r\n\r\n    useEffect(()=> {\r\n        if(time.current<=-1){\r\n            refreshAndSubmit();\r\n            \r\n            \r\n        }\r\n    },[sec]);\r\n\r\n    useEffect(()=> {\r\n      \r\n      let array = []         \r\n     \r\n       ///ref1불러오기\r\n             dbService.doc(`RefDB/refStrings`).get().then((doc) => {\r\n            if (doc.exists) {\r\n                //console.log(\"Document data:\", doc.data().refUrl);\r\n                //setRandomPinNum(doc.data().refUrl);\r\n                //console.log(\"doc\",doc.data().refUrl)\r\n                // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n                // console.log(typeof(doc.data().refUrl))\r\n                // setRandomPinNum(random);\r\n                \r\n                let data = doc.data();\r\n                Object.keys(data).forEach((name) => {\r\n                  console.log(name);\r\n                  array.push({\"list\":name,\"url\":data[name]});\r\n                });\r\n                \r\n              \r\n                //console.log(array)\r\n                \r\n              \r\n                \r\n                \r\n               \r\n                \r\n                \r\n            } else {\r\n                // doc.data() will be undefined in this case\r\n                console.log(\"ref1 No such document!\");\r\n            }\r\n        }).catch((error) => {\r\n            console.log(\"ref1 Error getting document:\", error);\r\n             \r\n        }).then(e=>{\r\n///ref2불러오기          \r\ndbService.doc(`RefDB/refStrings2`).get().then((doc) => {\r\n  if (doc.exists) {\r\n      //console.log(\"Document data:\", doc.data().refUrl);\r\n      //setRandomPinNum(doc.data().refUrl);\r\n      //console.log(\"doc\",doc.data().refUrl)\r\n      // const random=doc.data().refUrl.sort(() => Math.random() - 0.5);\r\n      // console.log(typeof(doc.data().refUrl))\r\n      // setRandomPinNum(random);\r\n      \r\n      let data2 = doc.data();\r\n      Object.keys(data2).forEach((name) => {\r\n        console.log(name);\r\n        array.push({\"list\":name+\"-2\",\"url\":data2[name]});\r\n      });\r\n      \r\n    \r\n      //console.log(array)\r\n      \r\n      \r\n      array.sort(function(a,b) {\r\n        return a.list.localeCompare(b.list);\r\n    });\r\n    \r\n   \r\n      \r\n    \r\n      setCroquisList(array)\r\n      const new_array = shuffleArray(array.flatMap(obj => obj.url));\r\n      //const new_array = shuffleArray(array.map(obj => obj.url));\r\n    setRandomCroquisList(new_array)\r\n      // console.log(\"하하\",new_array)\r\n      if(localStorage.getItem(\"specdraw2\")==undefined){\r\n        //const random=Object.values(array[0].url).sort(() => Math.random() - 0.5);\r\n        const random=shuffleArray(Object.values(array[0].url))\r\n        console.log(\"값은바로\",array[0].list)\r\n      setSubmitField(array[0].list)\r\n      setRandomPinNum(random);\r\n      setSavedRandomPinNum(random)  \r\n      }else{\r\n      // const random=Object.values(array[parseInt(localStorage.getItem(\"specdraw2\"))].url).sort(() => Math.random() - 0.5);\r\n      const random=shuffleArray(Object.values(array[parseInt(localStorage.getItem(\"specdraw2\"))].url))\r\n      console.log(\"값은바로\",array[parseInt(localStorage.getItem(\"specdraw2\"))].list)\r\n      setSubmitField(array[parseInt(localStorage.getItem(\"specdraw2\"))].list)\r\n      setRandomPinNum(random);\r\n      setSavedRandomPinNum(random)   \r\n      }\r\n      \r\n  } else {\r\n      // doc.data() will be undefined in this case\r\n      console.log(\"ref2 No such document!\");\r\n  }\r\n}).catch((error) => {\r\n  console.log(\"ref2  Error getting document:\", error);\r\n   \r\n});\r\n\r\n        });\r\n//정리\r\n            \r\n\r\n\r\n       \r\n        // dbService.collection(\"Csubmit\").onSnapshot((snapshot) =>{\r\n        //     const CsubmitArray = snapshot.docs.map((doc)=>({\r\n        //         id: doc.id,\r\n        //         ...doc.data(),\r\n        //     }));\r\n            \r\n        //     setCsubmits(CsubmitArray);\r\n        //     //console.log(Csubmits);\r\n        // });\r\n\r\n        \r\n        \r\n\r\n    },[]);\r\n    function shuffleArray(array) {\r\n      for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [array[i], array[j]] = [array[j], array[i]];\r\n      }\r\n      return array;\r\n    }\r\n\r\n    \r\n     const onSubmit= (event) => {\r\n         event.preventDefault();\r\n        //  const data = canvasRef.current.getSaveData();\r\n        //  canvasRef.current.clear();\r\n     \r\n         \r\n        //  await dbService.collection(\"Csubmit\").add({\r\n        //      text:data,\r\n        //      createdAt: Date.now(),\r\n        //      creatorId: userObj.uid,\r\n        //      heart:(0),\r\n        //     //  refPhoto:{refPhoto},\r\n        //      //pinNumber:randomPinNum,\r\n        //  });\r\n        //  setCsubmit(\"\"); \r\n        refreshAndSubmit();\r\n        setImgs(\"\")\r\n     };\r\n     const onSubmitPinNum= (event) => {\r\n        event.preventDefault();\r\n        if(submitField.includes(\"-2\")){\r\n          if(pinNum.match(\",\")){\r\n            \r\n            const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n         \r\n            pinNum.split(\",\").forEach(e => {\r\n                //console.log(e)\r\n                pinDocRef.update({\r\n                    [submitField.slice(0,-2)]:firebase.firestore.FieldValue.arrayUnion(e)\r\n            }); \r\n            \r\n        });\r\n        }else if(pinNum.length>1){\r\n            const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n            pinDocRef.update({\r\n                [submitField.slice(0,-2)]:firebase.firestore.FieldValue.arrayUnion(pinNum)\r\n        });\r\n        }\r\n\r\n\r\n        }\r\n        else{\r\n        if(pinNum.match(\",\")){\r\n            \r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n         \r\n            pinNum.split(\",\").forEach(e => {\r\n                //console.log(e)\r\n                pinDocRef.update({\r\n                    [submitField]:firebase.firestore.FieldValue.arrayUnion(e)\r\n            }); \r\n            \r\n        });\r\n        }else if(pinNum.length>1){\r\n            const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n            pinDocRef.update({\r\n                [submitField]:firebase.firestore.FieldValue.arrayUnion(pinNum)\r\n        });\r\n        }\r\n      }\r\n\r\n        \r\n           \r\n        setPinNum(\"\")\r\n\r\n     }\r\n     const onChange = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setPinNum(value);\r\n     }\r\n     const onChangeTime = (event)=> {\r\n         const {\r\n             target:{value},\r\n         }=event;\r\n         setCroquisTime(value);\r\n         setDrawSetting(prevState=>({...prevState, croquisTimeDB: event.target.value }))\r\n         \r\n     }\r\n \r\n     const onSubmitTime= (event) => {\r\n        event.preventDefault();\r\n        setTimeSetBottonToggle(false)\r\n        console.log(\"현재값은\",submitField)\r\n        \r\n        //setCroquisTime(0)\r\n     }\r\n     const noRefreshAndSubmit =()=>{\r\n        \r\n      //console.log(\"timeout\",randomPinNum[pinID])\r\n      let _drawNum=0;\r\n        if(localStorage.getItem(\"drawNum\")==undefined){\r\n          localStorage.setItem(\"drawNum\", parseInt(0))\r\n        }else{\r\n          _drawNum=localStorage.getItem(\"drawNum\")\r\n        }\r\n        localStorage.setItem(\"drawNum\", parseInt(_drawNum)+1)\r\n        setDrawNum(parseInt(_drawNum)+1)\r\n        localStorage.setItem(\"lastdrawtime\",parseInt(Date.now()))\r\n      time.current=croquisTime;\r\n      \r\n      const data = canvasRef.current.getSaveData();\r\n      const dataUrl=canvasRef.current.getDataURL();\r\n      canvasRef.current.clear();\r\n  \r\n      \r\n      dbService.collection(\"Csubmit\").add({\r\n          text:data,\r\n          createdAt: Date.now(),\r\n          creatorId: userObj.uid,\r\n          drawingTime:croquisTime-min*60-sec,\r\n          heart:(0),\r\n          dataUrl:dataUrl,\r\n          refPinUrl:randomPinNum[pinID]\r\n         //  refPhoto:{refPhoto},\r\n          //pinNumber:randomPinNum,\r\n      });\r\n      \r\n      setCsubmit(\"\"); \r\n\r\n      //clearInterval(timeId.current);\r\n}\r\n     const onSubmitOnlyCanvas= (event) => {\r\n      event.preventDefault();\r\n  \r\n     noRefreshAndSubmit();\r\n     setImgs(\"\")\r\n  };\r\n     const onSubmitOnlyCanvasAndRedraw= (event) => {\r\n      event.preventDefault();\r\n      const dataUrls=canvasRef.current.getDataURL();\r\n      lowerImageTransparency(dataUrls, function (modifiedBase64Image) {\r\n        setImgs(modifiedBase64Image)\r\n      });\r\n     \r\n      \r\n     noRefreshAndSubmit();\r\n     canvasRef.current.clear();\r\n  };\r\n     const onNextClick= (event) => {\r\n      event.preventDefault();\r\n  \r\n      setPinreload(pinReload+1);\r\n            \r\n      setPinID(pinID+1);\r\n      \r\n      time.current=croquisTime;\r\n  };\r\n\r\n     const onDeletePinClick= () => {\r\n      if(submitField.includes(\"-2\")){\r\n        const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n        pinDocRef.update({\r\n            [submitField.slice(0,-2)]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])\r\n    });\r\n      }else{\r\n      const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n      pinDocRef.update({\r\n          [submitField]:firebase.firestore.FieldValue.arrayRemove(randomPinNum[pinID])\r\n  });\r\n}\r\n  setPinreload(pinReload+1);\r\n            \r\n            setPinID(pinID+1);\r\n    };\r\n \r\n     const onClearClick= () => {\r\n      const ok = window.confirm(\"wanna clear this?\")\r\n      if(ok){\r\n        canvasRef.current.clear();\r\n          setImgs(\"\")\r\n      }\r\n    };\r\n     const onUndoClick= () => {\r\n        canvasRef.current.undo();\r\n    };\r\n     const onEraseClick= () => {\r\n        setBrushColor(\"erase\")\r\n        \r\n    };\r\n     const onBrushClick= () => {\r\n        setBrushColor(\"#444\")\r\n       \r\n    };\r\n    const onShadowClick= () => {\r\n      setBrushColor(\"shadow\")\r\n      \r\n  };\r\n\r\n    function ordinal_suffix_of(i) {\r\n        var j = i % 10,\r\n            k = i % 100;\r\n        if (j == 1 && k != 11) {\r\n            return i + \"st\";\r\n        }\r\n        if (j == 2 && k != 12) {\r\n            return i + \"nd\";\r\n        }\r\n        if (j == 3 && k != 13) {\r\n            return i + \"rd\";\r\n        }\r\n        return i + \"th\";\r\n    }\r\n    function sexagesimal(i) {\r\n        if(i <= 9){\r\n            return \"0\"+i;\r\n        }else{\r\n            return i;\r\n        }\r\n    }\r\n\r\n    const selectChange = (e) => {\r\n\t\t// event handler\r\n\t\t// console.log(e.target.value);\r\n\t\t// console.log(croquisList[e.target.value].list);\r\n\t\tsetSubmitField(croquisList[e.target.value].list)\r\n    \r\n    localStorage.setItem(\"specdraw2\", parseInt(e.target.value))\r\n\t\t// console.log(typeof(Object.values(croquisList[e.target.value].url)));\r\n     \r\n        //const random=Object.values(croquisList[e.target.value].url).sort(() => Math.random() - 0.5);\r\n        const random=shuffleArray(Object.values(croquisList[e.target.value].url))\r\n                setRandomPinNum(random);\r\n                setSavedRandomPinNum(random)\r\n\t};\r\n    //  const onChange = (event)=> {\r\n    //      const {\r\n    //          target:{value},\r\n    //      }=event;\r\n    //      setCsubmit(value);\r\n    //  }\r\n    const onAllStarRandom = (event) => {\r\n      if(allstarRandom==false){\r\n        setRandomPinNum(randomCroquisList)\r\n        console.log(\"rand on\",randomCroquisList.length)\r\n        setAllstarRandom(true)\r\n      }else{\r\n        setRandomPinNum(savedRandomPinNum)\r\n        console.log(\"rand off\",savedRandomPinNum.length)\r\n        setAllstarRandom(false)\r\n      }\r\n    }\r\n    const onSetRandom = (event) => {\r\n      const random=shuffleArray(randomPinNum)\r\n      setRandomPinNum(random);\r\n    }\r\n\r\n     const onSubmitImage= async(event) => {\r\n        event.preventDefault();\r\n        handleFilesUploadOnFirebaseStorage(submitField,upFile);\r\n    //     const fileRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`);\r\n    //     const response = await fileRef.putString(imageString,\"data_url\");\r\n    //     const imageUrl =await response.ref.getDownloadURL();\r\n    //     setImageString(\"\");\r\n        setUpFile([])\r\n     }\r\n     const onFileChange= (event)=>{\r\n        const {\r\n            target:{files}\r\n        }= event;\r\n        const theFile = files[0];\r\n        setUpFile(files)\r\n        console.log(files)\r\n        // const reader= new FileReader();\r\n        // reader.onloadend = (finishedEvent)=>{\r\n        //     const {\r\n        //         currentTarget:{result},\r\n        //     }=finishedEvent;\r\n            \r\n        //     setImageString(result);\r\n        // }\r\n        // reader.readAsDataURL(theFile);\r\n     }\r\n    const handleFileUploadOnFirebaseStorage = async (bucketName, file) => {\r\n      // 1. If no file, return\r\n      if (file === \"\") return \"\";\r\n\r\n      // 2. Put the file into bucketName\r\n      try {\r\n      const uploadTask = await storageService.ref(`/${bucketName}/${file.name}`).put(file);\r\n   \r\n      \r\n      // 3. Get download URL and return it as \r\n      return uploadTask.ref.getDownloadURL().then((fileURL) => fileURL);\r\n    } catch (e) {\r\n      console.log(e) // 에러출력 or 에러의 경우 처리할 로직작성하자\r\n    }\r\n   };\r\n\r\n   const handleFilesUploadOnFirebaseStorage = async (bucketName, files) => {\r\n    // 1. If no file, return\r\n    if (files.length === 0) return [];\r\n\r\n    // 2. Create an array to store all download URLs\r\n    // let fileUrls = [];\r\n    \r\n    // 3. Loop over all the files.\r\n    // submitField.slice(0,-2)\r\n   \r\n    if(bucketName.includes(\"-2\")){ \r\n      const pinDocRef= dbService.doc(`RefDB/refStrings2`);\r\n      \r\n      for (var i = 0; i < files.length; i++) {\r\n        // 3A. Get a file to upload\r\n        const file = files[i];\r\n\r\n        // 3B. handleFileUploadOnFirebaseStorage function is in above section\r\n        const downloadFileResponse = await handleFileUploadOnFirebaseStorage(bucketName, file);\r\n        \r\n        const url = downloadFileResponse;\r\n        const startIndex = url.indexOf(\"pot.com/o/\");\r\n        const endIndex = url.indexOf(\"&token=\");\r\n        const shortresult = url.slice(startIndex, endIndex);\r\n        pinDocRef.update({\r\n            [bucketName.slice(0,-2)]:firebase.firestore.FieldValue.arrayUnion(shortresult)\r\n    });\r\n    console.log(\"complete : \",i+1,\"/\",files.length,\" \",downloadFileResponse)\r\n        \r\n        // 3C. Push the download url to URLs array\r\n        // fileUrls.push(downloadFileResponse);\r\n    }\r\n    \r\n    }\r\n      else{\r\n        const pinDocRef= dbService.doc(`RefDB/refStrings`);\r\n        \r\n    for (var i = 0; i < files.length; i++) {\r\n      // 3A. Get a file to upload\r\n      const file = files[i];\r\n\r\n      // 3B. handleFileUploadOnFirebaseStorage function is in above section\r\n      const downloadFileResponse = await handleFileUploadOnFirebaseStorage(bucketName, file);\r\n      const url = downloadFileResponse;\r\nconst startIndex = url.indexOf(\"pot.com/o/\");\r\nconst endIndex = url.indexOf(\"&token=\");\r\nconst shortresult = url.slice(startIndex, endIndex);\r\n // output: \"pot.com/o/crou-2%2Ffc2blog_20200409061322266.jpg?alt=media\"\r\n\r\n      \r\n      pinDocRef.update({\r\n          [bucketName]:firebase.firestore.FieldValue.arrayUnion(shortresult)\r\n  });\r\n  console.log(\"complete : \",i+1,\"/\",files.length,\" \",downloadFileResponse)\r\n      \r\n      // 3C. Push the download url to URLs array\r\n      // fileUrls.push(downloadFileResponse);\r\n  }\r\n      \r\n      \r\n      }\r\n  \r\n\r\n    // return fileUrls;\r\n};\r\n\r\n  return(\r\n    <><Hotkeys\r\n      keyName=\"ctrl+z,c,x\"\r\n      onKeyDown={(keyName, e, handle) => {\r\n        //console.log(\"test:onKeyDown\", keyName);\r\n        if (keyName == \"ctrl+z\") { onUndoClick(); }\r\n        if (keyName == \"c\") {\r\n          if (brushColor != \"erase\") { onEraseClick(); }\r\n          else if (brushColor == \"erase\") { onBrushClick(); }\r\n        }\r\n        if (keyName == \"x\") {\r\n          if (brushColor != \"shadow\") { onShadowClick(); }\r\n          else if (brushColor == \"shadow\") { onBrushClick(); }\r\n        }\r\n      } }\r\n    ></Hotkeys>\r\n    <div>\r\n        {/* <PieChart style={{ height: '35px' }}\r\n    data={[{ value: 1, key: 1, color: '#E38627' }]}\r\n    startAngle={-90}\r\n    reveal={-100*(min*60+sec)/croquisTime}\r\n    lineWidth={100}\r\n    // background=\"#f3f3f3\"\r\n    lengthAngle={360}\r\n    /> */}\r\n        {/* <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(pinID + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Croquis Time</button>\r\n\r\n          </>)}\r\n          <button onClick={updateSetting}>Update Setting</button> */}\r\n          {isAndroid?(<>\r\n            <div style={{ float: 'right' }}>\r\n            <button onClick={onAllStarRandom}>{allstarRandom?\"off\":\"ran\"}</button>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            \r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(drawNum + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          {timeSetBottonToggle&&(<><button onClick={updateSetting}>Setting</button></>)}\r\n          </div>\r\n          </>):(<><div style={{width: \"1000px\"}}>\r\n          <div style={{ float: 'right' }}>\r\n          {timeSetBottonToggle ? (<>\r\n            <form onSubmit={onSubmitTime}>\r\n              <input value={croquisTime} onChange={onChangeTime} type={\"number\"} placeholder=\"Input Croquis Time\" />\r\n              <input type={\"submit\"} value=\"Set Time\" />\r\n\r\n            </form>\r\n            <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button>\r\n          </>) : (<>\r\n            {ordinal_suffix_of(drawNum + 1)}\r\n            <button onClick={(e) => { setTimeSetBottonToggle(true); } }>\r\n              Set Time</button>\r\n\r\n          </>)}\r\n          {timeSetBottonToggle&&(<><button onClick={updateSetting}>Setting</button></>)}\r\n          \r\n          </div>\r\n          </div></>)}\r\n          \r\n          \r\n          \r\n          {/* <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.pinHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, pinHeight: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasWidth}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasWidth: e.target.value }))\r\n          }\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"0\"\r\n          max=\"1000\"\r\n          style={{ width: \"50px\" }}\r\n          value={drawSetting.canvasHeight}\r\n          onChange={e =>\r\n            setDrawSetting(prevState=>({...prevState, canvasHeight: e.target.value }))\r\n          }\r\n        /> */}\r\n\r\n\r\n       \r\n\r\n\r\n        {isAndroid?(<><div>\r\n          <select  defaultValue={-1} onChange={selectChange} >\r\n          \r\n    {/* {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}>{e.list}</option>;\r\n    })} */}\r\n    {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}  selected={localStorage.getItem(\"specdraw2\") ? key === parseInt(localStorage.getItem(\"specdraw2\")) : key === 0}>{e.list}</option>;\r\n    })}\r\n</select>\r\n</div>\r\n          <div style={{ float: 'left' }}>\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].startsWith(\"pot.com/o/\"))?(<>\r\n            <img key={pinReload} src={randomPinNum[pinID].replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")}   height={450} frameBorder={0} scrolling=\"no\"></img>\r\n            \r\n            </>):(<>\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?\r\n          (<>\r\n          <img key={pinReload} src={randomPinNum[pinID]}   height={450} frameBorder={0} scrolling=\"no\"></img>\r\n          </>):(<>\r\n            <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)}</>)}\r\n          {/* <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={450} width={300} frameBorder={0}  ></iframe> */}\r\n          </div>\r\n        \r\n        \r\n        </>):(<>\r\n\r\n\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear Canvas</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvas}>Up&Re</button>\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvasAndRedraw}>Review</button>\r\n            </div>\r\n\r\n        <div style={{ float: 'right' }}>\r\n        <button onClick={onSubmit}>Upload</button>\r\n              \r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onNextClick}>Next</button>\r\n            </div>\r\n            <div style={{ float: 'left' }}>\r\n          <button  onClick={e=>{if(refWidth==400){setRefWidth(600)}else if(refWidth==600){setRefWidth(400)}}}>ex</button>\r\n          <button onClick={onAllStarRandom}>{allstarRandom?\"off\":\"ran\"}</button>\r\n          </div>\r\n        <div style={{\r\n          position: 'absolute',\r\n          left: '30%',\r\n          transform: 'translateX(-50%)',\r\n          width: '70px',\r\n          textAlign: 'center',\r\n\r\n          background: 'linear-gradient(to left,#FFC365 ' + (min * 60 + sec) * 100 / croquisTime + '%,#E8E8E8 ' + (min * 60 + sec) * 100 / croquisTime + '%)'\r\n        }}>\r\n          {min}: {sexagesimal(sec)}\r\n        </div>\r\n\r\n\r\n\r\n\r\n        <div>\r\n          <form  onSubmit={onSubmitPinNum}>\r\n          <select  defaultValue={2}  onChange={selectChange} >\r\n          \r\n    {croquisList.map((e, key) => {\r\n        return <option key={e.list} value={key}  selected={localStorage.getItem(\"specdraw2\") ? key === parseInt(localStorage.getItem(\"specdraw2\")) : key === 0}>{e.list}</option>;\r\n    })}\r\n</select>\r\n            <input value={pinNum} onChange={onChange} type={\"text\"} placeholder=\"You Can Upload Pinterst Pin By Url Number\" />\r\n            <input type={\"submit\"} value=\"Upload Pin\" />\r\n            \r\n          </form>\r\n          \r\n          {/* <button onClick={onDeletePinClick}>Delete Pin</button>\r\n            <button onClick={e=>{if(pointerTypeIndex==0){\r\n              setPointerTypeIndex(3);\r\n              \r\n              localStorage.setItem(\"penType\", parseInt(3))\r\n              }else if(pointerTypeIndex==3){\r\n                setPointerTypeIndex(0);\r\n                \r\n                  localStorage.setItem(\"penType\", parseInt(0))\r\n                  }}}>{allowPointerType[pointerTypeIndex]}</button> */}\r\n          \r\n         \r\n\r\n        </div>\r\n        \r\n\r\n        {/* <div>https://assets.pinterest.com/ext/embed.html?id={randomPinNum[pinID]}    {pinID}</div> */}\r\n        <div style={{ float: 'left' }}>\r\n        {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].startsWith(\"pot.com/o/\"))?(<>\r\n            <img key={pinReload} src={randomPinNum[pinID].replace(\"pot.com/o/\", \"https://firebasestorage.googleapis.com/v0/b/croquistool.appspot.com/o/\")}   width={refWidth} frameBorder={0} scrolling=\"no\"></img>\r\n            \r\n            </>):(<>\r\n          {(typeof(randomPinNum[pinID])==\"string\")&&(randomPinNum[pinID].includes(\"firebasestorage.googleapis.com\"))?\r\n          (<>\r\n          <img key={pinReload} src={randomPinNum[pinID]}  width={refWidth} frameBorder={0} scrolling=\"no\"></img>\r\n          </>):(<>\r\n            <iframe key={pinReload} src={\"https://assets.pinterest.com/ext/embed.html?id=\" + randomPinNum[pinID]} height={refWidth+370} width={refWidth} frameBorder={0} scrolling=\"no\"></iframe>\r\n          </>)}</>)}\r\n        \r\n          \r\n        </div>\r\n\r\n</>)}\r\n\r\n\r\n\r\n\r\n\r\n        <div style={{float: 'left' }}>\r\n          <div>\r\n\r\n\r\n\r\n          {isAndroid?(<><div style={{ float: 'right' }}>\r\n              <button onClick={onClearClick}>Clear</button>\r\n        </div>\r\n        <div style={{ float: 'right' }}>\r\n              <button onClick={onSubmitOnlyCanvas}>UpRe</button>\r\n              <button onClick={onSubmitOnlyCanvasAndRedraw}>Rev</button>\r\n            </div>\r\n            {/* <div style={{ float: 'right' }}>\r\n              \r\n            </div> */}\r\n\r\n            <div style={{ float: 'right' }}>\r\n        <button onClick={onSubmit}>Up</button>\r\n              \r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              <button onClick={onNextClick}>Next</button>\r\n            </div>\r\n\r\n            \r\n\r\n          <div style={{ float: 'right' }}>\r\n          {min}: {sexagesimal(sec)}\r\n          </div>\r\n            </>):(<></>)}\r\n\r\n\r\n\r\n\r\n            <div style={{ float: 'right' }}>\r\n              <label>Lazy:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.lazyRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, lazyRadius: e.target.value }))} />\r\n            </div>\r\n            <div style={{ float: 'right' }}>\r\n              {brushColor==\"erase\" ? (<>\r\n                <label>Er:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.eraseRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, eraseRadius: e.target.value }))} />\r\n\r\n              </>):(<>\r\n                <label>Br:</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                style={{ width: \"30px\" }}\r\n                value={drawSetting.brushRadius}\r\n                onChange={e => setDrawSetting(prevState => ({ ...prevState, brushRadius: e.target.value }))} />\r\n              \r\n              </>)}\r\n              \r\n\r\n\r\n            </div>\r\n            \r\n            <div style={{ float: 'left' }}>\r\n              {isAndroid?(<><button style={{paddingLeft:\"15px\"}} onClick={onUndoClick}>◀</button></>):(<><button onClick={onUndoClick}>◀</button></>)}\r\n            </div>\r\n\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"erase\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onEraseClick}>erase</button></>)}\r\n\r\n\r\n            </div>\r\n            <div style={{ float: 'left' }}>\r\n              {(brushColor == \"shadow\") ? (\r\n                <><button onClick={onBrushClick}>brush</button></>\r\n              ) : (<><button onClick={onShadowClick}>shadow</button></>)}\r\n\r\n            {brushColor}\r\n            </div>\r\n\r\n            \r\n\r\n\r\n          </div>\r\n          <div style={{ float: 'right' }}>\r\n            <CanvasDraw\r\n              canvasWidth={600}\r\n              canvasHeight={600}\r\n              brushRadius={(brushColor==\"erase\") ? drawSetting.eraseRadius : drawSetting.brushRadius}\r\n              lazyRadius={drawSetting.lazyRadius}\r\n              ref={canvasRef}\r\n              brushColor={brushColor}\r\n              imgSrc={imgs}\r\n              allowOnlyPointerType={allowPointerType[pointerTypeIndex]} />\r\n          </div>\r\n        </div>\r\n        \r\n          {timeSetBottonToggle&&(<><button onClick={onSetRandom}>random!</button></>)}\r\n                {timeSetBottonToggle&&(<> <form onSubmit={onSubmitImage}>\r\n          <input type={\"file\"} accept=\"image/*\" onChange={onFileChange} multiple/>\r\n          <input type={\"submit\"} value=\"Upload Croquis Images\"/>\r\n    </form></>)}\r\n       \r\n\r\n   \r\n\r\n\r\n\r\n        {/* <div>\r\n        {Csubmits.map((Csubmit)=>(\r\n            <CCsubmit key={Csubmit.id} CsubmitObj={Csubmit} isOwner={Csubmit.creatorId=== userObj.uid} />\r\n        ))}\r\n    </div> */}\r\n      </div></>\r\n  )\r\n \r\n };\r\n ","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport Profile from \"routes/Profile\";\r\nimport Auth from \"../routes/Auth\";\r\nimport Home from \"../routes/Home\";\r\nimport Navigation from \"./Navigation\";\r\nimport DoProko from \"routes/DoProko\";\r\nimport DoSoty from \"routes/DoSoty\";\r\nimport DoSakuga from \"routes/DoSakuga\";\r\nimport Special from \"routes/Special\";\r\nimport Specialcopy from \"routes/Specialcopy\";\r\nimport Adorka from \"routes/Adorka\";\r\nimport LineOfAction from \"routes/LineOfAction\";\r\nimport Twitter from \"routes/twitter\";\r\nimport ChaDesign from \"routes/ChaDesign\";\r\nimport ChaDesignDraw from \"routes/ChaDrawing\";\r\nimport D360 from \"routes/360\";\r\nimport Manga from \"routes/DoManga\";\r\nimport DoManga from \"routes/DoManga\";\r\nimport Special2 from \"routes/Special2\";\r\n\r\nconst AppRouter=({isLoggedIn,userObj,isAndroid}) => {\r\n    \r\n    return (\r\n        <Router>\r\n            {isLoggedIn &&<Navigation isAndroid={isAndroid}/>}\r\n            <Switch>\r\n                \r\n                {isLoggedIn ?(\r\n                    <>\r\n                        <Route exact path= \"/\">\r\n                            <Home userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/profile\">\r\n                            <Profile userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/doProko\">\r\n                            <DoProko userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/doSoty\">\r\n                            <DoSoty userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/doManga\">\r\n                            <DoManga userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/doSakugaBooru\">\r\n                            <DoSakuga userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/special\">\r\n                            <Special userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/special2\">\r\n                            <Special2 userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/specialcopy\">\r\n                            <Specialcopy userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/adorka\">\r\n                            <Adorka userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/lineofaction\">\r\n                            <LineOfAction userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/twitter\">\r\n                            <Twitter userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/chadesign\">\r\n                            <ChaDesign userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/chadesigndraw\">\r\n                            <ChaDesignDraw userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        <Route exact path= \"/360\">\r\n                            <D360 userObj={userObj} isAndroid={isAndroid}/>\r\n                        </Route>\r\n                        {/* {isAndroid?(<><Redirect from={\"*\"} to={\"/special\"} /></>):(<><Redirect from={\"*\"} to={\"/\"} /></>)} */}\r\n                        <Redirect from={\"*\"} to={\"/\"} />\r\n                    </>\r\n                 ) : (\r\n                     <>\r\n                    <Route exact path= \"/\">\r\n                          <Auth /> \r\n                    </Route>\r\n                    <Redirect from={\"*\"} to={\"/\"} />\r\n                    </>\r\n                 )}\r\n            </Switch>\r\n        </Router>\r\n    )\r\n}\r\nexport default AppRouter; ","\r\nimport { authService } from \"fbase\"; \r\nimport React, { useEffect, useState } from \"react\";\r\nimport AppRouter from \"./Router\";  \r\n//import { authService } from \"fbase\"; \r\n\r\nfunction App() {\r\n  const [init,setInit]= useState(false);\r\n  //console.log(authService.currentUser);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [isAndroid, setIsAndroid] = useState(false);\r\n  const [userObj,setUserObj]= useState(null);\r\n  const [penType,setPenType]= useState(0);\r\n  useEffect(()=> {\r\n    var varUA = window.navigator.userAgent.toLowerCase(); //userAgent 값 얻기\r\n    console.log(varUA)\r\n    if ( varUA.indexOf('android') > -1) {\r\n    //안드로이드\r\n    setIsAndroid(true)\r\n    console.log(\"android\")\r\n    }\r\n    \r\n    if(localStorage.getItem(\"penType\")==undefined){\r\n      localStorage.setItem(\"penType\", parseInt(3))\r\n    }else{\r\n      setPenType(parseInt(localStorage.getItem(\"penType\")));\r\n    }\r\n    authService.onAuthStateChanged((user) => {\r\n    if(user){\r\n      setIsLoggedIn(true);\r\n      setUserObj(user);\r\n    }else{\r\n      setIsLoggedIn(false);\r\n    }\r\n    setInit(true);\r\n  });\r\n  }, []);\r\n  return (\r\n    <>\r\n    {init ? (<AppRouter  isLoggedIn= {isLoggedIn} userObj={userObj} isAndroid={isAndroid} penType={penType}/>\r\n    ):( \"Inisializing..\" )}\r\n    </>\r\n  ) \r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom'; \r\n\r\nimport App from './components/App';\r\nimport firebase from \"./fbase\";\r\nimport \"./styles.css\";\r\nconsole.log(firebase)\r\n \r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/soche.eef324de.png\";","module.exports = __webpack_public_path__ + \"static/media/soche2.be9f6d7c.png\";","module.exports = __webpack_public_path__ + \"static/media/myfile.54f3a8a7.csv\";","module.exports = __webpack_public_path__ + \"static/media/soche3.81ca3da4.png\";"],"sourceRoot":""}