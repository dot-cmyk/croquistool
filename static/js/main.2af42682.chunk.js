(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(e,t,n){e.exports=n(70)},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(4),i=n.n(a),r=n(43),o=n.n(r),s=n(12),c=n(27),l=(n(57),n(72),n(71),c.a.initializeApp({apiKey:"AIzaSyDH6rySddl7QAoqkwATwz7CgXrPe7LQis8",authDomain:"croquistool.firebaseapp.com",projectId:"croquistool",storageBucket:"croquistool.appspot.com",messagingSenderId:"843301254465",appId:"1:843301254465:web:046d03ff7cf7e8619f9dc0",measurementId:"G-JT9C23VQFT"})),u=c.a.auth(),d=c.a.firestore(),h=(c.a.storage(),n(17)),f=n(31),m=n(18),v=n(0),p=n.n(v),g=n(2),w=n(14),b=n(1),y=n(3),S=n(11),E=n(7),x=n(10),O=n(15),D=n(44),j=n(45),C=n(46),M=Object.freeze({x:0,y:0,untransformedX:0,untransformedY:0}),R=Object.freeze({canvasWidth:0,canvasHeight:0,left:0,top:0,right:0,bottom:0,viewMin:M,viewMax:M}),P=Object.freeze({a:1,b:0,c:0,d:1,e:0,f:0});var z=function(){function e(t){var n=this,a=t.scaleExtents,i=t.documentSize;Object(b.a)(this,e),this._canvas=null,this._view={scale:1,x:0,y:0},this._viewChangeListeners=new Set,this.setScale=function(e){n.setView({scale:e})},this.clampView=function(e){var t=e.scale,a=e.x,i=e.y,r=n.scaleExtents,o=r.min,s=r.max,c=n.documentSize,l=c.width,u=c.height,d=n.canvasRect||R,h=d.left,f=d.top,m=d.right-h,v=d.bottom-f,p=m/2,g=-(l*n._view.scale-m/2),w=v/2,b=-(u*n._view.scale-v/2);return{scale:Math.min(Math.max(t,o),s),x:Math.min(Math.max(a,g),p),y:Math.min(Math.max(i,b),w)}},this.resetView=function(){n.setView({scale:1,x:0,y:0})},this.setView=function(e){var t=n.clampView(Object(m.a)({},n._view,e||{})),a=n._view,i=a.scale,r=a.x,o=a.y;return t.scale===i&&t.x===r&&t.y===o||(n._view=t,n._viewChangeListeners.forEach(function(e){return e&&e(t)})),Object(m.a)({},n._view)},this.scaleAtClientPoint=function(e,t){var a=n.clientPointToViewPoint(t),i=n.clampView(Object(m.a)({},n._view,{scale:n._view.scale+e})),r=n.viewPointToClientPoint(a,i);return i.x=n._view.x-(r.clientX-t.clientX),i.y=n._view.y-(r.clientY-t.clientY),n.setView(i)},this.clientPointToViewPoint=function(e){var t=e.clientX,a=e.clientY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n._view,r=n.canvasRect||R,o=t-r.left,s=a-r.top;return{x:(o-i.x)/i.scale,y:(s-i.y)/i.scale,relativeClientX:o,relativeClientY:s}},this.viewPointToClientPoint=function(e){var t=e.x,a=e.y,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n._view,r=n.canvasRect||R,o=r.left,s=r.top,c=t*i.scale+i.x,l=a*i.scale+i.y,u=c+o,d=l+s;return{clientX:u,clientY:d,relativeX:c,relativeY:l,x:u,y:d}},this.attachViewChangeListener=function(e){n._viewChangeListeners.add(e)},this._scaleExtents=a,this._documentSize=i}return Object(y.a)(e,[{key:"canvas",get:function(){return this._canvas},set:function(e){this._canvas=e,this.setView()}},{key:"scale",get:function(){return this._view.scale}},{key:"x",get:function(){return this._view.x},set:function(e){this.setView({x:e})}},{key:"y",get:function(){return this._view.y},set:function(e){this.setView({y:e})}},{key:"view",get:function(){return Object(m.a)({},this._view)}},{key:"scaleExtents",get:function(){return Object(m.a)({},this._scaleExtents)},set:function(e){var t=e.min,n=e.max;this._scaleExtents={min:t,max:n},this.setView()}},{key:"documentSize",get:function(){return Object(m.a)({},this._documentSize)},set:function(e){var t=e.width,n=e.height;this._documentSize={width:t,height:n},this.setView()}},{key:"transformMatrix",get:function(){return{a:this._view.scale,b:0,c:0,d:this._view.scale,e:this._view.x,f:this._view.y}}},{key:"canvasBounds",get:function(){if(this._canvas){var e=this._canvas.getBoundingClientRect(),t=e.left,n=e.top,a=e.right,i=e.bottom;return{viewMin:this.clientPointToViewPoint({clientX:t,clientY:n}),viewMax:this.clientPointToViewPoint({clientX:a,clientY:i}),left:t,top:n,right:a,bottom:i,canvasWidth:this._canvas.width,canvasHeight:this._canvas.height}}}},{key:"canvasRect",get:function(){return this.canvas?this.canvas.getBoundingClientRect():void 0}}]),e}();var T=function(e){e.preventDefault()},L=function e(){var t=this;Object(b.a)(this,e),this.handleMouseWheel=function(e,n){var a=n.props,i=a.disabled,r=a.enablePanAndZoom,o=a.mouseZoomFactor;return i?new k:(r&&e.ctrlKey&&(e.preventDefault(),n.coordSystem.scaleAtClientPoint(o*e.deltaY,H(e))),t)},this.handleDrawStart=function(e,t){return t.props.disabled?new k:e.ctrlKey&&t.props.enablePanAndZoom?(new W).handleDrawStart(e,t):(new I).handleDrawStart(e,t)},this.handleDrawMove=function(e,n){if(n.props.disabled)return new k;var a=F(n.coordSystem,e),i=a.x,r=a.y;return n.lazy.update({x:i,y:r}),t},this.handleDrawEnd=function(e,n){return n.props.disabled?new k:t}},k=function e(){var t=this;Object(b.a)(this,e),this.handleMouseWheel=function(e,n){return n.props.disabled?t:(new L).handleMouseWheel(e,n)},this.handleDrawStart=function(e,n){return n.props.disabled?t:(new L).handleDrawStart(e,n)},this.handleDrawMove=function(e,n){return n.props.disabled?t:(new L).handleDrawMove(e,n)},this.handleDrawEnd=function(e,n){return n.props.disabled?t:(new L).handleDrawEnd(e,n)}},W=function e(){var t=this;Object(b.a)(this,e),this.handleMouseWheel=T.bind(this),this.handleDrawStart=function(e,n){return e.preventDefault(),t.dragStart=H(e),t.panStart={x:n.coordSystem.x,y:n.coordSystem.y},t},this.handleDrawMove=function(e,n){e.preventDefault();var a=H(e),i=a.clientX,r=a.clientY,o=i-t.dragStart.clientX,s=r-t.dragStart.clientY;return n.coordSystem.setView({x:t.panStart.x+o,y:t.panStart.y+s}),t},this.handleDrawEnd=function(){return new L}},I=function e(){var t=this;Object(b.a)(this,e),this.handleMouseWheel=T.bind(this),this.handleDrawStart=function(e,n){var a=n.props.enablePanAndZoom;return e.preventDefault(),e.touches&&e.touches.length&&a?a&&e.touches&&e.touches.length>=2?(new V).handleDrawStart(e,n):t.handleDrawMove(e,n):(new Y).handleDrawStart(e,n)},this.handleDrawMove=function(e,n){if(e.preventDefault(),e.touches&&e.touches.length>=2)return(new V).handleDrawStart(e,n);var a=H(e);if((t.deferredPoints.push(a),(new Date).valueOf()-t.startTimestamp<250)&&(null===t.startClientPoint&&(t.startClientPoint=a),Math.abs(a.clientX-t.startClientPoint.clientX)+Math.abs(a.clientY-t.startClientPoint.clientY)<10))return t;return t.issueDeferredPoints(n)},this.handleDrawEnd=function(e,n){return t.issueDeferredPoints(n).handleDrawEnd(e,n)},this.issueDeferredPoints=function(e){for(var n=new Y,a=0;a<t.deferredPoints.length;a++){var i=t.deferredPoints[a],r=new A(i);n=(0===a?n.handleDrawStart:n.handleDrawMove)(r,e)}return n},this.startClientPoint=null,this.startTimestamp=(new Date).valueOf(),this.deferredPoints=[]},V=function e(){var t=this;Object(b.a)(this,e),this.handleMouseWheel=T.bind(this),this.handleDrawStart=function(e,n){return e.preventDefault(),!e.touches||e.touches.length<2?new L:(t.start=t.getTouchMetrics(e),t.panStart={x:n.coordSystem.x,y:n.coordSystem.y},t.scaleStart=n.coordSystem.scale,t)},this.handleDrawMove=function(e,n){if(e.preventDefault(),!e.touches||e.touches.length<2)return new L;var a=t.recentMetrics=t.getTouchMetrics(e),i=a.centroid,r=a.distance;if(Math.abs(r-t.start.distance)>=10)return new X(t).handleDrawMove(e,n);var o=i.clientX-t.start.centroid.clientX,s=i.clientY-t.start.centroid.clientY;return Math.abs(o)+Math.abs(s)>=10?new _(t).handleDrawMove(e,n):t},this.handleDrawEnd=function(){return new L},this.getTouchMetrics=function(e){var t=H(e.touches[0]),n=t.clientX,a=t.clientY,i=H(e.touches[1]),r=i.clientX,o=i.clientY,s=r-n,c=o-a;return{t1:{clientX:n,clientY:a},t2:{clientX:r,clientY:o},distance:Math.sqrt(s*s+c*c),centroid:{clientX:(n+r)/2,clientY:(a+o)/2}}}},_=function e(t){var n=this;Object(b.a)(this,e),this.handleMouseWheel=T.bind(this),this.handleDrawStart=function(){return n},this.handleDrawMove=function(e,t){if(e.preventDefault(),!e.touches||e.touches.length<2)return new L;var a=n.scaleOrPanState,i=a.recentMetrics=a.getTouchMetrics(e),r=i.centroid,o=(i.distance,r.clientX-a.start.centroid.clientX),s=r.clientY-a.start.centroid.clientY;return t.setView({x:a.panStart.x+o,y:a.panStart.y+s}),n},this.handleDrawEnd=function(){return new L},this.scaleOrPanState=t},X=function e(t){var n=this;Object(b.a)(this,e),this.handleMouseWheel=T.bind(this),this.handleDrawStart=function(){return n},this.handleDrawMove=function(e,t){if(e.preventDefault(),!e.touches||e.touches.length<2)return new L;var a=n.scaleOrPanState,i=a.recentMetrics=a.getTouchMetrics(e),r=i.centroid,o=i.distance,s=a.scaleStart*(o/a.start.distance)-t.coordSystem.scale;return t.coordSystem.scaleAtClientPoint(s,r),n},this.handleDrawEnd=function(){return new L},this.scaleOrPanState=t},Y=function e(){var t=this;Object(b.a)(this,e),this.handleMouseWheel=T.bind(this),this.handleDrawStart=function(e,n){if(e.preventDefault(),e.touches&&e.touches.length){var a=F(n.coordSystem,e),i=a.x,r=a.y;n.lazy.update({x:i,y:r},{both:!0})}return t.handleDrawMove(e,n)},this.handleDrawMove=function(e,n){e.preventDefault();var a=F(n.coordSystem,e),i=a.x,r=a.y;n.lazy.update({x:i,y:r});var o=!n.lazy.isEnabled();return t.isDrawing&&!o||(n.points.push(n.clampPointToDocument(n.lazy.brush.toObject())),t.isDrawing=!0),n.points.push(n.clampPointToDocument(n.lazy.brush.toObject())),n.drawPoints({points:n.points,brushColor:n.props.brushColor,brushRadius:n.props.brushRadius}),t},this.handleDrawEnd=function(e,n){return e.preventDefault(),t.handleDrawMove(e,n),n.saveLine(),new L},this.isDrawing=!1},A=function e(t){var n=t.clientX,a=t.clientY;Object(b.a)(this,e),this.preventDefault=function(){},this.clientX=n,this.clientY=a,this.touches=[{clientX:n,clientY:a}]};function H(e){var t=e.clientX,n=e.clientY;return e.changedTouches&&e.changedTouches.length>0&&(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY),{clientX:t,clientY:n}}function F(e,t){return e.clientPointToViewPoint(H(t))}var B=!1;try{var U={get passive(){return B=!0,!1}};window.addEventListener("test",U,U),window.removeEventListener("test",U,U)}catch(re){B=!1}function q(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function N(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}var J={display:"block",position:"absolute"},Z=["grid","drawing","temp","interface"],K=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(S.a)(this,Object(E.a)(t).call(this,e))).undo=function(){var e=[];n.lines.length?e=n.lines.slice(0,-1):n.erasedLines.length&&(e=n.erasedLines.pop()),n.clearExceptErasedLines(),n.simulateDrawingLines({lines:e,immediate:!0}),n.triggerOnChange()},n.eraseAll=function(){n.erasedLines.push(Object(w.a)(n.lines)),n.clearExceptErasedLines(),n.triggerOnChange()},n.clear=function(){n.erasedLines=[],n.clearExceptErasedLines(),n.resetView()},n.resetView=function(){return n.coordSystem.resetView()},n.setView=function(e){return n.coordSystem.setView(e)},n.getSaveData=function(){return JSON.stringify({lines:n.lines,width:n.props.canvasWidth,height:n.props.canvasHeight})},n.getDataURL=function(e,t,a){var i=n.canvas.drawing,r=i.getContext("2d"),o=i.width,s=i.height,c=r.getImageData(0,0,o,s),l=r.globalCompositeOperation;if(r.globalCompositeOperation="destination-over",t){if(!n.props.imgSrc)return"Background image source not set";n.drawImage()}else null!=a&&(r.fillStyle=a,r.fillRect(0,0,o,s));e||(e="png");var u=i.toDataURL("image/".concat(e));return r.clearRect(0,0,o,s),r.putImageData(c,0,0),r.globalCompositeOperation=l,u},n.loadSaveData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props.immediateLoading;if("string"!==typeof e)throw new Error("saveData needs to be of type string!");var a=JSON.parse(e),i=a.lines,r=a.width,o=a.height;if(!i||"function"!==typeof i.push)throw new Error("saveData.lines needs to be an array!");if(n.clear(),r===n.props.canvasWidth&&o===n.props.canvasHeight)n.simulateDrawingLines({lines:i,immediate:t});else{var s=n.props.canvasWidth/r,c=n.props.canvasHeight/o,l=(s+c)/2;n.simulateDrawingLines({lines:i.map(function(e){return Object(m.a)({},e,{points:e.points.map(function(e){return{x:e.x*s,y:e.y*c}}),brushRadius:e.brushRadius*l})}),immediate:t})}},n.componentWillUnmount=function(){n.canvasObserver.unobserve(n.canvasContainer),n.canvas.interface&&n.canvas.interface.removeEventListener("wheel",n.handleWheel)},n.handleWheel=function(e){n.interactionSM=n.interactionSM.handleMouseWheel(e,Object(O.a)(Object(O.a)(n)))},n.handleDrawStart=function(e){n.interactionSM=n.interactionSM.handleDrawStart(e,Object(O.a)(Object(O.a)(n))),n.mouseHasMoved=!0},n.handleDrawMove=function(e){n.interactionSM=n.interactionSM.handleDrawMove(e,Object(O.a)(Object(O.a)(n))),n.mouseHasMoved=!0},n.handleDrawEnd=function(e){n.interactionSM=n.interactionSM.handleDrawEnd(e,Object(O.a)(Object(O.a)(n))),n.mouseHasMoved=!0},n.applyView=function(){if(n.ctx.drawing&&(Z.map(function(e){return n.ctx[e]}).forEach(function(e){n.clearWindow(e);var t=n.coordSystem.transformMatrix;e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}),!n.deferRedrawOnViewChange)){n.drawGrid(n.ctx.grid),n.redrawImage(),n.loop({once:!0});var e=n.lines;n.lines=[],n.simulateDrawingLines({lines:e,immediate:!0})}},n.handleCanvasResize=function(e){var t=n.getSaveData();n.deferRedrawOnViewChange=!0;try{var a,i=q(e);try{for(i.s();!(a=i.n()).done;){var r=a.value.contentRect,o=r.width,s=r.height;n.setCanvasSize(n.canvas.interface,o,s),n.setCanvasSize(n.canvas.drawing,o,s),n.setCanvasSize(n.canvas.temp,o,s),n.setCanvasSize(n.canvas.grid,o,s),n.coordSystem.documentSize={width:o,height:s},n.drawGrid(n.ctx.grid),n.drawImage(),n.loop({once:!0})}}catch(c){i.e(c)}finally{i.f()}n.loadSaveData(t,!0)}finally{n.deferRedrawOnViewChange=!1}},n.clampPointToDocument=function(e){return n.props.clampLinesToDocument?{x:Math.max(Math.min(e.x,n.props.canvasWidth),0),y:Math.max(Math.min(e.y,n.props.canvasHeight),0)}:e},n.redrawImage=function(){n.image&&n.image.complete&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ctx,n=e.img,a=e.x,i=e.y,r=e.w,o=e.h,s=e.offsetX,c=e.offsetY;"number"!==typeof a&&(a=0),"number"!==typeof i&&(i=0),"number"!==typeof r&&(r=t.canvas.width),"number"!==typeof o&&(o=t.canvas.height),"number"!==typeof s&&(s=.5),"number"!==typeof c&&(c=.5),s<0&&(s=0),c<0&&(c=0),s>1&&(s=1),c>1&&(c=1);var l,u,d,h,f=n.width,m=n.height,v=Math.min(r/f,o/m),p=f*v,g=m*v,w=1;p<r&&(w=r/p),Math.abs(w-1)<1e-14&&g<o&&(w=o/g),(l=(f-(d=f/((p*=w)/r)))*s)<0&&(l=0),(u=(m-(h=m/((g*=w)/o)))*c)<0&&(u=0),d>f&&(d=f),h>m&&(h=m),t.drawImage(n,l,u,d,h,a,i,r,o)}({ctx:n.ctx.grid,img:n.image})},n.simulateDrawingLines=function(e){var t=e.lines,a=e.immediate,i=0,r=a?0:n.props.loadTimeOffset;t.forEach(function(e){var t=e.points,o=e.brushColor,s=e.brushRadius;if(a)return n.drawPoints({points:t,brushColor:o,brushRadius:s}),n.points=t,void n.saveLine({brushColor:o,brushRadius:s});for(var c=function(e){i+=r,window.setTimeout(function(){n.drawPoints({points:t.slice(0,e+1),brushColor:o,brushRadius:s})},i)},l=1;l<t.length;l++)c(l);i+=r,window.setTimeout(function(){n.points=t,n.saveLine({brushColor:o,brushRadius:s})},i)})},n.setCanvasSize=function(e,t,n){e.width=t,e.height=n,e.style.width=t,e.style.height=n},n.drawPoints=function(e){var t=e.points,a=e.brushColor,i=e.brushRadius;n.ctx.temp.lineJoin="round",n.ctx.temp.lineCap="round",n.ctx.temp.strokeStyle=a,n.clearWindow(n.ctx.temp),n.ctx.temp.lineWidth=2*i;var r=t[0],o=t[1];n.ctx.temp.moveTo(o.x,o.y),n.ctx.temp.beginPath();for(var s=1,c=t.length;s<c;s++){var l=N(r,o);n.ctx.temp.quadraticCurveTo(r.x,r.y,l.x,l.y),r=t[s],o=t[s+1]}n.ctx.temp.lineTo(r.x,r.y),n.ctx.temp.stroke()},n.saveLine=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.brushColor,a=e.brushRadius;n.points.length<2||(n.lines.push({points:Object(w.a)(n.points),brushColor:t||n.props.brushColor,brushRadius:a||n.props.brushRadius}),n.points.length=0,n.inClientSpace([n.ctx.drawing,n.ctx.temp],function(){n.ctx.drawing.drawImage(n.canvas.temp,0,0,n.canvas.drawing.width,n.canvas.drawing.height)}),n.clearWindow(n.ctx.temp),n.triggerOnChange())},n.triggerOnChange=function(){n.props.onChange&&n.props.onChange(Object(O.a)(Object(O.a)(n)))},n.clearWindow=function(e){n.inClientSpace([e],function(){return e.clearRect(0,0,e.canvas.width,e.canvas.height)})},n.clearExceptErasedLines=function(){n.lines=[],n.valuesChanged=!0,n.clearWindow(n.ctx.drawing),n.clearWindow(n.ctx.temp)},n.loop=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).once,t=void 0!==e&&e;if(n.mouseHasMoved||n.valuesChanged){var a=n.lazy.getPointerCoordinates(),i=n.lazy.getBrushCoordinates();n.drawInterface(n.ctx.interface,a,i),n.mouseHasMoved=!1,n.valuesChanged=!1}t||window.requestAnimationFrame(function(){n.loop()})},n.inClientSpace=function(e,t){e.forEach(function(e){e.save(),e.setTransform(P.a,P.b,P.c,P.d,P.e,P.f)});try{t()}finally{e.forEach(function(e){return e.restore()})}},n.drawImage=function(){n.props.imgSrc&&(n.image=new Image,n.image.crossOrigin="anonymous",n.image.onload=n.redrawImage,n.image.src=n.props.imgSrc)},n.drawGrid=function(e){if(!n.props.hideGrid){n.clearWindow(e);var t=n.coordSystem.canvasBounds,a=t.viewMin,i=t.viewMax,r=25*Math.floor(a.x/25-1),o=25*Math.floor(a.y/25-1),s=i.x+25,c=i.y+25;if(e.beginPath(),e.setLineDash([5,1]),e.setLineDash([]),e.strokeStyle=n.props.gridColor,e.lineWidth=n.props.gridLineWidth,!n.props.hideGridX){for(var l=r,u=n.props.gridSizeX;l<s;)l+=u,e.moveTo(l,o),e.lineTo(l,c);e.stroke()}if(!n.props.hideGridY){for(var d=o,h=n.props.gridSizeY;d<c;)d+=h,e.moveTo(r,d),e.lineTo(s,d);e.stroke()}}},n.drawInterface=function(e,t,a){n.props.hideInterface||(n.clearWindow(e),e.beginPath(),e.fillStyle=n.props.brushColor,e.arc(a.x,a.y,n.props.brushRadius,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.fillStyle=n.props.catenaryColor,e.arc(t.x,t.y,4,0,2*Math.PI,!0),e.fill(),n.lazy.isEnabled()&&(e.beginPath(),e.lineWidth=2,e.lineCap="round",e.setLineDash([2,4]),e.strokeStyle=n.props.catenaryColor,n.catenary.drawToCanvas(n.ctx.interface,a,t,n.chainLength),e.stroke()),e.beginPath(),e.fillStyle=n.props.catenaryColor,e.arc(a.x,a.y,2,0,2*Math.PI,!0),e.fill())},n.canvas={},n.ctx={},n.catenary=new j.Catenary,n.points=[],n.lines=[],n.erasedLines=[],n.mouseHasMoved=!0,n.valuesChanged=!0,n.isDrawing=!1,n.isPressing=!1,n.deferRedrawOnViewChange=!1,n.interactionSM=new L,n.coordSystem=new z({scaleExtents:e.zoomExtents,documentSize:{width:e.canvasWidth,height:e.canvasHeight}}),n.coordSystem.attachViewChangeListener(n.applyView.bind(Object(O.a)(Object(O.a)(n)))),n}return Object(x.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;this.lazy=new D.LazyBrush({radius:this.props.lazyRadius*window.devicePixelRatio,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),this.chainLength=this.props.lazyRadius*window.devicePixelRatio,this.canvasObserver=new C.a(function(e,n){return t.handleCanvasResize(e,n)}),this.canvasObserver.observe(this.canvasContainer),this.drawImage(),this.loop(),window.setTimeout(function(){var e=window.innerWidth/2,n=window.innerHeight/2;t.lazy.update({x:e-t.chainLength/4,y:n},{both:!0}),t.lazy.update({x:e+t.chainLength/4,y:n},{both:!1}),t.mouseHasMoved=!0,t.valuesChanged=!0,t.clearExceptErasedLines(),t.props.saveData&&t.loadSaveData(t.props.saveData)},100),this.canvas.interface&&this.canvas.interface.addEventListener("wheel",this.handleWheel,B?{passive:e}:e)}},{key:"componentDidUpdate",value:function(e){e.lazyRadius!==this.props.lazyRadius&&(this.chainLength=this.props.lazyRadius*window.devicePixelRatio,this.lazy.setRadius(this.props.lazyRadius*window.devicePixelRatio)),e.saveData!==this.props.saveData&&this.loadSaveData(this.props.saveData),JSON.stringify(e)!==JSON.stringify(this.props)&&(this.valuesChanged=!0),this.coordSystem.scaleExtents=this.props.zoomExtents,this.props.enablePanAndZoom||this.coordSystem.resetView(),e.imgSrc!==this.props.imgSrc&&this.drawImage()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.className,style:Object(m.a)({display:"block",background:this.props.backgroundColor,touchAction:"none",width:this.props.canvasWidth,height:this.props.canvasHeight},this.props.style),ref:function(t){t&&(e.canvasContainer=t)}},Z.map(function(t){var n="interface"===t;return i.a.createElement("canvas",{key:t,ref:function(a){a&&(e.canvas[t]=a,e.ctx[t]=a.getContext("2d"),n&&(e.coordSystem.canvas=a))},style:Object(m.a)({},J),onMouseDown:n?e.handleDrawStart:void 0,onMouseMove:n?e.handleDrawMove:void 0,onMouseUp:n?e.handleDrawEnd:void 0,onMouseOut:n?e.handleDrawEnd:void 0,onTouchStart:n?e.handleDrawStart:void 0,onTouchMove:n?e.handleDrawMove:void 0,onTouchEnd:n?e.handleDrawEnd:void 0,onTouchCancel:n?e.handleDrawEnd:void 0})}))}}]),t}(a.PureComponent);K.defaultProps={onChange:null,loadTimeOffset:5,lazyRadius:12,brushRadius:10,brushColor:"#444",catenaryColor:"#0a0302",gridColor:"rgba(150,150,150,0.17)",backgroundColor:"#FFF",hideGrid:!1,canvasWidth:400,canvasHeight:400,disabled:!1,imgSrc:"",saveData:"",immediateLoading:!1,hideInterface:!1,gridSizeX:25,gridSizeY:25,gridLineWidth:.5,hideGridX:!1,hideGridY:!1,enablePanAndZoom:!1,mouseZoomFactor:.01,zoomExtents:{min:.33,max:3},clampLinesToDocument:!1};var Q=function(e){var t=e.CsubmitObj,n=e.isOwner,r=(e.viewDeleyToggle,Object(a.useState)(!1)),o=Object(s.a)(r,2),c=o[0],l=o[1],u=Object(a.useState)(t.text),h=Object(s.a)(u,2),f=(h[0],h[1],Object(a.useRef)()),m=Object(a.useState)(!0),v=Object(s.a)(m,2),w=(v[0],v[1]),b=new Date(t.createdAt),y=Object(a.useState)(!1),S=Object(s.a)(y,2),E=S[0],x=S[1],O=function(){var e=Object(g.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(function(e){return!e}),e.next=3,d.doc("Csubmit/".concat(t.id)).update({heart:1+t.heart});case 3:console.log(t.heart);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",{style:{float:"left",border:"10px solid rgba(0, 0, 0, 0.05)",width:"420px"}},c?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(K,{style:{touchAction:"auto"},ref:f,disabled:!0,hideInterface:!0,loadTimeOffset:5})),i.a.createElement("button",{onClick:function(){f.current.clear(),f.current.loadSaveData(t.text)}},"Rewind"),i.a.createElement("button",{onClick:function(){l(!1)}},"Cancel")):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{margin:"0 auto"}},i.a.createElement("img",{src:t.dataUrl,height:"400px"})),n?i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{onClick:O},"\u2764",t.heart),i.a.createElement("button",{onClick:function(){window.confirm("wanna delete this?")&&d.doc("Csubmit/".concat(t.id)).delete()}},"Delete"),i.a.createElement("button",{onClick:function(){l(!0),setTimeout(function(){f.current.loadSaveData(t.text)},5)}},"Review")):i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{onClick:O},"\u2764 ",t.heart))),i.a.createElement("button",{onClick:function(){x(function(e){return!e})}},"Ref Pin"),"   ","  ",b.toLocaleString(navigator.language||navigator.userLanguage),E?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("iframe",{src:"https://assets.pinterest.com/ext/embed.html?id="+t.refPinUrl,height:"600",width:"300",frameBorder:0,scrolling:"no"}))):i.a.createElement(i.a.Fragment,null))},$=function(e){var t=e.userObj,n=Object(a.useState)([]),r=Object(s.a)(n,2),o=r[0],c=r[1],l=Object(a.useState)(!1),h=Object(s.a)(l,2),f=(h[0],h[1],Object(a.useState)(!1)),v=Object(s.a)(f,2),p=v[0];v[1];return Object(a.useEffect)(function(){d.collection("Csubmit").where("creatorId","==",t.uid).orderBy("createdAt","desc").onSnapshot(function(e){var t=e.docs.map(function(e){return Object(m.a)({id:e.id},e.data())});c(t)})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,"Profile"),i.a.createElement("button",{onClick:function(){return u.signOut()}},"Log Out"),i.a.createElement("div",null,o.map(function(e){return i.a.createElement(Q,{CsubmitObj:e,isOwner:e.creatorId===t.uid,viewsToggle:p})})))},ee=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),c=Object(s.a)(o,2),l=c[0],d=c[1],h=Object(a.useState)(!0),f=Object(s.a)(h,2),m=f[0],v=f[1],w=Object(a.useState)(""),b=Object(s.a)(w,2),y=b[0],S=b[1],E=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?r(a):"password"===n&&d(a)},x=function(){var e=Object(g.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!m){e.next=8;break}return e.next=5,u.createUserWithEmailAndPassword(n,l);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,u.signInWithEmailAndPassword(n,l);case 10:a=e.sent;case 11:console.log(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),S(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:x},i.a.createElement("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:E}),i.a.createElement("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:l,onChange:E}),i.a.createElement("input",{type:"submit",value:m?"Create Account":"Log In"}),y),i.a.createElement("span",{onClick:function(){return v(function(e){return!e})}},m?"Sign In":"Create Account"),i.a.createElement("div",null,i.a.createElement("button",null,"Continue with Google"),i.a.createElement("button",null,"Continue with Github")))},te=function(e){var t=e.userObj,n=Object(a.useState)(""),r=Object(s.a)(n,2),o=(r[0],r[1]),l=Object(a.useState)([]),u=Object(s.a)(l,2),h=(u[0],u[1],Object(a.useState)([])),f=Object(s.a)(h,2),v=(f[0],f[1],Object(a.useRef)()),p=Object(a.useState)(""),g=Object(s.a)(p,2),w=g[0],b=g[1],y=Object(a.useState)([]),S=Object(s.a)(y,2),E=S[0],x=S[1],O=Object(a.useState)(0),D=Object(s.a)(O,2),j=D[0],C=D[1],M=Object(a.useState)(0),R=Object(s.a)(M,2),P=R[0],z=R[1],T=Object(a.useState)(60),L=Object(s.a)(T,2),k=L[0],W=L[1],I=Object(a.useState)(0),V=Object(s.a)(I,2),_=V[0],X=V[1],Y=Object(a.useState)(0),A=Object(s.a)(Y,2),H=A[0],F=A[1],B=Object(a.useRef)(k),U=Object(a.useRef)(null),q=Object(a.useState)({croquisTimeDB:k,brushRadius:1,lazyRadius:1,pinWidth:400,pinHeight:750,canvasWidth:600,canvasHeight:600}),G=Object(s.a)(q,2),N=G[0],J=G[1],Z=Object(a.useState)(!1),Q=Object(s.a)(Z,2),$=Q[0],ee=Q[1],te=function(){C(j+1),z(P+1),B.current=k;var e=v.current.getSaveData(),n=v.current.getDataURL();v.current.clear(),d.collection("Csubmit").add({text:e,createdAt:Date.now(),creatorId:t.uid,drawingTime:k-60*_-H,heart:0,dataUrl:n,refPinUrl:E[P]}),o("")};Object(a.useEffect)(function(){return U.current=setInterval(function(){X(parseInt(B.current/60)),F(B.current%60),B.current-=1},1e3),function(){return clearInterval(U.current)}},[]),Object(a.useEffect)(function(){B.current<=-1&&te()},[H]),Object(a.useEffect)(function(){d.doc("RefDB/refStrings").get().then(function(e){if(e.exists){var t=e.data().refUrl.sort(function(){return Math.random()-.5});x(t)}else console.log("No such document!")}).catch(function(e){console.log("Error getting document:",e)}),d.doc("usersetting/"+t.uid).get().then(function(e){e.exists?(J({brushRadius:e.data().brushRadius,lazyRadius:e.data().lazyRadius}),W(e.data().croquisTimeDB),console.log(e.data())):console.log("No such setting document!")}).catch(function(e){console.log("Error getting document:",e)})},[]);var ne;return i.a.createElement("div",null,i.a.createElement("div",{style:{float:"right"}},$?i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),ee(!1)}},i.a.createElement("input",{value:k,onChange:function(e){var t=e.target.value;W(t),J(function(t){return Object(m.a)({},t,{croquisTimeDB:e.target.value})})},type:"number",placeholder:"Input Croquis Time"}),i.a.createElement("input",{type:"submit",value:"Set Time"}))):i.a.createElement(i.a.Fragment,null,function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}(P+1),i.a.createElement("button",{onClick:function(e){ee(!0)}},"Set Croquis Time")),i.a.createElement("button",{onClick:function(e){d.collection("usersetting").doc(t.uid).update({brushRadius:N.brushRadius,lazyRadius:N.lazyRadius,croquisTimeDB:N.croquisTimeDB})}},"Update Setting"),i.a.createElement("input",{type:"number",min:"0",max:"1000",style:{width:"50px"},value:N.pinWidth,onChange:function(e){return J(function(t){return Object(m.a)({},t,{pinWidth:e.target.value})})}}),i.a.createElement("input",{type:"number",min:"0",max:"1000",style:{width:"50px"},value:N.pinHeight,onChange:function(e){return J(function(t){return Object(m.a)({},t,{pinHeight:e.target.value})})}}),i.a.createElement("input",{type:"number",min:"0",max:"1000",style:{width:"50px"},value:N.canvasWidth,onChange:function(e){return J(function(t){return Object(m.a)({},t,{canvasWidth:e.target.value})})}}),i.a.createElement("input",{type:"number",min:"0",max:"1000",style:{width:"50px"},value:N.canvasHeight,onChange:function(e){return J(function(t){return Object(m.a)({},t,{canvasHeight:e.target.value})})}})),i.a.createElement("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",width:"70px",textAlign:"center",background:"linear-gradient(to left,#FFC365 "+100*(60*_+H)/k+"%,#E8E8E8 "+100*(60*_+H)/k+"%)"}},_," : ",(ne=H)<=9?"0"+ne:ne),i.a.createElement("div",null,i.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),w.match(",")){var t=d.doc("RefDB/refStrings");w.split(",").forEach(function(e){console.log(e),t.update({refUrl:c.a.firestore.FieldValue.arrayUnion(e)})})}else d.doc("RefDB/refStrings").update({refUrl:c.a.firestore.FieldValue.arrayUnion(w)});b("")}},i.a.createElement("input",{value:w,onChange:function(e){var t=e.target.value;b(t)},type:"text",placeholder:"You Can Upload Pinterst Pin By Url Number"}),i.a.createElement("input",{type:"submit",value:"Upload Pin"}))),i.a.createElement("div",{style:{float:"left"}},i.a.createElement("iframe",{key:j,src:"https://assets.pinterest.com/ext/embed.html?id="+E[P],height:N.pinHeight,width:N.pinWidth,frameBorder:0,scrolling:"no"})),i.a.createElement("div",{style:{float:"left"}},i.a.createElement("div",null,i.a.createElement("div",{style:{float:"right"}},i.a.createElement("label",null,"Lazy-Radius:"),i.a.createElement("input",{type:"number",min:"0",max:"100",style:{width:"30px"},value:N.lazyRadius,onChange:function(e){return J(function(t){return Object(m.a)({},t,{lazyRadius:e.target.value})})}})),i.a.createElement("div",{style:{float:"right"}},i.a.createElement("label",null,"Brush-Radius:"),i.a.createElement("input",{type:"number",min:"1",max:"100",style:{width:"30px"},value:N.brushRadius,onChange:function(e){return J(function(t){return Object(m.a)({},t,{brushRadius:e.target.value})})}})),i.a.createElement("div",{style:{float:"right"}},i.a.createElement("button",{onClick:function(){v.current.clear()}},"Clear Canvas")),i.a.createElement("div",{style:{float:"right"}},i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),te()}},i.a.createElement("input",{type:"submit",value:"Upload Drawing"})))),i.a.createElement("div",{style:{float:"right"}},i.a.createElement(K,{canvasWidth:700,canvasHeight:700,brushRadius:N.brushRadius,lazyRadius:N.lazyRadius,ref:v}))))},ne=function(){return i.a.createElement("nav",null,i.a.createElement("ul",null,i.a.createElement("li",{style:{display:"inline",borderLeft:"1px solid #999",padding:"0 10px"}},i.a.createElement(f.b,{to:"/"},"Home")),i.a.createElement("li",{style:{display:"inline",borderLeft:"1px solid #999",padding:"0 10px"}},i.a.createElement(f.b,{to:"/profile"},"My Drawings"))))},ae=function(e){var t=e.isLoggedIn,n=e.userObj;return i.a.createElement(f.a,null,t&&i.a.createElement(ne,null),i.a.createElement(h.d,null,t?i.a.createElement(i.a.Fragment,null,i.a.createElement(h.b,{exact:!0,path:"/"},i.a.createElement(te,{userObj:n})),i.a.createElement(h.b,{exact:!0,path:"/profile"},i.a.createElement($,{userObj:n})),i.a.createElement(h.a,{from:"*",to:"/"})):i.a.createElement(i.a.Fragment,null,i.a.createElement(h.b,{exact:!0,path:"/"},i.a.createElement(ee,null)),i.a.createElement(h.a,{from:"*",to:"/"}))))};var ie=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),c=Object(s.a)(o,2),l=c[0],d=c[1],h=Object(a.useState)(null),f=Object(s.a)(h,2),m=f[0],v=f[1];return Object(a.useEffect)(function(){u.onAuthStateChanged(function(e){e?(d(!0),v(e)):d(!1),r(!0)})},[]),i.a.createElement(i.a.Fragment,null,n?i.a.createElement(ae,{isLoggedIn:l,userObj:m}):"Inisializing..")};n(69);console.log(l),o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ie,null)),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.2af42682.chunk.js.map